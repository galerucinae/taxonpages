(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function a(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(c){if(c.ep)return;c.ep=!0;const i=a(c);fetch(c.href,i)}})();function $a(t,n){const a=Object.create(null),s=t.split(",");for(let c=0;c<s.length;c++)a[s[c]]=!0;return n?c=>!!a[c.toLowerCase()]:c=>!!a[c]}const Te={},pi=[],On=()=>{},ap=()=>!1,lp=/^on[^a-z]/,yo=t=>lp.test(t),Ua=t=>t.startsWith("onUpdate:"),je=Object.assign,Za=(t,n)=>{const a=t.indexOf(n);a>-1&&t.splice(a,1)},up=Object.prototype.hasOwnProperty,ge=(t,n)=>up.call(t,n),Wt=Array.isArray,fi=t=>gs(t)==="[object Map]",xc=t=>gs(t)==="[object Set]",ae=t=>typeof t=="function",De=t=>typeof t=="string",qa=t=>typeof t=="symbol",Oe=t=>t!==null&&typeof t=="object",kc=t=>Oe(t)&&ae(t.then)&&ae(t.catch),Lc=Object.prototype.toString,gs=t=>Lc.call(t),cp=t=>gs(t).slice(8,-1),Mc=t=>gs(t)==="[object Object]",Ka=t=>De(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Qi=$a(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_s=t=>{const n=Object.create(null);return a=>n[a]||(n[a]=t(a))},hp=/-(\w)/g,Hn=_s(t=>t.replace(hp,(n,a)=>a?a.toUpperCase():"")),dp=/\B([A-Z])/g,ki=_s(t=>t.replace(dp,"-$1").toLowerCase()),ys=_s(t=>t.charAt(0).toUpperCase()+t.slice(1)),ra=_s(t=>t?`on${ys(t)}`:""),ao=(t,n)=>!Object.is(t,n),Xo=(t,n)=>{for(let a=0;a<t.length;a++)t[a](n)},os=(t,n,a)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value:a})},ba=t=>{const n=parseFloat(t);return isNaN(n)?t:n},pp=t=>{const n=De(t)?Number(t):NaN;return isNaN(n)?t:n};let eu;const wa=()=>eu||(eu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Vn(t){if(Wt(t)){const n={};for(let a=0;a<t.length;a++){const s=t[a],c=De(s)?_p(s):Vn(s);if(c)for(const i in c)n[i]=c[i]}return n}else{if(De(t))return t;if(Oe(t))return t}}const fp=/;(?![^(]*\))/g,mp=/:([^]+)/,gp=/\/\*[^]*?\*\//g;function _p(t){const n={};return t.replace(gp,"").split(fp).forEach(a=>{if(a){const s=a.split(mp);s.length>1&&(n[s[0].trim()]=s[1].trim())}}),n}function Je(t){let n="";if(De(t))n=t;else if(Wt(t))for(let a=0;a<t.length;a++){const s=Je(t[a]);s&&(n+=s+" ")}else if(Oe(t))for(const a in t)t[a]&&(n+=a+" ");return n.trim()}const yp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vp=$a(yp);function Cc(t){return!!t||t===""}const Qt=t=>De(t)?t:t==null?"":Wt(t)||Oe(t)&&(t.toString===Lc||!ae(t.toString))?JSON.stringify(t,Pc,2):String(t),Pc=(t,n)=>n&&n.__v_isRef?Pc(t,n.value):fi(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((a,[s,c])=>(a[`${s} =>`]=c,a),{})}:xc(n)?{[`Set(${n.size})`]:[...n.values()]}:Oe(n)&&!Wt(n)&&!Mc(n)?String(n):n;let dn;class Sc{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=dn,!n&&dn&&(this.index=(dn.scopes||(dn.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const a=dn;try{return dn=this,n()}finally{dn=a}}}on(){dn=this}off(){dn=this.parent}stop(n){if(this._active){let a,s;for(a=0,s=this.effects.length;a<s;a++)this.effects[a].stop();for(a=0,s=this.cleanups.length;a<s;a++)this.cleanups[a]();if(this.scopes)for(a=0,s=this.scopes.length;a<s;a++)this.scopes[a].stop(!0);if(!this.detached&&this.parent&&!n){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0,this._active=!1}}}function Ec(t){return new Sc(t)}function bp(t,n=dn){n&&n.active&&n.effects.push(t)}function Tc(){return dn}function wp(t){dn&&dn.cleanups.push(t)}const Wa=t=>{const n=new Set(t);return n.w=0,n.n=0,n},Oc=t=>(t.w&kr)>0,Ac=t=>(t.n&kr)>0,xp=({deps:t})=>{if(t.length)for(let n=0;n<t.length;n++)t[n].w|=kr},kp=t=>{const{deps:n}=t;if(n.length){let a=0;for(let s=0;s<n.length;s++){const c=n[s];Oc(c)&&!Ac(c)?c.delete(t):n[a++]=c,c.w&=~kr,c.n&=~kr}n.length=a}},ss=new WeakMap;let Yi=0,kr=1;const xa=30;let Sn;const $r=Symbol(""),ka=Symbol("");class Ja{constructor(n,a=null,s){this.fn=n,this.scheduler=a,this.active=!0,this.deps=[],this.parent=void 0,bp(this,s)}run(){if(!this.active)return this.fn();let n=Sn,a=br;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=Sn,Sn=this,br=!0,kr=1<<++Yi,Yi<=xa?xp(this):nu(this),this.fn()}finally{Yi<=xa&&kp(this),kr=1<<--Yi,Sn=this.parent,br=a,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Sn===this?this.deferStop=!0:this.active&&(nu(this),this.onStop&&this.onStop(),this.active=!1)}}function nu(t){const{deps:n}=t;if(n.length){for(let a=0;a<n.length;a++)n[a].delete(t);n.length=0}}let br=!0;const Rc=[];function Li(){Rc.push(br),br=!1}function Mi(){const t=Rc.pop();br=t===void 0?!0:t}function un(t,n,a){if(br&&Sn){let s=ss.get(t);s||ss.set(t,s=new Map);let c=s.get(a);c||s.set(a,c=Wa()),Bc(c)}}function Bc(t,n){let a=!1;Yi<=xa?Ac(t)||(t.n|=kr,a=!Oc(t)):a=!t.has(Sn),a&&(t.add(Sn),Sn.deps.push(t))}function nr(t,n,a,s,c,i){const u=ss.get(t);if(!u)return;let d=[];if(n==="clear")d=[...u.values()];else if(a==="length"&&Wt(t)){const f=Number(s);u.forEach((m,_)=>{(_==="length"||_>=f)&&d.push(m)})}else switch(a!==void 0&&d.push(u.get(a)),n){case"add":Wt(t)?Ka(a)&&d.push(u.get("length")):(d.push(u.get($r)),fi(t)&&d.push(u.get(ka)));break;case"delete":Wt(t)||(d.push(u.get($r)),fi(t)&&d.push(u.get(ka)));break;case"set":fi(t)&&d.push(u.get($r));break}if(d.length===1)d[0]&&La(d[0]);else{const f=[];for(const m of d)m&&f.push(...m);La(Wa(f))}}function La(t,n){const a=Wt(t)?t:[...t];for(const s of a)s.computed&&ru(s);for(const s of a)s.computed||ru(s)}function ru(t,n){(t!==Sn||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function Lp(t,n){var a;return(a=ss.get(t))==null?void 0:a.get(n)}const Mp=$a("__proto__,__v_isRef,__isVue"),Ic=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(qa)),Cp=Ya(),Pp=Ya(!1,!0),Sp=Ya(!0),iu=Ep();function Ep(){const t={};return["includes","indexOf","lastIndexOf"].forEach(n=>{t[n]=function(...a){const s=me(this);for(let i=0,u=this.length;i<u;i++)un(s,"get",i+"");const c=s[n](...a);return c===-1||c===!1?s[n](...a.map(me)):c}}),["push","pop","shift","unshift","splice"].forEach(n=>{t[n]=function(...a){Li();const s=me(this)[n].apply(this,a);return Mi(),s}}),t}function Tp(t){const n=me(this);return un(n,"has",t),n.hasOwnProperty(t)}function Ya(t=!1,n=!1){return function(s,c,i){if(c==="__v_isReactive")return!t;if(c==="__v_isReadonly")return t;if(c==="__v_isShallow")return n;if(c==="__v_raw"&&i===(t?n?Zp:Fc:n?Nc:jc).get(s))return s;const u=Wt(s);if(!t){if(u&&ge(iu,c))return Reflect.get(iu,c,i);if(c==="hasOwnProperty")return Tp}const d=Reflect.get(s,c,i);return(qa(c)?Ic.has(c):Mp(c))||(t||un(s,"get",c),n)?d:Ie(d)?u&&Ka(c)?d:d.value:Oe(d)?t?Hc(d):vo(d):d}}const Op=Dc(),Ap=Dc(!0);function Dc(t=!1){return function(a,s,c,i){let u=a[s];if(_i(u)&&Ie(u)&&!Ie(c))return!1;if(!t&&(!as(c)&&!_i(c)&&(u=me(u),c=me(c)),!Wt(a)&&Ie(u)&&!Ie(c)))return u.value=c,!0;const d=Wt(a)&&Ka(s)?Number(s)<a.length:ge(a,s),f=Reflect.set(a,s,c,i);return a===me(i)&&(d?ao(c,u)&&nr(a,"set",s,c):nr(a,"add",s,c)),f}}function Rp(t,n){const a=ge(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&a&&nr(t,"delete",n,void 0),s}function Bp(t,n){const a=Reflect.has(t,n);return(!qa(n)||!Ic.has(n))&&un(t,"has",n),a}function Ip(t){return un(t,"iterate",Wt(t)?"length":$r),Reflect.ownKeys(t)}const zc={get:Cp,set:Op,deleteProperty:Rp,has:Bp,ownKeys:Ip},Dp={get:Sp,set(t,n){return!0},deleteProperty(t,n){return!0}},zp=je({},zc,{get:Pp,set:Ap}),Xa=t=>t,vs=t=>Reflect.getPrototypeOf(t);function $o(t,n,a=!1,s=!1){t=t.__v_raw;const c=me(t),i=me(n);a||(n!==i&&un(c,"get",n),un(c,"get",i));const{has:u}=vs(c),d=s?Xa:a?el:lo;if(u.call(c,n))return d(t.get(n));if(u.call(c,i))return d(t.get(i));t!==c&&t.get(n)}function Uo(t,n=!1){const a=this.__v_raw,s=me(a),c=me(t);return n||(t!==c&&un(s,"has",t),un(s,"has",c)),t===c?a.has(t):a.has(t)||a.has(c)}function Zo(t,n=!1){return t=t.__v_raw,!n&&un(me(t),"iterate",$r),Reflect.get(t,"size",t)}function ou(t){t=me(t);const n=me(this);return vs(n).has.call(n,t)||(n.add(t),nr(n,"add",t,t)),this}function su(t,n){n=me(n);const a=me(this),{has:s,get:c}=vs(a);let i=s.call(a,t);i||(t=me(t),i=s.call(a,t));const u=c.call(a,t);return a.set(t,n),i?ao(n,u)&&nr(a,"set",t,n):nr(a,"add",t,n),this}function au(t){const n=me(this),{has:a,get:s}=vs(n);let c=a.call(n,t);c||(t=me(t),c=a.call(n,t)),s&&s.call(n,t);const i=n.delete(t);return c&&nr(n,"delete",t,void 0),i}function lu(){const t=me(this),n=t.size!==0,a=t.clear();return n&&nr(t,"clear",void 0,void 0),a}function qo(t,n){return function(s,c){const i=this,u=i.__v_raw,d=me(u),f=n?Xa:t?el:lo;return!t&&un(d,"iterate",$r),u.forEach((m,_)=>s.call(c,f(m),f(_),i))}}function Ko(t,n,a){return function(...s){const c=this.__v_raw,i=me(c),u=fi(i),d=t==="entries"||t===Symbol.iterator&&u,f=t==="keys"&&u,m=c[t](...s),_=a?Xa:n?el:lo;return!n&&un(i,"iterate",f?ka:$r),{next(){const{value:v,done:M}=m.next();return M?{value:v,done:M}:{value:d?[_(v[0]),_(v[1])]:_(v),done:M}},[Symbol.iterator](){return this}}}}function hr(t){return function(...n){return t==="delete"?!1:this}}function jp(){const t={get(i){return $o(this,i)},get size(){return Zo(this)},has:Uo,add:ou,set:su,delete:au,clear:lu,forEach:qo(!1,!1)},n={get(i){return $o(this,i,!1,!0)},get size(){return Zo(this)},has:Uo,add:ou,set:su,delete:au,clear:lu,forEach:qo(!1,!0)},a={get(i){return $o(this,i,!0)},get size(){return Zo(this,!0)},has(i){return Uo.call(this,i,!0)},add:hr("add"),set:hr("set"),delete:hr("delete"),clear:hr("clear"),forEach:qo(!0,!1)},s={get(i){return $o(this,i,!0,!0)},get size(){return Zo(this,!0)},has(i){return Uo.call(this,i,!0)},add:hr("add"),set:hr("set"),delete:hr("delete"),clear:hr("clear"),forEach:qo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Ko(i,!1,!1),a[i]=Ko(i,!0,!1),n[i]=Ko(i,!1,!0),s[i]=Ko(i,!0,!0)}),[t,a,n,s]}const[Np,Fp,Vp,Hp]=jp();function Qa(t,n){const a=n?t?Hp:Vp:t?Fp:Np;return(s,c,i)=>c==="__v_isReactive"?!t:c==="__v_isReadonly"?t:c==="__v_raw"?s:Reflect.get(ge(a,c)&&c in s?a:s,c,i)}const Gp={get:Qa(!1,!1)},$p={get:Qa(!1,!0)},Up={get:Qa(!0,!1)},jc=new WeakMap,Nc=new WeakMap,Fc=new WeakMap,Zp=new WeakMap;function qp(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kp(t){return t.__v_skip||!Object.isExtensible(t)?0:qp(cp(t))}function vo(t){return _i(t)?t:tl(t,!1,zc,Gp,jc)}function Vc(t){return tl(t,!1,zp,$p,Nc)}function Hc(t){return tl(t,!0,Dp,Up,Fc)}function tl(t,n,a,s,c){if(!Oe(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const i=c.get(t);if(i)return i;const u=Kp(t);if(u===0)return t;const d=new Proxy(t,u===2?s:a);return c.set(t,d),d}function wr(t){return _i(t)?wr(t.__v_raw):!!(t&&t.__v_isReactive)}function _i(t){return!!(t&&t.__v_isReadonly)}function as(t){return!!(t&&t.__v_isShallow)}function Gc(t){return wr(t)||_i(t)}function me(t){const n=t&&t.__v_raw;return n?me(n):t}function bs(t){return os(t,"__v_skip",!0),t}const lo=t=>Oe(t)?vo(t):t,el=t=>Oe(t)?Hc(t):t;function $c(t){br&&Sn&&(t=me(t),Bc(t.dep||(t.dep=Wa())))}function Uc(t,n){t=me(t);const a=t.dep;a&&La(a)}function Ie(t){return!!(t&&t.__v_isRef===!0)}function Zt(t){return Zc(t,!1)}function Wp(t){return Zc(t,!0)}function Zc(t,n){return Ie(t)?t:new Jp(t,n)}class Jp{constructor(n,a){this.__v_isShallow=a,this.dep=void 0,this.__v_isRef=!0,this._rawValue=a?n:me(n),this._value=a?n:lo(n)}get value(){return $c(this),this._value}set value(n){const a=this.__v_isShallow||as(n)||_i(n);n=a?n:me(n),ao(n,this._rawValue)&&(this._rawValue=n,this._value=a?n:lo(n),Uc(this))}}function Kt(t){return Ie(t)?t.value:t}const Yp={get:(t,n,a)=>Kt(Reflect.get(t,n,a)),set:(t,n,a,s)=>{const c=t[n];return Ie(c)&&!Ie(a)?(c.value=a,!0):Reflect.set(t,n,a,s)}};function qc(t){return wr(t)?t:new Proxy(t,Yp)}function Xp(t){const n=Wt(t)?new Array(t.length):{};for(const a in t)n[a]=tf(t,a);return n}class Qp{constructor(n,a,s){this._object=n,this._key=a,this._defaultValue=s,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return Lp(me(this._object),this._key)}}function tf(t,n,a){const s=t[n];return Ie(s)?s:new Qp(t,n,a)}class ef{constructor(n,a,s,c){this._setter=a,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Ja(n,()=>{this._dirty||(this._dirty=!0,Uc(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!c,this.__v_isReadonly=s}get value(){const n=me(this);return $c(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function nf(t,n,a=!1){let s,c;const i=ae(t);return i?(s=t,c=On):(s=t.get,c=t.set),new ef(s,c,i||!c,a)}function xr(t,n,a,s){let c;try{c=s?t(...s):t()}catch(i){ws(i,n,a)}return c}function wn(t,n,a,s){if(ae(t)){const i=xr(t,n,a,s);return i&&kc(i)&&i.catch(u=>{ws(u,n,a)}),i}const c=[];for(let i=0;i<t.length;i++)c.push(wn(t[i],n,a,s));return c}function ws(t,n,a,s=!0){const c=n?n.vnode:null;if(n){let i=n.parent;const u=n.proxy,d=a;for(;i;){const m=i.ec;if(m){for(let _=0;_<m.length;_++)if(m[_](t,u,d)===!1)return}i=i.parent}const f=n.appContext.config.errorHandler;if(f){xr(f,null,10,[t,u,d]);return}}rf(t,a,c,s)}function rf(t,n,a,s=!0){console.error(t)}let uo=!1,Ma=!1;const Xe=[];let Fn=0;const mi=[];let tr=null,Fr=0;const Kc=Promise.resolve();let nl=null;function xs(t){const n=nl||Kc;return t?n.then(this?t.bind(this):t):n}function of(t){let n=Fn+1,a=Xe.length;for(;n<a;){const s=n+a>>>1;co(Xe[s])<t?n=s+1:a=s}return n}function rl(t){(!Xe.length||!Xe.includes(t,uo&&t.allowRecurse?Fn+1:Fn))&&(t.id==null?Xe.push(t):Xe.splice(of(t.id),0,t),Wc())}function Wc(){!uo&&!Ma&&(Ma=!0,nl=Kc.then(Jc))}function sf(t){const n=Xe.indexOf(t);n>Fn&&Xe.splice(n,1)}function af(t){Wt(t)?mi.push(...t):(!tr||!tr.includes(t,t.allowRecurse?Fr+1:Fr))&&mi.push(t),Wc()}function uu(t,n=uo?Fn+1:0){for(;n<Xe.length;n++){const a=Xe[n];a&&a.pre&&(Xe.splice(n,1),n--,a())}}function ls(t){if(mi.length){const n=[...new Set(mi)];if(mi.length=0,tr){tr.push(...n);return}for(tr=n,tr.sort((a,s)=>co(a)-co(s)),Fr=0;Fr<tr.length;Fr++)tr[Fr]();tr=null,Fr=0}}const co=t=>t.id==null?1/0:t.id,lf=(t,n)=>{const a=co(t)-co(n);if(a===0){if(t.pre&&!n.pre)return-1;if(n.pre&&!t.pre)return 1}return a};function Jc(t){Ma=!1,uo=!0,Xe.sort(lf);const n=On;try{for(Fn=0;Fn<Xe.length;Fn++){const a=Xe[Fn];a&&a.active!==!1&&xr(a,null,14)}}finally{Fn=0,Xe.length=0,ls(),uo=!1,nl=null,(Xe.length||mi.length)&&Jc()}}function uf(t,n,...a){if(t.isUnmounted)return;const s=t.vnode.props||Te;let c=a;const i=n.startsWith("update:"),u=i&&n.slice(7);if(u&&u in s){const _=`${u==="modelValue"?"model":u}Modifiers`,{number:v,trim:M}=s[_]||Te;M&&(c=a.map(A=>De(A)?A.trim():A)),v&&(c=a.map(ba))}let d,f=s[d=ra(n)]||s[d=ra(Hn(n))];!f&&i&&(f=s[d=ra(ki(n))]),f&&wn(f,t,6,c);const m=s[d+"Once"];if(m){if(!t.emitted)t.emitted={};else if(t.emitted[d])return;t.emitted[d]=!0,wn(m,t,6,c)}}function Yc(t,n,a=!1){const s=n.emitsCache,c=s.get(t);if(c!==void 0)return c;const i=t.emits;let u={},d=!1;if(!ae(t)){const f=m=>{const _=Yc(m,n,!0);_&&(d=!0,je(u,_))};!a&&n.mixins.length&&n.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}return!i&&!d?(Oe(t)&&s.set(t,null),null):(Wt(i)?i.forEach(f=>u[f]=null):je(u,i),Oe(t)&&s.set(t,u),u)}function ks(t,n){return!t||!yo(n)?!1:(n=n.slice(2).replace(/Once$/,""),ge(t,n[0].toLowerCase()+n.slice(1))||ge(t,ki(n))||ge(t,n))}let $e=null,Ls=null;function us(t){const n=$e;return $e=t,Ls=t&&t.type.__scopeId||null,n}function Xc(t){Ls=t}function Qc(){Ls=null}function pt(t,n=$e,a){if(!n||t._n)return t;const s=(...c)=>{s._d&&wu(-1);const i=us(n);let u;try{u=t(...c)}finally{us(i),s._d&&wu(1)}return u};return s._n=!0,s._c=!0,s._d=!0,s}function ia(t){const{type:n,vnode:a,proxy:s,withProxy:c,props:i,propsOptions:[u],slots:d,attrs:f,emit:m,render:_,renderCache:v,data:M,setupState:A,ctx:P,inheritAttrs:S}=t;let N,C;const O=us(t);try{if(a.shapeFlag&4){const T=c||s;N=Pn(_.call(T,T,v,i,A,M,P)),C=f}else{const T=n;N=Pn(T.length>1?T(i,{attrs:f,slots:d,emit:m}):T(i,null)),C=n.props?f:cf(f)}}catch(T){no.length=0,ws(T,t,1),N=st(pn)}let j=N;if(C&&S!==!1){const T=Object.keys(C),{shapeFlag:z}=j;T.length&&z&7&&(u&&T.some(Ua)&&(C=hf(C,u)),j=Lr(j,C))}return a.dirs&&(j=Lr(j),j.dirs=j.dirs?j.dirs.concat(a.dirs):a.dirs),a.transition&&(j.transition=a.transition),N=j,us(O),N}const cf=t=>{let n;for(const a in t)(a==="class"||a==="style"||yo(a))&&((n||(n={}))[a]=t[a]);return n},hf=(t,n)=>{const a={};for(const s in t)(!Ua(s)||!(s.slice(9)in n))&&(a[s]=t[s]);return a};function df(t,n,a){const{props:s,children:c,component:i}=t,{props:u,children:d,patchFlag:f}=n,m=i.emitsOptions;if(n.dirs||n.transition)return!0;if(a&&f>=0){if(f&1024)return!0;if(f&16)return s?cu(s,u,m):!!u;if(f&8){const _=n.dynamicProps;for(let v=0;v<_.length;v++){const M=_[v];if(u[M]!==s[M]&&!ks(m,M))return!0}}}else return(c||d)&&(!d||!d.$stable)?!0:s===u?!1:s?u?cu(s,u,m):!0:!!u;return!1}function cu(t,n,a){const s=Object.keys(n);if(s.length!==Object.keys(t).length)return!0;for(let c=0;c<s.length;c++){const i=s[c];if(n[i]!==t[i]&&!ks(a,i))return!0}return!1}function pf({vnode:t,parent:n},a){for(;n&&n.subTree===t;)(t=n.vnode).el=a,n=n.parent}const ff=t=>t.__isSuspense;function th(t,n){n&&n.pendingBranch?Wt(t)?n.effects.push(...t):n.effects.push(t):af(t)}const Wo={};function Ue(t,n,a){return eh(t,n,a)}function eh(t,n,{immediate:a,deep:s,flush:c,onTrack:i,onTrigger:u}=Te){var d;const f=Tc()===((d=Ve)==null?void 0:d.scope)?Ve:null;let m,_=!1,v=!1;if(Ie(t)?(m=()=>t.value,_=as(t)):wr(t)?(m=()=>t,s=!0):Wt(t)?(v=!0,_=t.some(T=>wr(T)||as(T)),m=()=>t.map(T=>{if(Ie(T))return T.value;if(wr(T))return Gr(T);if(ae(T))return xr(T,f,2)})):ae(t)?n?m=()=>xr(t,f,2):m=()=>{if(!(f&&f.isUnmounted))return M&&M(),wn(t,f,3,[A])}:m=On,n&&s){const T=m;m=()=>Gr(T())}let M,A=T=>{M=O.onStop=()=>{xr(T,f,4)}},P;if(fo)if(A=On,n?a&&wn(n,f,3,[m(),v?[]:void 0,A]):m(),c==="sync"){const T=am();P=T.__watcherHandles||(T.__watcherHandles=[])}else return On;let S=v?new Array(t.length).fill(Wo):Wo;const N=()=>{if(O.active)if(n){const T=O.run();(s||_||(v?T.some((z,W)=>ao(z,S[W])):ao(T,S)))&&(M&&M(),wn(n,f,3,[T,S===Wo?void 0:v&&S[0]===Wo?[]:S,A]),S=T)}else O.run()};N.allowRecurse=!!n;let C;c==="sync"?C=N:c==="post"?C=()=>an(N,f&&f.suspense):(N.pre=!0,f&&(N.id=f.uid),C=()=>rl(N));const O=new Ja(m,C);n?a?N():S=O.run():c==="post"?an(O.run.bind(O),f&&f.suspense):O.run();const j=()=>{O.stop(),f&&f.scope&&Za(f.scope.effects,O)};return P&&P.push(j),j}function mf(t,n,a){const s=this.proxy,c=De(t)?t.includes(".")?nh(s,t):()=>s[t]:t.bind(s,s);let i;ae(n)?i=n:(i=n.handler,a=n);const u=Ve;vi(this);const d=eh(c,i.bind(s),a);return u?vi(u):Ur(),d}function nh(t,n){const a=n.split(".");return()=>{let s=t;for(let c=0;c<a.length&&s;c++)s=s[a[c]];return s}}function Gr(t,n){if(!Oe(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),Ie(t))Gr(t.value,n);else if(Wt(t))for(let a=0;a<t.length;a++)Gr(t[a],n);else if(xc(t)||fi(t))t.forEach(a=>{Gr(a,n)});else if(Mc(t))for(const a in t)Gr(t[a],n);return t}function bo(t,n){const a=$e;if(a===null)return t;const s=Ss(a)||a.proxy,c=t.dirs||(t.dirs=[]);for(let i=0;i<n.length;i++){let[u,d,f,m=Te]=n[i];u&&(ae(u)&&(u={mounted:u,updated:u}),u.deep&&Gr(d),c.push({dir:u,instance:s,value:d,oldValue:void 0,arg:f,modifiers:m}))}return t}function Nn(t,n,a,s){const c=t.dirs,i=n&&n.dirs;for(let u=0;u<c.length;u++){const d=c[u];i&&(d.oldValue=i[u].value);let f=d.dir[s];f&&(Li(),wn(f,a,8,[t.el,d,t,n]),Mi())}}function gf(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return en(()=>{t.isMounted=!0}),ir(()=>{t.isUnmounting=!0}),t}const vn=[Function,Array],rh={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:vn,onEnter:vn,onAfterEnter:vn,onEnterCancelled:vn,onBeforeLeave:vn,onLeave:vn,onAfterLeave:vn,onLeaveCancelled:vn,onBeforeAppear:vn,onAppear:vn,onAfterAppear:vn,onAppearCancelled:vn},_f={name:"BaseTransition",props:rh,setup(t,{slots:n}){const a=kh(),s=gf();let c;return()=>{const i=n.default&&oh(n.default(),!0);if(!i||!i.length)return;let u=i[0];if(i.length>1){for(const S of i)if(S.type!==pn){u=S;break}}const d=me(t),{mode:f}=d;if(s.isLeaving)return oa(u);const m=hu(u);if(!m)return oa(u);const _=Ca(m,d,s,a);Pa(m,_);const v=a.subTree,M=v&&hu(v);let A=!1;const{getTransitionKey:P}=m.type;if(P){const S=P();c===void 0?c=S:S!==c&&(c=S,A=!0)}if(M&&M.type!==pn&&(!Vr(m,M)||A)){const S=Ca(M,d,s,a);if(Pa(M,S),f==="out-in")return s.isLeaving=!0,S.afterLeave=()=>{s.isLeaving=!1,a.update.active!==!1&&a.update()},oa(u);f==="in-out"&&m.type!==pn&&(S.delayLeave=(N,C,O)=>{const j=ih(s,M);j[String(M.key)]=M,N._leaveCb=()=>{C(),N._leaveCb=void 0,delete _.delayedLeave},_.delayedLeave=O})}return u}}},yf=_f;function ih(t,n){const{leavingVNodes:a}=t;let s=a.get(n.type);return s||(s=Object.create(null),a.set(n.type,s)),s}function Ca(t,n,a,s){const{appear:c,mode:i,persisted:u=!1,onBeforeEnter:d,onEnter:f,onAfterEnter:m,onEnterCancelled:_,onBeforeLeave:v,onLeave:M,onAfterLeave:A,onLeaveCancelled:P,onBeforeAppear:S,onAppear:N,onAfterAppear:C,onAppearCancelled:O}=n,j=String(t.key),T=ih(a,t),z=(J,rt)=>{J&&wn(J,s,9,rt)},W=(J,rt)=>{const ut=rt[1];z(J,rt),Wt(J)?J.every(gt=>gt.length<=1)&&ut():J.length<=1&&ut()},ot={mode:i,persisted:u,beforeEnter(J){let rt=d;if(!a.isMounted)if(c)rt=S||d;else return;J._leaveCb&&J._leaveCb(!0);const ut=T[j];ut&&Vr(t,ut)&&ut.el._leaveCb&&ut.el._leaveCb(),z(rt,[J])},enter(J){let rt=f,ut=m,gt=_;if(!a.isMounted)if(c)rt=N||f,ut=C||m,gt=O||_;else return;let at=!1;const bt=J._enterCb=Lt=>{at||(at=!0,Lt?z(gt,[J]):z(ut,[J]),ot.delayedLeave&&ot.delayedLeave(),J._enterCb=void 0)};rt?W(rt,[J,bt]):bt()},leave(J,rt){const ut=String(t.key);if(J._enterCb&&J._enterCb(!0),a.isUnmounting)return rt();z(v,[J]);let gt=!1;const at=J._leaveCb=bt=>{gt||(gt=!0,rt(),bt?z(P,[J]):z(A,[J]),J._leaveCb=void 0,T[ut]===t&&delete T[ut])};T[ut]=t,M?W(M,[J,at]):at()},clone(J){return Ca(J,n,a,s)}};return ot}function oa(t){if(Ms(t))return t=Lr(t),t.children=null,t}function hu(t){return Ms(t)?t.children?t.children[0]:void 0:t}function Pa(t,n){t.shapeFlag&6&&t.component?Pa(t.component.subTree,n):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}function oh(t,n=!1,a){let s=[],c=0;for(let i=0;i<t.length;i++){let u=t[i];const d=a==null?u.key:String(a)+String(u.key!=null?u.key:i);u.type===Gt?(u.patchFlag&128&&c++,s=s.concat(oh(u.children,n,d))):(n||u.type!==pn)&&s.push(d!=null?Lr(u,{key:d}):u)}if(c>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function sh(t,n){return ae(t)?(()=>je({name:t.name},n,{setup:t}))():t}const gi=t=>!!t.type.__asyncLoader,Ms=t=>t.type.__isKeepAlive;function vf(t,n){ah(t,"a",n)}function bf(t,n){ah(t,"da",n)}function ah(t,n,a=Ve){const s=t.__wdc||(t.__wdc=()=>{let c=a;for(;c;){if(c.isDeactivated)return;c=c.parent}return t()});if(Cs(n,s,a),a){let c=a.parent;for(;c&&c.parent;)Ms(c.parent.vnode)&&wf(s,n,a,c),c=c.parent}}function wf(t,n,a,s){const c=Cs(n,t,s,!0);Zr(()=>{Za(s[n],c)},a)}function Cs(t,n,a=Ve,s=!1){if(a){const c=a[t]||(a[t]=[]),i=n.__weh||(n.__weh=(...u)=>{if(a.isUnmounted)return;Li(),vi(a);const d=wn(n,a,t,u);return Ur(),Mi(),d});return s?c.unshift(i):c.push(i),i}}const rr=t=>(n,a=Ve)=>(!fo||t==="sp")&&Cs(t,(...s)=>n(...s),a),lh=rr("bm"),en=rr("m"),xf=rr("bu"),kf=rr("u"),ir=rr("bum"),Zr=rr("um"),il=rr("sp"),Lf=rr("rtg"),Mf=rr("rtc");function Cf(t,n=Ve){Cs("ec",t,n)}const ol="components";function ft(t,n){return ch(ol,t,!0,n)||t}const uh=Symbol.for("v-ndc");function Ci(t){return De(t)?ch(ol,t,!1)||t:t||uh}function ch(t,n,a=!0,s=!1){const c=$e||Ve;if(c){const i=c.type;if(t===ol){const d=im(i,!1);if(d&&(d===n||d===Hn(n)||d===ys(Hn(n))))return i}const u=du(c[t]||i[t],n)||du(c.appContext[t],n);return!u&&s?i:u}}function du(t,n){return t&&(t[n]||t[Hn(n)]||t[ys(Hn(n))])}function ye(t,n,a,s){let c;const i=a&&a[s];if(Wt(t)||De(t)){c=new Array(t.length);for(let u=0,d=t.length;u<d;u++)c[u]=n(t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){c=new Array(t);for(let u=0;u<t;u++)c[u]=n(u+1,u,void 0,i&&i[u])}else if(Oe(t))if(t[Symbol.iterator])c=Array.from(t,(u,d)=>n(u,d,void 0,i&&i[d]));else{const u=Object.keys(t);c=new Array(u.length);for(let d=0,f=u.length;d<f;d++){const m=u[d];c[d]=n(t[m],m,d,i&&i[d])}}else c=[];return a&&(a[s]=c),c}function Se(t,n,a={},s,c){if($e.isCE||$e.parent&&gi($e.parent)&&$e.parent.isCE)return n!=="default"&&(a.name=n),st("slot",a,s&&s());let i=t[n];i&&i._c&&(i._d=!1),H();const u=i&&hh(i(a)),d=Tt(Gt,{key:a.key||u&&u.key||`_${n}`},u||(s?s():[]),u&&t._===1?64:-2);return!c&&d.scopeId&&(d.slotScopeIds=[d.scopeId+"-s"]),i&&i._c&&(i._d=!0),d}function hh(t){return t.some(n=>ds(n)?!(n.type===pn||n.type===Gt&&!hh(n.children)):!0)?t:null}const Sa=t=>t?Lh(t)?Ss(t)||t.proxy:Sa(t.parent):null,to=je(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Sa(t.parent),$root:t=>Sa(t.root),$emit:t=>t.emit,$options:t=>sl(t),$forceUpdate:t=>t.f||(t.f=()=>rl(t.update)),$nextTick:t=>t.n||(t.n=xs.bind(t.proxy)),$watch:t=>mf.bind(t)}),sa=(t,n)=>t!==Te&&!t.__isScriptSetup&&ge(t,n),Pf={get({_:t},n){const{ctx:a,setupState:s,data:c,props:i,accessCache:u,type:d,appContext:f}=t;let m;if(n[0]!=="$"){const A=u[n];if(A!==void 0)switch(A){case 1:return s[n];case 2:return c[n];case 4:return a[n];case 3:return i[n]}else{if(sa(s,n))return u[n]=1,s[n];if(c!==Te&&ge(c,n))return u[n]=2,c[n];if((m=t.propsOptions[0])&&ge(m,n))return u[n]=3,i[n];if(a!==Te&&ge(a,n))return u[n]=4,a[n];Ea&&(u[n]=0)}}const _=to[n];let v,M;if(_)return n==="$attrs"&&un(t,"get",n),_(t);if((v=d.__cssModules)&&(v=v[n]))return v;if(a!==Te&&ge(a,n))return u[n]=4,a[n];if(M=f.config.globalProperties,ge(M,n))return M[n]},set({_:t},n,a){const{data:s,setupState:c,ctx:i}=t;return sa(c,n)?(c[n]=a,!0):s!==Te&&ge(s,n)?(s[n]=a,!0):ge(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(i[n]=a,!0)},has({_:{data:t,setupState:n,accessCache:a,ctx:s,appContext:c,propsOptions:i}},u){let d;return!!a[u]||t!==Te&&ge(t,u)||sa(n,u)||(d=i[0])&&ge(d,u)||ge(s,u)||ge(to,u)||ge(c.config.globalProperties,u)},defineProperty(t,n,a){return a.get!=null?t._.accessCache[n]=0:ge(a,"value")&&this.set(t,n,a.value,null),Reflect.defineProperty(t,n,a)}};function Sf(){return Ef().slots}function Ef(){const t=kh();return t.setupContext||(t.setupContext=Ch(t))}function pu(t){return Wt(t)?t.reduce((n,a)=>(n[a]=null,n),{}):t}let Ea=!0;function Tf(t){const n=sl(t),a=t.proxy,s=t.ctx;Ea=!1,n.beforeCreate&&fu(n.beforeCreate,t,"bc");const{data:c,computed:i,methods:u,watch:d,provide:f,inject:m,created:_,beforeMount:v,mounted:M,beforeUpdate:A,updated:P,activated:S,deactivated:N,beforeDestroy:C,beforeUnmount:O,destroyed:j,unmounted:T,render:z,renderTracked:W,renderTriggered:ot,errorCaptured:J,serverPrefetch:rt,expose:ut,inheritAttrs:gt,components:at,directives:bt,filters:Lt}=n;if(m&&Of(m,s,null),u)for(const Ht in u){const wt=u[Ht];ae(wt)&&(s[Ht]=wt.bind(a))}if(c){const Ht=c.call(a,a);Oe(Ht)&&(t.data=vo(Ht))}if(Ea=!0,i)for(const Ht in i){const wt=i[Ht],pe=ae(wt)?wt.bind(a,a):ae(wt.get)?wt.get.bind(a,a):On,zt=!ae(wt)&&ae(wt.set)?wt.set.bind(a):On,Bt=te({get:pe,set:zt});Object.defineProperty(s,Ht,{enumerable:!0,configurable:!0,get:()=>Bt.value,set:$t=>Bt.value=$t})}if(d)for(const Ht in d)dh(d[Ht],s,a,Ht);if(f){const Ht=ae(f)?f.call(a):f;Reflect.ownKeys(Ht).forEach(wt=>{Qo(wt,Ht[wt])})}_&&fu(_,t,"c");function Ct(Ht,wt){Wt(wt)?wt.forEach(pe=>Ht(pe.bind(a))):wt&&Ht(wt.bind(a))}if(Ct(lh,v),Ct(en,M),Ct(xf,A),Ct(kf,P),Ct(vf,S),Ct(bf,N),Ct(Cf,J),Ct(Mf,W),Ct(Lf,ot),Ct(ir,O),Ct(Zr,T),Ct(il,rt),Wt(ut))if(ut.length){const Ht=t.exposed||(t.exposed={});ut.forEach(wt=>{Object.defineProperty(Ht,wt,{get:()=>a[wt],set:pe=>a[wt]=pe})})}else t.exposed||(t.exposed={});z&&t.render===On&&(t.render=z),gt!=null&&(t.inheritAttrs=gt),at&&(t.components=at),bt&&(t.directives=bt)}function Of(t,n,a=On){Wt(t)&&(t=Ta(t));for(const s in t){const c=t[s];let i;Oe(c)?"default"in c?i=xn(c.from||s,c.default,!0):i=xn(c.from||s):i=xn(c),Ie(i)?Object.defineProperty(n,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:u=>i.value=u}):n[s]=i}}function fu(t,n,a){wn(Wt(t)?t.map(s=>s.bind(n.proxy)):t.bind(n.proxy),n,a)}function dh(t,n,a,s){const c=s.includes(".")?nh(a,s):()=>a[s];if(De(t)){const i=n[t];ae(i)&&Ue(c,i)}else if(ae(t))Ue(c,t.bind(a));else if(Oe(t))if(Wt(t))t.forEach(i=>dh(i,n,a,s));else{const i=ae(t.handler)?t.handler.bind(a):n[t.handler];ae(i)&&Ue(c,i,t)}}function sl(t){const n=t.type,{mixins:a,extends:s}=n,{mixins:c,optionsCache:i,config:{optionMergeStrategies:u}}=t.appContext,d=i.get(n);let f;return d?f=d:!c.length&&!a&&!s?f=n:(f={},c.length&&c.forEach(m=>cs(f,m,u,!0)),cs(f,n,u)),Oe(n)&&i.set(n,f),f}function cs(t,n,a,s=!1){const{mixins:c,extends:i}=n;i&&cs(t,i,a,!0),c&&c.forEach(u=>cs(t,u,a,!0));for(const u in n)if(!(s&&u==="expose")){const d=Af[u]||a&&a[u];t[u]=d?d(t[u],n[u]):n[u]}return t}const Af={data:mu,props:gu,emits:gu,methods:Xi,computed:Xi,beforeCreate:tn,created:tn,beforeMount:tn,mounted:tn,beforeUpdate:tn,updated:tn,beforeDestroy:tn,beforeUnmount:tn,destroyed:tn,unmounted:tn,activated:tn,deactivated:tn,errorCaptured:tn,serverPrefetch:tn,components:Xi,directives:Xi,watch:Bf,provide:mu,inject:Rf};function mu(t,n){return n?t?function(){return je(ae(t)?t.call(this,this):t,ae(n)?n.call(this,this):n)}:n:t}function Rf(t,n){return Xi(Ta(t),Ta(n))}function Ta(t){if(Wt(t)){const n={};for(let a=0;a<t.length;a++)n[t[a]]=t[a];return n}return t}function tn(t,n){return t?[...new Set([].concat(t,n))]:n}function Xi(t,n){return t?je(Object.create(null),t,n):n}function gu(t,n){return t?Wt(t)&&Wt(n)?[...new Set([...t,...n])]:je(Object.create(null),pu(t),pu(n??{})):n}function Bf(t,n){if(!t)return n;if(!n)return t;const a=je(Object.create(null),t);for(const s in n)a[s]=tn(t[s],n[s]);return a}function ph(){return{app:null,config:{isNativeTag:ap,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let If=0;function Df(t,n){return function(s,c=null){ae(s)||(s=je({},s)),c!=null&&!Oe(c)&&(c=null);const i=ph(),u=new Set;let d=!1;const f=i.app={_uid:If++,_component:s,_props:c,_container:null,_context:i,_instance:null,version:lm,get config(){return i.config},set config(m){},use(m,..._){return u.has(m)||(m&&ae(m.install)?(u.add(m),m.install(f,..._)):ae(m)&&(u.add(m),m(f,..._))),f},mixin(m){return i.mixins.includes(m)||i.mixins.push(m),f},component(m,_){return _?(i.components[m]=_,f):i.components[m]},directive(m,_){return _?(i.directives[m]=_,f):i.directives[m]},mount(m,_,v){if(!d){const M=st(s,c);return M.appContext=i,_&&n?n(M,m):t(M,m,v),d=!0,f._container=m,m.__vue_app__=f,Ss(M.component)||M.component.proxy}},unmount(){d&&(t(null,f._container),delete f._container.__vue_app__)},provide(m,_){return i.provides[m]=_,f},runWithContext(m){ho=f;try{return m()}finally{ho=null}}};return f}}let ho=null;function Qo(t,n){if(Ve){let a=Ve.provides;const s=Ve.parent&&Ve.parent.provides;s===a&&(a=Ve.provides=Object.create(s)),a[t]=n}}function xn(t,n,a=!1){const s=Ve||$e;if(s||ho){const c=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:ho._context.provides;if(c&&t in c)return c[t];if(arguments.length>1)return a&&ae(n)?n.call(s&&s.proxy):n}}function zf(){return!!(Ve||$e||ho)}function jf(t,n,a,s=!1){const c={},i={};os(i,Ps,1),t.propsDefaults=Object.create(null),fh(t,n,c,i);for(const u in t.propsOptions[0])u in c||(c[u]=void 0);a?t.props=s?c:Vc(c):t.type.props?t.props=c:t.props=i,t.attrs=i}function Nf(t,n,a,s){const{props:c,attrs:i,vnode:{patchFlag:u}}=t,d=me(c),[f]=t.propsOptions;let m=!1;if((s||u>0)&&!(u&16)){if(u&8){const _=t.vnode.dynamicProps;for(let v=0;v<_.length;v++){let M=_[v];if(ks(t.emitsOptions,M))continue;const A=n[M];if(f)if(ge(i,M))A!==i[M]&&(i[M]=A,m=!0);else{const P=Hn(M);c[P]=Oa(f,d,P,A,t,!1)}else A!==i[M]&&(i[M]=A,m=!0)}}}else{fh(t,n,c,i)&&(m=!0);let _;for(const v in d)(!n||!ge(n,v)&&((_=ki(v))===v||!ge(n,_)))&&(f?a&&(a[v]!==void 0||a[_]!==void 0)&&(c[v]=Oa(f,d,v,void 0,t,!0)):delete c[v]);if(i!==d)for(const v in i)(!n||!ge(n,v))&&(delete i[v],m=!0)}m&&nr(t,"set","$attrs")}function fh(t,n,a,s){const[c,i]=t.propsOptions;let u=!1,d;if(n)for(let f in n){if(Qi(f))continue;const m=n[f];let _;c&&ge(c,_=Hn(f))?!i||!i.includes(_)?a[_]=m:(d||(d={}))[_]=m:ks(t.emitsOptions,f)||(!(f in s)||m!==s[f])&&(s[f]=m,u=!0)}if(i){const f=me(a),m=d||Te;for(let _=0;_<i.length;_++){const v=i[_];a[v]=Oa(c,f,v,m[v],t,!ge(m,v))}}return u}function Oa(t,n,a,s,c,i){const u=t[a];if(u!=null){const d=ge(u,"default");if(d&&s===void 0){const f=u.default;if(u.type!==Function&&!u.skipFactory&&ae(f)){const{propsDefaults:m}=c;a in m?s=m[a]:(vi(c),s=m[a]=f.call(null,n),Ur())}else s=f}u[0]&&(i&&!d?s=!1:u[1]&&(s===""||s===ki(a))&&(s=!0))}return s}function mh(t,n,a=!1){const s=n.propsCache,c=s.get(t);if(c)return c;const i=t.props,u={},d=[];let f=!1;if(!ae(t)){const _=v=>{f=!0;const[M,A]=mh(v,n,!0);je(u,M),A&&d.push(...A)};!a&&n.mixins.length&&n.mixins.forEach(_),t.extends&&_(t.extends),t.mixins&&t.mixins.forEach(_)}if(!i&&!f)return Oe(t)&&s.set(t,pi),pi;if(Wt(i))for(let _=0;_<i.length;_++){const v=Hn(i[_]);_u(v)&&(u[v]=Te)}else if(i)for(const _ in i){const v=Hn(_);if(_u(v)){const M=i[_],A=u[v]=Wt(M)||ae(M)?{type:M}:je({},M);if(A){const P=bu(Boolean,A.type),S=bu(String,A.type);A[0]=P>-1,A[1]=S<0||P<S,(P>-1||ge(A,"default"))&&d.push(v)}}}const m=[u,d];return Oe(t)&&s.set(t,m),m}function _u(t){return t[0]!=="$"}function yu(t){const n=t&&t.toString().match(/^\s*(function|class) (\w+)/);return n?n[2]:t===null?"null":""}function vu(t,n){return yu(t)===yu(n)}function bu(t,n){return Wt(n)?n.findIndex(a=>vu(a,t)):ae(n)&&vu(n,t)?0:-1}const gh=t=>t[0]==="_"||t==="$stable",al=t=>Wt(t)?t.map(Pn):[Pn(t)],Ff=(t,n,a)=>{if(n._n)return n;const s=pt((...c)=>al(n(...c)),a);return s._c=!1,s},_h=(t,n,a)=>{const s=t._ctx;for(const c in t){if(gh(c))continue;const i=t[c];if(ae(i))n[c]=Ff(c,i,s);else if(i!=null){const u=al(i);n[c]=()=>u}}},yh=(t,n)=>{const a=al(n);t.slots.default=()=>a},Vf=(t,n)=>{if(t.vnode.shapeFlag&32){const a=n._;a?(t.slots=me(n),os(n,"_",a)):_h(n,t.slots={})}else t.slots={},n&&yh(t,n);os(t.slots,Ps,1)},Hf=(t,n,a)=>{const{vnode:s,slots:c}=t;let i=!0,u=Te;if(s.shapeFlag&32){const d=n._;d?a&&d===1?i=!1:(je(c,n),!a&&d===1&&delete c._):(i=!n.$stable,_h(n,c)),u=n}else n&&(yh(t,n),u={default:1});if(i)for(const d in c)!gh(d)&&!(d in u)&&delete c[d]};function hs(t,n,a,s,c=!1){if(Wt(t)){t.forEach((M,A)=>hs(M,n&&(Wt(n)?n[A]:n),a,s,c));return}if(gi(s)&&!c)return;const i=s.shapeFlag&4?Ss(s.component)||s.component.proxy:s.el,u=c?null:i,{i:d,r:f}=t,m=n&&n.r,_=d.refs===Te?d.refs={}:d.refs,v=d.setupState;if(m!=null&&m!==f&&(De(m)?(_[m]=null,ge(v,m)&&(v[m]=null)):Ie(m)&&(m.value=null)),ae(f))xr(f,d,12,[u,_]);else{const M=De(f),A=Ie(f);if(M||A){const P=()=>{if(t.f){const S=M?ge(v,f)?v[f]:_[f]:f.value;c?Wt(S)&&Za(S,i):Wt(S)?S.includes(i)||S.push(i):M?(_[f]=[i],ge(v,f)&&(v[f]=_[f])):(f.value=[i],t.k&&(_[t.k]=f.value))}else M?(_[f]=u,ge(v,f)&&(v[f]=u)):A&&(f.value=u,t.k&&(_[t.k]=u))};u?(P.id=-1,an(P,a)):P()}}}let dr=!1;const Jo=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",Yo=t=>t.nodeType===8;function Gf(t){const{mt:n,p:a,o:{patchProp:s,createText:c,nextSibling:i,parentNode:u,remove:d,insert:f,createComment:m}}=t,_=(C,O)=>{if(!O.hasChildNodes()){a(null,C,O),ls(),O._vnode=C;return}dr=!1,v(O.firstChild,C,null,null,null),ls(),O._vnode=C,dr&&console.error("Hydration completed but contains mismatches.")},v=(C,O,j,T,z,W=!1)=>{const ot=Yo(C)&&C.data==="[",J=()=>S(C,O,j,T,z,ot),{type:rt,ref:ut,shapeFlag:gt,patchFlag:at}=O;let bt=C.nodeType;O.el=C,at===-2&&(W=!1,O.dynamicChildren=null);let Lt=null;switch(rt){case yi:bt!==3?O.children===""?(f(O.el=c(""),u(C),C),Lt=C):Lt=J():(C.data!==O.children&&(dr=!0,C.data=O.children),Lt=i(C));break;case pn:bt!==8||ot?Lt=J():Lt=i(C);break;case eo:if(ot&&(C=i(C),bt=C.nodeType),bt===1||bt===3){Lt=C;const Et=!O.children.length;for(let Ct=0;Ct<O.staticCount;Ct++)Et&&(O.children+=Lt.nodeType===1?Lt.outerHTML:Lt.data),Ct===O.staticCount-1&&(O.anchor=Lt),Lt=i(Lt);return ot?i(Lt):Lt}else J();break;case Gt:ot?Lt=P(C,O,j,T,z,W):Lt=J();break;default:if(gt&1)bt!==1||O.type.toLowerCase()!==C.tagName.toLowerCase()?Lt=J():Lt=M(C,O,j,T,z,W);else if(gt&6){O.slotScopeIds=z;const Et=u(C);if(n(O,Et,null,j,T,Jo(Et),W),Lt=ot?N(C):i(C),Lt&&Yo(Lt)&&Lt.data==="teleport end"&&(Lt=i(Lt)),gi(O)){let Ct;ot?(Ct=st(Gt),Ct.anchor=Lt?Lt.previousSibling:Et.lastChild):Ct=C.nodeType===3?re(""):st("div"),Ct.el=C,O.component.subTree=Ct}}else gt&64?bt!==8?Lt=J():Lt=O.type.hydrate(C,O,j,T,z,W,t,A):gt&128&&(Lt=O.type.hydrate(C,O,j,T,Jo(u(C)),z,W,t,v))}return ut!=null&&hs(ut,null,T,O),Lt},M=(C,O,j,T,z,W)=>{W=W||!!O.dynamicChildren;const{type:ot,props:J,patchFlag:rt,shapeFlag:ut,dirs:gt}=O,at=ot==="input"&&gt||ot==="option";if(at||rt!==-1){if(gt&&Nn(O,null,j,"created"),J)if(at||!W||rt&48)for(const Lt in J)(at&&Lt.endsWith("value")||yo(Lt)&&!Qi(Lt))&&s(C,Lt,null,J[Lt],!1,void 0,j);else J.onClick&&s(C,"onClick",null,J.onClick,!1,void 0,j);let bt;if((bt=J&&J.onVnodeBeforeMount)&&bn(bt,j,O),gt&&Nn(O,null,j,"beforeMount"),((bt=J&&J.onVnodeMounted)||gt)&&th(()=>{bt&&bn(bt,j,O),gt&&Nn(O,null,j,"mounted")},T),ut&16&&!(J&&(J.innerHTML||J.textContent))){let Lt=A(C.firstChild,O,C,j,T,z,W);for(;Lt;){dr=!0;const Et=Lt;Lt=Lt.nextSibling,d(Et)}}else ut&8&&C.textContent!==O.children&&(dr=!0,C.textContent=O.children)}return C.nextSibling},A=(C,O,j,T,z,W,ot)=>{ot=ot||!!O.dynamicChildren;const J=O.children,rt=J.length;for(let ut=0;ut<rt;ut++){const gt=ot?J[ut]:J[ut]=Pn(J[ut]);if(C)C=v(C,gt,T,z,W,ot);else{if(gt.type===yi&&!gt.children)continue;dr=!0,a(null,gt,j,null,T,z,Jo(j),W)}}return C},P=(C,O,j,T,z,W)=>{const{slotScopeIds:ot}=O;ot&&(z=z?z.concat(ot):ot);const J=u(C),rt=A(i(C),O,J,j,T,z,W);return rt&&Yo(rt)&&rt.data==="]"?i(O.anchor=rt):(dr=!0,f(O.anchor=m("]"),J,rt),rt)},S=(C,O,j,T,z,W)=>{if(dr=!0,O.el=null,W){const rt=N(C);for(;;){const ut=i(C);if(ut&&ut!==rt)d(ut);else break}}const ot=i(C),J=u(C);return d(C),a(null,O,J,ot,j,T,Jo(J),z),ot},N=C=>{let O=0;for(;C;)if(C=i(C),C&&Yo(C)&&(C.data==="["&&O++,C.data==="]")){if(O===0)return i(C);O--}return C};return[_,v]}const an=th;function $f(t){return Uf(t,Gf)}function Uf(t,n){const a=wa();a.__VUE__=!0;const{insert:s,remove:c,patchProp:i,createElement:u,createText:d,createComment:f,setText:m,setElementText:_,parentNode:v,nextSibling:M,setScopeId:A=On,insertStaticContent:P}=t,S=(G,K,Y,ht=null,_t=null,xt=null,At=!1,I=null,w=!!K.dynamicChildren)=>{if(G===K)return;G&&!Vr(G,K)&&(ht=dt(G),$t(G,_t,xt,!0),G=null),K.patchFlag===-2&&(w=!1,K.dynamicChildren=null);const{type:k,ref:R,shapeFlag:D}=K;switch(k){case yi:N(G,K,Y,ht);break;case pn:C(G,K,Y,ht);break;case eo:G==null&&O(K,Y,ht,At);break;case Gt:at(G,K,Y,ht,_t,xt,At,I,w);break;default:D&1?z(G,K,Y,ht,_t,xt,At,I,w):D&6?bt(G,K,Y,ht,_t,xt,At,I,w):(D&64||D&128)&&k.process(G,K,Y,ht,_t,xt,At,I,w,St)}R!=null&&_t&&hs(R,G&&G.ref,xt,K||G,!K)},N=(G,K,Y,ht)=>{if(G==null)s(K.el=d(K.children),Y,ht);else{const _t=K.el=G.el;K.children!==G.children&&m(_t,K.children)}},C=(G,K,Y,ht)=>{G==null?s(K.el=f(K.children||""),Y,ht):K.el=G.el},O=(G,K,Y,ht)=>{[G.el,G.anchor]=P(G.children,K,Y,ht,G.el,G.anchor)},j=({el:G,anchor:K},Y,ht)=>{let _t;for(;G&&G!==K;)_t=M(G),s(G,Y,ht),G=_t;s(K,Y,ht)},T=({el:G,anchor:K})=>{let Y;for(;G&&G!==K;)Y=M(G),c(G),G=Y;c(K)},z=(G,K,Y,ht,_t,xt,At,I,w)=>{At=At||K.type==="svg",G==null?W(K,Y,ht,_t,xt,At,I,w):rt(G,K,_t,xt,At,I,w)},W=(G,K,Y,ht,_t,xt,At,I)=>{let w,k;const{type:R,props:D,shapeFlag:V,transition:et,dirs:it}=G;if(w=G.el=u(G.type,xt,D&&D.is,D),V&8?_(w,G.children):V&16&&J(G.children,w,null,ht,_t,xt&&R!=="foreignObject",At,I),it&&Nn(G,null,ht,"created"),ot(w,G,G.scopeId,At,ht),D){for(const Ot in D)Ot!=="value"&&!Qi(Ot)&&i(w,Ot,null,D[Ot],xt,G.children,ht,_t,Ft);"value"in D&&i(w,"value",null,D.value),(k=D.onVnodeBeforeMount)&&bn(k,ht,G)}it&&Nn(G,null,ht,"beforeMount");const vt=(!_t||_t&&!_t.pendingBranch)&&et&&!et.persisted;vt&&et.beforeEnter(w),s(w,K,Y),((k=D&&D.onVnodeMounted)||vt||it)&&an(()=>{k&&bn(k,ht,G),vt&&et.enter(w),it&&Nn(G,null,ht,"mounted")},_t)},ot=(G,K,Y,ht,_t)=>{if(Y&&A(G,Y),ht)for(let xt=0;xt<ht.length;xt++)A(G,ht[xt]);if(_t){let xt=_t.subTree;if(K===xt){const At=_t.vnode;ot(G,At,At.scopeId,At.slotScopeIds,_t.parent)}}},J=(G,K,Y,ht,_t,xt,At,I,w=0)=>{for(let k=w;k<G.length;k++){const R=G[k]=I?yr(G[k]):Pn(G[k]);S(null,R,K,Y,ht,_t,xt,At,I)}},rt=(G,K,Y,ht,_t,xt,At)=>{const I=K.el=G.el;let{patchFlag:w,dynamicChildren:k,dirs:R}=K;w|=G.patchFlag&16;const D=G.props||Te,V=K.props||Te;let et;Y&&zr(Y,!1),(et=V.onVnodeBeforeUpdate)&&bn(et,Y,K,G),R&&Nn(K,G,Y,"beforeUpdate"),Y&&zr(Y,!0);const it=_t&&K.type!=="foreignObject";if(k?ut(G.dynamicChildren,k,I,Y,ht,it,xt):At||wt(G,K,I,null,Y,ht,it,xt,!1),w>0){if(w&16)gt(I,K,D,V,Y,ht,_t);else if(w&2&&D.class!==V.class&&i(I,"class",null,V.class,_t),w&4&&i(I,"style",D.style,V.style,_t),w&8){const vt=K.dynamicProps;for(let Ot=0;Ot<vt.length;Ot++){const Nt=vt[Ot],Jt=D[Nt],ee=V[Nt];(ee!==Jt||Nt==="value")&&i(I,Nt,Jt,ee,_t,G.children,Y,ht,Ft)}}w&1&&G.children!==K.children&&_(I,K.children)}else!At&&k==null&&gt(I,K,D,V,Y,ht,_t);((et=V.onVnodeUpdated)||R)&&an(()=>{et&&bn(et,Y,K,G),R&&Nn(K,G,Y,"updated")},ht)},ut=(G,K,Y,ht,_t,xt,At)=>{for(let I=0;I<K.length;I++){const w=G[I],k=K[I],R=w.el&&(w.type===Gt||!Vr(w,k)||w.shapeFlag&70)?v(w.el):Y;S(w,k,R,null,ht,_t,xt,At,!0)}},gt=(G,K,Y,ht,_t,xt,At)=>{if(Y!==ht){if(Y!==Te)for(const I in Y)!Qi(I)&&!(I in ht)&&i(G,I,Y[I],null,At,K.children,_t,xt,Ft);for(const I in ht){if(Qi(I))continue;const w=ht[I],k=Y[I];w!==k&&I!=="value"&&i(G,I,k,w,At,K.children,_t,xt,Ft)}"value"in ht&&i(G,"value",Y.value,ht.value)}},at=(G,K,Y,ht,_t,xt,At,I,w)=>{const k=K.el=G?G.el:d(""),R=K.anchor=G?G.anchor:d("");let{patchFlag:D,dynamicChildren:V,slotScopeIds:et}=K;et&&(I=I?I.concat(et):et),G==null?(s(k,Y,ht),s(R,Y,ht),J(K.children,Y,R,_t,xt,At,I,w)):D>0&&D&64&&V&&G.dynamicChildren?(ut(G.dynamicChildren,V,Y,_t,xt,At,I),(K.key!=null||_t&&K===_t.subTree)&&vh(G,K,!0)):wt(G,K,Y,R,_t,xt,At,I,w)},bt=(G,K,Y,ht,_t,xt,At,I,w)=>{K.slotScopeIds=I,G==null?K.shapeFlag&512?_t.ctx.activate(K,Y,ht,At,w):Lt(K,Y,ht,_t,xt,At,w):Et(G,K,w)},Lt=(G,K,Y,ht,_t,xt,At)=>{const I=G.component=tm(G,ht,_t);if(Ms(G)&&(I.ctx.renderer=St),em(I),I.asyncDep){if(_t&&_t.registerDep(I,Ct),!G.el){const w=I.subTree=st(pn);C(null,w,K,Y)}return}Ct(I,G,K,Y,_t,xt,At)},Et=(G,K,Y)=>{const ht=K.component=G.component;if(df(G,K,Y))if(ht.asyncDep&&!ht.asyncResolved){Ht(ht,K,Y);return}else ht.next=K,sf(ht.update),ht.update();else K.el=G.el,ht.vnode=K},Ct=(G,K,Y,ht,_t,xt,At)=>{const I=()=>{if(G.isMounted){let{next:R,bu:D,u:V,parent:et,vnode:it}=G,vt=R,Ot;zr(G,!1),R?(R.el=it.el,Ht(G,R,At)):R=it,D&&Xo(D),(Ot=R.props&&R.props.onVnodeBeforeUpdate)&&bn(Ot,et,R,it),zr(G,!0);const Nt=ia(G),Jt=G.subTree;G.subTree=Nt,S(Jt,Nt,v(Jt.el),dt(Jt),G,_t,xt),R.el=Nt.el,vt===null&&pf(G,Nt.el),V&&an(V,_t),(Ot=R.props&&R.props.onVnodeUpdated)&&an(()=>bn(Ot,et,R,it),_t)}else{let R;const{el:D,props:V}=K,{bm:et,m:it,parent:vt}=G,Ot=gi(K);if(zr(G,!1),et&&Xo(et),!Ot&&(R=V&&V.onVnodeBeforeMount)&&bn(R,vt,K),zr(G,!0),D&&ue){const Nt=()=>{G.subTree=ia(G),ue(D,G.subTree,G,_t,null)};Ot?K.type.__asyncLoader().then(()=>!G.isUnmounted&&Nt()):Nt()}else{const Nt=G.subTree=ia(G);S(null,Nt,Y,ht,G,_t,xt),K.el=Nt.el}if(it&&an(it,_t),!Ot&&(R=V&&V.onVnodeMounted)){const Nt=K;an(()=>bn(R,vt,Nt),_t)}(K.shapeFlag&256||vt&&gi(vt.vnode)&&vt.vnode.shapeFlag&256)&&G.a&&an(G.a,_t),G.isMounted=!0,K=Y=ht=null}},w=G.effect=new Ja(I,()=>rl(k),G.scope),k=G.update=()=>w.run();k.id=G.uid,zr(G,!0),k()},Ht=(G,K,Y)=>{K.component=G;const ht=G.vnode.props;G.vnode=K,G.next=null,Nf(G,K.props,ht,Y),Hf(G,K.children,Y),Li(),uu(),Mi()},wt=(G,K,Y,ht,_t,xt,At,I,w=!1)=>{const k=G&&G.children,R=G?G.shapeFlag:0,D=K.children,{patchFlag:V,shapeFlag:et}=K;if(V>0){if(V&128){zt(k,D,Y,ht,_t,xt,At,I,w);return}else if(V&256){pe(k,D,Y,ht,_t,xt,At,I,w);return}}et&8?(R&16&&Ft(k,_t,xt),D!==k&&_(Y,D)):R&16?et&16?zt(k,D,Y,ht,_t,xt,At,I,w):Ft(k,_t,xt,!0):(R&8&&_(Y,""),et&16&&J(D,Y,ht,_t,xt,At,I,w))},pe=(G,K,Y,ht,_t,xt,At,I,w)=>{G=G||pi,K=K||pi;const k=G.length,R=K.length,D=Math.min(k,R);let V;for(V=0;V<D;V++){const et=K[V]=w?yr(K[V]):Pn(K[V]);S(G[V],et,Y,null,_t,xt,At,I,w)}k>R?Ft(G,_t,xt,!0,!1,D):J(K,Y,ht,_t,xt,At,I,w,D)},zt=(G,K,Y,ht,_t,xt,At,I,w)=>{let k=0;const R=K.length;let D=G.length-1,V=R-1;for(;k<=D&&k<=V;){const et=G[k],it=K[k]=w?yr(K[k]):Pn(K[k]);if(Vr(et,it))S(et,it,Y,null,_t,xt,At,I,w);else break;k++}for(;k<=D&&k<=V;){const et=G[D],it=K[V]=w?yr(K[V]):Pn(K[V]);if(Vr(et,it))S(et,it,Y,null,_t,xt,At,I,w);else break;D--,V--}if(k>D){if(k<=V){const et=V+1,it=et<R?K[et].el:ht;for(;k<=V;)S(null,K[k]=w?yr(K[k]):Pn(K[k]),Y,it,_t,xt,At,I,w),k++}}else if(k>V)for(;k<=D;)$t(G[k],_t,xt,!0),k++;else{const et=k,it=k,vt=new Map;for(k=it;k<=V;k++){const he=K[k]=w?yr(K[k]):Pn(K[k]);he.key!=null&&vt.set(he.key,k)}let Ot,Nt=0;const Jt=V-it+1;let ee=!1,be=0;const Xt=new Array(Jt);for(k=0;k<Jt;k++)Xt[k]=0;for(k=et;k<=D;k++){const he=G[k];if(Nt>=Jt){$t(he,_t,xt,!0);continue}let we;if(he.key!=null)we=vt.get(he.key);else for(Ot=it;Ot<=V;Ot++)if(Xt[Ot-it]===0&&Vr(he,K[Ot])){we=Ot;break}we===void 0?$t(he,_t,xt,!0):(Xt[we-it]=k+1,we>=be?be=we:ee=!0,S(he,K[we],Y,null,_t,xt,At,I,w),Nt++)}const ve=ee?Zf(Xt):pi;for(Ot=ve.length-1,k=Jt-1;k>=0;k--){const he=it+k,we=K[he],Ae=he+1<R?K[he+1].el:ht;Xt[k]===0?S(null,we,Y,Ae,_t,xt,At,I,w):ee&&(Ot<0||k!==ve[Ot]?Bt(we,Y,Ae,2):Ot--)}}},Bt=(G,K,Y,ht,_t=null)=>{const{el:xt,type:At,transition:I,children:w,shapeFlag:k}=G;if(k&6){Bt(G.component.subTree,K,Y,ht);return}if(k&128){G.suspense.move(K,Y,ht);return}if(k&64){At.move(G,K,Y,St);return}if(At===Gt){s(xt,K,Y);for(let D=0;D<w.length;D++)Bt(w[D],K,Y,ht);s(G.anchor,K,Y);return}if(At===eo){j(G,K,Y);return}if(ht!==2&&k&1&&I)if(ht===0)I.beforeEnter(xt),s(xt,K,Y),an(()=>I.enter(xt),_t);else{const{leave:D,delayLeave:V,afterLeave:et}=I,it=()=>s(xt,K,Y),vt=()=>{D(xt,()=>{it(),et&&et()})};V?V(xt,it,vt):vt()}else s(xt,K,Y)},$t=(G,K,Y,ht=!1,_t=!1)=>{const{type:xt,props:At,ref:I,children:w,dynamicChildren:k,shapeFlag:R,patchFlag:D,dirs:V}=G;if(I!=null&&hs(I,null,Y,G,!0),R&256){K.ctx.deactivate(G);return}const et=R&1&&V,it=!gi(G);let vt;if(it&&(vt=At&&At.onVnodeBeforeUnmount)&&bn(vt,K,G),R&6)le(G.component,Y,ht);else{if(R&128){G.suspense.unmount(Y,ht);return}et&&Nn(G,null,K,"beforeUnmount"),R&64?G.type.remove(G,K,Y,_t,St,ht):k&&(xt!==Gt||D>0&&D&64)?Ft(k,K,Y,!1,!0):(xt===Gt&&D&384||!_t&&R&16)&&Ft(w,K,Y),ht&&Me(G)}(it&&(vt=At&&At.onVnodeUnmounted)||et)&&an(()=>{vt&&bn(vt,K,G),et&&Nn(G,null,K,"unmounted")},Y)},Me=G=>{const{type:K,el:Y,anchor:ht,transition:_t}=G;if(K===Gt){fe(Y,ht);return}if(K===eo){T(G);return}const xt=()=>{c(Y),_t&&!_t.persisted&&_t.afterLeave&&_t.afterLeave()};if(G.shapeFlag&1&&_t&&!_t.persisted){const{leave:At,delayLeave:I}=_t,w=()=>At(Y,xt);I?I(G.el,xt,w):w()}else xt()},fe=(G,K)=>{let Y;for(;G!==K;)Y=M(G),c(G),G=Y;c(K)},le=(G,K,Y)=>{const{bum:ht,scope:_t,update:xt,subTree:At,um:I}=G;ht&&Xo(ht),_t.stop(),xt&&(xt.active=!1,$t(At,G,K,Y)),I&&an(I,K),an(()=>{G.isUnmounted=!0},K),K&&K.pendingBranch&&!K.isUnmounted&&G.asyncDep&&!G.asyncResolved&&G.suspenseId===K.pendingId&&(K.deps--,K.deps===0&&K.resolve())},Ft=(G,K,Y,ht=!1,_t=!1,xt=0)=>{for(let At=xt;At<G.length;At++)$t(G[At],K,Y,ht,_t)},dt=G=>G.shapeFlag&6?dt(G.component.subTree):G.shapeFlag&128?G.suspense.next():M(G.anchor||G.el),Pt=(G,K,Y)=>{G==null?K._vnode&&$t(K._vnode,null,null,!0):S(K._vnode||null,G,K,null,null,null,Y),uu(),ls(),K._vnode=G},St={p:S,um:$t,m:Bt,r:Me,mt:Lt,mc:J,pc:wt,pbc:ut,n:dt,o:t};let jt,ue;return n&&([jt,ue]=n(St)),{render:Pt,hydrate:jt,createApp:Df(Pt,jt)}}function zr({effect:t,update:n},a){t.allowRecurse=n.allowRecurse=a}function vh(t,n,a=!1){const s=t.children,c=n.children;if(Wt(s)&&Wt(c))for(let i=0;i<s.length;i++){const u=s[i];let d=c[i];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=c[i]=yr(c[i]),d.el=u.el),a||vh(u,d)),d.type===yi&&(d.el=u.el)}}function Zf(t){const n=t.slice(),a=[0];let s,c,i,u,d;const f=t.length;for(s=0;s<f;s++){const m=t[s];if(m!==0){if(c=a[a.length-1],t[c]<m){n[s]=c,a.push(s);continue}for(i=0,u=a.length-1;i<u;)d=i+u>>1,t[a[d]]<m?i=d+1:u=d;m<t[a[i]]&&(i>0&&(n[s]=a[i-1]),a[i]=s)}}for(i=a.length,u=a[i-1];i-- >0;)a[i]=u,u=n[u];return a}const qf=t=>t.__isTeleport,Gt=Symbol.for("v-fgt"),yi=Symbol.for("v-txt"),pn=Symbol.for("v-cmt"),eo=Symbol.for("v-stc"),no=[];let En=null;function H(t=!1){no.push(En=t?null:[])}function Kf(){no.pop(),En=no[no.length-1]||null}let po=1;function wu(t){po+=t}function bh(t){return t.dynamicChildren=po>0?En||pi:null,Kf(),po>0&&En&&En.push(t),t}function tt(t,n,a,s,c,i){return bh(X(t,n,a,s,c,i,!0))}function Tt(t,n,a,s,c){return bh(st(t,n,a,s,c,!0))}function ds(t){return t?t.__v_isVNode===!0:!1}function Vr(t,n){return t.type===n.type&&t.key===n.key}const Ps="__vInternal",wh=({key:t})=>t??null,ts=({ref:t,ref_key:n,ref_for:a})=>(typeof t=="number"&&(t=""+t),t!=null?De(t)||Ie(t)||ae(t)?{i:$e,r:t,k:n,f:!!a}:t:null);function X(t,n=null,a=null,s=0,c=null,i=t===Gt?0:1,u=!1,d=!1){const f={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&wh(n),ref:n&&ts(n),scopeId:Ls,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:$e};return d?(ll(f,a),i&128&&t.normalize(f)):a&&(f.shapeFlag|=De(a)?8:16),po>0&&!u&&En&&(f.patchFlag>0||i&6)&&f.patchFlag!==32&&En.push(f),f}const st=Wf;function Wf(t,n=null,a=null,s=0,c=null,i=!1){if((!t||t===uh)&&(t=pn),ds(t)){const d=Lr(t,n,!0);return a&&ll(d,a),po>0&&!i&&En&&(d.shapeFlag&6?En[En.indexOf(t)]=d:En.push(d)),d.patchFlag|=-2,d}if(om(t)&&(t=t.__vccOpts),n){n=Jf(n);let{class:d,style:f}=n;d&&!De(d)&&(n.class=Je(d)),Oe(f)&&(Gc(f)&&!Wt(f)&&(f=je({},f)),n.style=Vn(f))}const u=De(t)?1:ff(t)?128:qf(t)?64:Oe(t)?4:ae(t)?2:0;return X(t,n,a,s,c,u,i,!0)}function Jf(t){return t?Gc(t)||Ps in t?je({},t):t:null}function Lr(t,n,a=!1){const{props:s,ref:c,patchFlag:i,children:u}=t,d=n?xh(s||{},n):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&wh(d),ref:n&&n.ref?a&&c?Wt(c)?c.concat(ts(n)):[c,ts(n)]:ts(n):c,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==Gt?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Lr(t.ssContent),ssFallback:t.ssFallback&&Lr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function re(t=" ",n=0){return st(yi,null,t,n)}function Yf(t,n){const a=st(eo,null,t);return a.staticCount=n,a}function Dt(t="",n=!1){return n?(H(),Tt(pn,null,t)):st(pn,null,t)}function Pn(t){return t==null||typeof t=="boolean"?st(pn):Wt(t)?st(Gt,null,t.slice()):typeof t=="object"?yr(t):st(yi,null,String(t))}function yr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Lr(t)}function ll(t,n){let a=0;const{shapeFlag:s}=t;if(n==null)n=null;else if(Wt(n))a=16;else if(typeof n=="object")if(s&65){const c=n.default;c&&(c._c&&(c._d=!1),ll(t,c()),c._c&&(c._d=!0));return}else{a=32;const c=n._;!c&&!(Ps in n)?n._ctx=$e:c===3&&$e&&($e.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else ae(n)?(n={default:n,_ctx:$e},a=32):(n=String(n),s&64?(a=16,n=[re(n)]):a=8);t.children=n,t.shapeFlag|=a}function xh(...t){const n={};for(let a=0;a<t.length;a++){const s=t[a];for(const c in s)if(c==="class")n.class!==s.class&&(n.class=Je([n.class,s.class]));else if(c==="style")n.style=Vn([n.style,s.style]);else if(yo(c)){const i=n[c],u=s[c];u&&i!==u&&!(Wt(i)&&i.includes(u))&&(n[c]=i?[].concat(i,u):u)}else c!==""&&(n[c]=s[c])}return n}function bn(t,n,a,s=null){wn(t,n,7,[a,s])}const Xf=ph();let Qf=0;function tm(t,n,a){const s=t.type,c=(n?n.appContext:t.appContext)||Xf,i={uid:Qf++,vnode:t,type:s,parent:n,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,scope:new Sc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(c.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:mh(s,c),emitsOptions:Yc(s,c),emit:null,emitted:null,propsDefaults:Te,inheritAttrs:s.inheritAttrs,ctx:Te,data:Te,props:Te,attrs:Te,slots:Te,refs:Te,setupState:Te,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=n?n.root:i,i.emit=uf.bind(null,i),t.ce&&t.ce(i),i}let Ve=null;const kh=()=>Ve||$e;let ul,ui,xu="__VUE_INSTANCE_SETTERS__";(ui=wa()[xu])||(ui=wa()[xu]=[]),ui.push(t=>Ve=t),ul=t=>{ui.length>1?ui.forEach(n=>n(t)):ui[0](t)};const vi=t=>{ul(t),t.scope.on()},Ur=()=>{Ve&&Ve.scope.off(),ul(null)};function Lh(t){return t.vnode.shapeFlag&4}let fo=!1;function em(t,n=!1){fo=n;const{props:a,children:s}=t.vnode,c=Lh(t);jf(t,a,c,n),Vf(t,s);const i=c?nm(t,n):void 0;return fo=!1,i}function nm(t,n){const a=t.type;t.accessCache=Object.create(null),t.proxy=bs(new Proxy(t.ctx,Pf));const{setup:s}=a;if(s){const c=t.setupContext=s.length>1?Ch(t):null;vi(t),Li();const i=xr(s,t,0,[t.props,c]);if(Mi(),Ur(),kc(i)){if(i.then(Ur,Ur),n)return i.then(u=>{ku(t,u,n)}).catch(u=>{ws(u,t,0)});t.asyncDep=i}else ku(t,i,n)}else Mh(t,n)}function ku(t,n,a){ae(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:Oe(n)&&(t.setupState=qc(n)),Mh(t,a)}let Lu;function Mh(t,n,a){const s=t.type;if(!t.render){if(!n&&Lu&&!s.render){const c=s.template||sl(t).template;if(c){const{isCustomElement:i,compilerOptions:u}=t.appContext.config,{delimiters:d,compilerOptions:f}=s,m=je(je({isCustomElement:i,delimiters:d},u),f);s.render=Lu(c,m)}}t.render=s.render||On}vi(t),Li(),Tf(t),Mi(),Ur()}function rm(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(n,a){return un(t,"get","$attrs"),n[a]}}))}function Ch(t){const n=a=>{t.exposed=a||{}};return{get attrs(){return rm(t)},slots:t.slots,emit:t.emit,expose:n}}function Ss(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(qc(bs(t.exposed)),{get(n,a){if(a in n)return n[a];if(a in to)return to[a](t)},has(n,a){return a in n||a in to}}))}function im(t,n=!0){return ae(t)?t.displayName||t.name:t.name||n&&t.__name}function om(t){return ae(t)&&"__vccOpts"in t}const te=(t,n)=>nf(t,n,fo);function cl(t,n,a){const s=arguments.length;return s===2?Oe(n)&&!Wt(n)?ds(n)?st(t,null,[n]):st(t,n):st(t,null,n):(s>3?a=Array.prototype.slice.call(arguments,2):s===3&&ds(a)&&(a=[a]),st(t,n,a))}const sm=Symbol.for("v-scx"),am=()=>xn(sm),lm="3.3.4",um="http://www.w3.org/2000/svg",Hr=typeof document<"u"?document:null,Mu=Hr&&Hr.createElement("template"),cm={insert:(t,n,a)=>{n.insertBefore(t,a||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,a,s)=>{const c=n?Hr.createElementNS(um,t):Hr.createElement(t,a?{is:a}:void 0);return t==="select"&&s&&s.multiple!=null&&c.setAttribute("multiple",s.multiple),c},createText:t=>Hr.createTextNode(t),createComment:t=>Hr.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Hr.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,a,s,c,i){const u=a?a.previousSibling:n.lastChild;if(c&&(c===i||c.nextSibling))for(;n.insertBefore(c.cloneNode(!0),a),!(c===i||!(c=c.nextSibling)););else{Mu.innerHTML=s?`<svg>${t}</svg>`:t;const d=Mu.content;if(s){const f=d.firstChild;for(;f.firstChild;)d.appendChild(f.firstChild);d.removeChild(f)}n.insertBefore(d,a)}return[u?u.nextSibling:n.firstChild,a?a.previousSibling:n.lastChild]}};function hm(t,n,a){const s=t._vtc;s&&(n=(n?[n,...s]:[...s]).join(" ")),n==null?t.removeAttribute("class"):a?t.setAttribute("class",n):t.className=n}function dm(t,n,a){const s=t.style,c=De(a);if(a&&!c){if(n&&!De(n))for(const i in n)a[i]==null&&Aa(s,i,"");for(const i in a)Aa(s,i,a[i])}else{const i=s.display;c?n!==a&&(s.cssText=a):n&&t.removeAttribute("style"),"_vod"in t&&(s.display=i)}}const Cu=/\s*!important$/;function Aa(t,n,a){if(Wt(a))a.forEach(s=>Aa(t,n,s));else if(a==null&&(a=""),n.startsWith("--"))t.setProperty(n,a);else{const s=pm(t,n);Cu.test(a)?t.setProperty(ki(s),a.replace(Cu,""),"important"):t[s]=a}}const Pu=["Webkit","Moz","ms"],aa={};function pm(t,n){const a=aa[n];if(a)return a;let s=Hn(n);if(s!=="filter"&&s in t)return aa[n]=s;s=ys(s);for(let c=0;c<Pu.length;c++){const i=Pu[c]+s;if(i in t)return aa[n]=i}return n}const Su="http://www.w3.org/1999/xlink";function fm(t,n,a,s,c){if(s&&n.startsWith("xlink:"))a==null?t.removeAttributeNS(Su,n.slice(6,n.length)):t.setAttributeNS(Su,n,a);else{const i=vp(n);a==null||i&&!Cc(a)?t.removeAttribute(n):t.setAttribute(n,i?"":a)}}function mm(t,n,a,s,c,i,u){if(n==="innerHTML"||n==="textContent"){s&&u(s,c,i),t[n]=a??"";return}const d=t.tagName;if(n==="value"&&d!=="PROGRESS"&&!d.includes("-")){t._value=a;const m=d==="OPTION"?t.getAttribute("value"):t.value,_=a??"";m!==_&&(t.value=_),a==null&&t.removeAttribute(n);return}let f=!1;if(a===""||a==null){const m=typeof t[n];m==="boolean"?a=Cc(a):a==null&&m==="string"?(a="",f=!0):m==="number"&&(a=0,f=!0)}try{t[n]=a}catch{}f&&t.removeAttribute(n)}function hi(t,n,a,s){t.addEventListener(n,a,s)}function gm(t,n,a,s){t.removeEventListener(n,a,s)}function _m(t,n,a,s,c=null){const i=t._vei||(t._vei={}),u=i[n];if(s&&u)u.value=s;else{const[d,f]=ym(n);if(s){const m=i[n]=wm(s,c);hi(t,d,m,f)}else u&&(gm(t,d,u,f),i[n]=void 0)}}const Eu=/(?:Once|Passive|Capture)$/;function ym(t){let n;if(Eu.test(t)){n={};let s;for(;s=t.match(Eu);)t=t.slice(0,t.length-s[0].length),n[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ki(t.slice(2)),n]}let la=0;const vm=Promise.resolve(),bm=()=>la||(vm.then(()=>la=0),la=Date.now());function wm(t,n){const a=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=a.attached)return;wn(xm(s,a.value),n,5,[s])};return a.value=t,a.attached=bm(),a}function xm(t,n){if(Wt(n)){const a=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{a.call(t),t._stopped=!0},n.map(s=>c=>!c._stopped&&s&&s(c))}else return n}const Tu=/^on[a-z]/,km=(t,n,a,s,c=!1,i,u,d,f)=>{n==="class"?hm(t,s,c):n==="style"?dm(t,a,s):yo(n)?Ua(n)||_m(t,n,a,s,u):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):Lm(t,n,s,c))?mm(t,n,s,i,u,d,f):(n==="true-value"?t._trueValue=s:n==="false-value"&&(t._falseValue=s),fm(t,n,s,c))};function Lm(t,n,a,s){return s?!!(n==="innerHTML"||n==="textContent"||n in t&&Tu.test(n)&&ae(a)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA"||Tu.test(n)&&De(a)?!1:n in t}const pr="transition",qi="animation",Es=(t,{slots:n})=>cl(yf,Mm(t),n);Es.displayName="Transition";const Ph={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Es.props=je({},rh,Ph);const jr=(t,n=[])=>{Wt(t)?t.forEach(a=>a(...n)):t&&t(...n)},Ou=t=>t?Wt(t)?t.some(n=>n.length>1):t.length>1:!1;function Mm(t){const n={};for(const at in t)at in Ph||(n[at]=t[at]);if(t.css===!1)return n;const{name:a="v",type:s,duration:c,enterFromClass:i=`${a}-enter-from`,enterActiveClass:u=`${a}-enter-active`,enterToClass:d=`${a}-enter-to`,appearFromClass:f=i,appearActiveClass:m=u,appearToClass:_=d,leaveFromClass:v=`${a}-leave-from`,leaveActiveClass:M=`${a}-leave-active`,leaveToClass:A=`${a}-leave-to`}=t,P=Cm(c),S=P&&P[0],N=P&&P[1],{onBeforeEnter:C,onEnter:O,onEnterCancelled:j,onLeave:T,onLeaveCancelled:z,onBeforeAppear:W=C,onAppear:ot=O,onAppearCancelled:J=j}=n,rt=(at,bt,Lt)=>{Nr(at,bt?_:d),Nr(at,bt?m:u),Lt&&Lt()},ut=(at,bt)=>{at._isLeaving=!1,Nr(at,v),Nr(at,A),Nr(at,M),bt&&bt()},gt=at=>(bt,Lt)=>{const Et=at?ot:O,Ct=()=>rt(bt,at,Lt);jr(Et,[bt,Ct]),Au(()=>{Nr(bt,at?f:i),fr(bt,at?_:d),Ou(Et)||Ru(bt,s,S,Ct)})};return je(n,{onBeforeEnter(at){jr(C,[at]),fr(at,i),fr(at,u)},onBeforeAppear(at){jr(W,[at]),fr(at,f),fr(at,m)},onEnter:gt(!1),onAppear:gt(!0),onLeave(at,bt){at._isLeaving=!0;const Lt=()=>ut(at,bt);fr(at,v),Em(),fr(at,M),Au(()=>{at._isLeaving&&(Nr(at,v),fr(at,A),Ou(T)||Ru(at,s,N,Lt))}),jr(T,[at,Lt])},onEnterCancelled(at){rt(at,!1),jr(j,[at])},onAppearCancelled(at){rt(at,!0),jr(J,[at])},onLeaveCancelled(at){ut(at),jr(z,[at])}})}function Cm(t){if(t==null)return null;if(Oe(t))return[ua(t.enter),ua(t.leave)];{const n=ua(t);return[n,n]}}function ua(t){return pp(t)}function fr(t,n){n.split(/\s+/).forEach(a=>a&&t.classList.add(a)),(t._vtc||(t._vtc=new Set)).add(n)}function Nr(t,n){n.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const{_vtc:a}=t;a&&(a.delete(n),a.size||(t._vtc=void 0))}function Au(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Pm=0;function Ru(t,n,a,s){const c=t._endId=++Pm,i=()=>{c===t._endId&&s()};if(a)return setTimeout(i,a);const{type:u,timeout:d,propCount:f}=Sm(t,n);if(!u)return s();const m=u+"end";let _=0;const v=()=>{t.removeEventListener(m,M),i()},M=A=>{A.target===t&&++_>=f&&v()};setTimeout(()=>{_<f&&v()},d+1),t.addEventListener(m,M)}function Sm(t,n){const a=window.getComputedStyle(t),s=P=>(a[P]||"").split(", "),c=s(`${pr}Delay`),i=s(`${pr}Duration`),u=Bu(c,i),d=s(`${qi}Delay`),f=s(`${qi}Duration`),m=Bu(d,f);let _=null,v=0,M=0;n===pr?u>0&&(_=pr,v=u,M=i.length):n===qi?m>0&&(_=qi,v=m,M=f.length):(v=Math.max(u,m),_=v>0?u>m?pr:qi:null,M=_?_===pr?i.length:f.length:0);const A=_===pr&&/\b(transform|all)(,|$)/.test(s(`${pr}Property`).toString());return{type:_,timeout:v,propCount:M,hasTransform:A}}function Bu(t,n){for(;t.length<n.length;)t=t.concat(t);return Math.max(...n.map((a,s)=>Iu(a)+Iu(t[s])))}function Iu(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function Em(){return document.body.offsetHeight}const Du=t=>{const n=t.props["onUpdate:modelValue"]||!1;return Wt(n)?a=>Xo(n,a):n};function Tm(t){t.target.composing=!0}function zu(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const Om={created(t,{modifiers:{lazy:n,trim:a,number:s}},c){t._assign=Du(c);const i=s||c.props&&c.props.type==="number";hi(t,n?"change":"input",u=>{if(u.target.composing)return;let d=t.value;a&&(d=d.trim()),i&&(d=ba(d)),t._assign(d)}),a&&hi(t,"change",()=>{t.value=t.value.trim()}),n||(hi(t,"compositionstart",Tm),hi(t,"compositionend",zu),hi(t,"change",zu))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,modifiers:{lazy:a,trim:s,number:c}},i){if(t._assign=Du(i),t.composing||document.activeElement===t&&t.type!=="range"&&(a||s&&t.value.trim()===n||(c||t.type==="number")&&ba(t.value)===n))return;const u=n??"";t.value!==u&&(t.value=u)}},Am=["ctrl","shift","alt","meta"],Rm={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>Am.some(a=>t[`${a}Key`]&&!n.includes(a))},ps=(t,n)=>(a,...s)=>{for(let c=0;c<n.length;c++){const i=Rm[n[c]];if(i&&i(a,n))return}return t(a,...s)},Ts={beforeMount(t,{value:n},{transition:a}){t._vod=t.style.display==="none"?"":t.style.display,a&&n?a.beforeEnter(t):Ki(t,n)},mounted(t,{value:n},{transition:a}){a&&n&&a.enter(t)},updated(t,{value:n,oldValue:a},{transition:s}){!n!=!a&&(s?n?(s.beforeEnter(t),Ki(t,!0),s.enter(t)):s.leave(t,()=>{Ki(t,!1)}):Ki(t,n))},beforeUnmount(t,{value:n}){Ki(t,n)}};function Ki(t,n){t.style.display=n?t._vod:"none"}const Bm=je({patchProp:km},cm);let ca,ju=!1;function Im(){return ca=ju?ca:$f(Bm),ju=!0,ca}const Dm=(...t)=>{const n=Im().createApp(...t),{mount:a}=n;return n.mount=s=>{const c=zm(s);if(c)return a(c,!0,c instanceof SVGElement)},n};function zm(t){return De(t)?document.querySelector(t):t}let jm;function Nm(){return jm}function hl(t,n={}){const a=n.head||Nm();return a==null?void 0:a.push(t,n)}const Fm=["title"],Vm={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},Hm=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1),Gm=[Hm],$m={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},Um=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1),Zm=[Um],Sh={__name:"SwitchTheme",setup(t){const n={dark:"dark",light:"light"},a=Zt(null);window!==void 0&&(localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?a.value="dark":a.value="light",Ue(a,(c,i)=>{document.documentElement.classList.add(c),document.documentElement.classList.remove(i),localStorage.setItem("theme",c)},{immediate:!0}));const s=()=>{a.value===n.dark?a.value=n.light:a.value=n.dark};return(c,i)=>(H(),tt("button",{type:"button",onClick:s,title:a.value===n.light?"Change to dark mode":"Change to light mode"},[a.value===n.dark?(H(),tt("svg",Vm,Gm)):(H(),tt("svg",$m,Zm))],8,Fm))}},qm=["aria-expanded"],Km=X("span",{class:"sr-only"},"Open main menu",-1),Wm={key:0,class:"absolute top-full left-0 w-full z-50 bg-base-foreground text-base-content block shadow-md md:hidden print:hidden"},Jm={class:"font-normal container mx-auto"},Ym={class:"flex flex-col m-0 p-0 border-t border-base-border"},Xm={__name:"NavbarMobile",setup(t){const{header_links:n}={base_url:"/taxonpages/",hash_mode:!0,map_tile_server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",map_tile_attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://sfg.taxonworks.org/api/v1",project_token:"c5lh0vgnBGTOQDOSfRYC8g",copyright_image:null,copyright_image_link:null,copyright_text:"Copyright CC0",header_logo_url:null,header_logo_text:"My project",header_links:[{label:"Home",link:"/"},{label:"About",link:"/about"}],map_tiles:[{label:"OpenStreetMap",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}],metadata:[{name:"description",content:"TaxonPages is a tool to serve taxon pages."},{name:"keywords",content:"taxonpages, species, sfg"},{name:"robots",content:"follow"}],project_name:"My project",project_citation:null,project_url:null,project_authors:null},a=Zt(!1),s=()=>{a.value=!a.value};return(c,i)=>{const u=ft("IconClose"),d=ft("IconHamburger"),f=ft("router-link"),m=ft("ClientOnly"),_=ft("TrackerReport"),v=ft("AnimationOpacity");return H(),tt(Gt,null,[X("button",{type:"button",class:"inline-flex items-center p-2 z-50 ml-3 text-sm text-primary-content rounded-lg md:hidden print:hidden",title:"Menu","aria-controls":"mobile-menu","aria-expanded":a.value,onClick:s},[Km,a.value?(H(),Tt(u,{key:0})):(H(),Tt(d,{key:1,class:"w-6 h-6"}))],8,qm),st(v,null,{default:pt(()=>[a.value?(H(),tt("div",Wm,[X("nav",Jm,[X("ul",Ym,[(H(!0),tt(Gt,null,ye(Kt(n),(M,A)=>(H(),tt("li",{key:A,class:"border-b border-base-border"},[st(f,{to:M.link,class:"text-base-content w-full p-4 pt-3 pb-3 block box-border"},{default:pt(()=>[re(Qt(M.label),1)]),_:2},1032,["to"])]))),128)),X("li",null,[st(m,null,{default:pt(()=>[st(Sh,{class:"text-base-content w-full p-4 pt-3 pb-3 block box-border border-b border-b-base-border"})]),_:1})]),X("li",null,[st(_,{icon:"","button-class":"text-base-content w-full p-4 pt-3 pb-3 block box-border border-b border-b-base-border"})])])])])):Dt("",!0)]),_:1})],64)}}};function Qm(t){try{return new URL(t),!0}catch{return!1}}const tg={class:"relative bg-header px-2 sm:px-4 py-2.5 shadow-sm shadow-base-muted pl-4 pr-4 h-9 align-middle flex items-center bg-primary-color"},eg={class:"container flex flex-wrap justify-between items-center mx-auto font-medium text-secondary-content"},ng=["src","alt"],rg={class:"relative hidden md:flex items-center ml-auto"},ig={class:"text-sm leading-6 font-normal"},og={class:"flex space-x-8"},sg={class:"flex items-center border-l ml-6 pl-6 border-base-muted border-opacity-50"},ag={class:"flex items-center ml-2 border-base-muted"},lg={__name:"LayoutHeader",setup(t){const{header_links:n,header_logo_text:a,header_logo_url:s,base_url:c,project_name:i}={base_url:"/taxonpages/",hash_mode:!0,map_tile_server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",map_tile_attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://sfg.taxonworks.org/api/v1",project_token:"c5lh0vgnBGTOQDOSfRYC8g",copyright_image:null,copyright_image_link:null,copyright_text:"Copyright CC0",header_logo_url:null,header_logo_text:"My project",header_links:[{label:"Home",link:"/"},{label:"About",link:"/about"}],map_tiles:[{label:"OpenStreetMap",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}],metadata:[{name:"description",content:"TaxonPages is a tool to serve taxon pages."},{name:"keywords",content:"taxonpages, species, sfg"},{name:"robots",content:"follow"}],project_name:"My project",project_citation:null,project_url:null,project_authors:null},u=Qm(s)?s:(c+s).replace("//","/");return(d,f)=>{const m=ft("RouterLink"),_=ft("router-link"),v=ft("ClientOnly"),M=ft("TrackerReport");return H(),tt("header",tg,[X("div",eg,[st(m,{to:"/",class:"flex items-center text-primary-content"},{default:pt(()=>[Kt(s)?(H(),tt("img",{key:0,class:"mr-3 h-10",src:Kt(u),alt:Kt(a)},null,8,ng)):Dt("",!0),X("span",null,Qt(Kt(a)||Kt(i)),1)]),_:1}),st(Xm),X("div",rg,[X("nav",ig,[X("ul",og,[(H(!0),tt(Gt,null,ye(Kt(n),(A,P)=>(H(),tt("li",{key:P},[st(_,{to:A.link,class:"hover:text-primary-content text-primary-content"},{default:pt(()=>[re(Qt(A.label),1)]),_:2},1032,["to"])]))),128))])]),X("div",sg,[st(v,null,{default:pt(()=>[st(Sh,{class:"text-primary-content"})]),_:1})]),X("div",ag,[st(M,{icon:""})])])])])}}};/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const di=typeof window<"u";function ug(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Le=Object.assign;function ha(t,n){const a={};for(const s in n){const c=n[s];a[s]=An(c)?c.map(t):t(c)}return a}const ro=()=>{},An=Array.isArray,cg=/\/$/,hg=t=>t.replace(cg,"");function da(t,n,a="/"){let s,c={},i="",u="";const d=n.indexOf("#");let f=n.indexOf("?");return d<f&&d>=0&&(f=-1),f>-1&&(s=n.slice(0,f),i=n.slice(f+1,d>-1?d:n.length),c=t(i)),d>-1&&(s=s||n.slice(0,d),u=n.slice(d,n.length)),s=mg(s??n,a),{fullPath:s+(i&&"?")+i+u,path:s,query:c,hash:u}}function dg(t,n){const a=n.query?t(n.query):"";return n.path+(a&&"?")+a+(n.hash||"")}function Nu(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function pg(t,n,a){const s=n.matched.length-1,c=a.matched.length-1;return s>-1&&s===c&&bi(n.matched[s],a.matched[c])&&Eh(n.params,a.params)&&t(n.query)===t(a.query)&&n.hash===a.hash}function bi(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function Eh(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const a in t)if(!fg(t[a],n[a]))return!1;return!0}function fg(t,n){return An(t)?Fu(t,n):An(n)?Fu(n,t):t===n}function Fu(t,n){return An(n)?t.length===n.length&&t.every((a,s)=>a===n[s]):t.length===1&&t[0]===n}function mg(t,n){if(t.startsWith("/"))return t;if(!t)return n;const a=n.split("/"),s=t.split("/"),c=s[s.length-1];(c===".."||c===".")&&s.push("");let i=a.length-1,u,d;for(u=0;u<s.length;u++)if(d=s[u],d!==".")if(d==="..")i>1&&i--;else break;return a.slice(0,i).join("/")+"/"+s.slice(u-(u===s.length?1:0)).join("/")}var mo;(function(t){t.pop="pop",t.push="push"})(mo||(mo={}));var io;(function(t){t.back="back",t.forward="forward",t.unknown=""})(io||(io={}));function gg(t){if(!t)if(di){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),hg(t)}const _g=/^[^#]+#/;function yg(t,n){return t.replace(_g,"#")+n}function vg(t,n){const a=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:n.behavior,left:s.left-a.left-(n.left||0),top:s.top-a.top-(n.top||0)}}const Os=()=>({left:window.pageXOffset,top:window.pageYOffset});function bg(t){let n;if("el"in t){const a=t.el,s=typeof a=="string"&&a.startsWith("#"),c=typeof a=="string"?s?document.getElementById(a.slice(1)):document.querySelector(a):a;if(!c)return;n=vg(c,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.pageXOffset,n.top!=null?n.top:window.pageYOffset)}function Vu(t,n){return(history.state?history.state.position-n:-1)+t}const Ra=new Map;function wg(t,n){Ra.set(t,n)}function xg(t){const n=Ra.get(t);return Ra.delete(t),n}let kg=()=>location.protocol+"//"+location.host;function Th(t,n){const{pathname:a,search:s,hash:c}=n,i=t.indexOf("#");if(i>-1){let d=c.includes(t.slice(i))?t.slice(i).length:1,f=c.slice(d);return f[0]!=="/"&&(f="/"+f),Nu(f,"")}return Nu(a,t)+s+c}function Lg(t,n,a,s){let c=[],i=[],u=null;const d=({state:M})=>{const A=Th(t,location),P=a.value,S=n.value;let N=0;if(M){if(a.value=A,n.value=M,u&&u===P){u=null;return}N=S?M.position-S.position:0}else s(A);c.forEach(C=>{C(a.value,P,{delta:N,type:mo.pop,direction:N?N>0?io.forward:io.back:io.unknown})})};function f(){u=a.value}function m(M){c.push(M);const A=()=>{const P=c.indexOf(M);P>-1&&c.splice(P,1)};return i.push(A),A}function _(){const{history:M}=window;M.state&&M.replaceState(Le({},M.state,{scroll:Os()}),"")}function v(){for(const M of i)M();i=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",_)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",_,{passive:!0}),{pauseListeners:f,listen:m,destroy:v}}function Hu(t,n,a,s=!1,c=!1){return{back:t,current:n,forward:a,replaced:s,position:window.history.length,scroll:c?Os():null}}function Mg(t){const{history:n,location:a}=window,s={value:Th(t,a)},c={value:n.state};c.value||i(s.value,{back:null,current:s.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function i(f,m,_){const v=t.indexOf("#"),M=v>-1?(a.host&&document.querySelector("base")?t:t.slice(v))+f:kg()+t+f;try{n[_?"replaceState":"pushState"](m,"",M),c.value=m}catch(A){console.error(A),a[_?"replace":"assign"](M)}}function u(f,m){const _=Le({},n.state,Hu(c.value.back,f,c.value.forward,!0),m,{position:c.value.position});i(f,_,!0),s.value=f}function d(f,m){const _=Le({},c.value,n.state,{forward:f,scroll:Os()});i(_.current,_,!0);const v=Le({},Hu(s.value,f,null),{position:_.position+1},m);i(f,v,!1),s.value=f}return{location:s,state:c,push:d,replace:u}}function Oh(t){t=gg(t);const n=Mg(t),a=Lg(t,n.state,n.location,n.replace);function s(i,u=!0){u||a.pauseListeners(),history.go(i)}const c=Le({location:"",base:t,go:s,createHref:yg.bind(null,t)},n,a);return Object.defineProperty(c,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(c,"state",{enumerable:!0,get:()=>n.state.value}),c}function Cg(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),Oh(t)}function Pg(t){return typeof t=="string"||t&&typeof t=="object"}function Ah(t){return typeof t=="string"||typeof t=="symbol"}const mr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Rh=Symbol("");var Gu;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Gu||(Gu={}));function wi(t,n){return Le(new Error,{type:t,[Rh]:!0},n)}function Qn(t,n){return t instanceof Error&&Rh in t&&(n==null||!!(t.type&n))}const $u="[^/]+?",Sg={sensitive:!1,strict:!1,start:!0,end:!0},Eg=/[.+*?^${}()[\]/\\]/g;function Tg(t,n){const a=Le({},Sg,n),s=[];let c=a.start?"^":"";const i=[];for(const m of t){const _=m.length?[]:[90];a.strict&&!m.length&&(c+="/");for(let v=0;v<m.length;v++){const M=m[v];let A=40+(a.sensitive?.25:0);if(M.type===0)v||(c+="/"),c+=M.value.replace(Eg,"\\$&"),A+=40;else if(M.type===1){const{value:P,repeatable:S,optional:N,regexp:C}=M;i.push({name:P,repeatable:S,optional:N});const O=C||$u;if(O!==$u){A+=10;try{new RegExp(`(${O})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${P}" (${O}): `+T.message)}}let j=S?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;v||(j=N&&m.length<2?`(?:/${j})`:"/"+j),N&&(j+="?"),c+=j,A+=20,N&&(A+=-8),S&&(A+=-20),O===".*"&&(A+=-50)}_.push(A)}s.push(_)}if(a.strict&&a.end){const m=s.length-1;s[m][s[m].length-1]+=.7000000000000001}a.strict||(c+="/?"),a.end?c+="$":a.strict&&(c+="(?:/|$)");const u=new RegExp(c,a.sensitive?"":"i");function d(m){const _=m.match(u),v={};if(!_)return null;for(let M=1;M<_.length;M++){const A=_[M]||"",P=i[M-1];v[P.name]=A&&P.repeatable?A.split("/"):A}return v}function f(m){let _="",v=!1;for(const M of t){(!v||!_.endsWith("/"))&&(_+="/"),v=!1;for(const A of M)if(A.type===0)_+=A.value;else if(A.type===1){const{value:P,repeatable:S,optional:N}=A,C=P in m?m[P]:"";if(An(C)&&!S)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const O=An(C)?C.join("/"):C;if(!O)if(N)M.length<2&&(_.endsWith("/")?_=_.slice(0,-1):v=!0);else throw new Error(`Missing required param "${P}"`);_+=O}}return _||"/"}return{re:u,score:s,keys:i,parse:d,stringify:f}}function Og(t,n){let a=0;for(;a<t.length&&a<n.length;){const s=n[a]-t[a];if(s)return s;a++}return t.length<n.length?t.length===1&&t[0]===40+40?-1:1:t.length>n.length?n.length===1&&n[0]===40+40?1:-1:0}function Ag(t,n){let a=0;const s=t.score,c=n.score;for(;a<s.length&&a<c.length;){const i=Og(s[a],c[a]);if(i)return i;a++}if(Math.abs(c.length-s.length)===1){if(Uu(s))return 1;if(Uu(c))return-1}return c.length-s.length}function Uu(t){const n=t[t.length-1];return t.length>0&&n[n.length-1]<0}const Rg={type:0,value:""},Bg=/[a-zA-Z0-9_]/;function Ig(t){if(!t)return[[]];if(t==="/")return[[Rg]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function n(A){throw new Error(`ERR (${a})/"${m}": ${A}`)}let a=0,s=a;const c=[];let i;function u(){i&&c.push(i),i=[]}let d=0,f,m="",_="";function v(){m&&(a===0?i.push({type:0,value:m}):a===1||a===2||a===3?(i.length>1&&(f==="*"||f==="+")&&n(`A repeatable param (${m}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:m,regexp:_,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):n("Invalid state to consume buffer"),m="")}function M(){m+=f}for(;d<t.length;){if(f=t[d++],f==="\\"&&a!==2){s=a,a=4;continue}switch(a){case 0:f==="/"?(m&&v(),u()):f===":"?(v(),a=1):M();break;case 4:M(),a=s;break;case 1:f==="("?a=2:Bg.test(f)?M():(v(),a=0,f!=="*"&&f!=="?"&&f!=="+"&&d--);break;case 2:f===")"?_[_.length-1]=="\\"?_=_.slice(0,-1)+f:a=3:_+=f;break;case 3:v(),a=0,f!=="*"&&f!=="?"&&f!=="+"&&d--,_="";break;default:n("Unknown state");break}}return a===2&&n(`Unfinished custom RegExp for param "${m}"`),v(),u(),c}function Dg(t,n,a){const s=Tg(Ig(t.path),a),c=Le(s,{record:t,parent:n,children:[],alias:[]});return n&&!c.record.aliasOf==!n.record.aliasOf&&n.children.push(c),c}function zg(t,n){const a=[],s=new Map;n=Ku({strict:!1,end:!0,sensitive:!1},n);function c(_){return s.get(_)}function i(_,v,M){const A=!M,P=jg(_);P.aliasOf=M&&M.record;const S=Ku(n,_),N=[P];if("alias"in _){const j=typeof _.alias=="string"?[_.alias]:_.alias;for(const T of j)N.push(Le({},P,{components:M?M.record.components:P.components,path:T,aliasOf:M?M.record:P}))}let C,O;for(const j of N){const{path:T}=j;if(v&&T[0]!=="/"){const z=v.record.path,W=z[z.length-1]==="/"?"":"/";j.path=v.record.path+(T&&W+T)}if(C=Dg(j,v,S),M?M.alias.push(C):(O=O||C,O!==C&&O.alias.push(C),A&&_.name&&!qu(C)&&u(_.name)),P.children){const z=P.children;for(let W=0;W<z.length;W++)i(z[W],C,M&&M.children[W])}M=M||C,(C.record.components&&Object.keys(C.record.components).length||C.record.name||C.record.redirect)&&f(C)}return O?()=>{u(O)}:ro}function u(_){if(Ah(_)){const v=s.get(_);v&&(s.delete(_),a.splice(a.indexOf(v),1),v.children.forEach(u),v.alias.forEach(u))}else{const v=a.indexOf(_);v>-1&&(a.splice(v,1),_.record.name&&s.delete(_.record.name),_.children.forEach(u),_.alias.forEach(u))}}function d(){return a}function f(_){let v=0;for(;v<a.length&&Ag(_,a[v])>=0&&(_.record.path!==a[v].record.path||!Bh(_,a[v]));)v++;a.splice(v,0,_),_.record.name&&!qu(_)&&s.set(_.record.name,_)}function m(_,v){let M,A={},P,S;if("name"in _&&_.name){if(M=s.get(_.name),!M)throw wi(1,{location:_});S=M.record.name,A=Le(Zu(v.params,M.keys.filter(O=>!O.optional).map(O=>O.name)),_.params&&Zu(_.params,M.keys.map(O=>O.name))),P=M.stringify(A)}else if("path"in _)P=_.path,M=a.find(O=>O.re.test(P)),M&&(A=M.parse(P),S=M.record.name);else{if(M=v.name?s.get(v.name):a.find(O=>O.re.test(v.path)),!M)throw wi(1,{location:_,currentLocation:v});S=M.record.name,A=Le({},v.params,_.params),P=M.stringify(A)}const N=[];let C=M;for(;C;)N.unshift(C.record),C=C.parent;return{name:S,path:P,params:A,matched:N,meta:Fg(N)}}return t.forEach(_=>i(_)),{addRoute:i,resolve:m,removeRoute:u,getRoutes:d,getRecordMatcher:c}}function Zu(t,n){const a={};for(const s of n)s in t&&(a[s]=t[s]);return a}function jg(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Ng(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Ng(t){const n={},a=t.props||!1;if("component"in t)n.default=a;else for(const s in t.components)n[s]=typeof a=="object"?a[s]:a;return n}function qu(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Fg(t){return t.reduce((n,a)=>Le(n,a.meta),{})}function Ku(t,n){const a={};for(const s in t)a[s]=s in n?n[s]:t[s];return a}function Bh(t,n){return n.children.some(a=>a===t||Bh(t,a))}const Ih=/#/g,Vg=/&/g,Hg=/\//g,Gg=/=/g,$g=/\?/g,Dh=/\+/g,Ug=/%5B/g,Zg=/%5D/g,zh=/%5E/g,qg=/%60/g,jh=/%7B/g,Kg=/%7C/g,Nh=/%7D/g,Wg=/%20/g;function dl(t){return encodeURI(""+t).replace(Kg,"|").replace(Ug,"[").replace(Zg,"]")}function Jg(t){return dl(t).replace(jh,"{").replace(Nh,"}").replace(zh,"^")}function Ba(t){return dl(t).replace(Dh,"%2B").replace(Wg,"+").replace(Ih,"%23").replace(Vg,"%26").replace(qg,"`").replace(jh,"{").replace(Nh,"}").replace(zh,"^")}function Yg(t){return Ba(t).replace(Gg,"%3D")}function Xg(t){return dl(t).replace(Ih,"%23").replace($g,"%3F")}function Qg(t){return t==null?"":Xg(t).replace(Hg,"%2F")}function fs(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function t_(t){const n={};if(t===""||t==="?")return n;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let c=0;c<s.length;++c){const i=s[c].replace(Dh," "),u=i.indexOf("="),d=fs(u<0?i:i.slice(0,u)),f=u<0?null:fs(i.slice(u+1));if(d in n){let m=n[d];An(m)||(m=n[d]=[m]),m.push(f)}else n[d]=f}return n}function Wu(t){let n="";for(let a in t){const s=t[a];if(a=Yg(a),s==null){s!==void 0&&(n+=(n.length?"&":"")+a);continue}(An(s)?s.map(i=>i&&Ba(i)):[s&&Ba(s)]).forEach(i=>{i!==void 0&&(n+=(n.length?"&":"")+a,i!=null&&(n+="="+i))})}return n}function e_(t){const n={};for(const a in t){const s=t[a];s!==void 0&&(n[a]=An(s)?s.map(c=>c==null?null:""+c):s==null?s:""+s)}return n}const n_=Symbol(""),Ju=Symbol(""),As=Symbol(""),pl=Symbol(""),Ia=Symbol("");function Wi(){let t=[];function n(s){return t.push(s),()=>{const c=t.indexOf(s);c>-1&&t.splice(c,1)}}function a(){t=[]}return{add:n,list:()=>t.slice(),reset:a}}function vr(t,n,a,s,c){const i=s&&(s.enterCallbacks[c]=s.enterCallbacks[c]||[]);return()=>new Promise((u,d)=>{const f=v=>{v===!1?d(wi(4,{from:a,to:n})):v instanceof Error?d(v):Pg(v)?d(wi(2,{from:n,to:v})):(i&&s.enterCallbacks[c]===i&&typeof v=="function"&&i.push(v),u())},m=t.call(s&&s.instances[c],n,a,f);let _=Promise.resolve(m);t.length<3&&(_=_.then(f)),_.catch(v=>d(v))})}function pa(t,n,a,s){const c=[];for(const i of t)for(const u in i.components){let d=i.components[u];if(!(n!=="beforeRouteEnter"&&!i.instances[u]))if(r_(d)){const m=(d.__vccOpts||d)[n];m&&c.push(vr(m,a,s,i,u))}else{let f=d();c.push(()=>f.then(m=>{if(!m)return Promise.reject(new Error(`Couldn't resolve component "${u}" at "${i.path}"`));const _=ug(m)?m.default:m;i.components[u]=_;const M=(_.__vccOpts||_)[n];return M&&vr(M,a,s,i,u)()}))}}return c}function r_(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Yu(t){const n=xn(As),a=xn(pl),s=te(()=>n.resolve(Kt(t.to))),c=te(()=>{const{matched:f}=s.value,{length:m}=f,_=f[m-1],v=a.matched;if(!_||!v.length)return-1;const M=v.findIndex(bi.bind(null,_));if(M>-1)return M;const A=Xu(f[m-2]);return m>1&&Xu(_)===A&&v[v.length-1].path!==A?v.findIndex(bi.bind(null,f[m-2])):M}),i=te(()=>c.value>-1&&a_(a.params,s.value.params)),u=te(()=>c.value>-1&&c.value===a.matched.length-1&&Eh(a.params,s.value.params));function d(f={}){return s_(f)?n[Kt(t.replace)?"replace":"push"](Kt(t.to)).catch(ro):Promise.resolve()}return{route:s,href:te(()=>s.value.href),isActive:i,isExactActive:u,navigate:d}}const i_=sh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Yu,setup(t,{slots:n}){const a=vo(Yu(t)),{options:s}=xn(As),c=te(()=>({[Qu(t.activeClass,s.linkActiveClass,"router-link-active")]:a.isActive,[Qu(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:a.isExactActive}));return()=>{const i=n.default&&n.default(a);return t.custom?i:cl("a",{"aria-current":a.isExactActive?t.ariaCurrentValue:null,href:a.href,onClick:a.navigate,class:c.value},i)}}}),o_=i_;function s_(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function a_(t,n){for(const a in n){const s=n[a],c=t[a];if(typeof s=="string"){if(s!==c)return!1}else if(!An(c)||c.length!==s.length||s.some((i,u)=>i!==c[u]))return!1}return!0}function Xu(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Qu=(t,n,a)=>t??n??a,l_=sh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:n,slots:a}){const s=xn(Ia),c=te(()=>t.route||s.value),i=xn(Ju,0),u=te(()=>{let m=Kt(i);const{matched:_}=c.value;let v;for(;(v=_[m])&&!v.components;)m++;return m}),d=te(()=>c.value.matched[u.value]);Qo(Ju,te(()=>u.value+1)),Qo(n_,d),Qo(Ia,c);const f=Zt();return Ue(()=>[f.value,d.value,t.name],([m,_,v],[M,A,P])=>{_&&(_.instances[v]=m,A&&A!==_&&m&&m===M&&(_.leaveGuards.size||(_.leaveGuards=A.leaveGuards),_.updateGuards.size||(_.updateGuards=A.updateGuards))),m&&_&&(!A||!bi(_,A)||!M)&&(_.enterCallbacks[v]||[]).forEach(S=>S(m))},{flush:"post"}),()=>{const m=c.value,_=t.name,v=d.value,M=v&&v.components[_];if(!M)return tc(a.default,{Component:M,route:m});const A=v.props[_],P=A?A===!0?m.params:typeof A=="function"?A(m):A:null,N=cl(M,Le({},P,n,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(v.instances[_]=null)},ref:f}));return tc(a.default,{Component:N,route:m})||N}}});function tc(t,n){if(!t)return null;const a=t(n);return a.length===1?a[0]:a}const u_=l_;function c_(t){const n=zg(t.routes,t),a=t.parseQuery||t_,s=t.stringifyQuery||Wu,c=t.history,i=Wi(),u=Wi(),d=Wi(),f=Wp(mr);let m=mr;di&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const _=ha.bind(null,dt=>""+dt),v=ha.bind(null,Qg),M=ha.bind(null,fs);function A(dt,Pt){let St,jt;return Ah(dt)?(St=n.getRecordMatcher(dt),jt=Pt):jt=dt,n.addRoute(jt,St)}function P(dt){const Pt=n.getRecordMatcher(dt);Pt&&n.removeRoute(Pt)}function S(){return n.getRoutes().map(dt=>dt.record)}function N(dt){return!!n.getRecordMatcher(dt)}function C(dt,Pt){if(Pt=Le({},Pt||f.value),typeof dt=="string"){const Y=da(a,dt,Pt.path),ht=n.resolve({path:Y.path},Pt),_t=c.createHref(Y.fullPath);return Le(Y,ht,{params:M(ht.params),hash:fs(Y.hash),redirectedFrom:void 0,href:_t})}let St;if("path"in dt)St=Le({},dt,{path:da(a,dt.path,Pt.path).path});else{const Y=Le({},dt.params);for(const ht in Y)Y[ht]==null&&delete Y[ht];St=Le({},dt,{params:v(Y)}),Pt.params=v(Pt.params)}const jt=n.resolve(St,Pt),ue=dt.hash||"";jt.params=_(M(jt.params));const G=dg(s,Le({},dt,{hash:Jg(ue),path:jt.path})),K=c.createHref(G);return Le({fullPath:G,hash:ue,query:s===Wu?e_(dt.query):dt.query||{}},jt,{redirectedFrom:void 0,href:K})}function O(dt){return typeof dt=="string"?da(a,dt,f.value.path):Le({},dt)}function j(dt,Pt){if(m!==dt)return wi(8,{from:Pt,to:dt})}function T(dt){return ot(dt)}function z(dt){return T(Le(O(dt),{replace:!0}))}function W(dt){const Pt=dt.matched[dt.matched.length-1];if(Pt&&Pt.redirect){const{redirect:St}=Pt;let jt=typeof St=="function"?St(dt):St;return typeof jt=="string"&&(jt=jt.includes("?")||jt.includes("#")?jt=O(jt):{path:jt},jt.params={}),Le({query:dt.query,hash:dt.hash,params:"path"in jt?{}:dt.params},jt)}}function ot(dt,Pt){const St=m=C(dt),jt=f.value,ue=dt.state,G=dt.force,K=dt.replace===!0,Y=W(St);if(Y)return ot(Le(O(Y),{state:typeof Y=="object"?Le({},ue,Y.state):ue,force:G,replace:K}),Pt||St);const ht=St;ht.redirectedFrom=Pt;let _t;return!G&&pg(s,jt,St)&&(_t=wi(16,{to:ht,from:jt}),Bt(jt,jt,!0,!1)),(_t?Promise.resolve(_t):ut(ht,jt)).catch(xt=>Qn(xt)?Qn(xt,2)?xt:zt(xt):wt(xt,ht,jt)).then(xt=>{if(xt){if(Qn(xt,2))return ot(Le({replace:K},O(xt.to),{state:typeof xt.to=="object"?Le({},ue,xt.to.state):ue,force:G}),Pt||ht)}else xt=at(ht,jt,!0,K,ue);return gt(ht,jt,xt),xt})}function J(dt,Pt){const St=j(dt,Pt);return St?Promise.reject(St):Promise.resolve()}function rt(dt){const Pt=fe.values().next().value;return Pt&&typeof Pt.runWithContext=="function"?Pt.runWithContext(dt):dt()}function ut(dt,Pt){let St;const[jt,ue,G]=h_(dt,Pt);St=pa(jt.reverse(),"beforeRouteLeave",dt,Pt);for(const Y of jt)Y.leaveGuards.forEach(ht=>{St.push(vr(ht,dt,Pt))});const K=J.bind(null,dt,Pt);return St.push(K),Ft(St).then(()=>{St=[];for(const Y of i.list())St.push(vr(Y,dt,Pt));return St.push(K),Ft(St)}).then(()=>{St=pa(ue,"beforeRouteUpdate",dt,Pt);for(const Y of ue)Y.updateGuards.forEach(ht=>{St.push(vr(ht,dt,Pt))});return St.push(K),Ft(St)}).then(()=>{St=[];for(const Y of G)if(Y.beforeEnter)if(An(Y.beforeEnter))for(const ht of Y.beforeEnter)St.push(vr(ht,dt,Pt));else St.push(vr(Y.beforeEnter,dt,Pt));return St.push(K),Ft(St)}).then(()=>(dt.matched.forEach(Y=>Y.enterCallbacks={}),St=pa(G,"beforeRouteEnter",dt,Pt),St.push(K),Ft(St))).then(()=>{St=[];for(const Y of u.list())St.push(vr(Y,dt,Pt));return St.push(K),Ft(St)}).catch(Y=>Qn(Y,8)?Y:Promise.reject(Y))}function gt(dt,Pt,St){d.list().forEach(jt=>rt(()=>jt(dt,Pt,St)))}function at(dt,Pt,St,jt,ue){const G=j(dt,Pt);if(G)return G;const K=Pt===mr,Y=di?history.state:{};St&&(jt||K?c.replace(dt.fullPath,Le({scroll:K&&Y&&Y.scroll},ue)):c.push(dt.fullPath,ue)),f.value=dt,Bt(dt,Pt,St,K),zt()}let bt;function Lt(){bt||(bt=c.listen((dt,Pt,St)=>{if(!le.listening)return;const jt=C(dt),ue=W(jt);if(ue){ot(Le(ue,{replace:!0}),jt).catch(ro);return}m=jt;const G=f.value;di&&wg(Vu(G.fullPath,St.delta),Os()),ut(jt,G).catch(K=>Qn(K,12)?K:Qn(K,2)?(ot(K.to,jt).then(Y=>{Qn(Y,20)&&!St.delta&&St.type===mo.pop&&c.go(-1,!1)}).catch(ro),Promise.reject()):(St.delta&&c.go(-St.delta,!1),wt(K,jt,G))).then(K=>{K=K||at(jt,G,!1),K&&(St.delta&&!Qn(K,8)?c.go(-St.delta,!1):St.type===mo.pop&&Qn(K,20)&&c.go(-1,!1)),gt(jt,G,K)}).catch(ro)}))}let Et=Wi(),Ct=Wi(),Ht;function wt(dt,Pt,St){zt(dt);const jt=Ct.list();return jt.length?jt.forEach(ue=>ue(dt,Pt,St)):console.error(dt),Promise.reject(dt)}function pe(){return Ht&&f.value!==mr?Promise.resolve():new Promise((dt,Pt)=>{Et.add([dt,Pt])})}function zt(dt){return Ht||(Ht=!dt,Lt(),Et.list().forEach(([Pt,St])=>dt?St(dt):Pt()),Et.reset()),dt}function Bt(dt,Pt,St,jt){const{scrollBehavior:ue}=t;if(!di||!ue)return Promise.resolve();const G=!St&&xg(Vu(dt.fullPath,0))||(jt||!St)&&history.state&&history.state.scroll||null;return xs().then(()=>ue(dt,Pt,G)).then(K=>K&&bg(K)).catch(K=>wt(K,dt,Pt))}const $t=dt=>c.go(dt);let Me;const fe=new Set,le={currentRoute:f,listening:!0,addRoute:A,removeRoute:P,hasRoute:N,getRoutes:S,resolve:C,options:t,push:T,replace:z,go:$t,back:()=>$t(-1),forward:()=>$t(1),beforeEach:i.add,beforeResolve:u.add,afterEach:d.add,onError:Ct.add,isReady:pe,install(dt){const Pt=this;dt.component("RouterLink",o_),dt.component("RouterView",u_),dt.config.globalProperties.$router=Pt,Object.defineProperty(dt.config.globalProperties,"$route",{enumerable:!0,get:()=>Kt(f)}),di&&!Me&&f.value===mr&&(Me=!0,T(c.location).catch(ue=>{}));const St={};for(const ue in mr)Object.defineProperty(St,ue,{get:()=>f.value[ue],enumerable:!0});dt.provide(As,Pt),dt.provide(pl,Vc(St)),dt.provide(Ia,f);const jt=dt.unmount;fe.add(dt),dt.unmount=function(){fe.delete(dt),fe.size<1&&(m=mr,bt&&bt(),bt=null,f.value=mr,Me=!1,Ht=!1),jt()}}};function Ft(dt){return dt.reduce((Pt,St)=>Pt.then(()=>rt(St)),Promise.resolve())}return le}function h_(t,n){const a=[],s=[],c=[],i=Math.max(n.matched.length,t.matched.length);for(let u=0;u<i;u++){const d=n.matched[u];d&&(t.matched.find(m=>bi(m,d))?s.push(d):a.push(d));const f=t.matched[u];f&&(n.matched.find(m=>bi(m,f))||c.push(f))}return[a,s,c]}function Rs(){return xn(As)}function Fh(){return xn(pl)}var d_=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Vh;const Bs=t=>Vh=t,Hh=Symbol();function Da(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var oo;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(oo||(oo={}));function p_(){const t=Ec(!0),n=t.run(()=>Zt({}));let a=[],s=[];const c=bs({install(i){Bs(c),c._a=i,i.provide(Hh,c),i.config.globalProperties.$pinia=c,s.forEach(u=>a.push(u)),s=[]},use(i){return!this._a&&!d_?s.push(i):a.push(i),this},_p:a,_a:null,_e:t,_s:new Map,state:n});return c}const Gh=()=>{};function ec(t,n,a,s=Gh){t.push(n);const c=()=>{const i=t.indexOf(n);i>-1&&(t.splice(i,1),s())};return!a&&Tc()&&wp(c),c}function ci(t,...n){t.slice().forEach(a=>{a(...n)})}const f_=t=>t();function za(t,n){t instanceof Map&&n instanceof Map&&n.forEach((a,s)=>t.set(s,a)),t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const a in n){if(!n.hasOwnProperty(a))continue;const s=n[a],c=t[a];Da(c)&&Da(s)&&t.hasOwnProperty(a)&&!Ie(s)&&!wr(s)?t[a]=za(c,s):t[a]=s}return t}const m_=Symbol();function g_(t){return!Da(t)||!t.hasOwnProperty(m_)}const{assign:_r}=Object;function __(t){return!!(Ie(t)&&t.effect)}function y_(t,n,a,s){const{state:c,actions:i,getters:u}=n,d=a.state.value[t];let f;function m(){d||(a.state.value[t]=c?c():{});const _=Xp(a.state.value[t]);return _r(_,i,Object.keys(u||{}).reduce((v,M)=>(v[M]=bs(te(()=>{Bs(a);const A=a._s.get(t);return u[M].call(A,A)})),v),{}))}return f=$h(t,m,n,a,s,!0),f}function $h(t,n,a={},s,c,i){let u;const d=_r({actions:{}},a),f={deep:!0};let m,_,v=[],M=[],A;const P=s.state.value[t];!i&&!P&&(s.state.value[t]={}),Zt({});let S;function N(J){let rt;m=_=!1,typeof J=="function"?(J(s.state.value[t]),rt={type:oo.patchFunction,storeId:t,events:A}):(za(s.state.value[t],J),rt={type:oo.patchObject,payload:J,storeId:t,events:A});const ut=S=Symbol();xs().then(()=>{S===ut&&(m=!0)}),_=!0,ci(v,rt,s.state.value[t])}const C=i?function(){const{state:rt}=a,ut=rt?rt():{};this.$patch(gt=>{_r(gt,ut)})}:Gh;function O(){u.stop(),v=[],M=[],s._s.delete(t)}function j(J,rt){return function(){Bs(s);const ut=Array.from(arguments),gt=[],at=[];function bt(Ct){gt.push(Ct)}function Lt(Ct){at.push(Ct)}ci(M,{args:ut,name:J,store:z,after:bt,onError:Lt});let Et;try{Et=rt.apply(this&&this.$id===t?this:z,ut)}catch(Ct){throw ci(at,Ct),Ct}return Et instanceof Promise?Et.then(Ct=>(ci(gt,Ct),Ct)).catch(Ct=>(ci(at,Ct),Promise.reject(Ct))):(ci(gt,Et),Et)}}const T={_p:s,$id:t,$onAction:ec.bind(null,M),$patch:N,$reset:C,$subscribe(J,rt={}){const ut=ec(v,J,rt.detached,()=>gt()),gt=u.run(()=>Ue(()=>s.state.value[t],at=>{(rt.flush==="sync"?_:m)&&J({storeId:t,type:oo.direct,events:A},at)},_r({},f,rt)));return ut},$dispose:O},z=vo(T);s._s.set(t,z);const W=s._a&&s._a.runWithContext||f_,ot=s._e.run(()=>(u=Ec(),W(()=>u.run(n))));for(const J in ot){const rt=ot[J];if(Ie(rt)&&!__(rt)||wr(rt))i||(P&&g_(rt)&&(Ie(rt)?rt.value=P[J]:za(rt,P[J])),s.state.value[t][J]=rt);else if(typeof rt=="function"){const ut=j(J,rt);ot[J]=ut,d.actions[J]=rt}}return _r(z,ot),_r(me(z),ot),Object.defineProperty(z,"$state",{get:()=>s.state.value[t],set:J=>{N(rt=>{_r(rt,J)})}}),s._p.forEach(J=>{_r(z,u.run(()=>J({store:z,app:s._a,pinia:s,options:d})))}),P&&i&&a.hydrate&&a.hydrate(z.$state,P),m=!0,_=!0,z}function wo(t,n,a){let s,c;const i=typeof n=="function";typeof t=="string"?(s=t,c=i?a:n):(c=t,s=t.id);function u(d,f){const m=zf();return d=d||(m?xn(Hh,null):null),d&&Bs(d),d=Vh,d._s.has(s)||(i?$h(s,n,c,d):y_(s,c,d)),d._s.get(s)}return u.$id=s,u}const fl=wo("footerStore",{state:()=>({nextAuthor:""}),actions:{async setNextAuthorText(t){this.nextAuthor=t}}}),v_={key:0},b_={__name:"FooterAnalytics",setup(t){const n={analytics:"Google Analytics",gtm:"Google Tag Manager",pixel:"Facebook Pixel",retargeting:"VK Retargeting",linkedin:"Linkedin Insight",tongji:"Baidu Tongji",metrica:"Yandex Metrica",microsoft:"Microsoft Analytics",hotjar:"Hotjar Analytics",fullStory:"Full story Analytics",unbounce:"Unbounce conversion analytics",tiktok:"TikTok Pixel Analytics"},s=Object.keys({base_url:"/taxonpages/",hash_mode:!0,map_tile_server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",map_tile_attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://sfg.taxonworks.org/api/v1",project_token:"c5lh0vgnBGTOQDOSfRYC8g",copyright_image:null,copyright_image_link:null,copyright_text:"Copyright CC0",header_logo_url:null,header_logo_text:"My project",header_links:[{label:"Home",link:"/"},{label:"About",link:"/about"}],map_tiles:[{label:"OpenStreetMap",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}],metadata:[{name:"description",content:"TaxonPages is a tool to serve taxon pages."},{name:"keywords",content:"taxonpages, species, sfg"},{name:"robots",content:"follow"}],project_name:"My project",project_citation:null,project_url:null,project_authors:null}.analytics_services||{}).map(c=>n[c]).filter(Boolean).join("; ");return(c,i)=>Kt(s)?(H(),tt("span",v_,"This site uses "+Qt(Kt(s))+".",1)):Dt("",!0)}},w_={class:"footer text-white bottom-0 border-gray-200 bg-zinc-800 pl-4 pr-4"},x_={class:"container mx-auto text-sm pt-2 pb-4"},k_={class:"pt-4 pb-2 break-words"},L_=["innerHTML"],M_={key:0},C_=["href"],P_={class:"flex items-center text-xs gap-2"},S_=["src"],E_=X("hr",{class:"mt-3 mb-3 border-gray-500"},null,-1),T_={class:"flex flex-col sm:flex-row justify-between gap-4"},O_={class:"[&>*:not(:last-child)]:after:content-['|'] [&>*:not(:last-child)]:after:mx-1"},A_=X("span",null,[re(" Data provided by "),X("a",{class:"text-slate-400 hover:text-slate-500 dark:hover:text-slate-300 font-medium",target:"_blank",href:"https://taxonworks.org/"}," TaxonWorks ")],-1),R_=X("span",null,[re(" Pages by "),X("a",{class:"text-slate-400 hover:text-slate-500 dark:hover:text-slate-300 font-medium",target:"_blank",href:"https://github.com/SpeciesFileGroup/taxonpages"}," TaxonPages ")],-1),B_=X("span",null,[re(" Support (Services) by "),X("a",{class:"text-slate-400 hover:text-slate-500 dark:hover:text-slate-300 font-medium",target:"_blank",href:"https://speciesfilegroup.org"}," Species File Group ")],-1),I_={__name:"LayoutFooter",setup(t){const{project_authors:n,project_citation:a,project_url:s,copyright_text:c,copyright_image:i,copyright_image_link:u,hash_mode:d}={base_url:"/taxonpages/",hash_mode:!0,map_tile_server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",map_tile_attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://sfg.taxonworks.org/api/v1",project_token:"c5lh0vgnBGTOQDOSfRYC8g",copyright_image:null,copyright_image_link:null,copyright_text:"Copyright CC0",header_logo_url:null,header_logo_text:"My project",header_links:[{label:"Home",link:"/"},{label:"About",link:"/about"}],map_tiles:[{label:"OpenStreetMap",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}],metadata:[{name:"description",content:"TaxonPages is a tool to serve taxon pages."},{name:"keywords",content:"taxonpages, species, sfg"},{name:"robots",content:"follow"}],project_name:"My project",project_citation:null,project_url:null,project_authors:null},f=fl(),m=new Date().toISOString().split("T")[0],_=Fh(),v=te(()=>{const M=(s||"").replace(/\/$/,"");return M.length?d?M+"/#"+_.fullPath:M+_.fullPath:""});return(M,A)=>{const P=ft("ClientOnly"),S=ft("TrackerReport");return H(),tt("footer",w_,[X("div",x_,[X("div",k_,[re(Qt(Kt(n))+" ",1),st(P,null,{default:pt(()=>[X("span",{innerHTML:Kt(f).nextAuthor},null,8,L_)]),_:1}),re(" "+Qt(Kt(a))+". ",1),st(P,null,{default:pt(()=>[X("span",null,"Retrieved on "+Qt(Kt(m)),1)]),_:1}),v.value?(H(),tt("span",M_,[re(" at "),X("a",{class:"text-secondary-color",href:v.value},Qt(v.value),9,C_)])):Dt("",!0)]),X("div",P_,[(H(),Tt(Ci(Kt(u)?"a":"span"),{href:Kt(u),class:"min-w-fit"},{default:pt(()=>[Kt(i)?(H(),tt("img",{key:0,src:Kt(i),alt:"copyright"},null,8,S_)):Dt("",!0)]),_:1},8,["href"])),X("span",null,Qt(Kt(c)),1)]),E_,X("div",T_,[X("div",O_,[A_,R_,B_,st(b_,{class:"italic"})]),st(S,{icon:"",label:"Report a problem","button-class":"flex gap-2 items-center pl-0 pr-0 pt-0 pb-0 self-end"})])])])}}},D_={class:"min-h-screen h-screen flex flex-col justify-between"},z_={class:"flex flex-col flex-grow"},j_={__name:"Application",setup(t){return(n,a)=>(H(),tt("div",D_,[X("div",z_,[st(lg),Se(n.$slots,"default")]),st(I_)]))}},N_={__name:"App",setup(t){return hl({title:"My project",meta:[{name:"description",content:"TaxonPages is a tool to serve taxon pages."},{name:"keywords",content:"taxonpages, species, sfg"},{name:"robots",content:"follow"}]}),(n,a)=>{const s=ft("router-view");return H(),Tt(j_,null,{default:pt(()=>[st(s)]),_:1})}}},ie=(t,n)=>{const a=t.__vccOpts||t;for(const[s,c]of n)a[s]=c;return a},F_={},V_={class:"mx-auto"},H_=X("div",{class:"container mx-auto flex flex-col items-center h-screen justify-center"},[X("h1",{class:"text-4xl font-medium"}," Welcome to TaxonPages "),X("p",{class:"text-xl p-4"}," We're almost there! If you're seeing this, it's because you haven't configured API access yet. ")],-1),G_=[H_];function $_(t,n){return H(),tt("div",V_,G_)}const U_=ie(F_,[["render",$_]]),Z_={},q_={class:"container mx-auto text-center relative top-1/4"},K_=X("h1",{class:"text-4xl sm:text-5xl text-base-lighter"}," Welcome to TaxonPages ",-1),W_=X("p",{class:"m-4 my-8 text-xl"}," It seems you don't have a index or home file in your /pages folder, create one to replace this page. ",-1),J_=[K_,W_];function Y_(t,n){return H(),tt("div",q_,J_)}const X_=ie(Z_,[["render",Y_]]),Q_=[{name:"homepage",path:"/",alias:"/home",component:X_}],ty={},ey={class:"container mx-auto text-center relative top-1/4"},ny=X("h1",{class:"text-7xl text-base-lighter"},"500",-1),ry=X("p",null,"Internal Server Error.",-1),iy=X("p",{class:"m-4 my-10 text-xl"},[re(" Uh oh, looks like something went wrong!"),X("br"),re(" We track these errors automatically, but if the problem persists feel free to contact us. ")],-1),oy=[ny,ry,iy];function sy(t,n){return H(),tt("div",ey,oy)}const ay=ie(ty,[["render",sy]]),ly={},uy={class:"container mx-auto text-center relative top-1/4"},cy=X("h1",{class:"text-7xl text-base-lighter"},"404",-1),hy=X("p",null,"Page not found.",-1),dy=X("p",{class:"m-4 my-10 text-xl"}," Uh oh, we can't seem to find the page you're looking for. Try going back to the previous page. ",-1),py=[cy,hy,dy];function fy(t,n){return H(),tt("div",uy,py)}const my=ie(ly,[["render",fy]]),gy=[{path:"/500",name:"httpError500",component:ay,meta:{statusCode:500}},{path:"/:pathMatch(.*)*",name:"httpError404",component:my,meta:{statusCode:404}}],Is=wo("otuPageRequest",{state:()=>({requests:{}}),getters:{getRequest:t=>n=>t.requests[n],sitemap:t=>{const n=Object.keys(t.requests).sort();return Object.fromEntries(n.map(a=>[a,t.requests[a].url]))}},actions:{setRequest(t,{data:n,request:a}){var c;const s=((c=a.res)==null?void 0:c.responseUrl)||a.responseURL;this.requests[t]={url:s,data:n}}}}),_y="FamilyGroup",yy="GenusGroup",vy="SpeciesGroup",by="SpeciesAndInfraspeciesGroup",go={CanceledError:"CanceledError"},nc=["neotype","holotype","neolectotype","lectotype","syntype","paralectotype","paratype","paratypes"];function Mr(t,n){const a=Is(),s=n();return s.then(c=>{a.setRequest(t,c)}).catch(c=>{c.name!==go.CanceledError&&a.setRequest(t,c.response)}),s}function Uh(t,n){return function(){return t.apply(n,arguments)}}const{toString:wy}=Object.prototype,{getPrototypeOf:ml}=Object,Ds=(t=>n=>{const a=wy.call(n);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Gn=t=>(t=t.toLowerCase(),n=>Ds(n)===t),zs=t=>n=>typeof n===t,{isArray:Pi}=Array,_o=zs("undefined");function xy(t){return t!==null&&!_o(t)&&t.constructor!==null&&!_o(t.constructor)&&kn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Zh=Gn("ArrayBuffer");function ky(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&Zh(t.buffer),n}const Ly=zs("string"),kn=zs("function"),qh=zs("number"),js=t=>t!==null&&typeof t=="object",My=t=>t===!0||t===!1,es=t=>{if(Ds(t)!=="object")return!1;const n=ml(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Cy=Gn("Date"),Py=Gn("File"),Sy=Gn("Blob"),Ey=Gn("FileList"),Ty=t=>js(t)&&kn(t.pipe),Oy=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||kn(t.append)&&((n=Ds(t))==="formdata"||n==="object"&&kn(t.toString)&&t.toString()==="[object FormData]"))},Ay=Gn("URLSearchParams"),Ry=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xo(t,n,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let s,c;if(typeof t!="object"&&(t=[t]),Pi(t))for(s=0,c=t.length;s<c;s++)n.call(null,t[s],s,t);else{const i=a?Object.getOwnPropertyNames(t):Object.keys(t),u=i.length;let d;for(s=0;s<u;s++)d=i[s],n.call(null,t[d],d,t)}}function Kh(t,n){n=n.toLowerCase();const a=Object.keys(t);let s=a.length,c;for(;s-- >0;)if(c=a[s],n===c.toLowerCase())return c;return null}const Wh=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Jh=t=>!_o(t)&&t!==Wh;function ja(){const{caseless:t}=Jh(this)&&this||{},n={},a=(s,c)=>{const i=t&&Kh(n,c)||c;es(n[i])&&es(s)?n[i]=ja(n[i],s):es(s)?n[i]=ja({},s):Pi(s)?n[i]=s.slice():n[i]=s};for(let s=0,c=arguments.length;s<c;s++)arguments[s]&&xo(arguments[s],a);return n}const By=(t,n,a,{allOwnKeys:s}={})=>(xo(n,(c,i)=>{a&&kn(c)?t[i]=Uh(c,a):t[i]=c},{allOwnKeys:s}),t),Iy=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Dy=(t,n,a,s)=>{t.prototype=Object.create(n.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),a&&Object.assign(t.prototype,a)},zy=(t,n,a,s)=>{let c,i,u;const d={};if(n=n||{},t==null)return n;do{for(c=Object.getOwnPropertyNames(t),i=c.length;i-- >0;)u=c[i],(!s||s(u,t,n))&&!d[u]&&(n[u]=t[u],d[u]=!0);t=a!==!1&&ml(t)}while(t&&(!a||a(t,n))&&t!==Object.prototype);return n},jy=(t,n,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=n.length;const s=t.indexOf(n,a);return s!==-1&&s===a},Ny=t=>{if(!t)return null;if(Pi(t))return t;let n=t.length;if(!qh(n))return null;const a=new Array(n);for(;n-- >0;)a[n]=t[n];return a},Fy=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&ml(Uint8Array)),Vy=(t,n)=>{const s=(t&&t[Symbol.iterator]).call(t);let c;for(;(c=s.next())&&!c.done;){const i=c.value;n.call(t,i[0],i[1])}},Hy=(t,n)=>{let a;const s=[];for(;(a=t.exec(n))!==null;)s.push(a);return s},Gy=Gn("HTMLFormElement"),$y=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,s,c){return s.toUpperCase()+c}),rc=(({hasOwnProperty:t})=>(n,a)=>t.call(n,a))(Object.prototype),Uy=Gn("RegExp"),Yh=(t,n)=>{const a=Object.getOwnPropertyDescriptors(t),s={};xo(a,(c,i)=>{let u;(u=n(c,i,t))!==!1&&(s[i]=u||c)}),Object.defineProperties(t,s)},Zy=t=>{Yh(t,(n,a)=>{if(kn(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const s=t[a];if(kn(s)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},qy=(t,n)=>{const a={},s=c=>{c.forEach(i=>{a[i]=!0})};return Pi(t)?s(t):s(String(t).split(n)),a},Ky=()=>{},Wy=(t,n)=>(t=+t,Number.isFinite(t)?t:n),fa="abcdefghijklmnopqrstuvwxyz",ic="0123456789",Xh={DIGIT:ic,ALPHA:fa,ALPHA_DIGIT:fa+fa.toUpperCase()+ic},Jy=(t=16,n=Xh.ALPHA_DIGIT)=>{let a="";const{length:s}=n;for(;t--;)a+=n[Math.random()*s|0];return a};function Yy(t){return!!(t&&kn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Xy=t=>{const n=new Array(10),a=(s,c)=>{if(js(s)){if(n.indexOf(s)>=0)return;if(!("toJSON"in s)){n[c]=s;const i=Pi(s)?[]:{};return xo(s,(u,d)=>{const f=a(u,c+1);!_o(f)&&(i[d]=f)}),n[c]=void 0,i}}return s};return a(t,0)},Qy=Gn("AsyncFunction"),tv=t=>t&&(js(t)||kn(t))&&kn(t.then)&&kn(t.catch),yt={isArray:Pi,isArrayBuffer:Zh,isBuffer:xy,isFormData:Oy,isArrayBufferView:ky,isString:Ly,isNumber:qh,isBoolean:My,isObject:js,isPlainObject:es,isUndefined:_o,isDate:Cy,isFile:Py,isBlob:Sy,isRegExp:Uy,isFunction:kn,isStream:Ty,isURLSearchParams:Ay,isTypedArray:Fy,isFileList:Ey,forEach:xo,merge:ja,extend:By,trim:Ry,stripBOM:Iy,inherits:Dy,toFlatObject:zy,kindOf:Ds,kindOfTest:Gn,endsWith:jy,toArray:Ny,forEachEntry:Vy,matchAll:Hy,isHTMLForm:Gy,hasOwnProperty:rc,hasOwnProp:rc,reduceDescriptors:Yh,freezeMethods:Zy,toObjectSet:qy,toCamelCase:$y,noop:Ky,toFiniteNumber:Wy,findKey:Kh,global:Wh,isContextDefined:Jh,ALPHABET:Xh,generateString:Jy,isSpecCompliantForm:Yy,toJSONObject:Xy,isAsyncFn:Qy,isThenable:tv};function _e(t,n,a,s,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),a&&(this.config=a),s&&(this.request=s),c&&(this.response=c)}yt.inherits(_e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:yt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Qh=_e.prototype,td={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{td[t]={value:t}});Object.defineProperties(_e,td);Object.defineProperty(Qh,"isAxiosError",{value:!0});_e.from=(t,n,a,s,c,i)=>{const u=Object.create(Qh);return yt.toFlatObject(t,u,function(f){return f!==Error.prototype},d=>d!=="isAxiosError"),_e.call(u,t.message,n,a,s,c),u.cause=t,u.name=t.name,i&&Object.assign(u,i),u};const ev=null;function Na(t){return yt.isPlainObject(t)||yt.isArray(t)}function ed(t){return yt.endsWith(t,"[]")?t.slice(0,-2):t}function oc(t,n,a){return t?t.concat(n).map(function(c,i){return c=ed(c),!a&&i?"["+c+"]":c}).join(a?".":""):n}function nv(t){return yt.isArray(t)&&!t.some(Na)}const rv=yt.toFlatObject(yt,{},null,function(n){return/^is[A-Z]/.test(n)});function Ns(t,n,a){if(!yt.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,a=yt.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,N){return!yt.isUndefined(N[S])});const s=a.metaTokens,c=a.visitor||_,i=a.dots,u=a.indexes,f=(a.Blob||typeof Blob<"u"&&Blob)&&yt.isSpecCompliantForm(n);if(!yt.isFunction(c))throw new TypeError("visitor must be a function");function m(P){if(P===null)return"";if(yt.isDate(P))return P.toISOString();if(!f&&yt.isBlob(P))throw new _e("Blob is not supported. Use a Buffer instead.");return yt.isArrayBuffer(P)||yt.isTypedArray(P)?f&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function _(P,S,N){let C=P;if(P&&!N&&typeof P=="object"){if(yt.endsWith(S,"{}"))S=s?S:S.slice(0,-2),P=JSON.stringify(P);else if(yt.isArray(P)&&nv(P)||(yt.isFileList(P)||yt.endsWith(S,"[]"))&&(C=yt.toArray(P)))return S=ed(S),C.forEach(function(j,T){!(yt.isUndefined(j)||j===null)&&n.append(u===!0?oc([S],T,i):u===null?S:S+"[]",m(j))}),!1}return Na(P)?!0:(n.append(oc(N,S,i),m(P)),!1)}const v=[],M=Object.assign(rv,{defaultVisitor:_,convertValue:m,isVisitable:Na});function A(P,S){if(!yt.isUndefined(P)){if(v.indexOf(P)!==-1)throw Error("Circular reference detected in "+S.join("."));v.push(P),yt.forEach(P,function(C,O){(!(yt.isUndefined(C)||C===null)&&c.call(n,C,yt.isString(O)?O.trim():O,S,M))===!0&&A(C,S?S.concat(O):[O])}),v.pop()}}if(!yt.isObject(t))throw new TypeError("data must be an object");return A(t),n}function sc(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return n[s]})}function gl(t,n){this._pairs=[],t&&Ns(t,this,n)}const nd=gl.prototype;nd.append=function(n,a){this._pairs.push([n,a])};nd.toString=function(n){const a=n?function(s){return n.call(this,s,sc)}:sc;return this._pairs.map(function(c){return a(c[0])+"="+a(c[1])},"").join("&")};function iv(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function rd(t,n,a){if(!n)return t;const s=a&&a.encode||iv,c=a&&a.serialize;let i;if(c?i=c(n,a):i=yt.isURLSearchParams(n)?n.toString():new gl(n,a).toString(s),i){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class ov{constructor(){this.handlers=[]}use(n,a,s){return this.handlers.push({fulfilled:n,rejected:a,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){yt.forEach(this.handlers,function(s){s!==null&&n(s)})}}const ac=ov,id={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},sv=typeof URLSearchParams<"u"?URLSearchParams:gl,av=typeof FormData<"u"?FormData:null,lv=typeof Blob<"u"?Blob:null,uv=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),cv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Tn={isBrowser:!0,classes:{URLSearchParams:sv,FormData:av,Blob:lv},isStandardBrowserEnv:uv,isStandardBrowserWebWorkerEnv:cv,protocols:["http","https","file","blob","url","data"]};function hv(t,n){return Ns(t,new Tn.classes.URLSearchParams,Object.assign({visitor:function(a,s,c,i){return Tn.isNode&&yt.isBuffer(a)?(this.append(s,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},n))}function dv(t){return yt.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function pv(t){const n={},a=Object.keys(t);let s;const c=a.length;let i;for(s=0;s<c;s++)i=a[s],n[i]=t[i];return n}function od(t){function n(a,s,c,i){let u=a[i++];const d=Number.isFinite(+u),f=i>=a.length;return u=!u&&yt.isArray(c)?c.length:u,f?(yt.hasOwnProp(c,u)?c[u]=[c[u],s]:c[u]=s,!d):((!c[u]||!yt.isObject(c[u]))&&(c[u]=[]),n(a,s,c[u],i)&&yt.isArray(c[u])&&(c[u]=pv(c[u])),!d)}if(yt.isFormData(t)&&yt.isFunction(t.entries)){const a={};return yt.forEachEntry(t,(s,c)=>{n(dv(s),c,a,0)}),a}return null}function fv(t,n,a){if(yt.isString(t))try{return(n||JSON.parse)(t),yt.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(a||JSON.stringify)(t)}const _l={transitional:id,adapter:Tn.isNode?"http":"xhr",transformRequest:[function(n,a){const s=a.getContentType()||"",c=s.indexOf("application/json")>-1,i=yt.isObject(n);if(i&&yt.isHTMLForm(n)&&(n=new FormData(n)),yt.isFormData(n))return c&&c?JSON.stringify(od(n)):n;if(yt.isArrayBuffer(n)||yt.isBuffer(n)||yt.isStream(n)||yt.isFile(n)||yt.isBlob(n))return n;if(yt.isArrayBufferView(n))return n.buffer;if(yt.isURLSearchParams(n))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let d;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return hv(n,this.formSerializer).toString();if((d=yt.isFileList(n))||s.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Ns(d?{"files[]":n}:n,f&&new f,this.formSerializer)}}return i||c?(a.setContentType("application/json",!1),fv(n)):n}],transformResponse:[function(n){const a=this.transitional||_l.transitional,s=a&&a.forcedJSONParsing,c=this.responseType==="json";if(n&&yt.isString(n)&&(s&&!this.responseType||c)){const u=!(a&&a.silentJSONParsing)&&c;try{return JSON.parse(n)}catch(d){if(u)throw d.name==="SyntaxError"?_e.from(d,_e.ERR_BAD_RESPONSE,this,null,this.response):d}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Tn.classes.FormData,Blob:Tn.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};yt.forEach(["delete","get","head","post","put","patch"],t=>{_l.headers[t]={}});const yl=_l,mv=yt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gv=t=>{const n={};let a,s,c;return t&&t.split(`
`).forEach(function(u){c=u.indexOf(":"),a=u.substring(0,c).trim().toLowerCase(),s=u.substring(c+1).trim(),!(!a||n[a]&&mv[a])&&(a==="set-cookie"?n[a]?n[a].push(s):n[a]=[s]:n[a]=n[a]?n[a]+", "+s:s)}),n},lc=Symbol("internals");function Ji(t){return t&&String(t).trim().toLowerCase()}function ns(t){return t===!1||t==null?t:yt.isArray(t)?t.map(ns):String(t)}function _v(t){const n=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(t);)n[s[1]]=s[2];return n}const yv=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ma(t,n,a,s,c){if(yt.isFunction(s))return s.call(this,n,a);if(c&&(n=a),!!yt.isString(n)){if(yt.isString(s))return n.indexOf(s)!==-1;if(yt.isRegExp(s))return s.test(n)}}function vv(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,a,s)=>a.toUpperCase()+s)}function bv(t,n){const a=yt.toCamelCase(" "+n);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+a,{value:function(c,i,u){return this[s].call(this,n,c,i,u)},configurable:!0})})}class Fs{constructor(n){n&&this.set(n)}set(n,a,s){const c=this;function i(d,f,m){const _=Ji(f);if(!_)throw new Error("header name must be a non-empty string");const v=yt.findKey(c,_);(!v||c[v]===void 0||m===!0||m===void 0&&c[v]!==!1)&&(c[v||f]=ns(d))}const u=(d,f)=>yt.forEach(d,(m,_)=>i(m,_,f));return yt.isPlainObject(n)||n instanceof this.constructor?u(n,a):yt.isString(n)&&(n=n.trim())&&!yv(n)?u(gv(n),a):n!=null&&i(a,n,s),this}get(n,a){if(n=Ji(n),n){const s=yt.findKey(this,n);if(s){const c=this[s];if(!a)return c;if(a===!0)return _v(c);if(yt.isFunction(a))return a.call(this,c,s);if(yt.isRegExp(a))return a.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,a){if(n=Ji(n),n){const s=yt.findKey(this,n);return!!(s&&this[s]!==void 0&&(!a||ma(this,this[s],s,a)))}return!1}delete(n,a){const s=this;let c=!1;function i(u){if(u=Ji(u),u){const d=yt.findKey(s,u);d&&(!a||ma(s,s[d],d,a))&&(delete s[d],c=!0)}}return yt.isArray(n)?n.forEach(i):i(n),c}clear(n){const a=Object.keys(this);let s=a.length,c=!1;for(;s--;){const i=a[s];(!n||ma(this,this[i],i,n,!0))&&(delete this[i],c=!0)}return c}normalize(n){const a=this,s={};return yt.forEach(this,(c,i)=>{const u=yt.findKey(s,i);if(u){a[u]=ns(c),delete a[i];return}const d=n?vv(i):String(i).trim();d!==i&&delete a[i],a[d]=ns(c),s[d]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const a=Object.create(null);return yt.forEach(this,(s,c)=>{s!=null&&s!==!1&&(a[c]=n&&yt.isArray(s)?s.join(", "):s)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,a])=>n+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...a){const s=new this(n);return a.forEach(c=>s.set(c)),s}static accessor(n){const s=(this[lc]=this[lc]={accessors:{}}).accessors,c=this.prototype;function i(u){const d=Ji(u);s[d]||(bv(c,u),s[d]=!0)}return yt.isArray(n)?n.forEach(i):i(n),this}}Fs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);yt.reduceDescriptors(Fs.prototype,({value:t},n)=>{let a=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(s){this[a]=s}}});yt.freezeMethods(Fs);const er=Fs;function ga(t,n){const a=this||yl,s=n||a,c=er.from(s.headers);let i=s.data;return yt.forEach(t,function(d){i=d.call(a,i,c.normalize(),n?n.status:void 0)}),c.normalize(),i}function sd(t){return!!(t&&t.__CANCEL__)}function ko(t,n,a){_e.call(this,t??"canceled",_e.ERR_CANCELED,n,a),this.name="CanceledError"}yt.inherits(ko,_e,{__CANCEL__:!0});function wv(t,n,a){const s=a.config.validateStatus;!a.status||!s||s(a.status)?t(a):n(new _e("Request failed with status code "+a.status,[_e.ERR_BAD_REQUEST,_e.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}const xv=Tn.isStandardBrowserEnv?function(){return{write:function(a,s,c,i,u,d){const f=[];f.push(a+"="+encodeURIComponent(s)),yt.isNumber(c)&&f.push("expires="+new Date(c).toGMTString()),yt.isString(i)&&f.push("path="+i),yt.isString(u)&&f.push("domain="+u),d===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(a){const s=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function kv(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Lv(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}function ad(t,n){return t&&!kv(n)?Lv(t,n):n}const Mv=Tn.isStandardBrowserEnv?function(){const n=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");let s;function c(i){let u=i;return n&&(a.setAttribute("href",u),u=a.href),a.setAttribute("href",u),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return s=c(window.location.href),function(u){const d=yt.isString(u)?c(u):u;return d.protocol===s.protocol&&d.host===s.host}}():function(){return function(){return!0}}();function Cv(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function Pv(t,n){t=t||10;const a=new Array(t),s=new Array(t);let c=0,i=0,u;return n=n!==void 0?n:1e3,function(f){const m=Date.now(),_=s[i];u||(u=m),a[c]=f,s[c]=m;let v=i,M=0;for(;v!==c;)M+=a[v++],v=v%t;if(c=(c+1)%t,c===i&&(i=(i+1)%t),m-u<n)return;const A=_&&m-_;return A?Math.round(M*1e3/A):void 0}}function uc(t,n){let a=0;const s=Pv(50,250);return c=>{const i=c.loaded,u=c.lengthComputable?c.total:void 0,d=i-a,f=s(d),m=i<=u;a=i;const _={loaded:i,total:u,progress:u?i/u:void 0,bytes:d,rate:f||void 0,estimated:f&&u&&m?(u-i)/f:void 0,event:c};_[n?"download":"upload"]=!0,t(_)}}const Sv=typeof XMLHttpRequest<"u",Ev=Sv&&function(t){return new Promise(function(a,s){let c=t.data;const i=er.from(t.headers).normalize(),u=t.responseType;let d;function f(){t.cancelToken&&t.cancelToken.unsubscribe(d),t.signal&&t.signal.removeEventListener("abort",d)}yt.isFormData(c)&&(Tn.isStandardBrowserEnv||Tn.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let m=new XMLHttpRequest;if(t.auth){const A=t.auth.username||"",P=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(A+":"+P))}const _=ad(t.baseURL,t.url);m.open(t.method.toUpperCase(),rd(_,t.params,t.paramsSerializer),!0),m.timeout=t.timeout;function v(){if(!m)return;const A=er.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),S={data:!u||u==="text"||u==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:A,config:t,request:m};wv(function(C){a(C),f()},function(C){s(C),f()},S),m=null}if("onloadend"in m?m.onloadend=v:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(v)},m.onabort=function(){m&&(s(new _e("Request aborted",_e.ECONNABORTED,t,m)),m=null)},m.onerror=function(){s(new _e("Network Error",_e.ERR_NETWORK,t,m)),m=null},m.ontimeout=function(){let P=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const S=t.transitional||id;t.timeoutErrorMessage&&(P=t.timeoutErrorMessage),s(new _e(P,S.clarifyTimeoutError?_e.ETIMEDOUT:_e.ECONNABORTED,t,m)),m=null},Tn.isStandardBrowserEnv){const A=(t.withCredentials||Mv(_))&&t.xsrfCookieName&&xv.read(t.xsrfCookieName);A&&i.set(t.xsrfHeaderName,A)}c===void 0&&i.setContentType(null),"setRequestHeader"in m&&yt.forEach(i.toJSON(),function(P,S){m.setRequestHeader(S,P)}),yt.isUndefined(t.withCredentials)||(m.withCredentials=!!t.withCredentials),u&&u!=="json"&&(m.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&m.addEventListener("progress",uc(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&m.upload&&m.upload.addEventListener("progress",uc(t.onUploadProgress)),(t.cancelToken||t.signal)&&(d=A=>{m&&(s(!A||A.type?new ko(null,t,m):A),m.abort(),m=null)},t.cancelToken&&t.cancelToken.subscribe(d),t.signal&&(t.signal.aborted?d():t.signal.addEventListener("abort",d)));const M=Cv(_);if(M&&Tn.protocols.indexOf(M)===-1){s(new _e("Unsupported protocol "+M+":",_e.ERR_BAD_REQUEST,t));return}m.send(c||null)})},rs={http:ev,xhr:Ev};yt.forEach(rs,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const ld={getAdapter:t=>{t=yt.isArray(t)?t:[t];const{length:n}=t;let a,s;for(let c=0;c<n&&(a=t[c],!(s=yt.isString(a)?rs[a.toLowerCase()]:a));c++);if(!s)throw s===!1?new _e(`Adapter ${a} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(yt.hasOwnProp(rs,a)?`Adapter '${a}' is not available in the build`:`Unknown adapter '${a}'`);if(!yt.isFunction(s))throw new TypeError("adapter is not a function");return s},adapters:rs};function _a(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ko(null,t)}function cc(t){return _a(t),t.headers=er.from(t.headers),t.data=ga.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ld.getAdapter(t.adapter||yl.adapter)(t).then(function(s){return _a(t),s.data=ga.call(t,t.transformResponse,s),s.headers=er.from(s.headers),s},function(s){return sd(s)||(_a(t),s&&s.response&&(s.response.data=ga.call(t,t.transformResponse,s.response),s.response.headers=er.from(s.response.headers))),Promise.reject(s)})}const hc=t=>t instanceof er?t.toJSON():t;function xi(t,n){n=n||{};const a={};function s(m,_,v){return yt.isPlainObject(m)&&yt.isPlainObject(_)?yt.merge.call({caseless:v},m,_):yt.isPlainObject(_)?yt.merge({},_):yt.isArray(_)?_.slice():_}function c(m,_,v){if(yt.isUndefined(_)){if(!yt.isUndefined(m))return s(void 0,m,v)}else return s(m,_,v)}function i(m,_){if(!yt.isUndefined(_))return s(void 0,_)}function u(m,_){if(yt.isUndefined(_)){if(!yt.isUndefined(m))return s(void 0,m)}else return s(void 0,_)}function d(m,_,v){if(v in n)return s(m,_);if(v in t)return s(void 0,m)}const f={url:i,method:i,data:i,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(m,_)=>c(hc(m),hc(_),!0)};return yt.forEach(Object.keys(Object.assign({},t,n)),function(_){const v=f[_]||c,M=v(t[_],n[_],_);yt.isUndefined(M)&&v!==d||(a[_]=M)}),a}const ud="1.5.0",vl={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{vl[t]=function(s){return typeof s===t||"a"+(n<1?"n ":" ")+t}});const dc={};vl.transitional=function(n,a,s){function c(i,u){return"[Axios v"+ud+"] Transitional option '"+i+"'"+u+(s?". "+s:"")}return(i,u,d)=>{if(n===!1)throw new _e(c(u," has been removed"+(a?" in "+a:"")),_e.ERR_DEPRECATED);return a&&!dc[u]&&(dc[u]=!0,console.warn(c(u," has been deprecated since v"+a+" and will be removed in the near future"))),n?n(i,u,d):!0}};function Tv(t,n,a){if(typeof t!="object")throw new _e("options must be an object",_e.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let c=s.length;for(;c-- >0;){const i=s[c],u=n[i];if(u){const d=t[i],f=d===void 0||u(d,i,t);if(f!==!0)throw new _e("option "+i+" must be "+f,_e.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new _e("Unknown option "+i,_e.ERR_BAD_OPTION)}}const Fa={assertOptions:Tv,validators:vl},gr=Fa.validators;class ms{constructor(n){this.defaults=n,this.interceptors={request:new ac,response:new ac}}request(n,a){typeof n=="string"?(a=a||{},a.url=n):a=n||{},a=xi(this.defaults,a);const{transitional:s,paramsSerializer:c,headers:i}=a;s!==void 0&&Fa.assertOptions(s,{silentJSONParsing:gr.transitional(gr.boolean),forcedJSONParsing:gr.transitional(gr.boolean),clarifyTimeoutError:gr.transitional(gr.boolean)},!1),c!=null&&(yt.isFunction(c)?a.paramsSerializer={serialize:c}:Fa.assertOptions(c,{encode:gr.function,serialize:gr.function},!0)),a.method=(a.method||this.defaults.method||"get").toLowerCase();let u=i&&yt.merge(i.common,i[a.method]);i&&yt.forEach(["delete","get","head","post","put","patch","common"],P=>{delete i[P]}),a.headers=er.concat(u,i);const d=[];let f=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(a)===!1||(f=f&&S.synchronous,d.unshift(S.fulfilled,S.rejected))});const m=[];this.interceptors.response.forEach(function(S){m.push(S.fulfilled,S.rejected)});let _,v=0,M;if(!f){const P=[cc.bind(this),void 0];for(P.unshift.apply(P,d),P.push.apply(P,m),M=P.length,_=Promise.resolve(a);v<M;)_=_.then(P[v++],P[v++]);return _}M=d.length;let A=a;for(v=0;v<M;){const P=d[v++],S=d[v++];try{A=P(A)}catch(N){S.call(this,N);break}}try{_=cc.call(this,A)}catch(P){return Promise.reject(P)}for(v=0,M=m.length;v<M;)_=_.then(m[v++],m[v++]);return _}getUri(n){n=xi(this.defaults,n);const a=ad(n.baseURL,n.url);return rd(a,n.params,n.paramsSerializer)}}yt.forEach(["delete","get","head","options"],function(n){ms.prototype[n]=function(a,s){return this.request(xi(s||{},{method:n,url:a,data:(s||{}).data}))}});yt.forEach(["post","put","patch"],function(n){function a(s){return function(i,u,d){return this.request(xi(d||{},{method:n,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:u}))}}ms.prototype[n]=a(),ms.prototype[n+"Form"]=a(!0)});const is=ms;class bl{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const s=this;this.promise.then(c=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](c);s._listeners=null}),this.promise.then=c=>{let i;const u=new Promise(d=>{s.subscribe(d),i=d}).then(c);return u.cancel=function(){s.unsubscribe(i)},u},n(function(i,u,d){s.reason||(s.reason=new ko(i,u,d),a(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const a=this._listeners.indexOf(n);a!==-1&&this._listeners.splice(a,1)}static source(){let n;return{token:new bl(function(c){n=c}),cancel:n}}}const Ov=bl;function Av(t){return function(a){return t.apply(null,a)}}function Rv(t){return yt.isObject(t)&&t.isAxiosError===!0}const Va={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Va).forEach(([t,n])=>{Va[n]=t});const Bv=Va;function cd(t){const n=new is(t),a=Uh(is.prototype.request,n);return yt.extend(a,is.prototype,n,{allOwnKeys:!0}),yt.extend(a,n,null,{allOwnKeys:!0}),a.create=function(c){return cd(xi(t,c))},a}const Ne=cd(yl);Ne.Axios=is;Ne.CanceledError=ko;Ne.CancelToken=Ov;Ne.isCancel=sd;Ne.VERSION=ud;Ne.toFormData=Ns;Ne.AxiosError=_e;Ne.Cancel=Ne.CanceledError;Ne.all=function(n){return Promise.all(n)};Ne.spread=Av;Ne.isAxiosError=Rv;Ne.mergeConfig=xi;Ne.AxiosHeaders=er;Ne.formToJSON=t=>od(yt.isHTMLForm(t)?new FormData(t):t);Ne.getAdapter=ld.getAdapter;Ne.HttpStatusCode=Bv;Ne.default=Ne;const Iv=Ne,{url:Dv,project_token:zv}={base_url:"/taxonpages/",hash_mode:!0,map_tile_server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",map_tile_attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://sfg.taxonworks.org/api/v1",project_token:"c5lh0vgnBGTOQDOSfRYC8g",copyright_image:null,copyright_image_link:null,copyright_text:"Copyright CC0",header_logo_url:null,header_logo_text:"My project",header_links:[{label:"Home",link:"/"},{label:"About",link:"/about"}],map_tiles:[{label:"OpenStreetMap",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}],metadata:[{name:"description",content:"TaxonPages is a tool to serve taxon pages."},{name:"keywords",content:"taxonpages, species, sfg"},{name:"robots",content:"follow"}],project_name:"My project",project_citation:null,project_url:null,project_authors:null},We=Iv.create({baseURL:Dv,params:{project_token:zv}});class ln{static getTaxonNameCitations(n,a){return We.get(`/taxon_names/${n}/inventory/catalog`,a)}static getOtu(n){return We.get(`/otus/${n}`,{params:{extend:["parents"]}})}static getOtus(n){return We.get("/otus.json",{params:n})}static getTaxon(n,a){return We.get(`/taxon_names/${n}`,a)}static summary(n,a){return We.get(`/taxon_names/${n}/inventory/summary`,a)}static getTaxonTypeDesignation(n){return We.get(`/taxon_names/${n}`,{params:{extend:["type_taxon_name_relationship"]}})}static getOtuImages(n,a){return We.get(`/otus/${n}/inventory/images.json`,a)}static getTaxonomy(n,a){return We.get(`/otus/${n}/inventory/taxonomy.json`,a)}static getOtuTypeMaterial(n){return We.get(`/otus/${n}/inventory/type_material.json`)}static getOtuDistribution(n,a={}){return We.get(`/otus/${n}/inventory/distribution.json`,a)}static getOtuGeoJSONDistribution(n){return We.get(`/otus/${n}/inventory/distribution.geojson`)}static getCachedMap(n,a){return We.get(`/cached_maps/${n}`,a)}static getOtuContent(n,a){return We.get(`/otus/${n}/inventory/content`,a)}static getCachedMap(n){return We.get(`/cached_maps/${n}`)}}const qr=wo("otuStore",{state:()=>({otu:null,taxon:null,images:null,catalog:{sources:[],stats:{},timeline:[],isLoading:!1},taxonomy:{commonNames:[],synonyms:[]}}),actions:{async loadTaxon(t,{signal:n}){const a=fl(),s=await Promise.all([ln.getTaxon(t,{params:{extend:["type_taxon_name_relationship"]}}),Mr("summary",()=>ln.summary(t,{signal:n}))]);this.taxon=Object.assign({},...s.map(c=>c.data)),a.setNextAuthorText(this.taxon.full_name_tag+".")},async loadOtu(t,{signal:n}){const a=await ln.getOtu(t,{signal:n});this.otu=a.data},async loadTaxonomy(t,{signal:n}){const{data:a}=await ln.getTaxonomy(t,{params:{max_descendants_depth:0,extend:["common_names"]},signal:n});this.taxonomy={commonNames:a.common_names,synonyms:a.nomenclatural_synonyms}},async loadCatalog(t,{signal:n}){this.catalog.isLoading=!0;const a=await Mr("taxonomy",()=>ln.getTaxonNameCitations(t,{signal:n}));this.catalog={...a.data,sources:a.data.sources.map(({cached:s,url:c})=>s.replace(c,`<a href="${c}">${c}</a>`)),isLoading:!1}},async loadInit({otuId:t,controller:n}){Is().$reset();try{await this.loadOtu(t,n),await this.loadTaxon(this.otu.taxon_name_id,n),await this.loadCatalog(this.otu.taxon_name_id,n),await this.loadTaxonomy(t,n)}catch(s){return Promise.reject(s)}}}});function jv(t,n){return t||(t={}),t._resolver=n,t}function Nv(t){return jv(t,"taxon")}function Fv(t){return hl({script:[{type:"application/ld+json",key:"schema-org-graph",nodes:t}]})}function Ha(t,n){return!t.length||t.some(a=>n==null?void 0:n.includes(a))}function Vv(t,n){return n.split("::").at(2)===t}function Hv(t,n){return{type:"Feature",geometry:t,properties:{base:[{type:n}]}}}function Gv(t){const n=[],a=[];return t.features.forEach(s=>{const c=s.properties.shape.id,i=s.properties.shape.type;a.includes(s.properties.base.type)||a.push(s.properties.base.type);const u=n.findIndex(d=>d.properties.shape.id===c&&d.properties.shape.type===i);if(u>-1){const d=n[u];d.properties.base.push(s.properties.base),d.properties.target.push(s.properties.target)}else{const d=structuredClone(s);d.properties.base=[d.properties.base],d.properties.target=[d.properties.target],n.push(d)}}),a.sort(),{shapeTypes:a,features:n}}const $v=X("h3",{class:"font-medium"},"Sitemap",-1),Uv={class:"p-4 pt-0"},Zv=X("p",{class:"text-sm mb-2"}," The following links provide the information present on this page in JSON format. ",-1),qv=["href"],Kv={__name:"SiteMap",setup(t){const n=Zt(!1),a=Is();return(s,c)=>{const i=ft("IconJson"),u=ft("VButton"),d=ft("VTableHeaderCell"),f=ft("VTableHeaderRow"),m=ft("VTableHeader"),_=ft("VTableBodyCell"),v=ft("VTableBodyRow"),M=ft("VTableBody"),A=ft("VTable"),P=ft("VModal");return H(),tt("div",null,[st(u,{primary:"",class:"text-sm md:flex items-center gap-1 hidden",title:"Links used to obtain the information present on this page in JSON format.",onClick:c[0]||(c[0]=S=>n.value=!0)},{default:pt(()=>[st(i,{class:"w-4 h-4"}),re(" Sitemap ")]),_:1}),n.value?(H(),Tt(P,{key:0,onClose:c[1]||(c[1]=S=>n.value=!1)},{header:pt(()=>[$v]),default:pt(()=>[X("div",Uv,[Zv,st(A,null,{default:pt(()=>[st(m,null,{default:pt(()=>[st(f,null,{default:pt(()=>[st(d,null,{default:pt(()=>[re(" Request Key ")]),_:1}),st(d,null,{default:pt(()=>[re(" URL ")]),_:1})]),_:1})]),_:1}),st(M,null,{default:pt(()=>[(H(!0),tt(Gt,null,ye(Kt(a).sitemap,(S,N)=>(H(),Tt(v,{key:N},{default:pt(()=>[st(_,{class:"capitalize"},{default:pt(()=>[re(Qt(N.replaceAll(":"," ")),1)]),_:2},1024),st(_,null,{default:pt(()=>[X("a",{href:S},Qt(S),9,qv)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1})):Dt("",!0)])}}},Wv={class:"relative"},Jv=X("svg",{class:"h-5 w-5 text-primary-500 print:hidden",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[X("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),Yv={key:1,class:"absolute right-0 py-2 bg-white dark:bg-gray-900 rounded-md shadow-xl z-20"},Xv={__name:"BreadcrumbDropdown",props:{list:{type:Array,required:!0}},setup(t){const n=Zt(!1);return(a,s)=>{const c=ft("router-link");return H(),tt("div",Wv,[X("div",null,[X("button",{class:"inline-flex items-center text-sm hover:text-gray-900 text-primary-500 dark:hover:text-gray-500",onClick:s[0]||(s[0]=i=>n.value=!n.value)},[Se(a.$slots,"default"),Jv]),n.value?(H(),tt("div",{key:0,class:"fixed inset-0 h-full w-full z-10",onClick:s[1]||(s[1]=i=>n.value=!1)})):Dt("",!0),n.value?(H(),tt("div",Yv,[(H(!0),tt(Gt,null,ye(t.list,i=>(H(),Tt(c,{key:i.id,class:"block px-4 py-2 text-sm capitalize hover:bg-secondary-color hover:bg-opacity-5",to:{name:"otus-id",params:{id:i.id}}},{default:pt(()=>[re(Qt(i.name||a.key),1)]),_:2},1032,["to"]))),128))])):Dt("",!0)])])}}},Qv={class:"inline-flex items-center flex-wrap"},tb={class:"inline-flex items-center ml-0 text-sm"},eb=["innerHTML"],nb={__name:"Breadcrumb",props:{list:{type:Object,default:()=>({})},current:{type:Object,required:!0}},setup(t){return(n,a)=>{const s=ft("IconArrowRight"),c=ft("router-link");return H(),tt("ul",Qv,[(H(!0),tt(Gt,null,ye(t.list,(i,u,d)=>(H(),tt("li",{key:i.id,class:"inline-flex items-center"},[d?(H(),Tt(s,{key:0,class:"w-3 h-3 mr-0.5 ml-0.5 opacity-50"})):Dt("",!0),i.length===1?(H(),Tt(c,{key:1,class:"inline-flex items-center text-sm text-accent-100 hover:text-gray-900 dark:hover:text-gray-500 text-secondary-color",to:{name:"otus-id",params:{id:i[0].id}}},{default:pt(()=>[re(Qt(u),1)]),_:2},1032,["to"])):(H(),Tt(Xv,{key:2,list:i.map(f=>({...f,name:f.name||u}))},{default:pt(()=>[re(Qt(u),1)]),_:2},1032,["list"]))]))),128)),X("li",tb,[st(s,{class:"w-3 h-3 mr-0.5 ml-0.5 opacity-50"}),X("span",{innerHTML:t.current.full_name_tag},null,8,eb)])])}}},rb={__name:"CommonNames",setup(t){const n=qr(),a=te(()=>n.taxonomy.commonNames.map(s=>s.name).join("; "));return(s,c)=>(H(),tt("span",null,Qt(a.value),1))}},ib={class:"text-1xl capitalize"},ob={class:"text-xl dark:text-gray-100"},sb=["title","innerHTML"],ab={key:0,class:"ml-1 text-red-600",title:"Invalid"},lb={class:"text-1xl"},ub={__name:"TaxaInfo",setup(t){const n=qr();return(a,s)=>(H(),tt("div",null,[X("h2",ib,Qt(Kt(n).taxon.rank||"Combination"),1),X("h1",ob,[X("span",null,[X("span",{title:Kt(n).taxon.short_status,innerHTML:Kt(n).taxon.full_name_tag},null,8,sb),Kt(n).taxon.is_valid?Dt("",!0):(H(),tt("span",ab,"  "))])]),X("h2",lb,[st(rb)])]))}},cb={__name:"DWCDownload",props:{otu:{type:Object,required:!0}},setup(t){const n=t,{url:a,project_token:s}={base_url:"/taxonpages/",hash_mode:!0,map_tile_server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",map_tile_attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://sfg.taxonworks.org/api/v1",project_token:"c5lh0vgnBGTOQDOSfRYC8g",copyright_image:null,copyright_image_link:null,copyright_text:"Copyright CC0",header_logo_url:null,header_logo_text:"My project",header_links:[{label:"Home",link:"/"},{label:"About",link:"/about"}],map_tiles:[{label:"OpenStreetMap",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}],metadata:[{name:"description",content:"TaxonPages is a tool to serve taxon pages."},{name:"keywords",content:"taxonpages, species, sfg"},{name:"robots",content:"follow"}],project_name:"My project",project_citation:null,project_url:null,project_authors:null};function c(){window.open(`${a}/otus/${n.otu.id}/inventory/dwc.csv?project_token=${s}`,"_self")}return(i,u)=>{const d=ft("IconDownload"),f=ft("VButton");return H(),Tt(f,{primary:"",class:"text-sm flex items-center",title:"Download DwC Occurrences",onClick:u[0]||(u[0]=()=>{c()})},{default:pt(()=>[st(d,{class:"w-4 h-4 mr-1"}),re(" DwC ")]),_:1})}}};function hb(t){return t.replace(/^[\s_]+|[\s_]+$/g,"").replace(/[_\s]+/g," ").replace(/^[a-z]/,n=>n.toUpperCase())}function db(){const t=Rs(),{children:n}=t.getRoutes().find(a=>a.name==="otus-id");return n.map(({path:a,name:s,meta:c})=>({label:a&&(c.label||hb(a)),path:a,name:s,meta:c}))}const pb={class:"bg-base-foreground border-b border-base-muted pl-4 pr-4"},fb={class:"container mx-auto"},mb={class:"pt-6 pb-6"},gb={class:"flex flex-col-reverse md:flex-row justify-between items-start"},_b={class:"mt-8 flex justify-between items-end"},yb={class:"flex flex-row gap-2"},vb={class:"pt-3 pb-4"},bb={class:"container mx-auto box-border"},wb={__name:"Index",setup(t){const n=Fh(),a=Rs(),s=Zt(n.params),c=db(),i=qr(),u=fl();let d=new AbortController;a.afterEach(N=>{s.value=N.params});const f=te(()=>i.otu),m=te(()=>i.taxon),_=te(()=>{var N,C;return((N=f.value)==null?void 0:N.id)&&((C=m.value)==null?void 0:C.id)}),v=te(()=>c.filter(N=>Ha(N.meta.rankGroup,m.value.rank_string)));il(async()=>{await M()}),Ue(()=>n.params.id,async()=>{d.abort(),d=new AbortController,M()}),en(async()=>{var N,C;((N=f.value)==null?void 0:N.id)!==Number(n.params.id)||!((C=m.value)!=null&&C.id)?await M():P()}),ir(()=>{i.$reset(),u.$reset()});async function M(){i.$reset(),u.$reset();try{await i.loadInit({otuId:n.params.id,controller:d}),P()}catch(N){N.name!==go.CanceledError&&A(N)}}function A(N){var C;switch((C=N==null?void 0:N.response)==null?void 0:C.status){case 404:a.replace({name:"httpError404"});break;case 500:a.replace({name:"httpError500"});break}}function P(){hl({title:`My project - ${m.value.full_name}`}),Fv([Nv({id:n.fullPath,name:m.value.full_name,scientificName:{name:m.value.full_name,author:m.value.author,taxonRank:m.value.rank},parentTaxon:{name:m.value.parent.full_name,taxonRank:m.value.parent.rank},commonNames:i.taxonomy.commonNames,alternateName:i.taxonomy.synonyms})])}function S({id:N,otu_valid_id:C}){a.push({name:"otus-id-overview",params:{id:C||N}})}return(N,C)=>{const O=ft("VSkeleton"),j=ft("Autocomplete"),T=ft("ClientOnly"),z=ft("TabItem"),W=ft("TabMenu"),ot=ft("RouterView");return H(),tt("main",null,[X("div",pb,[X("div",fb,[X("div",mb,[X("div",gb,[st(O,{class:"w-full md:w-3/4"},{default:pt(()=>{var J;return[_.value?(H(),Tt(nb,{key:0,class:"w-full md:w-3/4",list:((J=f.value)==null?void 0:J.parents)||{},current:m.value},null,8,["list","current"])):Dt("",!0)]}),_:1}),st(j,{class:"print:hidden min-w-full mb-2 md:min-w-fit md:ml-2 md:mb-0 md:w-96",url:"/otus/autocomplete","query-param":"term",label:"label_html",placeholder:"Search name...",params:{having_taxon_name_only:!0},onSelect:S})]),X("div",_b,[st(O,{lines:2,class:"w-96"},{default:pt(()=>[_.value?(H(),Tt(ub,{key:0})):Dt("",!0)]),_:1}),X("div",yb,[st(T,null,{default:pt(()=>[st(Kv)]),_:1}),_.value?(H(),Tt(cb,{key:0,otu:f.value},null,8,["otu"])):Dt("",!0)])])]),_.value&&Kt(c).length>1?(H(),Tt(W,{key:0,class:"m-[-1px] print:hidden"},{default:pt(()=>[(H(!0),tt(Gt,null,ye(v.value,({name:J,label:rt})=>(H(),Tt(z,{key:J,to:{name:J}},{default:pt(()=>[re(Qt(rt),1)]),_:2},1032,["to"]))),128))]),_:1})):Dt("",!0)])]),X("div",vb,[X("div",bb,[_.value?(H(),Tt(ot,{key:Kt(n).fullPath,"taxon-id":m.value.id,taxon:m.value,"taxon-rank":m.value.rank_string,"otu-id":f.value.id,otu:f.value},null,8,["taxon-id","taxon","taxon-rank","otu-id","otu"])):Dt("",!0)])])])}}},xb=["innerHTML"],kb={__name:"PanelContentTopic",props:{title:{type:String,required:!0},textList:{type:Array,required:!0}},setup(t){return(n,a)=>{const s=ft("VCardHeader"),c=ft("VCardContent");return H(),tt(Gt,null,[st(s,{class:"border-t border-base-muted first:border-t-0"},{default:pt(()=>[re(Qt(t.title),1)]),_:1}),st(c,null,{default:pt(()=>[(H(!0),tt(Gt,null,ye(t.textList,(i,u)=>(H(),tt("ul",{key:u,class:"pt-1 text-sm"},[X("li",{innerHTML:i},null,8,xb)]))),128))]),_:1})],64)}}},Lb={__name:"PanelContent",props:{otuId:{type:Number,required:!0}},setup(t){const n=t,a=Zt([]),s=new AbortController,c=te(()=>a.value.reduce((i,u)=>(i[u.name]?i[u.name].push(u.text):i[u.name]=[u.text],i),{}));return lh(()=>{Mr("panel:content",()=>ln.getOtuContent(n.otuId,{params:{extend:["depiction"]},signal:s.signal})).then(({data:i})=>{a.value=i}).catch(i=>{})}),ir(()=>{s.abort()}),(i,u)=>{const d=ft("VCard");return a.value.length?(H(),Tt(d,{key:0},{default:pt(()=>[(H(!0),tt(Gt,null,ye(c.value,(f,m)=>(H(),Tt(kb,{key:m,title:m,"text-list":f},null,8,["title","text-list"]))),128))]),_:1})):Dt("",!0)}}},Mb={id:"panel:content",component:Lb},Cb={class:"synonyms"},Pb=X("span",{class:"text-orange-500 mr-1"},"=",-1),Sb=["innerHTML"],Eb={__name:"DescendantsSynonymList",props:{list:{type:Array,required:!0}},setup(t){const n=t;return(a,s)=>(H(),tt("ul",Cb,[(H(!0),tt(Gt,null,ye(n.list,c=>(H(),tt("li",{key:c},[Pb,X("span",{innerHTML:c},null,8,Sb)]))),128))]))}};const Tb={key:0,class:"tree"},Ob={__name:"DescendantsTree",props:{taxonomy:{type:Object,required:!0},level:{type:Number,default:1}},setup(t){const n=t,a=Zt(!!n.taxonomy.descendants.length),s=Zt([...n.taxonomy.descendants]);Ue(a,i=>{i&&c()});const c=()=>{s.value.length||ln.getTaxonomy(n.taxonomy.otu_id,{params:{max_descendants_depth:1}}).then(({data:i})=>{s.value=i.descendants})};return(i,u)=>{const d=ft("button-expand"),f=ft("router-link"),m=ft("AnimationOpacity");return Object.keys(t.taxonomy).length?(H(),tt("li",{key:t.taxonomy.otu_id},[t.taxonomy.leaf_node?Dt("",!0):(H(),Tt(d,{key:0,modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=_=>a.value=_),class:"absolute -left-2.5"},null,8,["modelValue"])),st(f,{class:"text-primary-500",to:{name:"otus-id",params:{id:t.taxonomy.otu_id}},innerHTML:t.taxonomy.name},null,8,["to","innerHTML"]),t.taxonomy.nomenclatural_synonyms.length?(H(),Tt(Eb,{key:1,class:"pb-4",list:t.taxonomy.nomenclatural_synonyms},null,8,["list"])):Dt("",!0),st(m,null,{default:pt(()=>[s.value.length?(H(),tt("ul",Tb,[(H(!0),tt(Gt,null,ye(s.value,_=>(H(),Tt(m,{key:_.otu_id},{default:pt(()=>[a.value?(H(),Tt(hd,{key:0,taxonomy:_},null,8,["taxonomy"])):Dt("",!0)]),_:2},1024))),128))])):Dt("",!0)]),_:1})])):Dt("",!0)}}},hd=ie(Ob,[["__scopeId","data-v-b79ba271"]]),Ab=X("h3",null,"JSON Data",-1),Rb={key:0,class:"p-5 font-normal"},Bb={class:"pb-2 text-sm"},Ib=["href"],Db={class:"relative"},zb=["innerHTML"],Si={__name:"PanelDropdown",props:{panelKey:{type:String,required:!0},menuOptions:{type:Array,default:()=>[]}},setup(t){const n=t,a=te(()=>s.getRequest(n.panelKey)),s=Is(),c=Zt(!1),i=te(()=>[...n.menuOptions,{label:"JSON Data",action:()=>c.value=!0}]);return(u,d)=>{const f=ft("IconHamburger"),m=ft("Dropdown"),_=ft("VClipboard"),v=ft("VModal");return H(),tt(Gt,null,[st(m,{items:i.value},{button:pt(()=>[st(f,{class:"text-base-soft h-4"})]),_:1},8,["items"]),c.value?(H(),Tt(v,{key:0,onClose:d[0]||(d[0]=M=>c.value=!1)},{header:pt(()=>[Ab]),default:pt(()=>[a.value?(H(),tt("div",Rb,[X("h3",Bb,[re(" URL: "),X("a",{href:a.value.url},Qt(a.value.url),9,Ib)]),X("div",Db,[X("p",{class:"bg-base-background p-2 text-sm font-normal whitespace-pre-wrap",innerHTML:JSON.stringify(a.value.data,null,4)},null,8,zb),st(_,{class:"absolute right-2 top-2 opacity-75",text:JSON.stringify(a.value.data,null,2)},null,8,["text"])])])):Dt("",!0)]),_:1})):Dt("",!0)],64)}}};const jb=t=>(Xc("data-v-91511d41"),t=t(),Qc(),t),Nb=jb(()=>X("h2",{class:"text-md"},"Descendants and synonyms",-1)),Fb={class:"tree ml-2"},Vb={__name:"PanelDescendants",props:{otuId:{type:[String,Number],required:!0}},setup(t){const n=t,a=Zt(null),s=Zt(!1);return Ue(()=>n.otuId,async()=>{n.otuId&&(s.value=!0,Mr("panel:descendants",()=>ln.getTaxonomy(n.otuId,{params:{max_descendants_depth:1}})).then(({data:c})=>{a.value=c}).finally(()=>s.value=!1))},{immediate:!0}),(c,i)=>{const u=ft("VSpinner"),d=ft("ClientOnly"),f=ft("VCardHeader"),m=ft("AnimationOpacity"),_=ft("VCardContent"),v=ft("VCard");return H(),Tt(v,null,{default:pt(()=>[st(d,null,{default:pt(()=>[s.value?(H(),Tt(u,{key:0,"logo-class":"w-8 h-8",legend:""})):Dt("",!0)]),_:1}),st(f,{class:"flex justify-between"},{default:pt(()=>[Nb,st(Si,{"panel-key":"panel:descendants"})]),_:1}),st(_,{class:"text-sm"},{default:pt(()=>[X("ul",Fb,[st(m,null,{default:pt(()=>[a.value&&(a.value.nomenclatural_synonyms.length||a.value.descendants.length)?(H(),Tt(hd,{key:0,taxonomy:a.value},null,8,["taxonomy"])):Dt("",!0)]),_:1})])]),_:1})]),_:1})}}},Hb=ie(Vb,[["__scopeId","data-v-91511d41"]]),Gb={id:"panel:descendants",component:Hb},$b=wo("imageStore",{state:()=>({images:null,controller:null}),actions:{resetRequest(){var t;(t=this.controller)==null||t.abort()},async loadImages(t){const n={extend:["depictions","attribution","source","citations"],otu_scope:["all"]};this.controller=new AbortController;try{const a=await Mr("panel:images",()=>ln.getOtuImages(t,{params:n,signal:this.controller.signal}));this.images=a.data,this.controller=null}catch(a){a.name!==go.CanceledError&&(this.controller=null)}}}}),Ub={__name:"PanelGallery",props:{otuId:{type:[String,Number],required:!0}},setup(t){const n=t,a=$b(),s=te(()=>a.images||[]);return il(async()=>{await a.loadImages(n.otuId)}),en(()=>{a.images||a.loadImages(n.otuId)}),ir(()=>{a.resetRequest(),a.$reset()}),(c,i)=>{const u=ft("GalleryImage"),d=ft("VCardContent"),f=ft("VCard");return s.value.length?(H(),Tt(f,{key:0},{default:pt(()=>[st(d,null,{default:pt(()=>[st(u,{images:s.value},null,8,["images"])]),_:1})]),_:1})):Dt("",!0)}}},Zb={id:"panel:gallery",component:Ub,rankGroup:[]},qb=wo("distributionStore",{state:()=>({distribution:{geojson:null,errorMessage:null,currentShapeTypes:[],cachedMap:null},controller:null}),actions:{resetRequest(){var t;(t=this.controller)==null||t.abort()},loadCachedMap(t){ln.getCachedMap(t,{signal:this.controller.signal}).then(n=>{this.distribution.cachedMap=n.data})},async getAggregateShape(t){Mr("panel:map",()=>ln.getOtuDistribution(t,{signal:this.controller.signal})).then(({data:n})=>{const a=JSON.parse(n.cached_map.geo_json);this.distribution.currentShapeTypes=["Aggregate"],this.distribution.geojson={features:[Hv(a,"Aggregate")]},this.loadCachedMap(n.cached_map.id)}).catch(n=>{n.name!=go.CanceledError&&(this.distribution.errorMessage=n.response.data.error,this.distribution.currentShapeTypes=[],this.distribution.geojson=[])})},async loadDistribution({otuId:t,rankString:n}){const a=n&&Vv("SpeciesGroup",n);this.controller=new AbortController,a?Mr("panel:map",()=>ln.getOtuGeoJSONDistribution(t,{signal:this.controller.signal})).then(({data:s})=>{if(s.request_too_large)this.distribution.geojson=null,this.distribution.errorMessage=s.message;else{const{features:c,shapeTypes:i}=Gv(s);this.distribution.currentShapeTypes=i,this.distribution.geojson={features:c}}}).catch(s=>{s.name!==go.CanceledError&&this.getAggregateShape(t)}):this.getAggregateShape(t)}}});function dd(t){return{html:`<div class="bg-map-collection-object"><span>${t.getChildCount()}</span></div>`,className:"leaflet-marker-icon leaflet-zoom-animated leaflet-interactive bg-map-collection-object bg-opacity-60 marker-cluster text-white",iconSize:[40,40]}}function pd(t){return{html:`
    <div class="relative flex w-[40px] h-[40px]">
      <div class="rounded-l-full bg-map-collection-object bg-opacity-60">
        <div class="w-[15px] h-[30px] rounded-l-full bg-map-collection-object ml-[5px] mt-[5px]"></div>
      </div>
      <div class="rounded-r-full bg-map-type-material bg-opacity-60">
        <div class="w-[15px] h-[30px] rounded-r-full bg-map-type-material mr-[5px] mt-[5px]"></div>
      </div>
      <span class="absolute text-xs top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-white">
        ${t.getChildCount()}
      </span>
    </div>`,className:"leaflet-marker-icon leaflet-zoom-animated leaflet-interactive",iconSize:[40,40]}}function Kb(t){return{html:`<div class="bg-map-type-material"><span>${t.getChildCount()}</span></div>`,className:"leaflet-marker-icon leaflet-zoom-animated leaflet-interactive marker-cluster bg-map-type-material bg-opacity-60 text-white",iconSize:[40,40]}}const Wb=Object.freeze(Object.defineProperty({__proto__:null,CollectionObject:dd,Mixed:pd,TypeMaterial:Kb},Symbol.toStringTag,{value:"Module"}));function Jb({L:t,cluster:n}){const a=n.getAllChildMarkers().map(u=>u.feature.properties.base.map(d=>d.type)).flat(),s=[...new Set(a)],c=s.pop(),i=s.length?pd:Wb[c]||dd;return t.divIcon(i(n))}const Yb=X("h3",{class:"font-medium"},"Cached map",-1),Xb={class:"p-4 pt-0"},Qb={key:0,class:"text-success flex text-sm items-center"},t0=X("span",{class:"ml-1"}," Map is synchronized with the latest changes * ",-1),e0={key:1,class:"text-warning flex text-sm items-center"},n0=X("span",{class:"ml-1"}," Map is not synchronized with the latest changes * ",-1),r0=X("p",{class:"italic text-xs pt-4"}," * Aggregate maps are generated from georeference and asserted distribution data. Map computation takes time, and as such they are re-calculated periodically rather than when individual georeferences and asserted distributions are created, destroyed, or updated. When a warning notice is present then the map is not syncronized with the latest changes to the underlying data. ",-1),i0={__name:"CachedMap",props:{cachedMap:{type:Object,required:!0}},setup(t){const n=Zt(!1);return(a,s)=>{const c=ft("IconCheck"),i=ft("IconWarning"),u=ft("VButton"),d=ft("VTableHeaderCell"),f=ft("VTableHeaderRow"),m=ft("VTableHeader"),_=ft("VTableBodyCell"),v=ft("VTableBodyRow"),M=ft("VTableBody"),A=ft("VTable"),P=ft("VModal");return H(),tt(Gt,null,[st(u,{class:"left-2 bottom-2 !px-2 py-2 rounded-full absolute z-[1500]",primary:"",title:"Cached map",onClick:s[0]||(s[0]=S=>n.value=!0)},{default:pt(()=>[t.cachedMap.synced?(H(),Tt(c,{key:0,class:"w-4 h-4"})):(H(),Tt(i,{key:1,class:"w-4 h-4"}))]),_:1}),n.value?(H(),Tt(P,{key:0,onClose:s[1]||(s[1]=()=>n.value=!1)},{header:pt(()=>[Yb]),default:pt(()=>[X("div",Xb,[st(A,null,{default:pt(()=>[st(m,null,{default:pt(()=>[st(f,null,{default:pt(()=>[st(d,null,{default:pt(()=>[re("Data")]),_:1}),st(d)]),_:1})]),_:1}),st(M,null,{default:pt(()=>[st(v,null,{default:pt(()=>[st(_,null,{default:pt(()=>[re(" Is synced ")]),_:1}),st(_,null,{default:pt(()=>[t.cachedMap.synced?(H(),tt("p",Qb,[st(c,{class:"w-4 h-4"}),t0])):(H(),tt("p",e0,[st(i,{class:"w-4 h-4"}),n0]))]),_:1})]),_:1}),st(v,null,{default:pt(()=>[st(_,null,{default:pt(()=>[re(" Last update ")]),_:1}),st(_,null,{default:pt(()=>[re(Qt(new Date(t.cachedMap.updated_at)),1)]),_:1})]),_:1})]),_:1}),st(m,null,{default:pt(()=>[st(f,null,{default:pt(()=>[st(d,null,{default:pt(()=>[re("Source")]),_:1}),st(d,null,{default:pt(()=>[re("Total")]),_:1})]),_:1})]),_:1}),st(M,null,{default:pt(()=>[(H(!0),tt(Gt,null,ye(t.cachedMap.source_scope,(S,N)=>(H(),Tt(v,{key:N},{default:pt(()=>[st(_,{class:"capitalize"},{default:pt(()=>[re(Qt(N.replaceAll("_"," ")),1)]),_:2},1024),st(_,null,{default:pt(()=>[re(Qt(S),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),r0])]),_:1})):Dt("",!0)],64)}}},o0={class:"bottom-0 w-screen bg-base-foreground z-[1000] left-0 p-4 text-sm flex flex-row justify-between align-middle box-border border-b border-base-muted"},s0=["innerHTML"],a0={__name:"SearchBar",props:{label:{type:String,required:!0}},emits:["close"],setup(t,{emit:n}){return(a,s)=>{const c=ft("IconClose");return H(),tt("div",o0,[X("div",null,[X("span",{class:"ml-2",innerHTML:t.label},null,8,s0)]),st(c,{class:"cursor-pointer",onClick:s[0]||(s[0]=()=>n("close"))})])}}},l0={key:1,class:"text-lg text-center text-base-lighter align-middle p-4"},u0={__name:"ListResults",props:{list:{type:Array,default:()=>[]}},emits:["close","close:table"],setup(t,{emit:n}){return(a,s)=>{const c=ft("IconArrowRight"),i=ft("VTableHeaderCell"),u=ft("VTableHeaderRow"),d=ft("VTableHeader"),f=ft("RouterLink"),m=ft("VTableBodyCell"),_=ft("VTableBodyRow"),v=ft("VTableBody"),M=ft("VTable");return t.list.length?(H(),Tt(M,{key:0,class:"shadow-md"},{default:pt(()=>[st(d,null,{default:pt(()=>[st(u,null,{default:pt(()=>[st(i,{class:"w-full flex justify-between box-border items-center"},{default:pt(()=>[X("span",null,"OTU ("+Qt(t.list.length)+")",1),st(c,{class:"opacity-50 cursor-pointer w-4 h-4",onClick:s[0]||(s[0]=A=>n("close:table"))})]),_:1})]),_:1})]),_:1}),st(v,null,{default:pt(()=>[(H(!0),tt(Gt,null,ye(t.list,A=>(H(),Tt(_,{key:A.id},{default:pt(()=>[st(m,null,{default:pt(()=>[st(f,{innerHTML:A.object_tag,to:{name:"otus-id",params:{id:A.id}},onClick:s[1]||(s[1]=()=>n("close"))},null,8,["innerHTML","to"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(H(),tt("div",l0," No OTUs found in this area "))}}};const c0={__name:"OtuSearch",props:{otu:{type:Array,default:()=>[]},shapes:{type:Object,default:void 0}},emits:["close"],setup(t,{emit:n}){const a=t,s=Zt(),c=Zt(null),i=Zt([]),u=Zt(!1),d=Zt(),f=Zt(6),m=Zt(6),_=te(()=>!!a.shapes&&m.value<=f.value);en(()=>{document.addEventListener("keyup",v),document.body.classList.add("overflow-hidden")}),Zr(()=>{document.removeEventListener("keyup",v),document.body.classList.remove("overflow-hidden")});const v=({key:N})=>{switch(N){case"Escape":n("close");break}};function M(N){const C={geo_json:N,taxon_name_id:[a.otu.taxon_name_id],descendants:!0,per:5e3};d.value=!0,ln.getOtus(C).then(({data:O})=>{i.value=O,u.value=!0}).finally(O=>{d.value=!1})}function A(N){P(),_.value&&c.value.resizeMap()}function P(){m.value=c.value.getMapObject().getZoom()}function S(){f.value=c.value.getMapObject().getZoom(),P()}return(N,C)=>{const O=ft("VSpinner"),j=ft("VMap");return H(),tt("div",{ref_key:"root",ref:s,class:"w-screen h-screen fixed top-0 left-0 z-[5000] flex flex-col"},[d.value?(H(),Tt(O,{key:0})):Dt("",!0),st(a0,{label:t.otu.object_tag,onClose:C[0]||(C[0]=()=>n("close"))},null,8,["label"]),X("div",{class:Je(["w-full h-full relative",{"disable-zoom-out":_.value}])},[st(j,{ref_key:"mapRef",ref:c,class:"w-full h-full",controls:"",dragging:!_.value,"zoom-bounds":f.value,geojson:t.shapes,"onGeojson:ready":S,"onAdd:layer":C[1]||(C[1]=T=>M(JSON.stringify(T.geometry))),"onEdit:layer":C[2]||(C[2]=T=>M(JSON.stringify(T.geometry))),"onDrag:layer":C[3]||(C[3]=T=>M(JSON.stringify(T.geometry))),"onZoom:change":A,zoom:4},null,8,["dragging","zoom-bounds","geojson"]),X("div",{class:Je(["h-full md:w-96 absolute top-0 bg-base-background z-[2000] overflow-auto ease-in-out duration-300 w-full",{"md:-right-96 -right-full":!u.value,"right-0":u.value}])},[u.value?(H(),Tt(u0,{key:0,list:i.value,onClose:C[4]||(C[4]=()=>n("close")),"onClose:table":C[5]||(C[5]=()=>u.value=!1)},null,8,["list"])):Dt("",!0)],2)],2)],512)}}},h0=ie(c0,[["__scopeId","data-v-d0d71188"]]),d0={class:"relative"},p0={key:0,class:"flex flex-row p-2 text-xs italic"},f0={key:1,class:"flex flex-row p-2 gap-2 text-xs"},m0=2,g0={__name:"PanelMap",props:{otuId:{type:[String,Number],required:!0},otu:{type:Object,required:!0},taxon:{type:Object,required:!0},cluster:{type:Boolean,default:!0}},setup(t){const n=t,a=Zt(!0),s=Zt(!1),c=qb(),i={AssertedDistribution:{label:"Asserted distribution",background:"bg-map-asserted"},Georeference:{label:"Georeference",background:"bg-map-georeference"},TypeMaterial:{label:"Type material",background:"bg-map-type-material"},CollectionObject:{label:"Collection object",background:"bg-map-collection-object"},Aggregate:{label:"Aggregate (Asserted distribution & Georeference)",background:"bg-map-aggregate"}};return en(()=>{a.value=!0,c.loadDistribution({otuId:n.otuId,rankString:n.taxon.rank_string})}),ir(()=>{c.resetRequest(),c.$reset()}),(u,d)=>{const f=ft("VSpinner"),m=ft("VMap"),_=ft("VButton"),v=ft("ClientOnly"),M=ft("VCard");return H(),Tt(M,null,{default:pt(()=>[X("div",d0,[st(v,null,{default:pt(()=>[a.value?(H(),Tt(f,{key:0})):Dt("",!0),st(m,{class:"h-96 max-h-96",dragging:"",cluster:t.cluster,zoom:m0,"zoom-bounds":8,geojson:Kt(c).distribution.geojson,"cluster-icon-create-function":Kt(Jb),"onGeojson:ready":d[0]||(d[0]=()=>a.value=!1)},null,8,["cluster","geojson","cluster-icon-create-function"]),st(_,{class:"h-6 text-sm absolute right-3 top-3 z-[400]",primary:"",onClick:d[1]||(d[1]=()=>s.value=!0)},{default:pt(()=>[re(" Search ")]),_:1}),s.value?(H(),Tt(h0,{key:1,otu:t.otu,shapes:Kt(c).distribution.geojson,onClose:d[2]||(d[2]=()=>s.value=!1)},null,8,["otu","shapes"])):Dt("",!0),Kt(c).distribution.cachedMap?(H(),Tt(i0,{key:2,"cached-map":Kt(c).distribution.cachedMap},null,8,["cached-map"])):Dt("",!0)]),_:1})]),Kt(c).distribution.errorMessage?(H(),tt("div",p0," * "+Qt(Kt(c).distribution.errorMessage),1)):Dt("",!0),Kt(c).distribution.currentShapeTypes.length?(H(),tt("div",f0,[(H(!0),tt(Gt,null,ye(Kt(c).distribution.currentShapeTypes,A=>(H(),tt("div",{key:A,class:"flex flex-row items-center"},[X("div",{class:Je(["w-3 h-3 m-1 rounded-sm",i[A].background])},null,2),X("span",null,Qt(i[A].label),1)]))),128))])):Dt("",!0)]),_:1})}}},_0={id:"panel:map",component:g0};function fd(t,n){const a=t.slice(),s=a.splice(0,n),c=a.splice(-n);return{first:s,middle:a,last:c}}const y0={class:"border-b border-base-muted p-3 px-5"},v0=["title","innerHTML"],b0=["innerHTML"],ya={__name:"PanelCitationRow",props:{citation:{type:Object,required:!0}},setup(t){return(n,a)=>(H(),tt("li",y0,[X("span",{class:"break-all block",title:t.citation.label,innerHTML:t.citation.label},null,8,v0),t.citation.type_label?(H(),tt("p",{key:0,class:"ml-4 text-base-soft",innerHTML:t.citation.type_label},null,8,b0)):Dt("",!0)]))}},w0={class:"flex justify-start border-b p-3 px-4 cursor-pointer border-base-muted"},md={__name:"PanelNomenclatureShowMore",props:{count:{type:Number,required:!0}},setup(t){return(n,a)=>{const s=ft("IconPlusCircle");return H(),tt("li",w0,[X("div",{class:"h-5 w-5 text-secondary-color opacity-60 mr-2 cursor-pointer",onClick:a[0]||(a[0]=()=>n.isExpanded=!n.isExpanded)},[st(s,{class:"h-5 w-5"})]),X("span",null,"... Show all ... ("+Qt(t.count)+")",1)])}}},x0={class:"text-md"},k0={class:"text-sm"},L0={class:"text-sm"},M0={class:"text-sm"},C0=2,P0={__name:"PanelNomenclature",props:{otuId:{type:[Number,String],required:!0},taxonId:{type:[Number,String],required:!0},taxon:{type:Object,default:void 0},otu:{type:Object,default:void 0}},setup(t){const n=qr(),a=Zt(!1),s=te(()=>fd(n.catalog.timeline,C0)),c=te(()=>[{label:a.value?"Show less":"Show all",action:()=>a.value=!a.value}]);return(i,u)=>{const d=ft("VSpinner"),f=ft("VCardHeader"),m=ft("AnimationOpacity"),_=ft("VCard");return H(),Tt(_,null,{default:pt(()=>[Kt(n).catalog.isLoading?(H(),Tt(d,{key:0,"logo-class":"w-8 h-8",legend:""})):Dt("",!0),st(f,{class:"flex justify-between"},{default:pt(()=>[X("h2",x0," Nomenclature ("+Qt(Kt(n).catalog.timeline.length)+") ",1),st(Si,{"menu-options":c.value,"panel-key":"taxonomy"},null,8,["menu-options"])]),_:1}),X("ul",k0,[(H(!0),tt(Gt,null,ye(s.value.first,v=>(H(),Tt(ya,{key:v.label,citation:v},null,8,["citation"]))),128)),!a.value&&s.value.middle.length?(H(),Tt(md,{key:0,count:s.value.middle.length,onClick:u[0]||(u[0]=v=>a.value=!0)},null,8,["count"])):Dt("",!0)]),st(m,null,{default:pt(()=>[bo(X("ul",L0,[(H(!0),tt(Gt,null,ye(s.value.middle,v=>(H(),Tt(ya,{key:v.label,citation:v},null,8,["citation"]))),128))],512),[[Ts,a.value]])]),_:1}),X("ul",M0,[(H(!0),tt(Gt,null,ye(s.value.last,v=>(H(),Tt(ya,{key:v.label,citation:v},null,8,["citation"]))),128))])]),_:1})}}},S0={id:"panel:nomenclature",component:P0},E0={class:"border-b border-base-muted p-3 px-5"},T0=["title","innerHTML"],va={__name:"PanelReferenceRow",props:{reference:{type:String,required:!0}},setup(t){return(n,a)=>(H(),tt("li",E0,[X("span",{class:"[&>a]:break-all block",title:t.reference,innerHTML:t.reference},null,8,T0)]))}},O0={class:"text-md"},A0={class:"text-sm"},R0=2,B0={__name:"PanelNomenclatureReferences",setup(t){const n=qr(),a=Zt(!1),s=te(()=>fd(n.catalog.sources,R0)),c=te(()=>[{label:a.value?"Show less":"Show all",action:()=>a.value=!a.value}]);return(i,u)=>{const d=ft("VSpinner"),f=ft("VCardHeader"),m=ft("AnimationOpacity"),_=ft("VCard");return H(),Tt(_,null,{default:pt(()=>[Kt(n).catalog.isLoading?(H(),Tt(d,{key:0,"logo-class":"w-8 h-8",legend:""})):Dt("",!0),st(f,{class:"flex justify-between"},{default:pt(()=>[X("h2",O0," Nomenclature references ("+Qt(Kt(n).catalog.sources.length)+") ",1),st(Si,{"menu-options":c.value,"panel-key":"taxonomy"},null,8,["menu-options"])]),_:1}),X("ul",A0,[(H(!0),tt(Gt,null,ye(s.value.first,v=>(H(),Tt(va,{key:v,reference:v},null,8,["reference"]))),128)),!a.value&&s.value.middle.length?(H(),Tt(md,{key:0,count:s.value.middle.length,onClick:u[0]||(u[0]=v=>a.value=!0)},null,8,["count"])):Dt("",!0),st(m,null,{default:pt(()=>[bo(X("div",null,[(H(!0),tt(Gt,null,ye(s.value.middle,v=>(H(),Tt(va,{key:v,reference:v},null,8,["reference"]))),128))],512),[[Ts,a.value]])]),_:1}),(H(!0),tt(Gt,null,ye(s.value.last,v=>(H(),Tt(va,{key:v,reference:v},null,8,["reference"]))),128))])]),_:1})}}},I0={id:"panel:nomenclature-references",component:B0},D0=X("h2",{class:"text-md"},"Stats",-1),z0={__name:"PanelStats",props:{otuId:{type:[Number,String],required:!0},taxonId:{type:[Number,String],required:!0},taxon:{type:Object,default:void 0},otu:{type:Object,default:void 0}},setup(t){const n=qr(),a=Zt(!1),s=te(()=>[{label:a.value?"Hide taxa":"Show taxa",action:()=>a.value=!a.value}]);return(c,i)=>{const u=ft("VSpinner"),d=ft("VCardHeader"),f=ft("VTableHeaderCell"),m=ft("VTableHeaderRow"),_=ft("VTableHeader"),v=ft("VTableBodyCell"),M=ft("VTableBodyRow"),A=ft("VTableBody"),P=ft("VTable"),S=ft("VCardContent"),N=ft("VCard");return H(),Tt(N,null,{default:pt(()=>[Kt(n).catalog.isLoading?(H(),Tt(u,{key:0,"logo-class":"w-8 h-8",legend:""})):Dt("",!0),st(d,{class:"flex justify-between"},{default:pt(()=>[D0,st(Si,{"panel-key":"taxonomy","menu-options":s.value},null,8,["menu-options"])]),_:1}),st(S,{class:"text-sm"},{default:pt(()=>[st(P,null,{default:pt(()=>[st(_,null,{default:pt(()=>[st(m,null,{default:pt(()=>[st(f,{class:"bg-base-foreground"}),a.value?(H(),Tt(f,{key:0,title:"OTUs linked to valid protonyms"},{default:pt(()=>[re(" Taxa ")]),_:1})):Dt("",!0),st(f,{title:"Taxon names",class:"border-l border-base-border"},{default:pt(()=>[re(" Names ")]),_:1}),st(f,{colspan:"2",class:"bg-base-foreground"})]),_:1}),st(m,null,{default:pt(()=>[st(f,null,{default:pt(()=>[re("Rank")]),_:1}),a.value?(H(),Tt(f,{key:0,title:"OTUs linked to valid protonyms"},{default:pt(()=>[re("Total")]),_:1})):Dt("",!0),st(f,{title:"Taxon names",class:"border-l border-base-border"},{default:pt(()=>[re(" Total ")]),_:1}),st(f,null,{default:pt(()=>[re(" Valid ")]),_:1}),st(f,null,{default:pt(()=>[re(" Invalid ")]),_:1})]),_:1})]),_:1}),st(A,null,{default:pt(()=>[(H(!0),tt(Gt,null,ye(Kt(n).catalog.stats,({rank:C,taxa:O,names:j})=>(H(),Tt(M,{key:C},{default:pt(()=>[st(v,{class:"capitalize"},{default:pt(()=>[re(Qt(C),1)]),_:2},1024),a.value?(H(),Tt(v,{key:0},{default:pt(()=>[re(Qt(O),1)]),_:2},1024)):Dt("",!0),st(v,{class:"border-l border-base-border"},{default:pt(()=>[re(Qt(j.invalid+j.valid),1)]),_:2},1024),st(v,null,{default:pt(()=>[re(Qt(j.valid),1)]),_:2},1024),st(v,null,{default:pt(()=>[re(Qt(j.invalid),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}},j0={id:"panel:statistics",component:z0},N0=X("h2",{class:"text-md"},"Type",-1),F0=["innerHTML"],V0={__name:"PanelTypeDesignation",props:{taxonId:{type:[String,Number],required:!0}},setup(t){const n=qr(),a=te(()=>{var c;return((c=n.taxon)==null?void 0:c.type_taxon_name_relationship)||{}}),s=te(()=>[a.value.subject_object_tag||"",a.value.subject_status_tag||"",a.value.object_object_tag||""].join(" "));return(c,i)=>{const u=ft("VCardHeader"),d=ft("VCardContent"),f=ft("VCard");return H(),Tt(f,null,{default:pt(()=>[st(u,{class:"flex justify-between"},{default:pt(()=>[N0,st(Si,{"panel-key":"panel:type"})]),_:1}),st(d,{class:"text-sm"},{default:pt(()=>[X("p",{innerHTML:s.value},null,8,F0)]),_:1})]),_:1})}}},H0={id:"panel:type",component:V0,rankGroup:[_y,yy]},G0=X("h2",{class:"text-md"},"Type specimen",-1),$0={__name:"PanelTypeSpecimen",props:{otuId:{type:[String,Number],required:!0}},setup(t){const n=t,a=Zt([]);return Ue(()=>n.otuId,()=>{n.otuId&&Mr("panel:typeMaterial",()=>ln.getOtuTypeMaterial(n.otuId)).then(({data:s})=>{a.value=s.type_materials_catalog_labels.sort((c,i)=>nc.indexOf(c.type_type)-nc.indexOf(i.type_type))})},{immediate:!0}),(s,c)=>{const i=ft("VCardHeader"),u=ft("VCardContent"),d=ft("VCard");return a.value.length?(H(),Tt(d,{key:0},{default:pt(()=>[st(i,{class:"flex justify-between"},{default:pt(()=>[G0,st(Si,{"panel-key":"panel:typeMaterial"})]),_:1}),st(u,{class:"text-sm"},{default:pt(()=>[X("p",null,Qt(a.value[0].label),1)]),_:1})]),_:1})):Dt("",!0)}}},U0={id:"panel:type-specimen",component:$0,rankGroup:[vy,by]},Z0={overview:{panels:[[["panel:gallery","panel:type","panel:type-specimen","panel:nomenclature","panel:nomenclature-references"],["panel:map","panel:descendants","panel:content","panel:statistics"]]]}},q0=Object.values(Object.assign({"/src/modules/otus/components/Panel/PanelContent/main.js":Mb,"/src/modules/otus/components/Panel/PanelDescendants/main.js":Gb,"/src/modules/otus/components/Panel/PanelGallery/main.js":Zb,"/src/modules/otus/components/Panel/PanelMap/main.js":_0,"/src/modules/otus/components/Panel/PanelNomenclature/main.js":S0,"/src/modules/otus/components/Panel/PanelNomenclatureReferences/main.js":I0,"/src/modules/otus/components/Panel/PanelStats/main.js":j0,"/src/modules/otus/components/Panel/PanelTypeDesignation/main.js":H0,"/src/modules/otus/components/Panel/PanelTypeSpecimen/main.js":U0})),{taxa_page:K0}={base_url:"/taxonpages/",hash_mode:!0,map_tile_server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",map_tile_attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://sfg.taxonworks.org/api/v1",project_token:"c5lh0vgnBGTOQDOSfRYC8g",copyright_image:null,copyright_image_link:null,copyright_text:"Copyright CC0",header_logo_url:null,header_logo_text:"My project",header_links:[{label:"Home",link:"/"},{label:"About",link:"/about"}],map_tiles:[{label:"OpenStreetMap",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}],metadata:[{name:"description",content:"TaxonPages is a tool to serve taxon pages."},{name:"keywords",content:"taxonpages, species, sfg"},{name:"robots",content:"follow"}],project_name:"My project",project_citation:null,project_url:null,project_authors:null},pc=Object.assign({...Z0,...K0});function W0(t){return t.map(n=>n.map(a=>a.map(s=>{const i=typeof s=="string"?{id:s}:{...s};return{...q0.find(d=>d.id===i.id),...i}})))}const so={};for(const t in pc){const n=pc[t];so[t]={panels:W0((n==null?void 0:n.panels)||{}),rankGroup:n.rank_group||[],label:n.label}}const J0={class:"grid gap-3"},Y0={__name:"PageLayout",props:{taxonId:{type:[Number,String],required:!0},taxonRank:{type:[String,null],required:!0},otuId:{type:[Number,String],required:!0},otu:{type:Object,required:!0},taxon:{type:Object,required:!0}},setup(t){var i;const n=t,a=Rs(),s=so[a.currentRoute.value.meta.tab],c={1:["md:grid-cols-1"],2:["md:grid-cols-2"],3:["md:grid-cols-3"]};return(i=s.rankGroup)!=null&&i.length&&!Ha(s.rankGroup,n.taxonRank)&&a.replace({name:"otus-id-overview"}),(u,d)=>(H(),tt("div",J0,[(H(!0),tt(Gt,null,ye(Kt(s).panels,f=>(H(),tt("div",{class:Je(["grid grid-cols-1 gap-3",[c[f.length]]])},[(H(!0),tt(Gt,null,ye(f,(m,_)=>(H(),tt("div",{class:"grid grid-cols-1 gap-3 auto-rows-min",key:_},[(H(!0),tt(Gt,null,ye(m,({component:v,rankGroup:M,id:A,bind:P})=>(H(),tt(Gt,{key:A},[!M||Kt(Ha)(M,t.taxonRank)?(H(),Tt(Ci(v),xh({key:0,"otu-id":t.otuId,otu:t.otu,"taxon-id":t.taxonId,taxon:t.taxon,"panel-key":A},P),null,16,["otu-id","otu","taxon-id","taxon","panel-key"])):Dt("",!0)],64))),128))]))),128))],2))),256))]))}};function X0(){return Object.keys(so||{}).map(n=>({path:n,name:`otus-id-${n}`,component:Y0,meta:{tab:n,rankGroup:so[n].rankGroup,label:so[n].label}}))}const Q0=[{name:"otus-id",path:"/otus/:id",component:wb,redirect:{name:"otus-id-overview"},children:X0()}],tw="modulepreload",ew=function(t){return"/taxonpages/"+t},fc={},gd=function(n,a,s){if(!a||a.length===0)return n();const c=document.getElementsByTagName("link");return Promise.all(a.map(i=>{if(i=ew(i),i in fc)return;fc[i]=!0;const u=i.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!s)for(let _=c.length-1;_>=0;_--){const v=c[_];if(v.href===i&&(!u||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":tw,u||(m.as="script",m.crossOrigin=""),m.href=i,document.head.appendChild(m),u)return new Promise((_,v)=>{m.addEventListener("load",_),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>n()).catch(i=>{const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=i,window.dispatchEvent(u),!u.defaultPrevented)throw i})},nw=()=>gd(()=>import("./home-1cbb243a.js"),[]),rw=()=>gd(()=>import("./about-c53b1eb8.js"),[]),iw=[{name:"home",path:"/",component:nw,props:!0,alias:"/home"},{name:"about",path:"/about",component:rw,props:!0}],ow=Object.assign({"/src/modules/home/router/index.js":Q_,"/src/modules/httpErrorPages/router/index.js":gy,"/src/modules/otus/router/index.js":Q0}),sw=Object.assign({}),{base_url:mc,hash_mode:aw}={base_url:"/taxonpages/",hash_mode:!0,map_tile_server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",map_tile_attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://sfg.taxonworks.org/api/v1",project_token:"c5lh0vgnBGTOQDOSfRYC8g",copyright_image:null,copyright_image_link:null,copyright_text:"Copyright CC0",header_logo_url:null,header_logo_text:"My project",header_links:[{label:"Home",link:"/"},{label:"About",link:"/about"}],map_tiles:[{label:"OpenStreetMap",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}],metadata:[{name:"description",content:"TaxonPages is a tool to serve taxon pages."},{name:"keywords",content:"taxonpages, species, sfg"},{name:"robots",content:"follow"}],project_name:"My project",project_citation:null,project_url:null,project_authors:null},lw=[].concat(...Object.values(ow),...Object.values(sw)),uw=[...iw,...lw];function cw(){return aw?Cg(mc):Oh(mc)}function hw(){return c_({history:cw(),routes:uw,scrollBehavior(t,n,a){return t.hash?{el:t.hash}:{top:0}}})}function dw({originUrl:t}){const{url:n,project_token:a}={base_url:"/taxonpages/",hash_mode:!0,map_tile_server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",map_tile_attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://sfg.taxonworks.org/api/v1",project_token:"c5lh0vgnBGTOQDOSfRYC8g",copyright_image:null,copyright_image_link:null,copyright_text:"Copyright CC0",header_logo_url:null,header_logo_text:"My project",header_links:[{label:"Home",link:"/"},{label:"About",link:"/about"}],map_tiles:[{label:"OpenStreetMap",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}],metadata:[{name:"description",content:"TaxonPages is a tool to serve taxon pages."},{name:"keywords",content:"taxonpages, species, sfg"},{name:"robots",content:"follow"}],project_name:"My project",project_citation:null,project_url:null,project_authors:null},c=Dm(n&&a?N_:U_),i=hw(),u=p_();return c.use(i),c.use(u),{app:c,router:i,store:u}}var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ga={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,n){(function(a,s){s(n)})(_d,function(a){var s="1.9.4";function c(e){var o,h,g,b;for(h=1,g=arguments.length;h<g;h++){b=arguments[h];for(o in b)e[o]=b[o]}return e}var i=Object.create||function(){function e(){}return function(o){return e.prototype=o,new e}}();function u(e,o){var h=Array.prototype.slice;if(e.bind)return e.bind.apply(e,h.call(arguments,1));var g=h.call(arguments,2);return function(){return e.apply(o,g.length?g.concat(h.call(arguments)):arguments)}}var d=0;function f(e){return"_leaflet_id"in e||(e._leaflet_id=++d),e._leaflet_id}function m(e,o,h){var g,b,E,q;return q=function(){g=!1,b&&(E.apply(h,b),b=!1)},E=function(){g?b=arguments:(e.apply(h,arguments),setTimeout(q,o),g=!0)},E}function _(e,o,h){var g=o[1],b=o[0],E=g-b;return e===g&&h?e:((e-b)%E+E)%E+b}function v(){return!1}function M(e,o){if(o===!1)return e;var h=Math.pow(10,o===void 0?6:o);return Math.round(e*h)/h}function A(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function P(e){return A(e).split(/\s+/)}function S(e,o){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?i(e.options):{});for(var h in o)e.options[h]=o[h];return e.options}function N(e,o,h){var g=[];for(var b in e)g.push(encodeURIComponent(h?b.toUpperCase():b)+"="+encodeURIComponent(e[b]));return(!o||o.indexOf("?")===-1?"?":"&")+g.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function O(e,o){return e.replace(C,function(h,g){var b=o[g];if(b===void 0)throw new Error("No value provided for variable "+h);return typeof b=="function"&&(b=b(o)),b})}var j=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function T(e,o){for(var h=0;h<e.length;h++)if(e[h]===o)return h;return-1}var z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function W(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var ot=0;function J(e){var o=+new Date,h=Math.max(0,16-(o-ot));return ot=o+h,window.setTimeout(e,h)}var rt=window.requestAnimationFrame||W("RequestAnimationFrame")||J,ut=window.cancelAnimationFrame||W("CancelAnimationFrame")||W("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function gt(e,o,h){if(h&&rt===J)e.call(o);else return rt.call(window,u(e,o))}function at(e){e&&ut.call(window,e)}var bt={__proto__:null,extend:c,create:i,bind:u,get lastId(){return d},stamp:f,throttle:m,wrapNum:_,falseFn:v,formatNum:M,trim:A,splitWords:P,setOptions:S,getParamString:N,template:O,isArray:j,indexOf:T,emptyImageUrl:z,requestFn:rt,cancelFn:ut,requestAnimFrame:gt,cancelAnimFrame:at};function Lt(){}Lt.extend=function(e){var o=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=o.__super__=this.prototype,g=i(h);g.constructor=o,o.prototype=g;for(var b in this)Object.prototype.hasOwnProperty.call(this,b)&&b!=="prototype"&&b!=="__super__"&&(o[b]=this[b]);return e.statics&&c(o,e.statics),e.includes&&(Et(e.includes),c.apply(null,[g].concat(e.includes))),c(g,e),delete g.statics,delete g.includes,g.options&&(g.options=h.options?i(h.options):{},c(g.options,e.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,q=g._initHooks.length;E<q;E++)g._initHooks[E].call(this)}},o},Lt.include=function(e){var o=this.prototype.options;return c(this.prototype,e),e.options&&(this.prototype.options=o,this.mergeOptions(e.options)),this},Lt.mergeOptions=function(e){return c(this.prototype.options,e),this},Lt.addInitHook=function(e){var o=Array.prototype.slice.call(arguments,1),h=typeof e=="function"?e:function(){this[e].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function Et(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=j(e)?e:[e];for(var o=0;o<e.length;o++)e[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ct={on:function(e,o,h){if(typeof e=="object")for(var g in e)this._on(g,e[g],o);else{e=P(e);for(var b=0,E=e.length;b<E;b++)this._on(e[b],o,h)}return this},off:function(e,o,h){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var g in e)this._off(g,e[g],o);else{e=P(e);for(var b=arguments.length===1,E=0,q=e.length;E<q;E++)b?this._off(e[E]):this._off(e[E],o,h)}return this},_on:function(e,o,h,g){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(e,o,h)===!1){h===this&&(h=void 0);var b={fn:o,ctx:h};g&&(b.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(b)}},_off:function(e,o,h){var g,b,E;if(this._events&&(g=this._events[e],!!g)){if(arguments.length===1){if(this._firingCount)for(b=0,E=g.length;b<E;b++)g[b].fn=v;delete this._events[e];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var q=this._listens(e,o,h);if(q!==!1){var nt=g[q];this._firingCount&&(nt.fn=v,this._events[e]=g=g.slice()),g.splice(q,1)}}},fire:function(e,o,h){if(!this.listens(e,h))return this;var g=c({},o,{type:e,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var b=this._events[e];if(b){this._firingCount=this._firingCount+1||1;for(var E=0,q=b.length;E<q;E++){var nt=b[E],lt=nt.fn;nt.once&&this.off(e,lt,nt.ctx),lt.call(nt.ctx||this,g)}this._firingCount--}}return h&&this._propagateEvent(g),this},listens:function(e,o,h,g){typeof e!="string"&&console.warn('"string" type argument expected');var b=o;typeof o!="function"&&(g=!!o,b=void 0,h=void 0);var E=this._events&&this._events[e];if(E&&E.length&&this._listens(e,b,h)!==!1)return!0;if(g){for(var q in this._eventParents)if(this._eventParents[q].listens(e,o,h,g))return!0}return!1},_listens:function(e,o,h){if(!this._events)return!1;var g=this._events[e]||[];if(!o)return!!g.length;h===this&&(h=void 0);for(var b=0,E=g.length;b<E;b++)if(g[b].fn===o&&g[b].ctx===h)return b;return!1},once:function(e,o,h){if(typeof e=="object")for(var g in e)this._on(g,e[g],o,!0);else{e=P(e);for(var b=0,E=e.length;b<E;b++)this._on(e[b],o,h,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[f(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[f(e)],this},_propagateEvent:function(e){for(var o in this._eventParents)this._eventParents[o].fire(e.type,c({layer:e.target,propagatedFrom:e.target},e),!0)}};Ct.addEventListener=Ct.on,Ct.removeEventListener=Ct.clearAllEventListeners=Ct.off,Ct.addOneTimeEventListener=Ct.once,Ct.fireEvent=Ct.fire,Ct.hasEventListeners=Ct.listens;var Ht=Lt.extend(Ct);function wt(e,o,h){this.x=h?Math.round(e):e,this.y=h?Math.round(o):o}var pe=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};wt.prototype={clone:function(){return new wt(this.x,this.y)},add:function(e){return this.clone()._add(zt(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(zt(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new wt(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new wt(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pe(this.x),this.y=pe(this.y),this},distanceTo:function(e){e=zt(e);var o=e.x-this.x,h=e.y-this.y;return Math.sqrt(o*o+h*h)},equals:function(e){return e=zt(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=zt(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+M(this.x)+", "+M(this.y)+")"}};function zt(e,o,h){return e instanceof wt?e:j(e)?new wt(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new wt(e.x,e.y):new wt(e,o,h)}function Bt(e,o){if(e)for(var h=o?[e,o]:e,g=0,b=h.length;g<b;g++)this.extend(h[g])}Bt.prototype={extend:function(e){var o,h;if(!e)return this;if(e instanceof wt||typeof e[0]=="number"||"x"in e)o=h=zt(e);else if(e=$t(e),o=e.min,h=e.max,!o||!h)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=h.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(e){return zt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return zt(this.min.x,this.max.y)},getTopRight:function(){return zt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var o,h;return typeof e[0]=="number"||e instanceof wt?e=zt(e):e=$t(e),e instanceof Bt?(o=e.min,h=e.max):o=h=e,o.x>=this.min.x&&h.x<=this.max.x&&o.y>=this.min.y&&h.y<=this.max.y},intersects:function(e){e=$t(e);var o=this.min,h=this.max,g=e.min,b=e.max,E=b.x>=o.x&&g.x<=h.x,q=b.y>=o.y&&g.y<=h.y;return E&&q},overlaps:function(e){e=$t(e);var o=this.min,h=this.max,g=e.min,b=e.max,E=b.x>o.x&&g.x<h.x,q=b.y>o.y&&g.y<h.y;return E&&q},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var o=this.min,h=this.max,g=Math.abs(o.x-h.x)*e,b=Math.abs(o.y-h.y)*e;return $t(zt(o.x-g,o.y-b),zt(h.x+g,h.y+b))},equals:function(e){return e?(e=$t(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function $t(e,o){return!e||e instanceof Bt?e:new Bt(e,o)}function Me(e,o){if(e)for(var h=o?[e,o]:e,g=0,b=h.length;g<b;g++)this.extend(h[g])}Me.prototype={extend:function(e){var o=this._southWest,h=this._northEast,g,b;if(e instanceof le)g=e,b=e;else if(e instanceof Me){if(g=e._southWest,b=e._northEast,!g||!b)return this}else return e?this.extend(Ft(e)||fe(e)):this;return!o&&!h?(this._southWest=new le(g.lat,g.lng),this._northEast=new le(b.lat,b.lng)):(o.lat=Math.min(g.lat,o.lat),o.lng=Math.min(g.lng,o.lng),h.lat=Math.max(b.lat,h.lat),h.lng=Math.max(b.lng,h.lng)),this},pad:function(e){var o=this._southWest,h=this._northEast,g=Math.abs(o.lat-h.lat)*e,b=Math.abs(o.lng-h.lng)*e;return new Me(new le(o.lat-g,o.lng-b),new le(h.lat+g,h.lng+b))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof le||"lat"in e?e=Ft(e):e=fe(e);var o=this._southWest,h=this._northEast,g,b;return e instanceof Me?(g=e.getSouthWest(),b=e.getNorthEast()):g=b=e,g.lat>=o.lat&&b.lat<=h.lat&&g.lng>=o.lng&&b.lng<=h.lng},intersects:function(e){e=fe(e);var o=this._southWest,h=this._northEast,g=e.getSouthWest(),b=e.getNorthEast(),E=b.lat>=o.lat&&g.lat<=h.lat,q=b.lng>=o.lng&&g.lng<=h.lng;return E&&q},overlaps:function(e){e=fe(e);var o=this._southWest,h=this._northEast,g=e.getSouthWest(),b=e.getNorthEast(),E=b.lat>o.lat&&g.lat<h.lat,q=b.lng>o.lng&&g.lng<h.lng;return E&&q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,o){return e?(e=fe(e),this._southWest.equals(e.getSouthWest(),o)&&this._northEast.equals(e.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(e,o){return e instanceof Me?e:new Me(e,o)}function le(e,o,h){if(isNaN(e)||isNaN(o))throw new Error("Invalid LatLng object: ("+e+", "+o+")");this.lat=+e,this.lng=+o,h!==void 0&&(this.alt=+h)}le.prototype={equals:function(e,o){if(!e)return!1;e=Ft(e);var h=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return h<=(o===void 0?1e-9:o)},toString:function(e){return"LatLng("+M(this.lat,e)+", "+M(this.lng,e)+")"},distanceTo:function(e){return Pt.distance(this,Ft(e))},wrap:function(){return Pt.wrapLatLng(this)},toBounds:function(e){var o=180*e/40075017,h=o/Math.cos(Math.PI/180*this.lat);return fe([this.lat-o,this.lng-h],[this.lat+o,this.lng+h])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function Ft(e,o,h){return e instanceof le?e:j(e)&&typeof e[0]!="object"?e.length===3?new le(e[0],e[1],e[2]):e.length===2?new le(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new le(e.lat,"lng"in e?e.lng:e.lon,e.alt):o===void 0?null:new le(e,o,h)}var dt={latLngToPoint:function(e,o){var h=this.projection.project(e),g=this.scale(o);return this.transformation._transform(h,g)},pointToLatLng:function(e,o){var h=this.scale(o),g=this.transformation.untransform(e,h);return this.projection.unproject(g)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var o=this.projection.bounds,h=this.scale(e),g=this.transformation.transform(o.min,h),b=this.transformation.transform(o.max,h);return new Bt(g,b)},infinite:!1,wrapLatLng:function(e){var o=this.wrapLng?_(e.lng,this.wrapLng,!0):e.lng,h=this.wrapLat?_(e.lat,this.wrapLat,!0):e.lat,g=e.alt;return new le(h,o,g)},wrapLatLngBounds:function(e){var o=e.getCenter(),h=this.wrapLatLng(o),g=o.lat-h.lat,b=o.lng-h.lng;if(g===0&&b===0)return e;var E=e.getSouthWest(),q=e.getNorthEast(),nt=new le(E.lat-g,E.lng-b),lt=new le(q.lat-g,q.lng-b);return new Me(nt,lt)}},Pt=c({},dt,{wrapLng:[-180,180],R:6371e3,distance:function(e,o){var h=Math.PI/180,g=e.lat*h,b=o.lat*h,E=Math.sin((o.lat-e.lat)*h/2),q=Math.sin((o.lng-e.lng)*h/2),nt=E*E+Math.cos(g)*Math.cos(b)*q*q,lt=2*Math.atan2(Math.sqrt(nt),Math.sqrt(1-nt));return this.R*lt}}),St=6378137,jt={R:St,MAX_LATITUDE:85.0511287798,project:function(e){var o=Math.PI/180,h=this.MAX_LATITUDE,g=Math.max(Math.min(h,e.lat),-h),b=Math.sin(g*o);return new wt(this.R*e.lng*o,this.R*Math.log((1+b)/(1-b))/2)},unproject:function(e){var o=180/Math.PI;return new le((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*o,e.x*o/this.R)},bounds:function(){var e=St*Math.PI;return new Bt([-e,-e],[e,e])}()};function ue(e,o,h,g){if(j(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=o,this._c=h,this._d=g}ue.prototype={transform:function(e,o){return this._transform(e.clone(),o)},_transform:function(e,o){return o=o||1,e.x=o*(this._a*e.x+this._b),e.y=o*(this._c*e.y+this._d),e},untransform:function(e,o){return o=o||1,new wt((e.x/o-this._b)/this._a,(e.y/o-this._d)/this._c)}};function G(e,o,h,g){return new ue(e,o,h,g)}var K=c({},Pt,{code:"EPSG:3857",projection:jt,transformation:function(){var e=.5/(Math.PI*jt.R);return G(e,.5,-e,.5)}()}),Y=c({},K,{code:"EPSG:900913"});function ht(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function _t(e,o){var h="",g,b,E,q,nt,lt;for(g=0,E=e.length;g<E;g++){for(nt=e[g],b=0,q=nt.length;b<q;b++)lt=nt[b],h+=(b?"L":"M")+lt.x+" "+lt.y;h+=o?Vt.svg?"z":"x":""}return h||"M0 0"}var xt=document.documentElement.style,At="ActiveXObject"in window,I=At&&!document.addEventListener,w="msLaunchUri"in navigator&&!("documentMode"in document),k=nn("webkit"),R=nn("android"),D=nn("android 2")||nn("android 3"),V=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),et=R&&nn("Google")&&V<537&&!("AudioNode"in window),it=!!window.opera,vt=!w&&nn("chrome"),Ot=nn("gecko")&&!k&&!it&&!At,Nt=!vt&&nn("safari"),Jt=nn("phantom"),ee="OTransition"in xt,be=navigator.platform.indexOf("Win")===0,Xt=At&&"transition"in xt,ve="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!D,he="MozPerspective"in xt,we=!window.L_DISABLE_3D&&(Xt||ve||he)&&!ee&&!Jt,Ae=typeof orientation<"u"||nn("mobile"),Ze=Ae&&k,qe=Ae&&ve,fn=!window.PointerEvent&&window.MSPointerEvent,cn=!!(window.PointerEvent||fn),Ye="ontouchstart"in window||!!window.TouchEvent,hn=!window.L_NO_TOUCH&&(Ye||cn),Ln=Ae&&it,$n=Ae&&Ot,Ke=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Fe=function(){var e=!1;try{var o=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",v,o),window.removeEventListener("testPassiveEventSupport",v,o)}catch{}return e}(),Rn=function(){return!!document.createElement("canvas").getContext}(),Kr=!!(document.createElementNS&&ht("svg").createSVGRect),Ei=!!Kr&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Cr=!Kr&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var o=e.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),Vs=navigator.platform.indexOf("Mac")===0,Ti=navigator.platform.indexOf("Linux")===0;function nn(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Vt={ie:At,ielt9:I,edge:w,webkit:k,android:R,android23:D,androidStock:et,opera:it,chrome:vt,gecko:Ot,safari:Nt,phantom:Jt,opera12:ee,win:be,ie3d:Xt,webkit3d:ve,gecko3d:he,any3d:we,mobile:Ae,mobileWebkit:Ze,mobileWebkit3d:qe,msPointer:fn,pointer:cn,touch:hn,touchNative:Ye,mobileOpera:Ln,mobileGecko:$n,retina:Ke,passiveEvents:Fe,canvas:Rn,svg:Kr,vml:Cr,inlineSvg:Ei,mac:Vs,linux:Ti},Oi=Vt.msPointer?"MSPointerDown":"pointerdown",Bn=Vt.msPointer?"MSPointerMove":"pointermove",In=Vt.msPointer?"MSPointerUp":"pointerup",Lo=Vt.msPointer?"MSPointerCancel":"pointercancel",Pr={touchstart:Oi,touchmove:Bn,touchend:In,touchcancel:Lo},or={touchstart:Jr,touchmove:Wr,touchend:Wr,touchcancel:Wr},sr={},Ai=!1;function Mo(e,o,h){return o==="touchstart"&&Ii(),or[o]?(h=or[o].bind(this,h),e.addEventListener(Pr[o],h,!1),h):(console.warn("wrong event specified:",o),v)}function Hs(e,o,h){if(!Pr[o]){console.warn("wrong event specified:",o);return}e.removeEventListener(Pr[o],h,!1)}function Co(e){sr[e.pointerId]=e}function Ri(e){sr[e.pointerId]&&(sr[e.pointerId]=e)}function Bi(e){delete sr[e.pointerId]}function Ii(){Ai||(document.addEventListener(Oi,Co,!0),document.addEventListener(Bn,Ri,!0),document.addEventListener(In,Bi,!0),document.addEventListener(Lo,Bi,!0),Ai=!0)}function Wr(e,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var h in sr)o.touches.push(sr[h]);o.changedTouches=[o],e(o)}}function Jr(e,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Z(o),Wr(e,o)}function Po(e){var o={},h,g;for(g in e)h=e[g],o[g]=h&&h.bind?h.bind(e):h;return e=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Gs=200;function Sr(e,o){e.addEventListener("dblclick",o);var h=0,g;function b(E){if(E.detail!==1){g=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var q=mt(E);if(!(q.some(function(lt){return lt instanceof HTMLLabelElement&&lt.attributes.for})&&!q.some(function(lt){return lt instanceof HTMLInputElement||lt instanceof HTMLSelectElement}))){var nt=Date.now();nt-h<=Gs?(g++,g===2&&o(Po(E))):g=1,h=nt}}}return e.addEventListener("click",b),{dblclick:o,simDblclick:b}}function $s(e,o){e.removeEventListener("dblclick",o.dblclick),e.removeEventListener("click",o.simDblclick)}var Yr=Qr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Un=Qr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),So=Un==="webkitTransition"||Un==="OTransition"?Un+"End":"transitionend";function Eo(e){return typeof e=="string"?document.getElementById(e):e}function ar(e,o){var h=e.style[o]||e.currentStyle&&e.currentStyle[o];if((!h||h==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(e,null);h=g?g[o]:null}return h==="auto"?null:h}function de(e,o,h){var g=document.createElement(e);return g.className=o||"",h&&h.appendChild(g),g}function Ce(e){var o=e.parentNode;o&&o.removeChild(e)}function Er(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Zn(e){var o=e.parentNode;o&&o.lastChild!==e&&o.appendChild(e)}function qn(e){var o=e.parentNode;o&&o.firstChild!==e&&o.insertBefore(e,o.firstChild)}function Xr(e,o){if(e.classList!==void 0)return e.classList.contains(o);var h=Tr(e);return h.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(h)}function oe(e,o){if(e.classList!==void 0)for(var h=P(o),g=0,b=h.length;g<b;g++)e.classList.add(h[g]);else if(!Xr(e,o)){var E=Tr(e);Di(e,(E?E+" ":"")+o)}}function Re(e,o){e.classList!==void 0?e.classList.remove(o):Di(e,A((" "+Tr(e)+" ").replace(" "+o+" "," ")))}function Di(e,o){e.className.baseVal===void 0?e.className=o:e.className.baseVal=o}function Tr(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function rn(e,o){"opacity"in e.style?e.style.opacity=o:"filter"in e.style&&zi(e,o)}function zi(e,o){var h=!1,g="DXImageTransform.Microsoft.Alpha";try{h=e.filters.item(g)}catch{if(o===1)return}o=Math.round(o*100),h?(h.Enabled=o!==100,h.Opacity=o):e.style.filter+=" progid:"+g+"(opacity="+o+")"}function Qr(e){for(var o=document.documentElement.style,h=0;h<e.length;h++)if(e[h]in o)return e[h];return!1}function Dn(e,o,h){var g=o||new wt(0,0);e.style[Yr]=(Vt.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(h?" scale("+h+")":"")}function Ee(e,o){e._leaflet_pos=o,Vt.any3d?Dn(e,o):(e.style.left=o.x+"px",e.style.top=o.y+"px")}function mn(e){return e._leaflet_pos||new wt(0,0)}var Or,Ar,Be;if("onselectstart"in document)Or=function(){ne(window,"selectstart",Z)},Ar=function(){l(window,"selectstart",Z)};else{var zn=Qr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Or=function(){if(zn){var e=document.documentElement.style;Be=e[zn],e[zn]="none"}},Ar=function(){zn&&(document.documentElement.style[zn]=Be,Be=void 0)}}function Rr(){ne(window,"dragstart",Z)}function ji(){l(window,"dragstart",Z)}var ti,ei;function Ni(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(lr(),ti=e,ei=e.style.outlineStyle,e.style.outlineStyle="none",ne(window,"keydown",lr))}function lr(){ti&&(ti.style.outlineStyle=ei,ti=void 0,ei=void 0,l(window,"keydown",lr))}function ni(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Fi(e){var o=e.getBoundingClientRect();return{x:o.width/e.offsetWidth||1,y:o.height/e.offsetHeight||1,boundingClientRect:o}}var Us={__proto__:null,TRANSFORM:Yr,TRANSITION:Un,TRANSITION_END:So,get:Eo,getStyle:ar,create:de,remove:Ce,empty:Er,toFront:Zn,toBack:qn,hasClass:Xr,addClass:oe,removeClass:Re,setClass:Di,getClass:Tr,setOpacity:rn,testProp:Qr,setTransform:Dn,setPosition:Ee,getPosition:mn,get disableTextSelection(){return Or},get enableTextSelection(){return Ar},disableImageDrag:Rr,enableImageDrag:ji,preventOutline:Ni,restoreOutline:lr,getSizedParentNode:ni,getScale:Fi};function ne(e,o,h,g){if(o&&typeof o=="object")for(var b in o)x(e,b,o[b],h);else{o=P(o);for(var E=0,q=o.length;E<q;E++)x(e,o[E],h,g)}return this}var r="_leaflet_events";function l(e,o,h,g){if(arguments.length===1)p(e),delete e[r];else if(o&&typeof o=="object")for(var b in o)B(e,b,o[b],h);else if(o=P(o),arguments.length===2)p(e,function(nt){return T(o,nt)!==-1});else for(var E=0,q=o.length;E<q;E++)B(e,o[E],h,g);return this}function p(e,o){for(var h in e[r]){var g=h.split(/\d/)[0];(!o||o(g))&&B(e,g,null,null,h)}}var y={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function x(e,o,h,g){var b=o+f(h)+(g?"_"+f(g):"");if(e[r]&&e[r][b])return this;var E=function(nt){return h.call(g||e,nt||window.event)},q=E;!Vt.touchNative&&Vt.pointer&&o.indexOf("touch")===0?E=Mo(e,o,E):Vt.touch&&o==="dblclick"?E=Sr(e,E):"addEventListener"in e?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?e.addEventListener(y[o]||o,E,Vt.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(E=function(nt){nt=nt||window.event,qt(e,nt)&&q(nt)},e.addEventListener(y[o],E,!1)):e.addEventListener(o,q,!1):e.attachEvent("on"+o,E),e[r]=e[r]||{},e[r][b]=E}function B(e,o,h,g,b){b=b||o+f(h)+(g?"_"+f(g):"");var E=e[r]&&e[r][b];if(!E)return this;!Vt.touchNative&&Vt.pointer&&o.indexOf("touch")===0?Hs(e,o,E):Vt.touch&&o==="dblclick"?$s(e,E):"removeEventListener"in e?e.removeEventListener(y[o]||o,E,!1):e.detachEvent("on"+o,E),e[r][b]=null}function F(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function U(e){return x(e,"wheel",F),this}function $(e){return ne(e,"mousedown touchstart dblclick contextmenu",F),e._leaflet_disable_click=!0,this}function Z(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Q(e){return Z(e),F(e),this}function mt(e){if(e.composedPath)return e.composedPath();for(var o=[],h=e.target;h;)o.push(h),h=h.parentNode;return o}function ct(e,o){if(!o)return new wt(e.clientX,e.clientY);var h=Fi(o),g=h.boundingClientRect;return new wt((e.clientX-g.left)/h.x-o.clientLeft,(e.clientY-g.top)/h.y-o.clientTop)}var Mt=Vt.linux&&Vt.chrome?window.devicePixelRatio:Vt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Rt(e){return Vt.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/Mt:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function qt(e,o){var h=o.relatedTarget;if(!h)return!0;try{for(;h&&h!==e;)h=h.parentNode}catch{return!1}return h!==e}var se={__proto__:null,on:ne,off:l,stopPropagation:F,disableScrollPropagation:U,disableClickPropagation:$,preventDefault:Z,stop:Q,getPropagationPath:mt,getMousePosition:ct,getWheelDelta:Rt,isExternalTarget:qt,addListener:ne,removeListener:l},xe=Ht.extend({run:function(e,o,h,g){this.stop(),this._el=e,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=mn(e),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=gt(this._animate,this),this._step()},_step:function(e){var o=+new Date-this._startTime,h=this._duration*1e3;o<h?this._runFrame(this._easeOut(o/h),e):(this._runFrame(1),this._complete())},_runFrame:function(e,o){var h=this._startPos.add(this._offset.multiplyBy(e));o&&h._round(),Ee(this._el,h),this.fire("step")},_complete:function(){at(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),Ut=Ht.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,o){o=S(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(Ft(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Un&&Vt.any3d&&!Vt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ne(this._proxy,So,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,o,h){if(o=o===void 0?this._zoom:this._limitZoom(o),e=this._limitCenter(Ft(e),o,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=c({animate:h.animate},h.zoom),h.pan=c({animate:h.animate,duration:h.duration},h.pan));var g=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,o,h.zoom):this._tryAnimatedPan(e,h.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(e,o,h.pan&&h.pan.noMoveStart),this},setZoom:function(e,o){return this._loaded?this.setView(this.getCenter(),e,{zoom:o}):(this._zoom=e,this)},zoomIn:function(e,o){return e=e||(Vt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,o)},zoomOut:function(e,o){return e=e||(Vt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,o)},setZoomAround:function(e,o,h){var g=this.getZoomScale(o),b=this.getSize().divideBy(2),E=e instanceof wt?e:this.latLngToContainerPoint(e),q=E.subtract(b).multiplyBy(1-1/g),nt=this.containerPointToLatLng(b.add(q));return this.setView(nt,o,{zoom:h})},_getBoundsCenterZoom:function(e,o){o=o||{},e=e.getBounds?e.getBounds():fe(e);var h=zt(o.paddingTopLeft||o.padding||[0,0]),g=zt(o.paddingBottomRight||o.padding||[0,0]),b=this.getBoundsZoom(e,!1,h.add(g));if(b=typeof o.maxZoom=="number"?Math.min(o.maxZoom,b):b,b===1/0)return{center:e.getCenter(),zoom:b};var E=g.subtract(h).divideBy(2),q=this.project(e.getSouthWest(),b),nt=this.project(e.getNorthEast(),b),lt=this.unproject(q.add(nt).divideBy(2).add(E),b);return{center:lt,zoom:b}},fitBounds:function(e,o){if(e=fe(e),!e.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(e,o);return this.setView(h.center,h.zoom,o)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,o){return this.setView(e,this._zoom,{pan:o})},panBy:function(e,o){if(e=zt(e).round(),o=o||{},!e.x&&!e.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new xe,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){oe(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,h,o.duration||.25,o.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,o,h){if(h=h||{},h.animate===!1||!Vt.any3d)return this.setView(e,o,h);this._stop();var g=this.project(this.getCenter()),b=this.project(e),E=this.getSize(),q=this._zoom;e=Ft(e),o=o===void 0?q:o;var nt=Math.max(E.x,E.y),lt=nt*this.getZoomScale(q,o),kt=b.distanceTo(g)||1,It=1.42,Yt=It*It;function ce(ze){var Go=ze?-1:1,rp=ze?lt:nt,ip=lt*lt-nt*nt+Go*Yt*Yt*kt*kt,op=2*rp*Yt*kt,na=ip/op,tu=Math.sqrt(na*na+1)-na,sp=tu<1e-9?-18:Math.log(tu);return sp}function Qe(ze){return(Math.exp(ze)-Math.exp(-ze))/2}function Ge(ze){return(Math.exp(ze)+Math.exp(-ze))/2}function yn(ze){return Qe(ze)/Ge(ze)}var on=ce(0);function li(ze){return nt*(Ge(on)/Ge(on+It*ze))}function Qd(ze){return nt*(Ge(on)*yn(on+It*ze)-Qe(on))/Yt}function tp(ze){return 1-Math.pow(1-ze,1.5)}var ep=Date.now(),Xl=(ce(1)-on)/It,np=h.duration?1e3*h.duration:1e3*Xl*.8;function Ql(){var ze=(Date.now()-ep)/np,Go=tp(ze)*Xl;ze<=1?(this._flyToFrame=gt(Ql,this),this._move(this.unproject(g.add(b.subtract(g).multiplyBy(Qd(Go)/kt)),q),this.getScaleZoom(nt/li(Go),q),{flyTo:!0})):this._move(e,o)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),Ql.call(this),this},flyToBounds:function(e,o){var h=this._getBoundsCenterZoom(e,o);return this.flyTo(h.center,h.zoom,o)},setMaxBounds:function(e){return e=fe(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var o=this.options.minZoom;return this.options.minZoom=e,this._loaded&&o!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var o=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&o!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,o){this._enforcingBounds=!0;var h=this.getCenter(),g=this._limitCenter(h,this._zoom,fe(e));return h.equals(g)||this.panTo(g,o),this._enforcingBounds=!1,this},panInside:function(e,o){o=o||{};var h=zt(o.paddingTopLeft||o.padding||[0,0]),g=zt(o.paddingBottomRight||o.padding||[0,0]),b=this.project(this.getCenter()),E=this.project(e),q=this.getPixelBounds(),nt=$t([q.min.add(h),q.max.subtract(g)]),lt=nt.getSize();if(!nt.contains(E)){this._enforcingBounds=!0;var kt=E.subtract(nt.getCenter()),It=nt.extend(E).getSize().subtract(lt);b.x+=kt.x<0?-It.x:It.x,b.y+=kt.y<0?-It.y:It.y,this.panTo(this.unproject(b),o),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=c({animate:!1,pan:!0},e===!0?{animate:!0}:e);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),g=o.divideBy(2).round(),b=h.divideBy(2).round(),E=g.subtract(b);return!E.x&&!E.y?this:(e.animate&&e.pan?this.panBy(E):(e.pan&&this._rawPanBy(E),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=c({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=u(this._handleGeolocationResponse,this),h=u(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,h,e):navigator.geolocation.getCurrentPosition(o,h,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var o=e.code,h=e.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var o=e.coords.latitude,h=e.coords.longitude,g=new le(o,h),b=g.toBounds(e.coords.accuracy*2),E=this._locateOptions;if(E.setView){var q=this.getBoundsZoom(b);this.setView(g,E.maxZoom?Math.min(q,E.maxZoom):q)}var nt={latlng:g,bounds:b,timestamp:e.timestamp};for(var lt in e.coords)typeof e.coords[lt]=="number"&&(nt[lt]=e.coords[lt]);this.fire("locationfound",nt)}},addHandler:function(e,o){if(!o)return this;var h=this[e]=new o(this);return this._handlers.push(h),this.options[e]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ce(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(at(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)Ce(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,o){var h="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),g=de("div",h,o||this._mapPane);return e&&(this._panes[e]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),o=this.unproject(e.getBottomLeft()),h=this.unproject(e.getTopRight());return new Me(o,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,o,h){e=fe(e),h=zt(h||[0,0]);var g=this.getZoom()||0,b=this.getMinZoom(),E=this.getMaxZoom(),q=e.getNorthWest(),nt=e.getSouthEast(),lt=this.getSize().subtract(h),kt=$t(this.project(nt,g),this.project(q,g)).getSize(),It=Vt.any3d?this.options.zoomSnap:1,Yt=lt.x/kt.x,ce=lt.y/kt.y,Qe=o?Math.max(Yt,ce):Math.min(Yt,ce);return g=this.getScaleZoom(Qe,g),It&&(g=Math.round(g/(It/100))*(It/100),g=o?Math.ceil(g/It)*It:Math.floor(g/It)*It),Math.max(b,Math.min(E,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new wt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,o){var h=this._getTopLeftPoint(e,o);return new Bt(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,o){var h=this.options.crs;return o=o===void 0?this._zoom:o,h.scale(e)/h.scale(o)},getScaleZoom:function(e,o){var h=this.options.crs;o=o===void 0?this._zoom:o;var g=h.zoom(e*h.scale(o));return isNaN(g)?1/0:g},project:function(e,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(Ft(e),o)},unproject:function(e,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(zt(e),o)},layerPointToLatLng:function(e){var o=zt(e).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(e){var o=this.project(Ft(e))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(Ft(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(fe(e))},distance:function(e,o){return this.options.crs.distance(Ft(e),Ft(o))},containerPointToLayerPoint:function(e){return zt(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return zt(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var o=this.containerPointToLayerPoint(zt(e));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ft(e)))},mouseEventToContainerPoint:function(e){return ct(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var o=this._container=Eo(e);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ne(o,"scroll",this._onScroll,this),this._containerId=f(o)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Vt.any3d,oe(e,"leaflet-container"+(Vt.touch?" leaflet-touch":"")+(Vt.retina?" leaflet-retina":"")+(Vt.ielt9?" leaflet-oldie":"")+(Vt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=ar(e,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ee(this._mapPane,new wt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(oe(e.markerPane,"leaflet-zoom-hide"),oe(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,o,h){Ee(this._mapPane,new wt(0,0));var g=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var b=this._zoom!==o;this._moveStart(b,h)._move(e,o)._moveEnd(b),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(e,o){return e&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(e,o,h,g){o===void 0&&(o=this._zoom);var b=this._zoom!==o;return this._zoom=o,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),g?h&&h.pinch&&this.fire("zoom",h):((b||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return at(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Ee(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[f(this._container)]=this;var o=e?l:ne;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),Vt.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){at(this._resizeRequest),this._resizeRequest=gt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,o){for(var h=[],g,b=o==="mouseout"||o==="mouseover",E=e.target||e.srcElement,q=!1;E;){if(g=this._targets[f(E)],g&&(o==="click"||o==="preclick")&&this._draggableMoved(g)){q=!0;break}if(g&&g.listens(o,!0)&&(b&&!qt(E,e)||(h.push(g),b))||E===this._container)break;E=E.parentNode}return!h.length&&!q&&!b&&this.listens(o,!0)&&(h=[this]),h},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var o=e.target||e.srcElement;if(!(!this._loaded||o._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(o))){var h=e.type;h==="mousedown"&&Ni(o),this._fireDOMEvent(e,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,o,h){if(e.type==="click"){var g=c({},e);g.type="preclick",this._fireDOMEvent(g,g.type,h)}var b=this._findEventTargets(e,o);if(h){for(var E=[],q=0;q<h.length;q++)h[q].listens(o,!0)&&E.push(h[q]);b=E.concat(b)}if(b.length){o==="contextmenu"&&Z(e);var nt=b[0],lt={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var kt=nt.getLatLng&&(!nt._radius||nt._radius<=10);lt.containerPoint=kt?this.latLngToContainerPoint(nt.getLatLng()):this.mouseEventToContainerPoint(e),lt.layerPoint=this.containerPointToLayerPoint(lt.containerPoint),lt.latlng=kt?nt.getLatLng():this.layerPointToLatLng(lt.layerPoint)}for(q=0;q<b.length;q++)if(b[q].fire(o,lt,!0),lt.originalEvent._stopped||b[q].options.bubblingMouseEvents===!1&&T(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,o=this._handlers.length;e<o;e++)this._handlers[e].disable()},whenReady:function(e,o){return this._loaded?e.call(o||this,{target:this}):this.on("load",e,o),this},_getMapPanePos:function(){return mn(this._mapPane)||new wt(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,o){var h=e&&o!==void 0?this._getNewPixelOrigin(e,o):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,o){var h=this.getSize()._divideBy(2);return this.project(e,o)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,o,h){var g=this._getNewPixelOrigin(h,o);return this.project(e,o)._subtract(g)},_latLngBoundsToNewLayerBounds:function(e,o,h){var g=this._getNewPixelOrigin(h,o);return $t([this.project(e.getSouthWest(),o)._subtract(g),this.project(e.getNorthWest(),o)._subtract(g),this.project(e.getSouthEast(),o)._subtract(g),this.project(e.getNorthEast(),o)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,o,h){if(!h)return e;var g=this.project(e,o),b=this.getSize().divideBy(2),E=new Bt(g.subtract(b),g.add(b)),q=this._getBoundsOffset(E,h,o);return Math.abs(q.x)<=1&&Math.abs(q.y)<=1?e:this.unproject(g.add(q),o)},_limitOffset:function(e,o){if(!o)return e;var h=this.getPixelBounds(),g=new Bt(h.min.add(e),h.max.add(e));return e.add(this._getBoundsOffset(g,o))},_getBoundsOffset:function(e,o,h){var g=$t(this.project(o.getNorthEast(),h),this.project(o.getSouthWest(),h)),b=g.min.subtract(e.min),E=g.max.subtract(e.max),q=this._rebound(b.x,-E.x),nt=this._rebound(b.y,-E.y);return new wt(q,nt)},_rebound:function(e,o){return e+o>0?Math.round(e-o)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(o))},_limitZoom:function(e){var o=this.getMinZoom(),h=this.getMaxZoom(),g=Vt.any3d?this.options.zoomSnap:1;return g&&(e=Math.round(e/g)*g),Math.max(o,Math.min(h,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Re(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,o){var h=this._getCenterOffset(e)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,o),!0)},_createAnimProxy:function(){var e=this._proxy=de("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(o){var h=Yr,g=this._proxy.style[h];Dn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),g===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ce(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),o=this.getZoom();Dn(this._proxy,this.project(e,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,o,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(o),b=this._getCenterOffset(e)._divideBy(1-1/g);return h.animate!==!0&&!this.getSize().contains(b)?!1:(gt(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(e,o,!0)},this),!0)},_animateZoom:function(e,o,h,g){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=o,oe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:o,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Re(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ke(e,o){return new Ut(e,o)}var Pe=Lt.extend({options:{position:"topright"},initialize:function(e){S(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var o=this._map;return o&&o.removeControl(this),this.options.position=e,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var o=this._container=this.onAdd(e),h=this.getPosition(),g=e._controlCorners[h];return oe(o,"leaflet-control"),h.indexOf("bottom")!==-1?g.insertBefore(o,g.firstChild):g.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ce(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),He=function(e){return new Pe(e)};Ut.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},o="leaflet-",h=this._controlContainer=de("div",o+"control-container",this._container);function g(b,E){var q=o+b+" "+o+E;e[b+E]=de("div",q,h)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)Ce(this._controlCorners[e]);Ce(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Mn=Pe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,o,h,g){return h<g?-1:g<h?1:0}},initialize:function(e,o,h){S(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in e)this._addLayer(e[g],g);for(g in o)this._addLayer(o[g],g,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Pe.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,o){return this._addLayer(e,o),this._map?this._update():this},addOverlay:function(e,o){return this._addLayer(e,o,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var o=this._getLayer(f(e));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){oe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(oe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):Re(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Re(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",o=this._container=de("div",e),h=this.options.collapsed;o.setAttribute("aria-haspopup",!0),$(o),U(o);var g=this._section=de("section",e+"-list");h&&(this._map.on("click",this.collapse,this),ne(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var b=this._layersLink=de("a",e+"-toggle",o);b.href="#",b.title="Layers",b.setAttribute("role","button"),ne(b,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){Z(E),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=de("div",e+"-base",g),this._separator=de("div",e+"-separator",g),this._overlaysList=de("div",e+"-overlays",g),o.appendChild(g)},_getLayer:function(e){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&f(this._layers[o].layer)===e)return this._layers[o]},_addLayer:function(e,o,h){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:o,overlay:h}),this.options.sortLayers&&this._layers.sort(u(function(g,b){return this.options.sortFunction(g.layer,b.layer,g.name,b.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Er(this._baseLayersList),Er(this._overlaysList),this._layerControlInputs=[];var e,o,h,g,b=0;for(h=0;h<this._layers.length;h++)g=this._layers[h],this._addItem(g),o=o||g.overlay,e=e||!g.overlay,b+=g.overlay?0:1;return this.options.hideSingleBase&&(e=e&&b>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=o&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var o=this._getLayer(f(e.target)),h=o.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;h&&this._map.fire(h,o)},_createRadioElement:function(e,o){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(o?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=h,g.firstChild},_addItem:function(e){var o=document.createElement("label"),h=this._map.hasLayer(e.layer),g;e.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=h):g=this._createRadioElement("leaflet-base-layers_"+f(this),h),this._layerControlInputs.push(g),g.layerId=f(e.layer),ne(g,"click",this._onInputClick,this);var b=document.createElement("span");b.innerHTML=" "+e.name;var E=document.createElement("span");o.appendChild(E),E.appendChild(g),E.appendChild(b);var q=e.overlay?this._overlaysList:this._baseLayersList;return q.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,o,h,g=[],b=[];this._handlingClick=!0;for(var E=e.length-1;E>=0;E--)o=e[E],h=this._getLayer(o.layerId).layer,o.checked?g.push(h):o.checked||b.push(h);for(E=0;E<b.length;E++)this._map.hasLayer(b[E])&&this._map.removeLayer(b[E]);for(E=0;E<g.length;E++)this._map.hasLayer(g[E])||this._map.addLayer(g[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,o,h,g=this._map.getZoom(),b=e.length-1;b>=0;b--)o=e[b],h=this._getLayer(o.layerId).layer,o.disabled=h.options.minZoom!==void 0&&g<h.options.minZoom||h.options.maxZoom!==void 0&&g>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,ne(e,"click",Z),this.expand();var o=this;setTimeout(function(){l(e,"click",Z),o._preventClick=!1})}}),To=function(e,o,h){return new Mn(e,o,h)},Br=Pe.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var o="leaflet-control-zoom",h=de("div",o+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,o+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,o+"-out",h,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,o,h,g,b){var E=de("a",h,g);return E.innerHTML=e,E.href="#",E.title=o,E.setAttribute("role","button"),E.setAttribute("aria-label",o),$(E),ne(E,"click",Q),ne(E,"click",b,this),ne(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var e=this._map,o="leaflet-disabled";Re(this._zoomInButton,o),Re(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(oe(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(oe(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ut.mergeOptions({zoomControl:!0}),Ut.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Br,this.addControl(this.zoomControl))});var Kn=function(e){return new Br(e)},Vi=Pe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var o="leaflet-control-scale",h=de("div",o),g=this.options;return this._addScales(g,o+"-line",h),e.on(g.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),h},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,o,h){e.metric&&(this._mScale=de("div",o,h)),e.imperial&&(this._iScale=de("div",o,h))},_update:function(){var e=this._map,o=e.getSize().y/2,h=e.distance(e.containerPointToLatLng([0,o]),e.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(h)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var o=this._getRoundNum(e),h=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,h,o/e)},_updateImperial:function(e){var o=e*3.2808399,h,g,b;o>5280?(h=o/5280,g=this._getRoundNum(h),this._updateScale(this._iScale,g+" mi",g/h)):(b=this._getRoundNum(o),this._updateScale(this._iScale,b+" ft",b/o))},_updateScale:function(e,o,h){e.style.width=Math.round(this.options.maxWidth*h)+"px",e.innerHTML=o},_getRoundNum:function(e){var o=Math.pow(10,(Math.floor(e)+"").length-1),h=e/o;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,o*h}}),Oo=function(e){return new Vi(e)},Zs='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ir=Pe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Vt.inlineSvg?Zs+" ":"")+"Leaflet</a>"},initialize:function(e){S(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=de("div","leaflet-control-attribution"),$(this._container);for(var o in e._layers)e._layers[o].getAttribution&&this.addAttribution(e._layers[o].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var o in this._attributions)this._attributions[o]&&e.push(o);var h=[];this.options.prefix&&h.push(this.options.prefix),e.length&&h.push(e.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Ut.mergeOptions({attributionControl:!0}),Ut.addInitHook(function(){this.options.attributionControl&&new Ir().addTo(this)});var qs=function(e){return new Ir(e)};Pe.Layers=Mn,Pe.Zoom=Br,Pe.Scale=Vi,Pe.Attribution=Ir,He.layers=To,He.zoom=Kn,He.scale=Oo,He.attribution=qs;var gn=Lt.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,o){return e.addHandler(o,this),this};var xd={Events:Ct},kl=Vt.touch?"touchstart mousedown":"mousedown",ur=Ht.extend({options:{clickTolerance:3},initialize:function(e,o,h,g){S(this,g),this._element=e,this._dragStartTarget=o||e,this._preventOutline=h},enable:function(){this._enabled||(ne(this._dragStartTarget,kl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ur._dragging===this&&this.finishDrag(!0),l(this._dragStartTarget,kl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!Xr(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){ur._dragging===this&&this.finishDrag();return}if(!(ur._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(ur._dragging=this,this._preventOutline&&Ni(this._element),Rr(),Or(),!this._moving)){this.fire("down");var o=e.touches?e.touches[0]:e,h=ni(this._element);this._startPoint=new wt(o.clientX,o.clientY),this._startPos=mn(this._element),this._parentScale=Fi(h);var g=e.type==="mousedown";ne(document,g?"mousemove":"touchmove",this._onMove,this),ne(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var o=e.touches&&e.touches.length===1?e.touches[0]:e,h=new wt(o.clientX,o.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Z(e),this._moved||(this.fire("dragstart"),this._moved=!0,oe(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),oe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Ee(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){Re(document.body,"leaflet-dragging"),this._lastTarget&&(Re(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),l(document,"mousemove touchmove",this._onMove,this),l(document,"mouseup touchend touchcancel",this._onUp,this),ji(),Ar();var o=this._moved&&this._moving;this._moving=!1,ur._dragging=!1,o&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function Ll(e,o,h){var g,b=[1,4,2,8],E,q,nt,lt,kt,It,Yt,ce;for(E=0,It=e.length;E<It;E++)e[E]._code=Dr(e[E],o);for(nt=0;nt<4;nt++){for(Yt=b[nt],g=[],E=0,It=e.length,q=It-1;E<It;q=E++)lt=e[E],kt=e[q],lt._code&Yt?kt._code&Yt||(ce=Ao(kt,lt,Yt,o,h),ce._code=Dr(ce,o),g.push(ce)):(kt._code&Yt&&(ce=Ao(kt,lt,Yt,o,h),ce._code=Dr(ce,o),g.push(ce)),g.push(lt));e=g}return e}function Ml(e,o){var h,g,b,E,q,nt,lt,kt,It;if(!e||e.length===0)throw new Error("latlngs not passed");_n(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var Yt=Ft([0,0]),ce=fe(e),Qe=ce.getNorthWest().distanceTo(ce.getSouthWest())*ce.getNorthEast().distanceTo(ce.getNorthWest());Qe<1700&&(Yt=Ks(e));var Ge=e.length,yn=[];for(h=0;h<Ge;h++){var on=Ft(e[h]);yn.push(o.project(Ft([on.lat-Yt.lat,on.lng-Yt.lng])))}for(nt=lt=kt=0,h=0,g=Ge-1;h<Ge;g=h++)b=yn[h],E=yn[g],q=b.y*E.x-E.y*b.x,lt+=(b.x+E.x)*q,kt+=(b.y+E.y)*q,nt+=q*3;nt===0?It=yn[0]:It=[lt/nt,kt/nt];var li=o.unproject(zt(It));return Ft([li.lat+Yt.lat,li.lng+Yt.lng])}function Ks(e){for(var o=0,h=0,g=0,b=0;b<e.length;b++){var E=Ft(e[b]);o+=E.lat,h+=E.lng,g++}return Ft([o/g,h/g])}var kd={__proto__:null,clipPolygon:Ll,polygonCenter:Ml,centroid:Ks};function Cl(e,o){if(!o||!e.length)return e.slice();var h=o*o;return e=Cd(e,h),e=Md(e,h),e}function Pl(e,o,h){return Math.sqrt(Hi(e,o,h,!0))}function Ld(e,o,h){return Hi(e,o,h)}function Md(e,o){var h=e.length,g=typeof Uint8Array!=void 0+""?Uint8Array:Array,b=new g(h);b[0]=b[h-1]=1,Ws(e,b,o,0,h-1);var E,q=[];for(E=0;E<h;E++)b[E]&&q.push(e[E]);return q}function Ws(e,o,h,g,b){var E=0,q,nt,lt;for(nt=g+1;nt<=b-1;nt++)lt=Hi(e[nt],e[g],e[b],!0),lt>E&&(q=nt,E=lt);E>h&&(o[q]=1,Ws(e,o,h,g,q),Ws(e,o,h,q,b))}function Cd(e,o){for(var h=[e[0]],g=1,b=0,E=e.length;g<E;g++)Pd(e[g],e[b])>o&&(h.push(e[g]),b=g);return b<E-1&&h.push(e[E-1]),h}var Sl;function El(e,o,h,g,b){var E=g?Sl:Dr(e,h),q=Dr(o,h),nt,lt,kt;for(Sl=q;;){if(!(E|q))return[e,o];if(E&q)return!1;nt=E||q,lt=Ao(e,o,nt,h,b),kt=Dr(lt,h),nt===E?(e=lt,E=kt):(o=lt,q=kt)}}function Ao(e,o,h,g,b){var E=o.x-e.x,q=o.y-e.y,nt=g.min,lt=g.max,kt,It;return h&8?(kt=e.x+E*(lt.y-e.y)/q,It=lt.y):h&4?(kt=e.x+E*(nt.y-e.y)/q,It=nt.y):h&2?(kt=lt.x,It=e.y+q*(lt.x-e.x)/E):h&1&&(kt=nt.x,It=e.y+q*(nt.x-e.x)/E),new wt(kt,It,b)}function Dr(e,o){var h=0;return e.x<o.min.x?h|=1:e.x>o.max.x&&(h|=2),e.y<o.min.y?h|=4:e.y>o.max.y&&(h|=8),h}function Pd(e,o){var h=o.x-e.x,g=o.y-e.y;return h*h+g*g}function Hi(e,o,h,g){var b=o.x,E=o.y,q=h.x-b,nt=h.y-E,lt=q*q+nt*nt,kt;return lt>0&&(kt=((e.x-b)*q+(e.y-E)*nt)/lt,kt>1?(b=h.x,E=h.y):kt>0&&(b+=q*kt,E+=nt*kt)),q=e.x-b,nt=e.y-E,g?q*q+nt*nt:new wt(b,E)}function _n(e){return!j(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function Tl(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),_n(e)}function Ol(e,o){var h,g,b,E,q,nt,lt,kt;if(!e||e.length===0)throw new Error("latlngs not passed");_n(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var It=Ft([0,0]),Yt=fe(e),ce=Yt.getNorthWest().distanceTo(Yt.getSouthWest())*Yt.getNorthEast().distanceTo(Yt.getNorthWest());ce<1700&&(It=Ks(e));var Qe=e.length,Ge=[];for(h=0;h<Qe;h++){var yn=Ft(e[h]);Ge.push(o.project(Ft([yn.lat-It.lat,yn.lng-It.lng])))}for(h=0,g=0;h<Qe-1;h++)g+=Ge[h].distanceTo(Ge[h+1])/2;if(g===0)kt=Ge[0];else for(h=0,E=0;h<Qe-1;h++)if(q=Ge[h],nt=Ge[h+1],b=q.distanceTo(nt),E+=b,E>g){lt=(E-g)/b,kt=[nt.x-lt*(nt.x-q.x),nt.y-lt*(nt.y-q.y)];break}var on=o.unproject(zt(kt));return Ft([on.lat+It.lat,on.lng+It.lng])}var Sd={__proto__:null,simplify:Cl,pointToSegmentDistance:Pl,closestPointOnSegment:Ld,clipSegment:El,_getEdgeIntersection:Ao,_getBitCode:Dr,_sqClosestPointOnSegment:Hi,isFlat:_n,_flat:Tl,polylineCenter:Ol},Js={project:function(e){return new wt(e.lng,e.lat)},unproject:function(e){return new le(e.y,e.x)},bounds:new Bt([-180,-90],[180,90])},Ys={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Bt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var o=Math.PI/180,h=this.R,g=e.lat*o,b=this.R_MINOR/h,E=Math.sqrt(1-b*b),q=E*Math.sin(g),nt=Math.tan(Math.PI/4-g/2)/Math.pow((1-q)/(1+q),E/2);return g=-h*Math.log(Math.max(nt,1e-10)),new wt(e.lng*o*h,g)},unproject:function(e){for(var o=180/Math.PI,h=this.R,g=this.R_MINOR/h,b=Math.sqrt(1-g*g),E=Math.exp(-e.y/h),q=Math.PI/2-2*Math.atan(E),nt=0,lt=.1,kt;nt<15&&Math.abs(lt)>1e-7;nt++)kt=b*Math.sin(q),kt=Math.pow((1-kt)/(1+kt),b/2),lt=Math.PI/2-2*Math.atan(E*kt)-q,q+=lt;return new le(q*o,e.x*o/h)}},Ed={__proto__:null,LonLat:Js,Mercator:Ys,SphericalMercator:jt},Td=c({},Pt,{code:"EPSG:3395",projection:Ys,transformation:function(){var e=.5/(Math.PI*Ys.R);return G(e,.5,-e,.5)}()}),Al=c({},Pt,{code:"EPSG:4326",projection:Js,transformation:G(1/180,1,-1/180,.5)}),Od=c({},dt,{projection:Js,transformation:G(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,o){var h=o.lng-e.lng,g=o.lat-e.lat;return Math.sqrt(h*h+g*g)},infinite:!0});dt.Earth=Pt,dt.EPSG3395=Td,dt.EPSG3857=K,dt.EPSG900913=Y,dt.EPSG4326=Al,dt.Simple=Od;var Cn=Ht.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[f(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[f(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var o=e.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var h=this.getEvents();o.on(h,this),this.once("remove",function(){o.off(h,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});Ut.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var o=f(e);return this._layers[o]?this:(this._layers[o]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var o=f(e);return this._layers[o]?(this._loaded&&e.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return f(e)in this._layers},eachLayer:function(e,o){for(var h in this._layers)e.call(o,this._layers[h]);return this},_addLayers:function(e){e=e?j(e)?e:[e]:[];for(var o=0,h=e.length;o<h;o++)this.addLayer(e[o])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[f(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var o=f(e);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,o=-1/0,h=this._getZoomSpan();for(var g in this._zoomBoundLayers){var b=this._zoomBoundLayers[g].options;e=b.minZoom===void 0?e:Math.min(e,b.minZoom),o=b.maxZoom===void 0?o:Math.max(o,b.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=e===1/0?void 0:e,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ri=Cn.extend({initialize:function(e,o){S(this,o),this._layers={};var h,g;if(e)for(h=0,g=e.length;h<g;h++)this.addLayer(e[h])},addLayer:function(e){var o=this.getLayerId(e);return this._layers[o]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var o=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(e){var o=typeof e=="number"?e:this.getLayerId(e);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var o=Array.prototype.slice.call(arguments,1),h,g;for(h in this._layers)g=this._layers[h],g[e]&&g[e].apply(g,o);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,o){for(var h in this._layers)e.call(o,this._layers[h]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return f(e)}}),Ad=function(e,o){return new ri(e,o)},Wn=ri.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),ri.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),ri.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new Me;for(var o in this._layers){var h=this._layers[o];e.extend(h.getBounds?h.getBounds():h.getLatLng())}return e}}),Rd=function(e,o){return new Wn(e,o)},ii=Lt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){S(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,o){var h=this._getIconUrl(e);if(!h){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(h,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(g,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(e,o){var h=this.options,g=h[o+"Size"];typeof g=="number"&&(g=[g,g]);var b=zt(g),E=zt(o==="shadow"&&h.shadowAnchor||h.iconAnchor||b&&b.divideBy(2,!0));e.className="leaflet-marker-"+o+" "+(h.className||""),E&&(e.style.marginLeft=-E.x+"px",e.style.marginTop=-E.y+"px"),b&&(e.style.width=b.x+"px",e.style.height=b.y+"px")},_createImg:function(e,o){return o=o||document.createElement("img"),o.src=e,o},_getIconUrl:function(e){return Vt.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Bd(e){return new ii(e)}var Gi=ii.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof Gi.imagePath!="string"&&(Gi.imagePath=this._detectIconPath()),(this.options.imagePath||Gi.imagePath)+ii.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var o=function(h,g,b){var E=g.exec(h);return E&&E[b]};return e=o(e,/^url\((['"])?(.+)\1\)$/,2),e&&o(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=de("div","leaflet-default-icon-path",document.body),o=ar(e,"background-image")||ar(e,"backgroundImage");if(document.body.removeChild(e),o=this._stripUrl(o),o)return o;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Rl=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new ur(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),oe(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Re(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var o=this._marker,h=o._map,g=this._marker.options.autoPanSpeed,b=this._marker.options.autoPanPadding,E=mn(o._icon),q=h.getPixelBounds(),nt=h.getPixelOrigin(),lt=$t(q.min._subtract(nt).add(b),q.max._subtract(nt).subtract(b));if(!lt.contains(E)){var kt=zt((Math.max(lt.max.x,E.x)-lt.max.x)/(q.max.x-lt.max.x)-(Math.min(lt.min.x,E.x)-lt.min.x)/(q.min.x-lt.min.x),(Math.max(lt.max.y,E.y)-lt.max.y)/(q.max.y-lt.max.y)-(Math.min(lt.min.y,E.y)-lt.min.y)/(q.min.y-lt.min.y)).multiplyBy(g);h.panBy(kt,{animate:!1}),this._draggable._newPos._add(kt),this._draggable._startPos._add(kt),Ee(o._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=gt(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(at(this._panRequest),this._panRequest=gt(this._adjustPan.bind(this,e)))},_onDrag:function(e){var o=this._marker,h=o._shadow,g=mn(o._icon),b=o._map.layerPointToLatLng(g);h&&Ee(h,g),o._latlng=b,e.latlng=b,e.oldLatLng=this._oldLatLng,o.fire("move",e).fire("drag",e)},_onDragEnd:function(e){at(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),Ro=Cn.extend({options:{icon:new Gi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,o){S(this,o),this._latlng=Ft(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var o=this._latlng;return this._latlng=Ft(e),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=e.icon.createIcon(this._icon),g=!1;h!==this._icon&&(this._icon&&this._removeIcon(),g=!0,e.title&&(h.title=e.title),h.tagName==="IMG"&&(h.alt=e.alt||"")),oe(h,o),e.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ne(h,"focus",this._panOnFocus,this);var b=e.icon.createShadow(this._shadow),E=!1;b!==this._shadow&&(this._removeShadow(),E=!0),b&&(oe(b,o),b.alt=""),this._shadow=b,e.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),b&&E&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&l(this._icon,"focus",this._panOnFocus,this),Ce(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ce(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Ee(this._icon,e),this._shadow&&Ee(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var o=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(oe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Rl)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Rl(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&rn(this._icon,e),this._shadow&&rn(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var o=this.options.icon.options,h=o.iconSize?zt(o.iconSize):zt(0,0),g=o.iconAnchor?zt(o.iconAnchor):zt(0,0);e.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:h.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Id(e,o){return new Ro(e,o)}var cr=Cn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return S(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Bo=cr.extend({options:{fill:!0,radius:10},initialize:function(e,o){S(this,o),this._latlng=Ft(e),this._radius=this.options.radius},setLatLng:function(e){var o=this._latlng;return this._latlng=Ft(e),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var o=e&&e.radius||this._radius;return cr.prototype.setStyle.call(this,e),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,o=this._radiusY||e,h=this._clickTolerance(),g=[e+h,o+h];this._pxBounds=new Bt(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Dd(e,o){return new Bo(e,o)}var Xs=Bo.extend({initialize:function(e,o,h){if(typeof o=="number"&&(o=c({},h,{radius:o})),S(this,o),this._latlng=Ft(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new Me(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:cr.prototype.setStyle,_project:function(){var e=this._latlng.lng,o=this._latlng.lat,h=this._map,g=h.options.crs;if(g.distance===Pt.distance){var b=Math.PI/180,E=this._mRadius/Pt.R/b,q=h.project([o+E,e]),nt=h.project([o-E,e]),lt=q.add(nt).divideBy(2),kt=h.unproject(lt).lat,It=Math.acos((Math.cos(E*b)-Math.sin(o*b)*Math.sin(kt*b))/(Math.cos(o*b)*Math.cos(kt*b)))/b;(isNaN(It)||It===0)&&(It=E/Math.cos(Math.PI/180*o)),this._point=lt.subtract(h.getPixelOrigin()),this._radius=isNaN(It)?0:lt.x-h.project([kt,e-It]).x,this._radiusY=lt.y-q.y}else{var Yt=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(Yt).x}this._updateBounds()}});function zd(e,o,h){return new Xs(e,o,h)}var Jn=cr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,o){S(this,o),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var o=1/0,h=null,g=Hi,b,E,q=0,nt=this._parts.length;q<nt;q++)for(var lt=this._parts[q],kt=1,It=lt.length;kt<It;kt++){b=lt[kt-1],E=lt[kt];var Yt=g(e,b,E,!0);Yt<o&&(o=Yt,h=g(e,b,E))}return h&&(h.distance=Math.sqrt(o)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ol(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,o){return o=o||this._defaultShape(),e=Ft(e),o.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new Me,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return _n(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var o=[],h=_n(e),g=0,b=e.length;g<b;g++)h?(o[g]=Ft(e[g]),this._bounds.extend(o[g])):o[g]=this._convertLatLngs(e[g]);return o},_project:function(){var e=new Bt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),o=new wt(e,e);this._rawPxBounds&&(this._pxBounds=new Bt([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(e,o,h){var g=e[0]instanceof le,b=e.length,E,q;if(g){for(q=[],E=0;E<b;E++)q[E]=this._map.latLngToLayerPoint(e[E]),h.extend(q[E]);o.push(q)}else for(E=0;E<b;E++)this._projectLatlngs(e[E],o,h)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,h,g,b,E,q,nt,lt;for(h=0,b=0,E=this._rings.length;h<E;h++)for(lt=this._rings[h],g=0,q=lt.length;g<q-1;g++)nt=El(lt[g],lt[g+1],e,g,!0),nt&&(o[b]=o[b]||[],o[b].push(nt[0]),(nt[1]!==lt[g+1]||g===q-2)&&(o[b].push(nt[1]),b++))}},_simplifyPoints:function(){for(var e=this._parts,o=this.options.smoothFactor,h=0,g=e.length;h<g;h++)e[h]=Cl(e[h],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,o){var h,g,b,E,q,nt,lt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(h=0,E=this._parts.length;h<E;h++)for(nt=this._parts[h],g=0,q=nt.length,b=q-1;g<q;b=g++)if(!(!o&&g===0)&&Pl(e,nt[b],nt[g])<=lt)return!0;return!1}});function jd(e,o){return new Jn(e,o)}Jn._flat=Tl;var oi=Jn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ml(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var o=Jn.prototype._convertLatLngs.call(this,e),h=o.length;return h>=2&&o[0]instanceof le&&o[0].equals(o[h-1])&&o.pop(),o},_setLatLngs:function(e){Jn.prototype._setLatLngs.call(this,e),_n(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return _n(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,o=this.options.weight,h=new wt(o,o);if(e=new Bt(e.min.subtract(h),e.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,b=this._rings.length,E;g<b;g++)E=Ll(this._rings[g],e,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var o=!1,h,g,b,E,q,nt,lt,kt;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(E=0,lt=this._parts.length;E<lt;E++)for(h=this._parts[E],q=0,kt=h.length,nt=kt-1;q<kt;nt=q++)g=h[q],b=h[nt],g.y>e.y!=b.y>e.y&&e.x<(b.x-g.x)*(e.y-g.y)/(b.y-g.y)+g.x&&(o=!o);return o||Jn.prototype._containsPoint.call(this,e,!0)}});function Nd(e,o){return new oi(e,o)}var Yn=Wn.extend({initialize:function(e,o){S(this,o),this._layers={},e&&this.addData(e)},addData:function(e){var o=j(e)?e:e.features,h,g,b;if(o){for(h=0,g=o.length;h<g;h++)b=o[h],(b.geometries||b.geometry||b.features||b.coordinates)&&this.addData(b);return this}var E=this.options;if(E.filter&&!E.filter(e))return this;var q=Io(e,E);return q?(q.feature=jo(e),q.defaultOptions=q.options,this.resetStyle(q),E.onEachFeature&&E.onEachFeature(e,q),this.addLayer(q)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=c({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(o){this._setLayerStyle(o,e)},this)},_setLayerStyle:function(e,o){e.setStyle&&(typeof o=="function"&&(o=o(e.feature)),e.setStyle(o))}});function Io(e,o){var h=e.type==="Feature"?e.geometry:e,g=h?h.coordinates:null,b=[],E=o&&o.pointToLayer,q=o&&o.coordsToLatLng||Qs,nt,lt,kt,It;if(!g&&!h)return null;switch(h.type){case"Point":return nt=q(g),Bl(E,e,nt,o);case"MultiPoint":for(kt=0,It=g.length;kt<It;kt++)nt=q(g[kt]),b.push(Bl(E,e,nt,o));return new Wn(b);case"LineString":case"MultiLineString":return lt=Do(g,h.type==="LineString"?0:1,q),new Jn(lt,o);case"Polygon":case"MultiPolygon":return lt=Do(g,h.type==="Polygon"?1:2,q),new oi(lt,o);case"GeometryCollection":for(kt=0,It=h.geometries.length;kt<It;kt++){var Yt=Io({geometry:h.geometries[kt],type:"Feature",properties:e.properties},o);Yt&&b.push(Yt)}return new Wn(b);case"FeatureCollection":for(kt=0,It=h.features.length;kt<It;kt++){var ce=Io(h.features[kt],o);ce&&b.push(ce)}return new Wn(b);default:throw new Error("Invalid GeoJSON object.")}}function Bl(e,o,h,g){return e?e(o,h):new Ro(h,g&&g.markersInheritOptions&&g)}function Qs(e){return new le(e[1],e[0],e[2])}function Do(e,o,h){for(var g=[],b=0,E=e.length,q;b<E;b++)q=o?Do(e[b],o-1,h):(h||Qs)(e[b]),g.push(q);return g}function ta(e,o){return e=Ft(e),e.alt!==void 0?[M(e.lng,o),M(e.lat,o),M(e.alt,o)]:[M(e.lng,o),M(e.lat,o)]}function zo(e,o,h,g){for(var b=[],E=0,q=e.length;E<q;E++)b.push(o?zo(e[E],_n(e[E])?0:o-1,h,g):ta(e[E],g));return!o&&h&&b.length>0&&b.push(b[0].slice()),b}function si(e,o){return e.feature?c({},e.feature,{geometry:o}):jo(o)}function jo(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var ea={toGeoJSON:function(e){return si(this,{type:"Point",coordinates:ta(this.getLatLng(),e)})}};Ro.include(ea),Xs.include(ea),Bo.include(ea),Jn.include({toGeoJSON:function(e){var o=!_n(this._latlngs),h=zo(this._latlngs,o?1:0,!1,e);return si(this,{type:(o?"Multi":"")+"LineString",coordinates:h})}}),oi.include({toGeoJSON:function(e){var o=!_n(this._latlngs),h=o&&!_n(this._latlngs[0]),g=zo(this._latlngs,h?2:o?1:0,!0,e);return o||(g=[g]),si(this,{type:(h?"Multi":"")+"Polygon",coordinates:g})}}),ri.include({toMultiPoint:function(e){var o=[];return this.eachLayer(function(h){o.push(h.toGeoJSON(e).geometry.coordinates)}),si(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(e){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(e);var h=o==="GeometryCollection",g=[];return this.eachLayer(function(b){if(b.toGeoJSON){var E=b.toGeoJSON(e);if(h)g.push(E.geometry);else{var q=jo(E);q.type==="FeatureCollection"?g.push.apply(g,q.features):g.push(q)}}}),h?si(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function Il(e,o){return new Yn(e,o)}var Fd=Il,No=Cn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,o,h){this._url=e,this._bounds=fe(o),S(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(oe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ce(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&Zn(this._image),this},bringToBack:function(){return this._map&&qn(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=fe(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",o=this._image=e?this._url:de("img");if(oe(o,"leaflet-image-layer"),this._zoomAnimated&&oe(o,"leaflet-zoom-animated"),this.options.className&&oe(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onload=u(this.fire,this,"load"),o.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(e){var o=this._map.getZoomScale(e.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Dn(this._image,h,o)},_reset:function(){var e=this._image,o=new Bt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=o.getSize();Ee(e,o.min),e.style.width=h.x+"px",e.style.height=h.y+"px"},_updateOpacity:function(){rn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Vd=function(e,o,h){return new No(e,o,h)},Dl=No.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",o=this._image=e?this._url:de("video");if(oe(o,"leaflet-image-layer"),this._zoomAnimated&&oe(o,"leaflet-zoom-animated"),this.options.className&&oe(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onloadeddata=u(this.fire,this,"load"),e){for(var h=o.getElementsByTagName("source"),g=[],b=0;b<h.length;b++)g.push(h[b].src);this._url=h.length>0?g:[o.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var q=de("source");q.src=this._url[E],o.appendChild(q)}}});function Hd(e,o,h){return new Dl(e,o,h)}var zl=No.extend({_initImage:function(){var e=this._image=this._url;oe(e,"leaflet-image-layer"),this._zoomAnimated&&oe(e,"leaflet-zoom-animated"),this.options.className&&oe(e,this.options.className),e.onselectstart=v,e.onmousemove=v}});function Gd(e,o,h){return new zl(e,o,h)}var jn=Cn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,o){e&&(e instanceof le||j(e))?(this._latlng=Ft(e),S(this,o)):(S(this,e),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&rn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&rn(this._container,1),this.bringToFront(),this.options.interactive&&(oe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(rn(this._container,0),this._removeTimeout=setTimeout(u(Ce,void 0,this._container),200)):Ce(this._container),this.options.interactive&&(Re(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=Ft(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Zn(this._container),this},bringToBack:function(){return this._map&&qn(this._container),this},_prepareOpen:function(e){var o=this._source;if(!o._map)return!1;if(o instanceof Wn){o=null;var h=this._source._layers;for(var g in h)if(h[g]._map){o=h[g];break}if(!o)return!1;this._source=o}if(!e)if(o.getCenter)e=o.getCenter();else if(o.getLatLng)e=o.getLatLng();else if(o.getBounds)e=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")e.innerHTML=o;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),o=zt(this.options.offset),h=this._getAnchor();this._zoomAnimated?Ee(this._container,e.add(h)):o=o.add(e).add(h);var g=this._containerBottom=-o.y,b=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=g+"px",this._container.style.left=b+"px"}},_getAnchor:function(){return[0,0]}});Ut.include({_initOverlay:function(e,o,h,g){var b=o;return b instanceof e||(b=new e(g).setContent(o)),h&&b.setLatLng(h),b}}),Cn.include({_initOverlay:function(e,o,h,g){var b=h;return b instanceof e?(S(b,g),b._source=this):(b=o&&!g?o:new e(g,this),b.setContent(h)),b}});var Fo=jn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,jn.prototype.openOn.call(this,e)},onAdd:function(e){jn.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof cr||this._source.on("preclick",F))},onRemove:function(e){jn.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof cr||this._source.off("preclick",F))},getEvents:function(){var e=jn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",o=this._container=de("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=de("div",e+"-content-wrapper",o);if(this._contentNode=de("div",e+"-content",h),$(o),U(this._contentNode),ne(o,"contextmenu",F),this._tipContainer=de("div",e+"-tip-container",o),this._tip=de("div",e+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=de("a",e+"-close-button",o);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',ne(g,"click",function(b){Z(b),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,o=e.style;o.width="",o.whiteSpace="nowrap";var h=e.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),o.width=h+1+"px",o.whiteSpace="",o.height="";var g=e.offsetHeight,b=this.options.maxHeight,E="leaflet-popup-scrolled";b&&g>b?(o.height=b+"px",oe(e,E)):Re(e,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var o=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),h=this._getAnchor();Ee(this._container,o.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,o=parseInt(ar(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+o,g=this._containerWidth,b=new wt(this._containerLeft,-h-this._containerBottom);b._add(mn(this._container));var E=e.layerPointToContainerPoint(b),q=zt(this.options.autoPanPadding),nt=zt(this.options.autoPanPaddingTopLeft||q),lt=zt(this.options.autoPanPaddingBottomRight||q),kt=e.getSize(),It=0,Yt=0;E.x+g+lt.x>kt.x&&(It=E.x+g-kt.x+lt.x),E.x-It-nt.x<0&&(It=E.x-nt.x),E.y+h+lt.y>kt.y&&(Yt=E.y+h-kt.y+lt.y),E.y-Yt-nt.y<0&&(Yt=E.y-nt.y),(It||Yt)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([It,Yt]))}},_getAnchor:function(){return zt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),$d=function(e,o){return new Fo(e,o)};Ut.mergeOptions({closePopupOnClick:!0}),Ut.include({openPopup:function(e,o,h){return this._initOverlay(Fo,e,o,h).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),Cn.include({bindPopup:function(e,o){return this._popup=this._initOverlay(Fo,this._popup,e,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Wn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){Q(e);var o=e.layer||e.target;if(this._popup._source===o&&!(o instanceof cr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=o,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var Vo=jn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){jn.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){jn.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=jn.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",o=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=de("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var o,h,g=this._map,b=this._container,E=g.latLngToContainerPoint(g.getCenter()),q=g.layerPointToContainerPoint(e),nt=this.options.direction,lt=b.offsetWidth,kt=b.offsetHeight,It=zt(this.options.offset),Yt=this._getAnchor();nt==="top"?(o=lt/2,h=kt):nt==="bottom"?(o=lt/2,h=0):nt==="center"?(o=lt/2,h=kt/2):nt==="right"?(o=0,h=kt/2):nt==="left"?(o=lt,h=kt/2):q.x<E.x?(nt="right",o=0,h=kt/2):(nt="left",o=lt+(It.x+Yt.x)*2,h=kt/2),e=e.subtract(zt(o,h,!0)).add(It).add(Yt),Re(b,"leaflet-tooltip-right"),Re(b,"leaflet-tooltip-left"),Re(b,"leaflet-tooltip-top"),Re(b,"leaflet-tooltip-bottom"),oe(b,"leaflet-tooltip-"+nt),Ee(b,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&rn(this._container,e)},_animateZoom:function(e){var o=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(o)},_getAnchor:function(){return zt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ud=function(e,o){return new Vo(e,o)};Ut.include({openTooltip:function(e,o,h){return this._initOverlay(Vo,e,o,h).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Cn.include({bindTooltip:function(e,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Vo,this._tooltip,e,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var o=e?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[o](h),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Wn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var o=typeof e.getElement=="function"&&e.getElement();o&&(ne(o,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),ne(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var o=typeof e.getElement=="function"&&e.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var o=e.latlng,h,g;this._tooltip.options.sticky&&e.originalEvent&&(h=this._map.mouseEventToContainerPoint(e.originalEvent),g=this._map.containerPointToLayerPoint(h),o=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(o)}});var jl=ii.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var o=e&&e.tagName==="DIV"?e:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Er(o),o.appendChild(h.html)):o.innerHTML=h.html!==!1?h.html:"",h.bgPos){var g=zt(h.bgPos);o.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Zd(e){return new jl(e)}ii.Default=Gi;var $i=Cn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Vt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){S(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),Ce(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Zn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(qn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof wt?e:new wt(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var o=this.getPane().children,h=-e(-1/0,1/0),g=0,b=o.length,E;g<b;g++)E=o[g].style.zIndex,o[g]!==this._container&&E&&(h=e(h,+E));isFinite(h)&&(this.options.zIndex=h+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Vt.ielt9){rn(this._container,this.options.opacity);var e=+new Date,o=!1,h=!1;for(var g in this._tiles){var b=this._tiles[g];if(!(!b.current||!b.loaded)){var E=Math.min(1,(e-b.loaded)/200);rn(b.el,E),E<1?o=!0:(b.active?h=!0:this._onOpaqueTile(b),b.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),o&&(at(this._fadeFrame),this._fadeFrame=gt(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=de("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,o=this.options.maxZoom;if(e!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===e?(this._levels[h].el.style.zIndex=o-Math.abs(e-h),this._onUpdateLevel(h)):(Ce(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var g=this._levels[e],b=this._map;return g||(g=this._levels[e]={},g.el=de("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=o,g.origin=b.project(b.unproject(b.getPixelOrigin()),e).round(),g.zoom=e,this._setZoomTransform(g,b.getCenter(),b.getZoom()),v(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var e,o,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)o=this._tiles[e],o.retain=o.current;for(e in this._tiles)if(o=this._tiles[e],o.current&&!o.active){var g=o.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var o in this._tiles)this._tiles[o].coords.z===e&&this._removeTile(o)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)Ce(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,o,h,g){var b=Math.floor(e/2),E=Math.floor(o/2),q=h-1,nt=new wt(+b,+E);nt.z=+q;var lt=this._tileCoordsToKey(nt),kt=this._tiles[lt];return kt&&kt.active?(kt.retain=!0,!0):(kt&&kt.loaded&&(kt.retain=!0),q>g?this._retainParent(b,E,q,g):!1)},_retainChildren:function(e,o,h,g){for(var b=2*e;b<2*e+2;b++)for(var E=2*o;E<2*o+2;E++){var q=new wt(b,E);q.z=h+1;var nt=this._tileCoordsToKey(q),lt=this._tiles[nt];if(lt&&lt.active){lt.retain=!0;continue}else lt&&lt.loaded&&(lt.retain=!0);h+1<g&&this._retainChildren(b,E,h+1,g)}},_resetView:function(e){var o=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var o=this.options;return o.minNativeZoom!==void 0&&e<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<e?o.maxNativeZoom:e},_setView:function(e,o,h,g){var b=Math.round(o);this.options.maxZoom!==void 0&&b>this.options.maxZoom||this.options.minZoom!==void 0&&b<this.options.minZoom?b=void 0:b=this._clampZoom(b);var E=this.options.updateWhenZooming&&b!==this._tileZoom;(!g||E)&&(this._tileZoom=b,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),b!==void 0&&this._update(e),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(e,o)},_setZoomTransforms:function(e,o){for(var h in this._levels)this._setZoomTransform(this._levels[h],e,o)},_setZoomTransform:function(e,o,h){var g=this._map.getZoomScale(h,e.zoom),b=e.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(o,h)).round();Vt.any3d?Dn(e.el,b,g):Ee(e.el,b)},_resetGrid:function(){var e=this._map,o=e.options.crs,h=this._tileSize=this.getTileSize(),g=this._tileZoom,b=this._map.getPixelWorldBounds(this._tileZoom);b&&(this._globalTileRange=this._pxBoundsToTileRange(b)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,o.wrapLng[0]],g).x/h.x),Math.ceil(e.project([0,o.wrapLng[1]],g).x/h.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([o.wrapLat[0],0],g).y/h.x),Math.ceil(e.project([o.wrapLat[1],0],g).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var o=this._map,h=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),g=o.getZoomScale(h,this._tileZoom),b=o.project(e,this._tileZoom).floor(),E=o.getSize().divideBy(g*2);return new Bt(b.subtract(E),b.add(E))},_update:function(e){var o=this._map;if(o){var h=this._clampZoom(o.getZoom());if(e===void 0&&(e=o.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(e),b=this._pxBoundsToTileRange(g),E=b.getCenter(),q=[],nt=this.options.keepBuffer,lt=new Bt(b.getBottomLeft().subtract([nt,-nt]),b.getTopRight().add([nt,-nt]));if(!(isFinite(b.min.x)&&isFinite(b.min.y)&&isFinite(b.max.x)&&isFinite(b.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var kt in this._tiles){var It=this._tiles[kt].coords;(It.z!==this._tileZoom||!lt.contains(new wt(It.x,It.y)))&&(this._tiles[kt].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(e,h);return}for(var Yt=b.min.y;Yt<=b.max.y;Yt++)for(var ce=b.min.x;ce<=b.max.x;ce++){var Qe=new wt(ce,Yt);if(Qe.z=this._tileZoom,!!this._isValidTile(Qe)){var Ge=this._tiles[this._tileCoordsToKey(Qe)];Ge?Ge.current=!0:q.push(Qe)}}if(q.sort(function(on,li){return on.distanceTo(E)-li.distanceTo(E)}),q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yn=document.createDocumentFragment();for(ce=0;ce<q.length;ce++)this._addTile(q[ce],yn);this._level.el.appendChild(yn)}}}},_isValidTile:function(e){var o=this._map.options.crs;if(!o.infinite){var h=this._globalTileRange;if(!o.wrapLng&&(e.x<h.min.x||e.x>h.max.x)||!o.wrapLat&&(e.y<h.min.y||e.y>h.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(e);return fe(this.options.bounds).overlaps(g)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var o=this._map,h=this.getTileSize(),g=e.scaleBy(h),b=g.add(h),E=o.unproject(g,e.z),q=o.unproject(b,e.z);return[E,q]},_tileCoordsToBounds:function(e){var o=this._tileCoordsToNwSe(e),h=new Me(o[0],o[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var o=e.split(":"),h=new wt(+o[0],+o[1]);return h.z=+o[2],h},_removeTile:function(e){var o=this._tiles[e];o&&(Ce(o.el),delete this._tiles[e],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){oe(e,"leaflet-tile");var o=this.getTileSize();e.style.width=o.x+"px",e.style.height=o.y+"px",e.onselectstart=v,e.onmousemove=v,Vt.ielt9&&this.options.opacity<1&&rn(e,this.options.opacity)},_addTile:function(e,o){var h=this._getTilePos(e),g=this._tileCoordsToKey(e),b=this.createTile(this._wrapCoords(e),u(this._tileReady,this,e));this._initTile(b),this.createTile.length<2&&gt(u(this._tileReady,this,e,null,b)),Ee(b,h),this._tiles[g]={el:b,coords:e,current:!0},o.appendChild(b),this.fire("tileloadstart",{tile:b,coords:e})},_tileReady:function(e,o,h){o&&this.fire("tileerror",{error:o,tile:h,coords:e});var g=this._tileCoordsToKey(e);h=this._tiles[g],h&&(h.loaded=+new Date,this._map._fadeAnimated?(rn(h.el,0),at(this._fadeFrame),this._fadeFrame=gt(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),o||(oe(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Vt.ielt9||!this._map._fadeAnimated?gt(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var o=new wt(this._wrapX?_(e.x,this._wrapX):e.x,this._wrapY?_(e.y,this._wrapY):e.y);return o.z=e.z,o},_pxBoundsToTileRange:function(e){var o=this.getTileSize();return new Bt(e.min.unscaleBy(o).floor(),e.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function qd(e){return new $i(e)}var ai=$i.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,o){this._url=e,o=S(this,o),o.detectRetina&&Vt.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,o){return this._url===e&&o===void 0&&(o=!0),this._url=e,o||this.redraw(),this},createTile:function(e,o){var h=document.createElement("img");return ne(h,"load",u(this._tileOnLoad,this,o,h)),ne(h,"error",u(this._tileOnError,this,o,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(e),h},getTileUrl:function(e){var o={r:Vt.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-e.y;this.options.tms&&(o.y=h),o["-y"]=h}return O(this._url,c(o,this.options))},_tileOnLoad:function(e,o){Vt.ielt9?setTimeout(u(e,this,null,o),0):e(null,o)},_tileOnError:function(e,o,h){var g=this.options.errorTileUrl;g&&o.getAttribute("src")!==g&&(o.src=g),e(h,o)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,o=this.options.maxZoom,h=this.options.zoomReverse,g=this.options.zoomOffset;return h&&(e=o-e),e+g},_getSubdomain:function(e){var o=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var e,o;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(o=this._tiles[e].el,o.onload=v,o.onerror=v,!o.complete)){o.src=z;var h=this._tiles[e].coords;Ce(o),delete this._tiles[e],this.fire("tileabort",{tile:o,coords:h})}},_removeTile:function(e){var o=this._tiles[e];if(o)return o.el.setAttribute("src",z),$i.prototype._removeTile.call(this,e)},_tileReady:function(e,o,h){if(!(!this._map||h&&h.getAttribute("src")===z))return $i.prototype._tileReady.call(this,e,o,h)}});function Nl(e,o){return new ai(e,o)}var Fl=ai.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,o){this._url=e;var h=c({},this.defaultWmsParams);for(var g in o)g in this.options||(h[g]=o[g]);o=S(this,o);var b=o.detectRetina&&Vt.retina?2:1,E=this.getTileSize();h.width=E.x*b,h.height=E.y*b,this.wmsParams=h},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,ai.prototype.onAdd.call(this,e)},getTileUrl:function(e){var o=this._tileCoordsToNwSe(e),h=this._crs,g=$t(h.project(o[0]),h.project(o[1])),b=g.min,E=g.max,q=(this._wmsVersion>=1.3&&this._crs===Al?[b.y,b.x,E.y,E.x]:[b.x,b.y,E.x,E.y]).join(","),nt=ai.prototype.getTileUrl.call(this,e);return nt+N(this.wmsParams,nt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+q},setParams:function(e,o){return c(this.wmsParams,e),o||this.redraw(),this}});function Kd(e,o){return new Fl(e,o)}ai.WMS=Fl,Nl.wms=Kd;var Xn=Cn.extend({options:{padding:.1},initialize:function(e){S(this,e),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),oe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,o){var h=this._map.getZoomScale(o,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),b=this._map.project(this._center,o),E=g.multiplyBy(-h).add(b).subtract(this._map._getNewPixelOrigin(e,o));Vt.any3d?Dn(this._container,E,h):Ee(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,o=this._map.getSize(),h=this._map.containerPointToLayerPoint(o.multiplyBy(-e)).round();this._bounds=new Bt(h,h.add(o.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Vl=Xn.extend({options:{tolerance:0},getEvents:function(){var e=Xn.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Xn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");ne(e,"mousemove",this._onMouseMove,this),ne(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ne(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){at(this._redrawRequest),delete this._ctx,Ce(this._container),l(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var o in this._layers)e=this._layers[o],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Xn.prototype._update.call(this);var e=this._bounds,o=this._container,h=e.getSize(),g=Vt.retina?2:1;Ee(o,e.min),o.width=g*h.x,o.height=g*h.y,o.style.width=h.x+"px",o.style.height=h.y+"px",Vt.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Xn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[f(e)]=e;var o=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var o=e._order,h=o.next,g=o.prev;h?h.prev=g:this._drawLast=g,g?g.next=h:this._drawFirst=h,delete e._order,delete this._layers[f(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var o=e.options.dashArray.split(/[, ]+/),h=[],g,b;for(b=0;b<o.length;b++){if(g=Number(o[b]),isNaN(g))return;h.push(g)}e.options._dashArray=h}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||gt(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var o=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Bt,this._redrawBounds.extend(e._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(e._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var o=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,o=this._redrawBounds;if(this._ctx.save(),o){var h=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)e=g.layer,(!o||e._pxBounds&&e._pxBounds.intersects(o))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,o){if(this._drawing){var h,g,b,E,q=e._parts,nt=q.length,lt=this._ctx;if(nt){for(lt.beginPath(),h=0;h<nt;h++){for(g=0,b=q[h].length;g<b;g++)E=q[h][g],lt[g?"lineTo":"moveTo"](E.x,E.y);o&&lt.closePath()}this._fillStroke(lt,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var o=e._point,h=this._ctx,g=Math.max(Math.round(e._radius),1),b=(Math.max(Math.round(e._radiusY),1)||g)/g;b!==1&&(h.save(),h.scale(1,b)),h.beginPath(),h.arc(o.x,o.y/b,g,0,Math.PI*2,!1),b!==1&&h.restore(),this._fillStroke(h,e)}},_fillStroke:function(e,o){var h=o.options;h.fill&&(e.globalAlpha=h.fillOpacity,e.fillStyle=h.fillColor||h.color,e.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(e.setLineDash&&e.setLineDash(o.options&&o.options._dashArray||[]),e.globalAlpha=h.opacity,e.lineWidth=h.weight,e.strokeStyle=h.color,e.lineCap=h.lineCap,e.lineJoin=h.lineJoin,e.stroke())},_onClick:function(e){for(var o=this._map.mouseEventToLayerPoint(e),h,g,b=this._drawFirst;b;b=b.next)h=b.layer,h.options.interactive&&h._containsPoint(o)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(h))&&(g=h);this._fireEvent(g?[g]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,o)}},_handleMouseOut:function(e){var o=this._hoveredLayer;o&&(Re(this._container,"leaflet-interactive"),this._fireEvent([o],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,o){if(!this._mouseHoverThrottled){for(var h,g,b=this._drawFirst;b;b=b.next)h=b.layer,h.options.interactive&&h._containsPoint(o)&&(g=h);g!==this._hoveredLayer&&(this._handleMouseOut(e),g&&(oe(this._container,"leaflet-interactive"),this._fireEvent([g],e,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,o,h){this._map._fireDOMEvent(o,h||o.type,e)},_bringToFront:function(e){var o=e._order;if(o){var h=o.next,g=o.prev;if(h)h.prev=g;else return;g?g.next=h:h&&(this._drawFirst=h),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(e)}},_bringToBack:function(e){var o=e._order;if(o){var h=o.next,g=o.prev;if(g)g.next=h;else return;h?h.prev=g:g&&(this._drawLast=g),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(e)}}});function Hl(e){return Vt.canvas?new Vl(e):null}var Ui=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Wd={_initContainer:function(){this._container=de("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Xn.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var o=e._container=Ui("shape");oe(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",e._path=Ui("path"),o.appendChild(e._path),this._updateStyle(e),this._layers[f(e)]=e},_addPath:function(e){var o=e._container;this._container.appendChild(o),e.options.interactive&&e.addInteractiveTarget(o)},_removePath:function(e){var o=e._container;Ce(o),e.removeInteractiveTarget(o),delete this._layers[f(e)]},_updateStyle:function(e){var o=e._stroke,h=e._fill,g=e.options,b=e._container;b.stroked=!!g.stroke,b.filled=!!g.fill,g.stroke?(o||(o=e._stroke=Ui("stroke")),b.appendChild(o),o.weight=g.weight+"px",o.color=g.color,o.opacity=g.opacity,g.dashArray?o.dashStyle=j(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=g.lineCap.replace("butt","flat"),o.joinstyle=g.lineJoin):o&&(b.removeChild(o),e._stroke=null),g.fill?(h||(h=e._fill=Ui("fill")),b.appendChild(h),h.color=g.fillColor||g.color,h.opacity=g.fillOpacity):h&&(b.removeChild(h),e._fill=null)},_updateCircle:function(e){var o=e._point.round(),h=Math.round(e._radius),g=Math.round(e._radiusY||h);this._setPath(e,e._empty()?"M0 0":"AL "+o.x+","+o.y+" "+h+","+g+" 0,"+65535*360)},_setPath:function(e,o){e._path.v=o},_bringToFront:function(e){Zn(e._container)},_bringToBack:function(e){qn(e._container)}},Ho=Vt.vml?Ui:ht,Zi=Xn.extend({_initContainer:function(){this._container=Ho("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ho("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ce(this._container),l(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Xn.prototype._update.call(this);var e=this._bounds,o=e.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,h.setAttribute("width",o.x),h.setAttribute("height",o.y)),Ee(h,e.min),h.setAttribute("viewBox",[e.min.x,e.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(e){var o=e._path=Ho("path");e.options.className&&oe(o,e.options.className),e.options.interactive&&oe(o,"leaflet-interactive"),this._updateStyle(e),this._layers[f(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){Ce(e._path),e.removeInteractiveTarget(e._path),delete this._layers[f(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var o=e._path,h=e.options;o&&(h.stroke?(o.setAttribute("stroke",h.color),o.setAttribute("stroke-opacity",h.opacity),o.setAttribute("stroke-width",h.weight),o.setAttribute("stroke-linecap",h.lineCap),o.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?o.setAttribute("stroke-dasharray",h.dashArray):o.removeAttribute("stroke-dasharray"),h.dashOffset?o.setAttribute("stroke-dashoffset",h.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),h.fill?(o.setAttribute("fill",h.fillColor||h.color),o.setAttribute("fill-opacity",h.fillOpacity),o.setAttribute("fill-rule",h.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(e,o){this._setPath(e,_t(e._parts,o))},_updateCircle:function(e){var o=e._point,h=Math.max(Math.round(e._radius),1),g=Math.max(Math.round(e._radiusY),1)||h,b="a"+h+","+g+" 0 1,0 ",E=e._empty()?"M0 0":"M"+(o.x-h)+","+o.y+b+h*2+",0 "+b+-h*2+",0 ";this._setPath(e,E)},_setPath:function(e,o){e._path.setAttribute("d",o)},_bringToFront:function(e){Zn(e._path)},_bringToBack:function(e){qn(e._path)}});Vt.vml&&Zi.include(Wd);function Gl(e){return Vt.svg||Vt.vml?new Zi(e):null}Ut.include({getRenderer:function(e){var o=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var o=this._paneRenderers[e];return o===void 0&&(o=this._createRenderer({pane:e}),this._paneRenderers[e]=o),o},_createRenderer:function(e){return this.options.preferCanvas&&Hl(e)||Gl(e)}});var $l=oi.extend({initialize:function(e,o){oi.prototype.initialize.call(this,this._boundsToLatLngs(e),o)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=fe(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Jd(e,o){return new $l(e,o)}Zi.create=Ho,Zi.pointsToPath=_t,Yn.geometryToLayer=Io,Yn.coordsToLatLng=Qs,Yn.coordsToLatLngs=Do,Yn.latLngToCoords=ta,Yn.latLngsToCoords=zo,Yn.getFeature=si,Yn.asFeature=jo,Ut.mergeOptions({boxZoom:!0});var Ul=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){ne(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){l(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ce(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Or(),Rr(),this._startPoint=this._map.mouseEventToContainerPoint(e),ne(document,{contextmenu:Q,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=de("div","leaflet-zoom-box",this._container),oe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var o=new Bt(this._point,this._startPoint),h=o.getSize();Ee(this._box,o.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(Ce(this._box),Re(this._container,"leaflet-crosshair")),Ar(),ji(),l(document,{contextmenu:Q,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var o=new Me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ut.addInitHook("addHandler","boxZoom",Ul),Ut.mergeOptions({doubleClickZoom:!0});var Zl=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var o=this._map,h=o.getZoom(),g=o.options.zoomDelta,b=e.originalEvent.shiftKey?h-g:h+g;o.options.doubleClickZoom==="center"?o.setZoom(b):o.setZoomAround(e.containerPoint,b)}});Ut.addInitHook("addHandler","doubleClickZoom",Zl),Ut.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ql=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new ur(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}oe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Re(this._map._container,"leaflet-grab"),Re(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=fe(this._map.options.maxBounds);this._offsetLimit=$t(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var o=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(o),this._prunePositions(o)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,o){return e-(e-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;e.x<o.min.x&&(e.x=this._viscousLimit(e.x,o.min.x)),e.y<o.min.y&&(e.y=this._viscousLimit(e.y,o.min.y)),e.x>o.max.x&&(e.x=this._viscousLimit(e.x,o.max.x)),e.y>o.max.y&&(e.y=this._viscousLimit(e.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,o=Math.round(e/2),h=this._initialWorldOffset,g=this._draggable._newPos.x,b=(g-o+h)%e+o-h,E=(g+o+h)%e-o-h,q=Math.abs(b+h)<Math.abs(E+h)?b:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=q},_onDragEnd:function(e){var o=this._map,h=o.options,g=!h.inertia||e.noInertia||this._times.length<2;if(o.fire("dragend",e),g)o.fire("moveend");else{this._prunePositions(+new Date);var b=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,q=h.easeLinearity,nt=b.multiplyBy(q/E),lt=nt.distanceTo([0,0]),kt=Math.min(h.inertiaMaxSpeed,lt),It=nt.multiplyBy(kt/lt),Yt=kt/(h.inertiaDeceleration*q),ce=It.multiplyBy(-Yt/2).round();!ce.x&&!ce.y?o.fire("moveend"):(ce=o._limitOffset(ce,o.options.maxBounds),gt(function(){o.panBy(ce,{duration:Yt,easeLinearity:q,noMoveStart:!0,animate:!0})}))}}});Ut.addInitHook("addHandler","dragging",ql),Ut.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Kl=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),ne(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),l(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,o=document.documentElement,h=e.scrollTop||o.scrollTop,g=e.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(g,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var o=this._panKeys={},h=this.keyCodes,g,b;for(g=0,b=h.left.length;g<b;g++)o[h.left[g]]=[-1*e,0];for(g=0,b=h.right.length;g<b;g++)o[h.right[g]]=[e,0];for(g=0,b=h.down.length;g<b;g++)o[h.down[g]]=[0,e];for(g=0,b=h.up.length;g<b;g++)o[h.up[g]]=[0,-1*e]},_setZoomDelta:function(e){var o=this._zoomKeys={},h=this.keyCodes,g,b;for(g=0,b=h.zoomIn.length;g<b;g++)o[h.zoomIn[g]]=e;for(g=0,b=h.zoomOut.length;g<b;g++)o[h.zoomOut[g]]=-e},_addHooks:function(){ne(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){l(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var o=e.keyCode,h=this._map,g;if(o in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(g=this._panKeys[o],e.shiftKey&&(g=zt(g).multiplyBy(3)),h.options.maxBounds&&(g=h._limitOffset(zt(g),h.options.maxBounds)),h.options.worldCopyJump){var b=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(g)));h.panTo(b)}else h.panBy(g)}else if(o in this._zoomKeys)h.setZoom(h.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;Q(e)}}});Ut.addInitHook("addHandler","keyboard",Kl),Ut.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Wl=gn.extend({addHooks:function(){ne(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){l(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var o=Rt(e),h=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var g=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),g),Q(e)},_performZoom:function(){var e=this._map,o=e.getZoom(),h=this._map.options.zoomSnap||0;e._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),b=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,E=h?Math.ceil(b/h)*h:b,q=e._limitZoom(o+(this._delta>0?E:-E))-o;this._delta=0,this._startTime=null,q&&(e.options.scrollWheelZoom==="center"?e.setZoom(o+q):e.setZoomAround(this._lastMousePos,o+q))}});Ut.addInitHook("addHandler","scrollWheelZoom",Wl);var Yd=600;Ut.mergeOptions({tapHold:Vt.touchNative&&Vt.safari&&Vt.mobile,tapTolerance:15});var Jl=gn.extend({addHooks:function(){ne(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){l(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var o=e.touches[0];this._startPos=this._newPos=new wt(o.clientX,o.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(ne(document,"touchend",Z),ne(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Yd),ne(document,"touchend touchcancel contextmenu",this._cancel,this),ne(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){l(document,"touchend",Z),l(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),l(document,"touchend touchcancel contextmenu",this._cancel,this),l(document,"touchmove",this._onMove,this)},_onMove:function(e){var o=e.touches[0];this._newPos=new wt(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,o){var h=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});h._simulated=!0,o.target.dispatchEvent(h)}});Ut.addInitHook("addHandler","tapHold",Jl),Ut.mergeOptions({touchZoom:Vt.touch,bounceAtZoomLimits:!0});var Yl=gn.extend({addHooks:function(){oe(this._map._container,"leaflet-touch-zoom"),ne(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Re(this._map._container,"leaflet-touch-zoom"),l(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var o=this._map;if(!(!e.touches||e.touches.length!==2||o._animatingZoom||this._zooming)){var h=o.mouseEventToContainerPoint(e.touches[0]),g=o.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(h.add(g)._divideBy(2))),this._startDist=h.distanceTo(g),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),ne(document,"touchmove",this._onTouchMove,this),ne(document,"touchend touchcancel",this._onTouchEnd,this),Z(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var o=this._map,h=o.mouseEventToContainerPoint(e.touches[0]),g=o.mouseEventToContainerPoint(e.touches[1]),b=h.distanceTo(g)/this._startDist;if(this._zoom=o.getScaleZoom(b,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&b<1||this._zoom>o.getMaxZoom()&&b>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,b===1)return}else{var E=h._add(g)._divideBy(2)._subtract(this._centerPoint);if(b===1&&E.x===0&&E.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),at(this._animRequest);var q=u(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=gt(q,this,!0),Z(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,at(this._animRequest),l(document,"touchmove",this._onTouchMove,this),l(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ut.addInitHook("addHandler","touchZoom",Yl),Ut.BoxZoom=Ul,Ut.DoubleClickZoom=Zl,Ut.Drag=ql,Ut.Keyboard=Kl,Ut.ScrollWheelZoom=Wl,Ut.TapHold=Jl,Ut.TouchZoom=Yl,a.Bounds=Bt,a.Browser=Vt,a.CRS=dt,a.Canvas=Vl,a.Circle=Xs,a.CircleMarker=Bo,a.Class=Lt,a.Control=Pe,a.DivIcon=jl,a.DivOverlay=jn,a.DomEvent=se,a.DomUtil=Us,a.Draggable=ur,a.Evented=Ht,a.FeatureGroup=Wn,a.GeoJSON=Yn,a.GridLayer=$i,a.Handler=gn,a.Icon=ii,a.ImageOverlay=No,a.LatLng=le,a.LatLngBounds=Me,a.Layer=Cn,a.LayerGroup=ri,a.LineUtil=Sd,a.Map=Ut,a.Marker=Ro,a.Mixin=xd,a.Path=cr,a.Point=wt,a.PolyUtil=kd,a.Polygon=oi,a.Polyline=Jn,a.Popup=Fo,a.PosAnimation=xe,a.Projection=Ed,a.Rectangle=$l,a.Renderer=Xn,a.SVG=Zi,a.SVGOverlay=zl,a.TileLayer=ai,a.Tooltip=Vo,a.Transformation=ue,a.Util=bt,a.VideoOverlay=Dl,a.bind=u,a.bounds=$t,a.canvas=Hl,a.circle=zd,a.circleMarker=Dd,a.control=He,a.divIcon=Zd,a.extend=c,a.featureGroup=Rd,a.geoJSON=Il,a.geoJson=Fd,a.gridLayer=qd,a.icon=Bd,a.imageOverlay=Vd,a.latLng=Ft,a.latLngBounds=fe,a.layerGroup=Ad,a.map=ke,a.marker=Id,a.point=zt,a.polygon=Nd,a.polyline=jd,a.popup=$d,a.rectangle=Jd,a.setOptions=S,a.stamp=f,a.svg=Gl,a.svgOverlay=Gd,a.tileLayer=Nl,a.tooltip=Ud,a.transformation=G,a.version=s,a.videoOverlay=Hd;var Xd=window.L;a.noConflict=function(){return window.L=Xd,this},window.L=a})})(Ga,Ga.exports);var fw=Ga.exports;const sn=pw(fw),mw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",gw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",_w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",yw={className:"bg-map-asserted rounded-full map-point-marker",iconSize:[8,8],iconAnchor:[4,4]},vw={className:"bg-map-collection-object rounded-full map-point-marker",iconSize:[8,8],iconAnchor:[4,4]},yd={className:"bg-map-georeference rounded-full map-point-marker",iconSize:[8,8],iconAnchor:[4,4]},bw={className:"bg-map-type-material map-point-marker rounded-full",iconSize:[8,8],iconAnchor:[4,4]},ww=Object.freeze(Object.defineProperty({__proto__:null,AssertedDistribution:yw,CollectionObject:vw,Georeference:yd,TypeMaterial:bw},Symbol.toStringTag,{value:"Module"})),xw={color:"rgb(var(--color-map-aggregate))",weight:1,dashArray:"3",dashOffset:"3",fillOpacity:"var(--color-map-shape-opacity)"},kw={color:"rgb(var(--color-map-asserted))",weight:1,dashArray:"3",dashOffset:"3",fillOpacity:"var(--color-map-shape-opacity)"},Lw={color:"rgb(var(--color-map-collection-object))",weight:1,fillOpacity:"var(--color-map-shape-opacity)"},Mw={color:"rgb(var(--color-map-type-material))",weight:1,fillOpacity:"var(--color-map-shape-opacity)"},gc=Object.freeze(Object.defineProperty({__proto__:null,Aggregate:xw,AssertedDistribution:kw,CollectionObject:Lw,TypeMaterial:Mw},Symbol.toStringTag,{value:"Module"})),_c=["TypeMaterial","CollectionObject","AssertedDistribution","Georeference","Aggregate"],yc={allowEditing:!1,allowRemoval:!1,allowCutting:!1,allowRotation:!1,draggable:!1};function vc(t){const n=t.map(a=>a.type);return n.sort((a,s)=>_c.indexOf(a)-_c.indexOf(s)),n[0]}const Cw=t=>({onEachFeature:(n,a)=>{const s=(n.properties.base||[]).map(i=>i.label).filter(Boolean);if(!s.length)return;const c=`
      <div class="max-h-32 overflow-y-auto text-xs">
        <ul>
        ${s.map(i=>`
              <li 
                class="py-2 last:border-0 truncate border-b"
                title="${i}"
              >
                ${i}
              </li>
              `).join("")}
        </ul>
      </div>`;a.pm.setOptions(yc),a.pm.disable(),a.bindPopup(c)},pointToLayer:(n,a)=>{const s=vc(n.properties.base),c=ww[s]||yd,i=t.marker(a,{icon:t.divIcon(c)});return i.pm.setOptions(yc),i},style:n=>{var s;const a=vc((s=n.properties)==null?void 0:s.base);if(gc[a])return gc[a]}}),{map_tile_server:Pw,map_tile_attribution:Sw,map_tiles:Ew}={base_url:"/taxonpages/",hash_mode:!0,map_tile_server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",map_tile_attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://sfg.taxonworks.org/api/v1",project_token:"c5lh0vgnBGTOQDOSfRYC8g",copyright_image:null,copyright_image_link:null,copyright_text:"Copyright CC0",header_logo_url:null,header_logo_text:"My project",header_links:[{label:"Home",link:"/"},{label:"About",link:"/about"}],map_tiles:[{label:"OpenStreetMap",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}],metadata:[{name:"description",content:"TaxonPages is a tool to serve taxon pages."},{name:"keywords",content:"taxonpages, species, sfg"},{name:"robots",content:"follow"}],project_name:"My project",project_citation:null,project_url:null,project_authors:null};function Tw(t,n){return Object.fromEntries((Ew||[{label:"tile",server:Pw,attribution:Sw}]).map(({server:s,attribution:c,label:i})=>[i,t.tileLayer(s,{...n,attribution:c})]))}(()=>{var t={9705:(s,c,i)=>{var u=i(1540);function d(f){var m=[1/0,1/0,-1/0,-1/0];return u.coordEach(f,function(_){m[0]>_[0]&&(m[0]=_[0]),m[1]>_[1]&&(m[1]=_[1]),m[2]<_[0]&&(m[2]=_[0]),m[3]<_[1]&&(m[3]=_[1])}),m}d.default=d,c.Z=d},4102:(s,c)=>{function i(C,O,j){j===void 0&&(j={});var T={type:"Feature"};return(j.id===0||j.id)&&(T.id=j.id),j.bbox&&(T.bbox=j.bbox),T.properties=O||{},T.geometry=C,T}function u(C,O,j){if(j===void 0&&(j={}),!C)throw new Error("coordinates is required");if(!Array.isArray(C))throw new Error("coordinates must be an Array");if(C.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!N(C[0])||!N(C[1]))throw new Error("coordinates must contain numbers");return i({type:"Point",coordinates:C},O,j)}function d(C,O,j){j===void 0&&(j={});for(var T=0,z=C;T<z.length;T++){var W=z[T];if(W.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ot=0;ot<W[W.length-1].length;ot++)if(W[W.length-1][ot]!==W[0][ot])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:C},O,j)}function f(C,O,j){if(j===void 0&&(j={}),C.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:C},O,j)}function m(C,O){O===void 0&&(O={});var j={type:"FeatureCollection"};return O.id&&(j.id=O.id),O.bbox&&(j.bbox=O.bbox),j.features=C,j}function _(C,O,j){return j===void 0&&(j={}),i({type:"MultiLineString",coordinates:C},O,j)}function v(C,O,j){return j===void 0&&(j={}),i({type:"MultiPoint",coordinates:C},O,j)}function M(C,O,j){return j===void 0&&(j={}),i({type:"MultiPolygon",coordinates:C},O,j)}function A(C,O){O===void 0&&(O="kilometers");var j=c.factors[O];if(!j)throw new Error(O+" units is invalid");return C*j}function P(C,O){O===void 0&&(O="kilometers");var j=c.factors[O];if(!j)throw new Error(O+" units is invalid");return C/j}function S(C){return 180*(C%(2*Math.PI))/Math.PI}function N(C){return!isNaN(C)&&C!==null&&!Array.isArray(C)}Object.defineProperty(c,"__esModule",{value:!0}),c.earthRadius=63710088e-1,c.factors={centimeters:100*c.earthRadius,centimetres:100*c.earthRadius,degrees:c.earthRadius/111325,feet:3.28084*c.earthRadius,inches:39.37*c.earthRadius,kilometers:c.earthRadius/1e3,kilometres:c.earthRadius/1e3,meters:c.earthRadius,metres:c.earthRadius,miles:c.earthRadius/1609.344,millimeters:1e3*c.earthRadius,millimetres:1e3*c.earthRadius,nauticalmiles:c.earthRadius/1852,radians:1,yards:1.0936*c.earthRadius},c.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/c.earthRadius,yards:1.0936133},c.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},c.feature=i,c.geometry=function(C,O,j){switch(C){case"Point":return u(O).geometry;case"LineString":return f(O).geometry;case"Polygon":return d(O).geometry;case"MultiPoint":return v(O).geometry;case"MultiLineString":return _(O).geometry;case"MultiPolygon":return M(O).geometry;default:throw new Error(C+" is invalid")}},c.point=u,c.points=function(C,O,j){return j===void 0&&(j={}),m(C.map(function(T){return u(T,O)}),j)},c.polygon=d,c.polygons=function(C,O,j){return j===void 0&&(j={}),m(C.map(function(T){return d(T,O)}),j)},c.lineString=f,c.lineStrings=function(C,O,j){return j===void 0&&(j={}),m(C.map(function(T){return f(T,O)}),j)},c.featureCollection=m,c.multiLineString=_,c.multiPoint=v,c.multiPolygon=M,c.geometryCollection=function(C,O,j){return j===void 0&&(j={}),i({type:"GeometryCollection",geometries:C},O,j)},c.round=function(C,O){if(O===void 0&&(O=0),O&&!(O>=0))throw new Error("precision must be a positive number");var j=Math.pow(10,O||0);return Math.round(C*j)/j},c.radiansToLength=A,c.lengthToRadians=P,c.lengthToDegrees=function(C,O){return S(P(C,O))},c.bearingToAzimuth=function(C){var O=C%360;return O<0&&(O+=360),O},c.radiansToDegrees=S,c.degreesToRadians=function(C){return C%360*Math.PI/180},c.convertLength=function(C,O,j){if(O===void 0&&(O="kilometers"),j===void 0&&(j="kilometers"),!(C>=0))throw new Error("length must be a positive number");return A(P(C,O),j)},c.convertArea=function(C,O,j){if(O===void 0&&(O="meters"),j===void 0&&(j="kilometers"),!(C>=0))throw new Error("area must be a positive number");var T=c.areaFactors[O];if(!T)throw new Error("invalid original units");var z=c.areaFactors[j];if(!z)throw new Error("invalid final units");return C/T*z},c.isNumber=N,c.isObject=function(C){return!!C&&C.constructor===Object},c.validateBBox=function(C){if(!C)throw new Error("bbox is required");if(!Array.isArray(C))throw new Error("bbox must be an Array");if(C.length!==4&&C.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");C.forEach(function(O){if(!N(O))throw new Error("bbox must only contain numbers")})},c.validateId=function(C){if(!C)throw new Error("id is required");if(["string","number"].indexOf(typeof C)===-1)throw new Error("id must be a number or a string")}},1540:(s,c,i)=>{Object.defineProperty(c,"__esModule",{value:!0});var u=i(4102);function d(P,S,N){if(P!==null)for(var C,O,j,T,z,W,ot,J,rt=0,ut=0,gt=P.type,at=gt==="FeatureCollection",bt=gt==="Feature",Lt=at?P.features.length:1,Et=0;Et<Lt;Et++){z=(J=!!(ot=at?P.features[Et].geometry:bt?P.geometry:P)&&ot.type==="GeometryCollection")?ot.geometries.length:1;for(var Ct=0;Ct<z;Ct++){var Ht=0,wt=0;if((T=J?ot.geometries[Ct]:ot)!==null){W=T.coordinates;var pe=T.type;switch(rt=!N||pe!=="Polygon"&&pe!=="MultiPolygon"?0:1,pe){case null:break;case"Point":if(S(W,ut,Et,Ht,wt)===!1)return!1;ut++,Ht++;break;case"LineString":case"MultiPoint":for(C=0;C<W.length;C++){if(S(W[C],ut,Et,Ht,wt)===!1)return!1;ut++,pe==="MultiPoint"&&Ht++}pe==="LineString"&&Ht++;break;case"Polygon":case"MultiLineString":for(C=0;C<W.length;C++){for(O=0;O<W[C].length-rt;O++){if(S(W[C][O],ut,Et,Ht,wt)===!1)return!1;ut++}pe==="MultiLineString"&&Ht++,pe==="Polygon"&&wt++}pe==="Polygon"&&Ht++;break;case"MultiPolygon":for(C=0;C<W.length;C++){for(wt=0,O=0;O<W[C].length;O++){for(j=0;j<W[C][O].length-rt;j++){if(S(W[C][O][j],ut,Et,Ht,wt)===!1)return!1;ut++}wt++}Ht++}break;case"GeometryCollection":for(C=0;C<T.geometries.length;C++)if(d(T.geometries[C],S,N)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function f(P,S){var N;switch(P.type){case"FeatureCollection":for(N=0;N<P.features.length&&S(P.features[N].properties,N)!==!1;N++);break;case"Feature":S(P.properties,0)}}function m(P,S){if(P.type==="Feature")S(P,0);else if(P.type==="FeatureCollection")for(var N=0;N<P.features.length&&S(P.features[N],N)!==!1;N++);}function _(P,S){var N,C,O,j,T,z,W,ot,J,rt,ut=0,gt=P.type==="FeatureCollection",at=P.type==="Feature",bt=gt?P.features.length:1;for(N=0;N<bt;N++){for(z=gt?P.features[N].geometry:at?P.geometry:P,ot=gt?P.features[N].properties:at?P.properties:{},J=gt?P.features[N].bbox:at?P.bbox:void 0,rt=gt?P.features[N].id:at?P.id:void 0,T=(W=!!z&&z.type==="GeometryCollection")?z.geometries.length:1,O=0;O<T;O++)if((j=W?z.geometries[O]:z)!==null)switch(j.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(S(j,ut,ot,J,rt)===!1)return!1;break;case"GeometryCollection":for(C=0;C<j.geometries.length;C++)if(S(j.geometries[C],ut,ot,J,rt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(S(null,ut,ot,J,rt)===!1)return!1;ut++}}function v(P,S){_(P,function(N,C,O,j,T){var z,W=N===null?null:N.type;switch(W){case null:case"Point":case"LineString":case"Polygon":return S(u.feature(N,O,{bbox:j,id:T}),C,0)!==!1&&void 0}switch(W){case"MultiPoint":z="Point";break;case"MultiLineString":z="LineString";break;case"MultiPolygon":z="Polygon"}for(var ot=0;ot<N.coordinates.length;ot++){var J={type:z,coordinates:N.coordinates[ot]};if(S(u.feature(J,O),C,ot)===!1)return!1}})}function M(P,S){v(P,function(N,C,O){var j=0;if(N.geometry){var T=N.geometry.type;if(T!=="Point"&&T!=="MultiPoint"){var z,W=0,ot=0,J=0;return d(N,function(rt,ut,gt,at,bt){if(z===void 0||C>W||at>ot||bt>J)return z=rt,W=C,ot=at,J=bt,void(j=0);var Lt=u.lineString([z,rt],N.properties);if(S(Lt,C,O,bt,j)===!1)return!1;j++,z=rt})!==!1&&void 0}}})}function A(P,S){if(!P)throw new Error("geojson is required");v(P,function(N,C,O){if(N.geometry!==null){var j=N.geometry.type,T=N.geometry.coordinates;switch(j){case"LineString":if(S(N,C,O,0,0)===!1)return!1;break;case"Polygon":for(var z=0;z<T.length;z++)if(S(u.lineString(T[z],N.properties),C,O,z)===!1)return!1}}})}c.coordAll=function(P){var S=[];return d(P,function(N){S.push(N)}),S},c.coordEach=d,c.coordReduce=function(P,S,N,C){var O=N;return d(P,function(j,T,z,W,ot){O=T===0&&N===void 0?j:S(O,j,T,z,W,ot)},C),O},c.featureEach=m,c.featureReduce=function(P,S,N){var C=N;return m(P,function(O,j){C=j===0&&N===void 0?O:S(C,O,j)}),C},c.findPoint=function(P,S){if(S=S||{},!u.isObject(S))throw new Error("options is invalid");var N,C=S.featureIndex||0,O=S.multiFeatureIndex||0,j=S.geometryIndex||0,T=S.coordIndex||0,z=S.properties;switch(P.type){case"FeatureCollection":C<0&&(C=P.features.length+C),z=z||P.features[C].properties,N=P.features[C].geometry;break;case"Feature":z=z||P.properties,N=P.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":N=P;break;default:throw new Error("geojson is invalid")}if(N===null)return null;var W=N.coordinates;switch(N.type){case"Point":return u.point(W,z,S);case"MultiPoint":return O<0&&(O=W.length+O),u.point(W[O],z,S);case"LineString":return T<0&&(T=W.length+T),u.point(W[T],z,S);case"Polygon":return j<0&&(j=W.length+j),T<0&&(T=W[j].length+T),u.point(W[j][T],z,S);case"MultiLineString":return O<0&&(O=W.length+O),T<0&&(T=W[O].length+T),u.point(W[O][T],z,S);case"MultiPolygon":return O<0&&(O=W.length+O),j<0&&(j=W[O].length+j),T<0&&(T=W[O][j].length-T),u.point(W[O][j][T],z,S)}throw new Error("geojson is invalid")},c.findSegment=function(P,S){if(S=S||{},!u.isObject(S))throw new Error("options is invalid");var N,C=S.featureIndex||0,O=S.multiFeatureIndex||0,j=S.geometryIndex||0,T=S.segmentIndex||0,z=S.properties;switch(P.type){case"FeatureCollection":C<0&&(C=P.features.length+C),z=z||P.features[C].properties,N=P.features[C].geometry;break;case"Feature":z=z||P.properties,N=P.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":N=P;break;default:throw new Error("geojson is invalid")}if(N===null)return null;var W=N.coordinates;switch(N.type){case"Point":case"MultiPoint":return null;case"LineString":return T<0&&(T=W.length+T-1),u.lineString([W[T],W[T+1]],z,S);case"Polygon":return j<0&&(j=W.length+j),T<0&&(T=W[j].length+T-1),u.lineString([W[j][T],W[j][T+1]],z,S);case"MultiLineString":return O<0&&(O=W.length+O),T<0&&(T=W[O].length+T-1),u.lineString([W[O][T],W[O][T+1]],z,S);case"MultiPolygon":return O<0&&(O=W.length+O),j<0&&(j=W[O].length+j),T<0&&(T=W[O][j].length-T-1),u.lineString([W[O][j][T],W[O][j][T+1]],z,S)}throw new Error("geojson is invalid")},c.flattenEach=v,c.flattenReduce=function(P,S,N){var C=N;return v(P,function(O,j,T){C=j===0&&T===0&&N===void 0?O:S(C,O,j,T)}),C},c.geomEach=_,c.geomReduce=function(P,S,N){var C=N;return _(P,function(O,j,T,z,W){C=j===0&&N===void 0?O:S(C,O,j,T,z,W)}),C},c.lineEach=A,c.lineReduce=function(P,S,N){var C=N;return A(P,function(O,j,T,z){C=j===0&&N===void 0?O:S(C,O,j,T,z)}),C},c.propEach=f,c.propReduce=function(P,S,N){var C=N;return f(P,function(O,j){C=j===0&&N===void 0?O:S(C,O,j)}),C},c.segmentEach=M,c.segmentReduce=function(P,S,N){var C=N,O=!1;return M(P,function(j,T,z,W,ot){C=O===!1&&N===void 0?j:S(C,j,T,z,W,ot),O=!0}),C}},5975:(s,c,i)=>{i(7107);var u=i(2492),d=i.n(u);const f=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker","placeText":"Click to place text"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers","drawTextButton":"Draw Text","scaleButton":"Scale Layers","autoTracingButton":"Auto trace Line"},"measurements":{"totalLength":"Length","segmentLength":"Segment length","area":"Area","radius":"Radius","perimeter":"Perimeter","height":"Height","width":"Width","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),m=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick","placeText":"Platziere den Text mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex lschen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer lschen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verknpfen","rotateButton":"Layer drehen","drawTextButton":"Text zeichnen","scaleButton":"Layer skalieren","autoTracingButton":"Linie automatisch nachzeichen"},"measurements":{"totalLength":"Lnge","segmentLength":"Segment Lnge","area":"Flche","radius":"Radius","perimeter":"Umfang","height":"Hhe","width":"Breite","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),_=JSON.parse(`{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}`),v=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}'),M=JSON.parse('{"tooltips":{"placeMarker":"Adaug un punct","firstVertex":"Apas aici pentru a aduga primul Vertex","continueLine":"Apas aici pentru a continua desenul","finishLine":"Apas pe orice obiect pentru a finisa desenul","finishPoly":"Apas pe primul obiect pentru a finisa","finishRect":"Apas pentru a finisa","startCircle":"Apas pentru a desena un cerc","finishCircle":"Apas pentru a finisa un cerc","placeCircleMarker":"Adaug un punct"},"actions":{"finish":"Termin","cancel":"Anuleaz","removeLastVertex":"terge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaug o bulin","drawPolyButton":"Deseneaz un poligon","drawLineButton":"Deseneaz o linie","drawCircleButton":"Deseneaz un cerc","drawRectButton":"Deseneaz un dreptunghi","editButton":"Editeaz straturile","dragButton":"Mut straturile","cutButton":"Taie straturile","deleteButton":"terge straturile","drawCircleMarkerButton":"Deseneaz marcatorul cercului","snappingButton":"Fixai marcatorul glisat pe alte straturi i vrfuri","pinningButton":"Fixai vrfurile partajate mpreun"}}'),A=JSON.parse('{"tooltips":{"placeMarker":",   ","firstVertex":",    ","continueLine":",   ","finishLine":"     ","finishPoly":"  ,  ","finishRect":",  ","startCircle":",    ","finishCircle":",   ","placeCircleMarker":",    "},"actions":{"finish":"","cancel":"","removeLastVertex":"  "},"buttonTitles":{"drawMarkerButton":" ","drawPolyButton":" ","drawLineButton":" ","drawCircleButton":" ","drawRectButton":" ","editButton":" ","dragButton":" ","cutButton":" ","deleteButton":" ","drawCircleMarkerButton":"  ","snappingButton":"       ","pinningButton":"   "}}'),P=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer vrtice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del crculo","finishCircle":"Presiona para finalizar el crculo","placeCircleMarker":"Presiona para colocar un marcador de crculo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Eliminar ltimo vrtice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Polgono","drawLineButton":"Dibujar Lnea","drawCircleButton":"Dibujar Crculo","drawRectButton":"Dibujar Rectngulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Eliminar Capas","drawCircleMarkerButton":"Dibujar Marcador de Crculo","snappingButton":"El marcador de Snap arrastrado a otras capas y vrtices","pinningButton":"Fijar juntos los vrtices compartidos"}}'),S=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te beindigen","finishPoly":"Klik op het eerst punt om te beindigen","finishRect":"Klik om te beindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te beindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}'),N=JSON.parse(`{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer  dessiner","finishLine":"Cliquez sur n'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"diter des calques","dragButton":"Dplacer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d'autres couches et sommets","pinningButton":"pingler ensemble les sommets partags","rotateButton":"Tourner des calques"}}`),C=JSON.parse('{"tooltips":{"placeMarker":"","firstVertex":"","continueLine":"","finishLine":"","finishPoly":"","finishRect":"","startCircle":"","finishCircle":"","placeCircleMarker":""},"actions":{"finish":"","cancel":"","removeLastVertex":""},"buttonTitles":{"drawMarkerButton":"","drawPolyButton":"","drawLineButton":"","drawCircleButton":"","drawRectButton":"","editButton":"","dragButton":"","cutButton":"","deleteButton":"","drawCircleMarkerButton":"","snappingButton":"","pinningButton":""}}'),O=JSON.parse('{"tooltips":{"placeMarker":"","firstVertex":"","continueLine":"","finishLine":"","finishPoly":"","finishRect":"","startCircle":"","finishCircle":"","placeCircleMarker":""},"actions":{"finish":"","cancel":"","removeLastVertex":""},"buttonTitles":{"drawMarkerButton":"","drawPolyButton":"","drawLineButton":"","drawCircleButton":"","drawRectButton":"","editButton":"","dragButton":"","cutButton":"","deleteButton":"","drawCircleMarkerButton":"","snappingButton":"","pinningButton":""}}'),j={en:f,de:m,it:_,id:v,ro:M,ru:A,es:P,nl:S,fr:N,pt_br:JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro vrtice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o polgono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do crculo","finishCircle":"Clique para fechar o crculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover ltimo vrtice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um polgono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um crculo","drawRectButton":"Desenhar um retngulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de crculos de desenho","snappingButton":"Marcador arrastado para outras camadas e vrtices","pinningButton":"Vrtices compartilhados de pinos juntos"}}'),zh:C,zh_tw:O,pl:JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawi znacznik","firstVertex":"Kliknij, aby ustawi pierwszy punkt","continueLine":"Kliknij, aby kontynuowa rysowanie","finishLine":"Kliknij dowolny punkt, aby zakoczy","finishPoly":"Kliknij pierwszy punkt, aby zakoczy","finishRect":"Kliknij, aby zakoczy","startCircle":"Kliknij, aby ustawi rodek koa","finishCircle":"Kliknij, aby zakoczy rysowanie koa","placeCircleMarker":"Kliknij, aby ustawi okrgy znacznik"},"actions":{"finish":"Zakocz","cancel":"Anuluj","removeLastVertex":"Usu ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielokt","drawLineButton":"Narysuj ciek","drawCircleButton":"Narysuj koo","drawRectButton":"Narysuj prostokt","editButton":"Edytuj","dragButton":"Przesu","cutButton":"Wytnij","deleteButton":"Usu","drawCircleMarkerButton":"Narysuj okrgy znacznik","snappingButton":"Snap przecignity marker na inne warstwy i wierzchoki","pinningButton":"Sworze wsplne wierzchoki razem"}}'),sv:JSON.parse('{"tooltips":{"placeMarker":"Klicka fr att placera markr","firstVertex":"Klicka fr att placera frsta hrnet","continueLine":"Klicka fr att fortstta rita","finishLine":"Klicka p en existerande punkt fr att slutfra","finishPoly":"Klicka p den frsta punkten fr att slutfra","finishRect":"Klicka fr att slutfra","startCircle":"Klicka fr att placera cirkelns centrum","finishCircle":"Klicka fr att slutfra cirkeln","placeCircleMarker":"Klicka fr att placera cirkelmarkr"},"actions":{"finish":"Slutfr","cancel":"Avbryt","removeLastVertex":"Ta bort sista hrnet"},"buttonTitles":{"drawMarkerButton":"Rita Markr","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmarkr","snappingButton":"Snpp dra markren till andra lager och hrn","pinningButton":"Fst delade hrn tillsammans"}}'),el:JSON.parse('{"tooltips":{"placeMarker":"     ","firstVertex":"       ","continueLine":"      ","finishLine":"        ","finishPoly":"       ","finishRect":"    ","startCircle":"      ","finishCircle":"      ","placeCircleMarker":"      "},"actions":{"finish":"","cancel":"","removeLastVertex":"  "},"buttonTitles":{"drawMarkerButton":" ","drawPolyButton":" ","drawLineButton":" ","drawCircleButton":" ","drawRectButton":" ","editButton":" ","dragButton":" ","cutButton":" ","deleteButton":" ","drawCircleMarkerButton":"  ","snappingButton":"        ","pinningButton":"   "}}'),hu:JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jell elhelyezshez","firstVertex":"Kattintson az els pont elhelyezshez","continueLine":"Kattintson a kvetkez pont elhelyezshez","finishLine":"A befejezshez kattintson egy meglv pontra","finishPoly":"A befejezshez kattintson az els pontra","finishRect":"Kattintson a befejezshez","startCircle":"Kattintson a kr kzppontjnak elhelyezshez","finishCircle":"Kattintson a kr befejezshez","placeCircleMarker":"Kattintson a krjell elhelyezshez"},"actions":{"finish":"Befejezs","cancel":"Mgse","removeLastVertex":"Utols pont eltvoltsa"},"buttonTitles":{"drawMarkerButton":"Jell rajzolsa","drawPolyButton":"Poligon rajzolsa","drawLineButton":"Vonal rajzolsa","drawCircleButton":"Kr rajzolsa","drawRectButton":"Ngyzet rajzolsa","editButton":"Elemek szerkesztse","dragButton":"Elemek mozgatsa","cutButton":"Elemek vgsa","deleteButton":"Elemek trlse","drawCircleMarkerButton":"Kr jell rajzolsa","snappingButton":"Kapcsolja a jelltt msik elemhez vagy ponthoz","pinningButton":"Kzs pontok sszektse"}}'),da:JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en markr","firstVertex":"Tryk for at placere det frste punkt","continueLine":"Tryk for at fortstte linjen","finishLine":"Tryk p et eksisterende punkt for at afslutte","finishPoly":"Tryk p det frste punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmarkr"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer markr","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Trk","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmarkr","snappingButton":"Fastgr trukket markr til andre elementer","pinningButton":"Sammenlg delte elementer"}}'),no:JSON.parse('{"tooltips":{"placeMarker":"Klikk for  plassere punkt","firstVertex":"Klikk for  plassere frste punkt","continueLine":"Klikk for  tegne videre","finishLine":"Klikk p et eksisterende punkt for  fullfre","finishPoly":"Klikk frste punkt for  fullfre","finishRect":"Klikk for  fullfre","startCircle":"Klikk for  sette sirkel midtpunkt","finishCircle":"Klikk for  fullfre sirkel","placeCircleMarker":"Klikk for  plassere sirkel"},"actions":{"finish":"Fullfr","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}'),fa:JSON.parse('{"tooltips":{"placeMarker":"   ","firstVertex":"    ","continueLine":"   ","finishLine":"      ","finishPoly":"     ","finishRect":"  ","startCircle":"    ","finishCircle":"    ","placeCircleMarker":"    ","placeText":"   "},"actions":{"finish":"","cancel":"","removeLastVertex":"  "},"buttonTitles":{"drawMarkerButton":" ","drawPolyButton":" ","drawLineButton":" ","drawCircleButton":" ","drawRectButton":" ","editButton":" ","dragButton":" ","cutButton":" ","deleteButton":" ","drawCircleMarkerButton":"  ","snappingButton":"       ","pinningButton":"      ","rotateButton":" ","drawTextButton":" "}}'),ua:JSON.parse(`{"tooltips":{"placeMarker":",   ","firstVertex":",    ","continueLine":",   ","finishLine":" -    ","finishPoly":"  ,  ","finishRect":",  ","startCircle":",    ","finishCircle":",   ","placeCircleMarker":",    "},"actions":{"finish":"","cancel":"","removeLastVertex":"  "},"buttonTitles":{"drawMarkerButton":" ","drawPolyButton":" ","drawLineButton":" ","drawCircleButton":" ","drawRectButton":" ","editButton":" ","dragButton":" ","cutButton":" ","deleteButton":" ","drawCircleMarkerButton":"  ","snappingButton":"       ","pinningButton":"'   "}}`),tr:JSON.parse('{"tooltips":{"placeMarker":"areti yerletirmek iin tklayn","firstVertex":"lk tepe noktasn yerletirmek iin tklayn","continueLine":"izime devam etmek iin tklayn","finishLine":"Bitirmek iin mevcut herhangi bir iaretiyi tklayn","finishPoly":"Bitirmek iin ilk iaretiyi tklayn","finishRect":"Bitirmek iin tklayn","startCircle":"Daire merkezine yerletirmek iin tklayn","finishCircle":"Daireyi bitirmek iin tklayn","placeCircleMarker":"Daire iaretisi yerletirmek iin tklayn"},"actions":{"finish":"Bitir","cancel":"ptal","removeLastVertex":"Son keyi kaldr"},"buttonTitles":{"drawMarkerButton":"izim aretisi","drawPolyButton":"okgenler iz","drawLineButton":"oklu izgi iz","drawCircleButton":"ember iz","drawRectButton":"Dikdrtgen iz","editButton":"Katmanlar dzenle","dragButton":"Katmanlar srkle","cutButton":"Katmanlar kes","deleteButton":"Katmanlar kaldr","drawCircleMarkerButton":"Daire iaretisi iz","snappingButton":"Srklenen iaretiyi dier katmanlara ve kelere yaptr","pinningButton":"Paylalan keleri birbirine sabitle"}}'),cz:JSON.parse('{"tooltips":{"placeMarker":"Kliknutm vytvote znaku","firstVertex":"Kliknutm vytvote prvn objekt","continueLine":"Kliknutm pokraujte v kreslen","finishLine":"Kliknut na libovolnou existujc znaku pro dokonen","finishPoly":"Vyberte prvn bod pro dokonen","finishRect":"Kliknte pro dokonen","startCircle":"Kliknutm pidejte sted kruhu","finishCircle":",   ","placeCircleMarker":"Kliknutm nastavte polomr"},"actions":{"finish":"Dokonit","cancel":"Zruit","removeLastVertex":"Zruit posledn akci"},"buttonTitles":{"drawMarkerButton":"Pidat znaku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit kivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obdlnk","editButton":"Upravit vrstvu","dragButton":"Peneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"Pidat kruhovou znaku","snappingButton":"Navzat tanou znaku k dalm vrstvm a vrcholm","pinningButton":"Spojit spolen body dohromady"}}'),ja:JSON.parse('{"tooltips":{"placeMarker":"","firstVertex":"","continueLine":"","finishLine":"","finishPoly":"","finishRect":"","startCircle":"","finishCircle":"","placeCircleMarker":"","placeText":""},"actions":{"finish":"","cancel":"","removeLastVertex":""},"buttonTitles":{"drawMarkerButton":"","drawPolyButton":"","drawLineButton":"","drawCircleButton":"","drawRectButton":"","editButton":"","dragButton":"","cutButton":"","deleteButton":"","drawCircleMarkerButton":"","snappingButton":"","pinningButton":"","rotateButton":"","drawTextButton":""}}'),fi:JSON.parse('{"tooltips":{"placeMarker":"Klikkaa asettaaksesi merkin","firstVertex":"Klikkaa asettaakseni ensimmisen osuuden","continueLine":"Klikkaa jatkaaksesi piirtmist","finishLine":"Klikkaa olemassa olevaa merkki lopettaaksesi","finishPoly":"Klikkaa ensimmist merkki lopettaaksesi","finishRect":"Klikkaa lopettaaksesi","startCircle":"Klikkaa asettaaksesi ympyrn keskipisteen","finishCircle":"Klikkaa lopettaaksesi ympyrn","placeCircleMarker":"Klikkaa asettaaksesi ympyrmerkin","placeText":"Klikkaa asettaaksesi tekstin"},"actions":{"finish":"Valmis","cancel":"Peruuta","removeLastVertex":"Poista viimeinen osuus"},"buttonTitles":{"drawMarkerButton":"Piirr merkkej","drawPolyButton":"Piirr monikulmioita","drawLineButton":"Piirr viivoja","drawCircleButton":"Piirr ympyr","drawRectButton":"Piirr neliskulmioita","editButton":"Muokkaa","dragButton":"Siirr","cutButton":"Leikkaa","deleteButton":"Poista","drawCircleMarkerButton":"Piirr ympyrmerkki","snappingButton":"Kiinnit siirrettv merkki toisiin muotoihin","pinningButton":"Kiinnit jaetut muodot yhteen","rotateButton":"Knn","drawTextButton":"Piirr teksti"}}'),ko:JSON.parse('{"tooltips":{"placeMarker":"  ","firstVertex":"   ","continueLine":"  ","finishLine":"   ","finishPoly":"   ","finishRect":" ","startCircle":"    ","finishCircle":"  ","placeCircleMarker":"   ","placeText":"  "},"actions":{"finish":"","cancel":"","removeLastVertex":"  "},"buttonTitles":{"drawMarkerButton":" ","drawPolyButton":" ","drawLineButton":" ","drawCircleButton":" ","drawRectButton":" ","editButton":" ","dragButton":" ","cutButton":" ","deleteButton":" ","drawCircleMarkerButton":"  ","snappingButton":"       ","pinningButton":"   ","rotateButton":" ","drawTextButton":" "}}')};function T(r,l){var p=Object.keys(r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(r);l&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(r,x).enumerable})),p.push.apply(p,y)}return p}function z(r){for(var l=1;l<arguments.length;l++){var p=arguments[l]!=null?arguments[l]:{};l%2?T(Object(p),!0).forEach(function(y){W(r,y,p[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(p)):T(Object(p)).forEach(function(y){Object.defineProperty(r,y,Object.getOwnPropertyDescriptor(p,y))})}return r}function W(r,l,p){return l in r?Object.defineProperty(r,l,{value:p,enumerable:!0,configurable:!0,writable:!0}):r[l]=p,r}const ot={_globalEditModeEnabled:!1,enableGlobalEditMode:function(r){var l=z({},r);this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(function(p){p.pm.enable(l)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers={},this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(function(r){r.pm.disable()}),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(r)},handleLayerAdditionInGlobalEditMode:function(){var r=this._addedLayers;for(var l in this._addedLayers={},r){var p=r[l];this._isRelevantForEdit(p)&&this.globalEditModeEnabled()&&p.pm.enable(z({},this.globalOptions))}},_layerAdded:function(r){var l=r.layer;this._addedLayers[L.stamp(l)]=l},_isRelevantForEdit:function(r){return r.pm&&!(r instanceof L.LayerGroup)&&(!L.PM.optIn&&!r.options.pmIgnore||L.PM.optIn&&r.options.pmIgnore===!1)&&!r._pmTempLayer&&r.pm.options.allowEditing}},J={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var r=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},r.forEach(function(l){l.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var r=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,r.forEach(function(l){l.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(){var r=this._addedLayersDrag;for(var l in this._addedLayersDrag={},r){var p=r[l];this._isRelevantForDrag(p)&&this.globalDragModeEnabled()&&p.pm.enableLayerDrag()}},_layerAddedDrag:function(r){var l=r.layer;this._addedLayersDrag[L.stamp(l)]=l},_isRelevantForDrag:function(r){return r.pm&&!(r instanceof L.LayerGroup)&&(!L.PM.optIn&&!r.options.pmIgnore||L.PM.optIn&&r.options.pmIgnore===!1)&&!r._pmTempLayer&&r.pm.options.draggable}},rt={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var r=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer(function(l){r._isRelevantForRemoval(l)&&(l.pm.disable(),l.on("click",r.removeLayer,r))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var r=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer(function(l){l.off("click",r.removeLayer,r)}),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(r){var l=r.layer;this._isRelevantForRemoval(l)&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},removeLayer:function(r){var l=r.target;this._isRelevantForRemoval(l)&&!l.pm.dragging()&&(l.removeFrom(this.map.pm._getContainingLayer()),l.remove(),l instanceof L.LayerGroup?(this._fireRemoveLayerGroup(l),this._fireRemoveLayerGroup(this.map,l)):(l.pm._fireRemove(l),l.pm._fireRemove(this.map,l)))},_isRelevantForRemoval:function(r){return r.pm&&!(r instanceof L.LayerGroup)&&(!L.PM.optIn&&!r.options.pmIgnore||L.PM.optIn&&r.options.pmIgnore===!1)&&!r._pmTempLayer&&r.pm.options.allowRemoval}},ut={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var r=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(function(l){return l instanceof L.Polyline}).forEach(function(l){r._isRelevantForRotate(l)&&l.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this._reinitGlobalRotateMode,100,this)),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(function(r){return r instanceof L.Polyline}).forEach(function(r){r.pm.disableRotate()}),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_reinitGlobalRotateMode:function(r){var l=r.layer;this._isRelevantForRotate(l)&&this.globalRotateModeEnabled()&&(this.disableGlobalRotateMode(),this.enableGlobalRotateMode())},_isRelevantForRotate:function(r){return r.pm&&!(r instanceof L.LayerGroup)&&(!L.PM.optIn&&!r.options.pmIgnore||L.PM.optIn&&r.options.pmIgnore===!1)&&!r._pmTempLayer&&r.pm.options.allowRotation}};function gt(r,l){var p=Object.keys(r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(r);l&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(r,x).enumerable})),p.push.apply(p,y)}return p}function at(r){for(var l=1;l<arguments.length;l++){var p=arguments[l]!=null?arguments[l]:{};l%2?gt(Object(p),!0).forEach(function(y){bt(r,y,p[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(p)):gt(Object(p)).forEach(function(y){Object.defineProperty(r,y,Object.getOwnPropertyDescriptor(p,y))})}return r}function bt(r,l,p){return l in r?Object.defineProperty(r,l,{value:p,enumerable:!0,configurable:!0,writable:!0}):r[l]=p,r}var Lt={_fireDrawStart:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},r,l)},_fireDrawEnd:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawend",{shape:this._shape},r,l)},_fireCreate:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Draw",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._map,"pm:create",{shape:this._shape,marker:r,layer:r},l,p)},_fireCenterPlaced:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=r==="Draw"?this._layer:void 0,y=r!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:p,layer:y,latlng:this._layer.getLatLng()},r,l)},_fireCut:function(r,l,p){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Draw",x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(r,"pm:cut",{shape:this._shape,layer:l,originalLayer:p},y,x)},_fireEdit:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(r,"pm:edit",{layer:this._layer,shape:this.getShape()},l,p)},_fireEnable:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},r,l)},_fireDisable:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},r,l)},_fireUpdate:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},r,l)},_fireMarkerDragStart:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:r,shape:this.getShape(),indexPath:l},p,y)},_fireMarkerDrag:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:r,shape:this.getShape(),indexPath:l},p,y)},_fireMarkerDragEnd:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:r,shape:this.getShape(),indexPath:l,intersectionReset:p},y,x)},_fireDragStart:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},r,l)},_fireDrag:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:drag",at(at({},r),{},{shape:this.getShape()}),l,p)},_fireDragEnd:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},r,l)},_fireDragEnable:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},r,l)},_fireDragDisable:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},r,l)},_fireRemove:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(r,"pm:remove",{layer:l,shape:this.getShape()},p,y)},_fireVertexAdded:function(r,l,p){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:r,indexPath:l,latlng:p,shape:this.getShape()},y,x)},_fireVertexRemoved:function(r,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:r,indexPath:l,shape:this.getShape()},p,y)},_fireVertexClick:function(r,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:r,indexPath:l,shape:this.getShape()},p,y)},_fireIntersect:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:intersect",{layer:this._layer,intersection:r,shape:this.getShape()},l,p)},_fireLayerReset:function(r,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:r,indexPath:l,shape:this.getShape()},p,y)},_fireChange:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:r,shape:this.getShape()},l,p)},_fireTextChange:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:r,shape:this.getShape()},l,p)},_fireTextFocus:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},r,l)},_fireTextBlur:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},r,l)},_fireSnapDrag:function(r,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(r,"pm:snapdrag",l,p,y)},_fireSnap:function(r,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(r,"pm:snap",l,p,y)},_fireUnsnap:function(r,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(r,"pm:unsnap",l,p,y)},_fireRotationEnable:function(r,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(r,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},p,y)},_fireRotationDisable:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Rotation",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(r,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},l,p)},_fireRotationStart:function(r,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(r,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:l},p,y)},_fireRotation:function(r,l,p){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:this._rotationLayer,x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Rotation",B=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(r,"pm:rotate",{layer:y,helpLayer:this._layer,startAngle:this._startAngle,angle:y.pm.getAngle(),angleDiff:l,oldLatLngs:p,newLatLngs:y.getLatLngs()},x,B)},_fireRotationEnd:function(r,l,p){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Rotation",x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(r,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:l,angle:this._rotationLayer.pm.getAngle(),originLatLngs:p,newLatLngs:this._rotationLayer.getLatLngs()},y,x)},_fireActionClick:function(r,l,p){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Toolbar",x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._map,"pm:actionclick",{text:r.text,action:r,btnName:l,button:p},y,x)},_fireButtonClick:function(r,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Toolbar",y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._map,"pm:buttonclick",{btnName:r,button:l},p,y)},_fireLangChange:function(r,l,p,y){var x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Global",B=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(this.map,"pm:langchange",{oldLang:r,activeLang:l,fallback:p,translations:y},x,B)},_fireGlobalDragModeToggled:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:r,map:this.map},l,p)},_fireGlobalEditModeToggled:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:r,map:this.map},l,p)},_fireGlobalRemovalModeToggled:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:r,map:this.map},l,p)},_fireGlobalCutModeToggled:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},r,l)},_fireGlobalDrawModeToggled:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},r,l)},_fireGlobalRotateModeToggled:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},r,l)},_fireRemoveLayerGroup:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(r,"pm:remove",{layer:l,shape:void 0},p,y)},_fireKeyeventEvent:function(r,l,p){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Global",x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this.map,"pm:keyevent",{event:r,eventType:l,focusOn:p},y,x)},__fire:function(r,l,p,y){var x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};p=d()(p,x,{source:y}),L.PM.Utils._fireEvent(r,l,p)}};const Et=Lt,Ct={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(r){this.map=r,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this)},_onKeyListener:function(r){var l="document";this.map.getContainer().contains(r.target)&&(l="map");var p={event:r,eventType:r.type,focusOn:l};this._lastEvents[r.type]=p,this._lastEvents.current=p,this.map.pm._fireKeyeventEvent(r,r.type,l)},_onBlur:function(r){r.altKey=!1;var l={event:r,eventType:r.type,focusOn:"document"};this._lastEvents[r.type]=l,this._lastEvents.current=l},getLastKeyEvent:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current";return this._lastEvents[r]},isShiftKeyPressed:function(){var r;return(r=this._lastEvents.current)===null||r===void 0?void 0:r.event.shiftKey},isAltKeyPressed:function(){var r;return(r=this._lastEvents.current)===null||r===void 0?void 0:r.event.altKey},isCtrlKeyPressed:function(){var r;return(r=this._lastEvents.current)===null||r===void 0?void 0:r.event.ctrlKey},isMetaKeyPressed:function(){var r;return(r=this._lastEvents.current)===null||r===void 0?void 0:r.event.metaKey},getPressedKey:function(){var r;return(r=this._lastEvents.current)===null||r===void 0?void 0:r.event.key}};var Ht=i(7361),wt=i.n(Ht),pe=i(8721),zt=i.n(pe);function Bt(r){var l=L.PM.activeLang;return zt()(j,l)||(l="en"),wt()(j[l],r)}function $t(r){for(var l=0;l<r.length;l+=1){var p=r[l];if(Array.isArray(p)){if($t(p))return!0}else if(p!=null&&p!=="")return!0}return!1}function Me(r){return r.reduce(function(l,p){if(p.length!==0){var y=Array.isArray(p)?Me(p):p;Array.isArray(y)?y.length!==0&&l.push(y):l.push(y)}return l},[])}function fe(r,l,p){for(var y,x,B,F=6378137,U=63567523142e-4,$=.0033528106647474805,Z=r.lng,Q=r.lat,mt=p,ct=Math.PI,Mt=l*ct/180,Rt=Math.sin(Mt),qt=Math.cos(Mt),se=(1-$)*Math.tan(Q*ct/180),xe=1/Math.sqrt(1+se*se),Ut=se*xe,ke=Math.atan2(se,qt),Pe=xe*Rt,He=1-Pe*Pe,Mn=He*(F*F-U*U)/(U*U),To=1+Mn/16384*(4096+Mn*(Mn*(320-175*Mn)-768)),Br=Mn/1024*(256+Mn*(Mn*(74-47*Mn)-128)),Kn=mt/(U*To),Vi=2*Math.PI;Math.abs(Kn-Vi)>1e-12;)y=Math.cos(2*ke+Kn),Vi=Kn,Kn=mt/(U*To)+Br*(x=Math.sin(Kn))*(y+Br/4*((B=Math.cos(Kn))*(2*y*y-1)-Br/6*y*(4*x*x-3)*(4*y*y-3)));var Oo=Ut*x-xe*B*qt,Zs=Math.atan2(Ut*B+xe*x*qt,(1-$)*Math.sqrt(Pe*Pe+Oo*Oo)),Ir=$/16*He*(4+$*(4-3*He)),qs=Z+180*(Math.atan2(x*Rt,xe*B-Ut*x*qt)-(1-Ir)*$*Pe*(Kn+Ir*x*(y+Ir*B*(2*y*y-1))))/ct,gn=180*Zs/ct;return L.latLng(qs,gn)}function le(r,l,p,y){for(var x,B,F=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],U=[],$=0;$<p;$+=1){if(F)x=fe(r,360*$/p+y,l),B=L.latLng(x.lng,x.lat);else{var Z=r.lat+Math.cos(2*$*Math.PI/p)*l,Q=r.lng+Math.sin(2*$*Math.PI/p)*l;B=L.latLng(Z,Q)}U.push(B)}return U}function Ft(r,l,p,y){var x=function(B,F,U){var $=B.latLngToContainerPoint(F),Z=B.latLngToContainerPoint(U),Q=180*Math.atan2(Z.y-$.y,Z.x-$.x)/Math.PI+90;return Q+(Q<0?360:0)}(r,l,p);return function(B,F,U){F=(F+360)%360;var $=Math.PI/180,Z=180/Math.PI,Q=6378137,mt=B.lng*$,ct=B.lat*$,Mt=F*$,Rt=Math.sin(ct),qt=Math.cos(ct),se=Math.cos(U/Q),xe=Math.sin(U/Q),Ut=Math.asin(Rt*se+qt*xe*Math.cos(Mt)),ke=mt+Math.atan2(Math.sin(Mt)*xe*qt,se-Rt*Math.sin(Ut));return ke=(ke*=Z)>180?ke-360:ke<-180?ke+360:ke,L.latLng([Ut*Z,ke])}(l,x,y)}function dt(r,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"asc";if(!l||Object.keys(l).length===0)return function($,Z){return $-Z};for(var y,x=Object.keys(l),B=x.length-1,F={};B>=0;)y=x[B],F[y.toLowerCase()]=l[y],B-=1;function U($){return $ instanceof L.Marker?"Marker":$ instanceof L.Circle?"Circle":$ instanceof L.CircleMarker?"CircleMarker":$ instanceof L.Rectangle?"Rectangle":$ instanceof L.Polygon?"Polygon":$ instanceof L.Polyline?"Line":void 0}return function($,Z){var Q,mt;if(r==="instanceofShape"){if(Q=U($.layer).toLowerCase(),mt=U(Z.layer).toLowerCase(),!Q||!mt)return 0}else{if(!$.hasOwnProperty(r)||!Z.hasOwnProperty(r))return 0;Q=$[r].toLowerCase(),mt=Z[r].toLowerCase()}var ct=Q in F?F[Q]:Number.MAX_SAFE_INTEGER,Mt=mt in F?F[mt]:Number.MAX_SAFE_INTEGER,Rt=0;return ct<Mt?Rt=-1:ct>Mt&&(Rt=1),p==="desc"?-1*Rt:Rt}}function Pt(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r.getLatLngs();return r instanceof L.Polygon?L.polygon(l).getLatLngs():L.polyline(l).getLatLngs()}function St(r,l){var p,y;if((p=l.options.crs)!==null&&p!==void 0&&(y=p.projection)!==null&&y!==void 0&&y.MAX_LATITUDE){var x,B,F=(x=l.options.crs)===null||x===void 0||(B=x.projection)===null||B===void 0?void 0:B.MAX_LATITUDE;r.lat=Math.max(Math.min(F,r.lat),-F)}return r}function jt(r){return r.options.renderer||r._map&&(r._map._getPaneRenderer(r.options.pane)||r._map.options.renderer||r._map._renderer)||r._renderer}const ue=L.Class.extend({includes:[ot,J,rt,ut,Et],initialize:function(r){this.map=r,this.Draw=new L.PM.Draw(r),this.Toolbar=new L.PM.Toolbar(r),this.Keyboard=Ct,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(r)},setLang:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en",l=arguments.length>1?arguments[1]:void 0,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"en",y=L.PM.activeLang;l&&(j[r]=d()(j[p],l)),L.PM.activeLang=r,this.map.pm.Toolbar.reinit(),this._fireLangChange(y,r,p,j[r])},addControls:function(r){this.Toolbar.addControls(r)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon",l=arguments.length>1?arguments[1]:void 0;r==="Poly"&&(r="Polygon"),this.Draw.enable(r,l)},disableDraw:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon";r==="Poly"&&(r="Polygon"),this.Draw.disable(r)},setPathOptions:function(r){var l=this,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=p.ignoreShapes||[],x=p.merge||!1;this.map.pm.Draw.shapes.forEach(function(B){y.indexOf(B)===-1&&l.map.pm.Draw[B].setPathOptions(r,x)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(r){var l=this,p=d()(this.globalOptions,r),y=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.editable!=!!p.editable&&(this.map.pm.Draw.CircleMarker.disable(),y=!0),this.map.pm.Draw.shapes.forEach(function(x){l.map.pm.Draw[x].setOptions(p)}),y&&this.map.pm.Draw.CircleMarker.enable(),L.PM.Utils.findLayers(this.map).forEach(function(x){x.pm.setOptions(p)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=p,this.applyGlobalOptions()},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach(function(r){r.pm.enabled()&&r.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(r){return this.Draw.Cut.enable(r)},toggleGlobalCutMode:function(r){return this.Draw.Cut.toggle(r)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],l=L.PM.Utils.findLayers(this.map);if(!r)return l;var p=L.featureGroup();return p._pmTempLayer=!0,l.forEach(function(y){p.addLayer(y)}),p},getGeomanDrawLayers:function(){var r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],l=L.PM.Utils.findLayers(this.map).filter(function(y){return y._drawnByGeoman===!0});if(!r)return l;var p=L.featureGroup();return p._pmTempLayer=!0,l.forEach(function(y){p.addLayer(y)}),p},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple:function(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents:function(r){this._touchEventCounter===0&&(L.DomEvent.on(r,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(r,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents:function(r){this._touchEventCounter===1&&(L.DomEvent.off(r,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(r,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove:function(r){jt(this.map)._onMouseMove(this._createMouseEvent("mousemove",r))},_canvasTouchClick:function(r){var l="";r.type==="touchstart"||r.type==="pointerdown"?l="mousedown":r.type==="touchend"||r.type==="pointerup"?l="mouseup":r.type!=="touchcancel"&&r.type!=="pointercancel"||(l="mouseup"),l&&jt(this.map)._onClick(this._createMouseEvent(l,r))},_createMouseEvent:function(r,l){var p,y=l.touches[0]||l.changedTouches[0];try{p=new MouseEvent(r,{bubbles:l.bubbles,cancelable:l.cancelable,view:l.view,detail:y.detail,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY,ctrlKey:l.ctrlKey,altKey:l.altKey,shiftKey:l.shiftKey,metaKey:l.metaKey,button:l.button,relatedTarget:l.relatedTarget})}catch{(p=document.createEvent("MouseEvents")).initMouseEvent(r,l.bubbles,l.cancelable,l.view,y.detail,y.screenX,y.screenY,y.clientX,y.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget)}return p}}),G=L.Control.extend({includes:[Et],options:{position:"topleft",disableByOtherButtons:!0},initialize:function(r){this._button=L.Util.extend({},this.options,r)},onAdd:function(r){return this._map=r,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(r){return this._button.toggleStatus=typeof r=="boolean"?r:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},disable:function(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable:function(){this._button.disabled=!1,this._updateDisabled()},_triggerClick:function(r){r&&r.preventDefault(),this._button.disabled||(this._button.onClick(r,{button:this,event:r}),this._clicked(r),this._button.afterClick(r,{button:this,event:r}))},_makeButton:function(r){var l=this,p=this.options.position.indexOf("right")>-1?"pos-right":"",y=L.DomUtil.create("div","button-container  ".concat(p),this._container);r.title&&y.setAttribute("title",r.title);var x=L.DomUtil.create("a","leaflet-buttons-control-button",y);x.setAttribute("role","button"),x.setAttribute("tabindex","0"),x.href="#";var B=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(p),y),F=r.actions,U={cancel:{text:Bt("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:Bt("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:Bt("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[r.jsClass]._removeLastVertex()}},finish:{text:Bt("actions.finish"),onClick:function(Z){this._map.pm.Draw[r.jsClass]._finishShape(Z)}}};F.forEach(function(Z){var Q,mt=typeof Z=="string"?Z:Z.name;if(U[mt])Q=U[mt];else{if(!Z.text)return;Q=Z}var ct=L.DomUtil.create("a","leaflet-pm-action ".concat(p," action-").concat(mt),B);ct.setAttribute("role","button"),ct.setAttribute("tabindex","0"),ct.href="#",ct.innerHTML=Q.text,L.DomEvent.disableClickPropagation(ct),L.DomEvent.on(ct,"click",L.DomEvent.stop),!r.disabled&&Q.onClick&&(L.DomEvent.addListener(ct,"click",function(Mt){Mt.preventDefault();var Rt="",qt=l._map.pm.Toolbar.buttons;for(var se in qt)if(qt[se]._button===r){Rt=se;break}l._fireActionClick(Q,Rt,r)},l),L.DomEvent.addListener(ct,"click",Q.onClick,l))}),r.toggleStatus&&L.DomUtil.addClass(y,"active");var $=L.DomUtil.create("div","control-icon",x);return r.iconUrl&&$.setAttribute("src",r.iconUrl),r.className&&L.DomUtil.addClass($,r.className),L.DomEvent.disableClickPropagation(x),L.DomEvent.on(x,"click",L.DomEvent.stop),r.disabled||(L.DomEvent.addListener(x,"click",this._onBtnClick,this),L.DomEvent.addListener(x,"click",this._triggerClick,this)),r.disabled&&(L.DomUtil.addClass(x,"pm-disabled"),x.setAttribute("aria-disabled","true")),y},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&this._button.cssToggle!==!1?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_onBtnClick:function(){this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);var r="",l=this._map.pm.Toolbar.buttons;for(var p in l)if(l[p]._button===this._button){r=p;break}this._fireButtonClick(r,this._button)},_clicked:function(){this._button.doToggle&&this.toggle()},_updateDisabled:function(){if(this._container){var r="pm-disabled",l=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(l,r),l.setAttribute("aria-disabled","true"),L.DomEvent.off(l,"click",this._triggerClick,this),L.DomEvent.off(l,"click",this._onBtnClick,this)):(L.DomUtil.removeClass(l,r),l.setAttribute("aria-disabled","false"),L.DomEvent.on(l,"click",this._triggerClick,this),L.DomEvent.on(l,"click",this._onBtnClick,this))}}});function K(r,l){var p=Object.keys(r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(r);l&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(r,x).enumerable})),p.push.apply(p,y)}return p}function Y(r){for(var l=1;l<arguments.length;l++){var p=arguments[l]!=null?arguments[l]:{};l%2?K(Object(p),!0).forEach(function(y){ht(r,y,p[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(p)):K(Object(p)).forEach(function(y){Object.defineProperty(r,y,Object.getOwnPropertyDescriptor(p,y))})}return r}function ht(r,l,p){return l in r?Object.defineProperty(r,l,{value:p,enumerable:!0,configurable:!0,writable:!0}):r[l]=p,r}function _t(r){return _t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},_t(r)}L.Control.PMButton=G;const xt=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(r){this.init(r)},reinit:function(){var r=this.isVisible;this.removeControls(),this._defineButtons(),r&&this.addControls()},init:function(r){this.map=r,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(r){var l="".concat(r,"Container");return this[l]||(this[l]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(r," leaflet-bar leaflet-control"))),this[l]},getButtons:function(){return this.buttons},addControls:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;typeof r.editPolygon<"u"&&(r.editMode=r.editPolygon),typeof r.deleteLayer<"u"&&(r.removalMode=r.deleteLayer),L.Util.setOptions(this,r),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle:function(){var r=this.getButtons(),l={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(var p in r){var y=r[p];L.Util.setOptions(y,{className:l.geomanIcons[p]})}},removeControls:function(){var r=this.getButtons();for(var l in r)r[l].remove();this.isVisible=!1},toggleControls:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(r)},_addButton:function(r,l){return this.buttons[r]=l,this.options[r]=this.options[r]||!1,this.buttons[r]},triggerClickOnToggledButtons:function(r){for(var l in this.buttons){var p=this.buttons[l];p._button.disableByOtherButtons&&p!==r&&p.toggled()&&p._triggerClick()}},toggleButton:function(r,l){var p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return r==="editPolygon"&&(r="editMode"),r==="deleteLayer"&&(r="removalMode"),p&&this.triggerClickOnToggledButtons(this.buttons[r]),!!this.buttons[r]&&this.buttons[r].toggle(l)},_defineButtons:function(){var r=this,l={className:"control-icon leaflet-pm-icon-marker",title:Bt("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(Mt,Rt){r.map.pm.Draw[Rt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},p={title:Bt("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(Mt,Rt){r.map.pm.Draw[Rt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},y={className:"control-icon leaflet-pm-icon-polyline",title:Bt("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(Mt,Rt){r.map.pm.Draw[Rt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},x={title:Bt("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(Mt,Rt){r.map.pm.Draw[Rt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},B={title:Bt("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(Mt,Rt){r.map.pm.Draw[Rt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},F={title:Bt("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(Mt,Rt){r.map.pm.Draw[Rt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},U={title:Bt("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){r.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},$={title:Bt("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){r.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Z={title:Bt("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(Mt,Rt){r.map.pm.Draw[Rt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Q={title:Bt("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){r.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},mt={title:Bt("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){r.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ct={className:"control-icon leaflet-pm-icon-text",title:Bt("buttonTitles.drawTextButton"),jsClass:"Text",onClick:function(){},afterClick:function(Mt,Rt){r.map.pm.Draw[Rt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(l)),this._addButton("drawPolyline",new L.Control.PMButton(y)),this._addButton("drawRectangle",new L.Control.PMButton(F)),this._addButton("drawPolygon",new L.Control.PMButton(p)),this._addButton("drawCircle",new L.Control.PMButton(x)),this._addButton("drawCircleMarker",new L.Control.PMButton(B)),this._addButton("drawText",new L.Control.PMButton(ct)),this._addButton("editMode",new L.Control.PMButton(U)),this._addButton("dragMode",new L.Control.PMButton($)),this._addButton("cutPolygon",new L.Control.PMButton(Z)),this._addButton("removalMode",new L.Control.PMButton(Q)),this._addButton("rotateMode",new L.Control.PMButton(mt))},_showHideButtons:function(){if(this.isVisible){this.removeControls(),this.isVisible=!0;var r=this.getButtons(),l=[];for(var p in this.options.drawControls===!1&&(l=l.concat(Object.keys(r).filter(function(x){return!r[x]._button.tool}))),this.options.editControls===!1&&(l=l.concat(Object.keys(r).filter(function(x){return r[x]._button.tool==="edit"}))),this.options.optionsControls===!1&&(l=l.concat(Object.keys(r).filter(function(x){return r[x]._button.tool==="options"}))),this.options.customControls===!1&&(l=l.concat(Object.keys(r).filter(function(x){return r[x]._button.tool==="custom"}))),r)if(this.options[p]&&l.indexOf(p)===-1){var y=r[p]._button.tool;y||(y="draw"),r[p].setPosition(this._getBtnPosition(y)),r[p].addTo(this.map)}}},_getBtnPosition:function(r){return this.options.positions&&this.options.positions[r]?this.options.positions[r]:this.options.position},setBlockPosition:function(r,l){this.options.positions[r]=l,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(r,l){if(!l)throw new TypeError("Button has no name");_t(l)!=="object"&&(l={name:l});var p=this._btnNameMapping(r);if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");var y=this.map.pm.Draw.createNewDrawInstance(l.name,p);return l=Y(Y({},this.buttons[p]._button),l),{drawInstance:y,control:this.createCustomControl(l)}},createCustomControl:function(r){var l,p;if(!r.name)throw new TypeError("Button has no name");if(this.buttons[r.name])throw new TypeError("Button with this name already exists");r.onClick||(r.onClick=function(){}),r.afterClick||(r.afterClick=function(){}),r.toggle!==!1&&(r.toggle=!0),r.block&&(r.block=r.block.toLowerCase()),r.block&&r.block!=="draw"||(r.block=""),r.className?r.className.indexOf("control-icon")===-1&&(r.className="control-icon ".concat(r.className)):r.className="control-icon";var y={tool:r.block,className:r.className,title:r.title||"",jsClass:r.name,onClick:r.onClick,afterClick:r.afterClick,doToggle:r.toggle,toggleStatus:!1,disableOtherButtons:(l=r.disableOtherButtons)===null||l===void 0||l,disableByOtherButtons:(p=r.disableByOtherButtons)===null||p===void 0||p,cssToggle:r.toggle,position:this.options.position,actions:r.actions||[],disabled:!!r.disabled};this.options[r.name]!==!1&&(this.options[r.name]=!0);var x=this._addButton(r.name,new L.Control.PMButton(y));return this.changeControlOrder(),x},changeControlOrder:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=this._shapeMapping(),p=[];r.forEach(function(Z){l[Z]?p.push(l[Z]):p.push(Z)});var y=this.getButtons(),x={};p.forEach(function(Z){y[Z]&&(x[Z]=y[Z])});var B=Object.keys(y).filter(function(Z){return!y[Z]._button.tool});B.forEach(function(Z){p.indexOf(Z)===-1&&(x[Z]=y[Z])});var F=Object.keys(y).filter(function(Z){return y[Z]._button.tool==="edit"});F.forEach(function(Z){p.indexOf(Z)===-1&&(x[Z]=y[Z])});var U=Object.keys(y).filter(function(Z){return y[Z]._button.tool==="options"});U.forEach(function(Z){p.indexOf(Z)===-1&&(x[Z]=y[Z])});var $=Object.keys(y).filter(function(Z){return y[Z]._button.tool==="custom"});$.forEach(function(Z){p.indexOf(Z)===-1&&(x[Z]=y[Z])}),Object.keys(y).forEach(function(Z){p.indexOf(Z)===-1&&(x[Z]=y[Z])}),this.map.pm.Toolbar.buttons=x,this._showHideButtons()},getControlOrder:function(){var r=this.getButtons(),l=[];for(var p in r)l.push(p);return l},changeActionsOfControl:function(r,l){var p=this._btnNameMapping(r);if(!p)throw new TypeError("No name passed");if(!l)throw new TypeError("No actions passed");if(!this.buttons[p])throw new TypeError("Button with this name not exists");this.buttons[p]._button.actions=l,this.changeControlOrder()},setButtonDisabled:function(r,l){var p=this._btnNameMapping(r);l?this.buttons[p].disable():this.buttons[p].enable()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping:function(r){var l=this._shapeMapping();return l[r]?l[r]:r}});function At(r,l){var p=Object.keys(r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(r);l&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(r,x).enumerable})),p.push.apply(p,y)}return p}function I(r){for(var l=1;l<arguments.length;l++){var p=arguments[l]!=null?arguments[l]:{};l%2?At(Object(p),!0).forEach(function(y){w(r,y,p[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(p)):At(Object(p)).forEach(function(y){Object.defineProperty(r,y,Object.getOwnPropertyDescriptor(p,y))})}return r}function w(r,l,p){return l in r?Object.defineProperty(r,l,{value:p,enumerable:!0,configurable:!0,writable:!0}):r[l]=p,r}var k={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(r){var l=this;r.forEach(function(p){Array.isArray(p)?l._assignEvents(p):(p.off("drag",l._handleSnapping,l),p.on("drag",l._handleSnapping,l),p.off("dragend",l._cleanupSnapping,l),p.on("dragend",l._cleanupSnapping,l))})},_cleanupSnapping:function(r){r&&(r.target._snapped=!1),delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(l){l.remove()})},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(r){var l=this,p=r.target;if(p._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),this._map.pm.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;var y=this._calcClosestLayer(p.getLatLng(),this._snapList);if(Object.keys(y).length===0)return!1;var x,B=y.layer instanceof L.Marker||y.layer instanceof L.CircleMarker||!this.options.snapSegment;x=B?y.latlng:this._checkPrioritiySnapping(y);var F=this.options.snapDistance,U={marker:p,shape:this._shape,snapLatLng:x,segment:y.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:y.layer,distance:y.distance};if(this._fireSnapDrag(U.marker,U),this._fireSnapDrag(this._layer,U),y.distance<F){p._orgLatLng=p.getLatLng(),p.setLatLng(x),p._snapped=!0,p._snapInfo=U;var $=this._snapLatLng||{},Z=x||{};$.lat===Z.lat&&$.lng===Z.lng||(l._snapLatLng=x,l._fireSnap(p,U),l._fireSnap(l._layer,U))}else this._snapLatLng&&(this._unsnap(U),p._snapped=!1,p._snapInfo=void 0,this._fireUnsnap(U.marker,U),this._fireUnsnap(this._layer,U));return!0},_createSnapList:function(){var r=this,l=[],p=[],y=this._map;y.off("pm:remove",this._handleSnapLayerRemoval,this),y.on("pm:remove",this._handleSnapLayerRemoval,this),y.eachLayer(function(x){if((x instanceof L.Polyline||x instanceof L.Marker||x instanceof L.CircleMarker||x instanceof L.ImageOverlay)&&x.options.snapIgnore!==!0){if(x.options.snapIgnore===void 0&&(!L.PM.optIn&&x.options.pmIgnore===!0||L.PM.optIn&&x.options.pmIgnore!==!1))return;(x instanceof L.Circle||x instanceof L.CircleMarker)&&x.pm&&x.pm._hiddenPolyCircle?l.push(x.pm._hiddenPolyCircle):x instanceof L.ImageOverlay&&(x=L.rectangle(x.getBounds())),l.push(x);var B=L.polyline([],{color:"red",pmIgnore:!0});B._pmTempLayer=!0,p.push(B),(x instanceof L.Circle||x instanceof L.CircleMarker)&&p.push(B)}}),l=(l=(l=l.filter(function(x){return r._layer!==x})).filter(function(x){return x._latlng||x._latlngs&&$t(x._latlngs)})).filter(function(x){return!x._pmTempLayer}),this._otherSnapLayers?(this._otherSnapLayers.forEach(function(){var x=L.polyline([],{color:"red",pmIgnore:!0});x._pmTempLayer=!0,p.push(x)}),this._snapList=l.concat(this._otherSnapLayers)):this._snapList=l,this.debugIndicatorLines=p},_handleSnapLayerRemoval:function(r){var l=r.layer,p=this._snapList.findIndex(function(y){return y._leaflet_id===l._leaflet_id});this._snapList.splice(p,1)},_calcClosestLayer:function(r,l){return this._calcClosestLayers(r,l,1)[0]},_calcClosestLayers:function(r,l){var p=this,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,x=[],B={};l.forEach(function(U,$){if(!U._parentCopy||U._parentCopy!==p._layer){var Z=p._calcLayerDistances(r,U);if(Z.distance=Math.floor(Z.distance),p.debugIndicatorLines){if(!p.debugIndicatorLines[$]){var Q=L.polyline([],{color:"red",pmIgnore:!0});Q._pmTempLayer=!0,p.debugIndicatorLines[$]=Q}p.debugIndicatorLines[$].setLatLngs([r,Z.latlng])}y===1&&(B.distance===void 0||Z.distance<=B.distance)?(Z.distance<B.distance&&(x=[]),(B=Z).layer=U,x.push(B)):y!==1&&(B={},(B=Z).layer=U,x.push(B))}}),y!==1&&(x=x.sort(function(U,$){return U.distance-$.distance})),y===-1&&(y=x.length);var F=this._getClosestLayerByPriority(x,y);return L.Util.isArray(F)?F:[F]},_calcLayerDistances:function(r,l){var p=this._map,y=l instanceof L.Marker||l instanceof L.CircleMarker,x=l instanceof L.Polygon,B=r;if(y){var F=l.getLatLng();return{latlng:I({},F),distance:this._getDistance(p,F,B)}}return this._calcLatLngDistances(B,l.getLatLngs(),p,x)},_calcLatLngDistances:function(r,l,p){var y,x,B,F=this,U=arguments.length>3&&arguments[3]!==void 0&&arguments[3],$=function Q(mt){mt.forEach(function(ct,Mt){if(Array.isArray(ct))Q(ct);else if(F.options.snapSegment){var Rt,qt=ct;Rt=U?Mt+1===mt.length?0:Mt+1:Mt+1===mt.length?void 0:Mt+1;var se=mt[Rt];if(se){var xe=F._getDistanceToSegment(p,r,qt,se);(x===void 0||xe<x)&&(x=xe,B=[qt,se])}}else{var Ut=F._getDistance(p,r,ct);(x===void 0||Ut<x)&&(x=Ut,y=ct)}})};if($(l),this.options.snapSegment){var Z=this._getClosestPointOnSegment(p,r,B[0],B[1]);return{latlng:I({},Z),segment:B,distance:x}}return{latlng:y,distance:x}},_getClosestLayerByPriority:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;r=r.sort(function(F,U){return F._leaflet_id-U._leaflet_id});var p=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],y=this._map.pm.globalOptions.snappingOrder||[],x=0,B={};return y.concat(p).forEach(function(F){B[F]||(x+=1,B[F]=x)}),r.sort(dt("instanceofShape",B)),l===1?r[0]||{}:r.slice(0,l)},_checkPrioritiySnapping:function(r){var l=this._map,p=r.segment[0],y=r.segment[1],x=r.latlng,B=this._getDistance(l,p,x),F=this._getDistance(l,y,x),U=B<F?p:y,$=B<F?B:F;if(this.options.snapMiddle){var Z=L.PM.Utils.calcMiddleLatLng(l,p,y),Q=this._getDistance(l,Z,x);Q<B&&Q<F&&(U=Z,$=Q)}return I({},$<this.options.snapDistance?U:x)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(r,l,p,y){var x=r.getMaxZoom();x===1/0&&(x=r.getZoom());var B=r.project(l,x),F=r.project(p,x),U=r.project(y,x),$=L.LineUtil.closestPointOnSegment(B,F,U);return r.unproject($,x)},_getDistanceToSegment:function(r,l,p,y){var x=r.latLngToLayerPoint(l),B=r.latLngToLayerPoint(p),F=r.latLngToLayerPoint(y);return L.LineUtil.pointToSegmentDistance(x,B,F)},_getDistance:function(r,l,p){return r.latLngToLayerPoint(l).distanceTo(r.latLngToLayerPoint(p))}};const R=k,D=L.Class.extend({includes:[R,Et],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1},setOptions:function(r){L.Util.setOptions(this,r),this.setStyle(this.options)},setStyle:function(){},getOptions:function(){return this.options},initialize:function(r){var l=this,p=new L.Icon.Default;p.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=p,this._map=r,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(function(y){l[y]=new L.PM.Draw[y](l._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(r){var l=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.options.pathOptions=l?d()(this.options.pathOptions,r):r},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(r,l){if(!r)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[r].enable(l)},disable:function(){var r=this;this.shapes.forEach(function(l){r[l].disable()})},addControls:function(){var r=this;this.shapes.forEach(function(l){r[l].addButton()})},getActiveShape:function(){var r,l=this;return this.shapes.forEach(function(p){l[p]._enabled&&(r=p)}),r},_setGlobalDrawMode:function(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();var r=L.PM.Utils.findLayers(this._map);this._enabled?r.forEach(function(l){L.PM.Utils.disablePopup(l)}):r.forEach(function(l){L.PM.Utils.enablePopup(l)})},createNewDrawInstance:function(r,l){var p=this._getShapeFromBtnName(l);if(this[r])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[p])throw new TypeError("There is no class L.PM.Draw.".concat(p));return this[r]=new L.PM.Draw[p](this._map),this[r].toolbarButtonName=r,this[r]._shape=r,this.shapes.push(r),this[l]&&this[r].setOptions(this[l].options),this[r].setOptions(this[r].options),this[r]},_getShapeFromBtnName:function(r){var l={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return l[r]?l[r]:this[r]?this[r]._shape:r},_finishLayer:function(r){r.pm&&(r.pm.setOptions(this.options),r.pm._shape=this._shape,r.pm._map=this._map),this._addDrawnLayerProp(r)},_addDrawnLayerProp:function(r){r._drawnByGeoman=!0},_setPane:function(r,l){l==="layerPane"?r.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?r.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(r.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}});D.Marker=D.extend({initialize:function(r){this._map=r,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(r){var l=this;L.Util.setOptions(this,r),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(Bt("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(function(p){l.isRelevantMarker(p)&&p.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var r=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(l){r.isRelevantMarker(l)&&l.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(r){this.enabled()?this.disable():this.enable(r)},isRelevantMarker:function(r){return r instanceof L.Marker&&r.pm&&!r._pmTempLayer&&!r.pm._initTextMarker},_syncHintMarker:function(r){if(this._hintMarker.setLatLng(r.latlng),this.options.snappable){var l=r;l.target=this._hintMarker,this._handleSnapping(l)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker:function(r){if(r.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);var l=this._hintMarker.getLatLng(),p=new L.Marker(l,this.options.markerStyle);this._setPane(p,"markerPane"),this._finishLayer(p),p.pm||(p.options.draggable=!1),p.addTo(this._map.pm._getContainingLayer()),p.pm&&this.options.markerEditable?p.pm.enable():p.dragging&&p.dragging.disable(),this._fireCreate(p),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},setStyle:function(){var r,l;(r=this.options.markerStyle)!==null&&r!==void 0&&r.icon&&((l=this._hintMarker)===null||l===void 0||l.setIcon(this.options.markerStyle.icon))}});var V=63710088e-1,et={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*V,kilometers:6371.0088,kilometres:6371.0088,meters:V,metres:V,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:V/1852,radians:1,yards:6967335223679999e-9};function it(r,l,p){p===void 0&&(p={});var y={type:"Feature"};return(p.id===0||p.id)&&(y.id=p.id),p.bbox&&(y.bbox=p.bbox),y.properties=l||{},y.geometry=r,y}function vt(r,l,p){if(p===void 0&&(p={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ve(r[0])||!ve(r[1]))throw new Error("coordinates must contain numbers");return it({type:"Point",coordinates:r},l,p)}function Ot(r,l,p){if(p===void 0&&(p={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");return it({type:"LineString",coordinates:r},l,p)}function Nt(r,l){l===void 0&&(l={});var p={type:"FeatureCollection"};return l.id&&(p.id=l.id),l.bbox&&(p.bbox=l.bbox),p.features=r,p}function Jt(r,l){l===void 0&&(l="kilometers");var p=et[l];if(!p)throw new Error(l+" units is invalid");return r*p}function ee(r,l){l===void 0&&(l="kilometers");var p=et[l];if(!p)throw new Error(l+" units is invalid");return r/p}function be(r){return 180*(r%(2*Math.PI))/Math.PI}function Xt(r){return r%360*Math.PI/180}function ve(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function he(r){var l,p,y={type:"FeatureCollection",features:[]};if((p=r.type==="Feature"?r.geometry:r).type==="LineString")l=[p.coordinates];else if(p.type==="MultiLineString")l=p.coordinates;else if(p.type==="MultiPolygon")l=[].concat.apply([],p.coordinates);else{if(p.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");l=p.coordinates}return l.forEach(function(x){l.forEach(function(B){for(var F=0;F<x.length-1;F++)for(var U=F;U<B.length-1;U++)if(!(x===B&&(Math.abs(F-U)===1||F===0&&U===x.length-2&&x[F][0]===x[x.length-1][0]&&x[F][1]===x[x.length-1][1]))){var $=we(x[F][0],x[F][1],x[F+1][0],x[F+1][1],B[U][0],B[U][1],B[U+1][0],B[U+1][1]);$&&y.features.push(vt([$[0],$[1]]))}})}),y}function we(r,l,p,y,x,B,F,U){var $,Z,Q,mt,ct={x:null,y:null,onLine1:!1,onLine2:!1};return($=(U-B)*(p-r)-(F-x)*(y-l))===0?ct.x!==null&&ct.y!==null&&ct:(mt=(p-r)*(Z=l-B)-(y-l)*(Q=r-x),Z=((F-x)*Z-(U-B)*Q)/$,Q=mt/$,ct.x=r+Z*(p-r),ct.y=l+Z*(y-l),Z>=0&&Z<=1&&(ct.onLine1=!0),Q>=0&&Q<=1&&(ct.onLine2=!0),!(!ct.onLine1||!ct.onLine2)&&[ct.x,ct.y])}function Ae(r,l){var p=Object.keys(r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(r);l&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(r,x).enumerable})),p.push.apply(p,y)}return p}function Ze(r){for(var l=1;l<arguments.length;l++){var p=arguments[l]!=null?arguments[l]:{};l%2?Ae(Object(p),!0).forEach(function(y){qe(r,y,p[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(p)):Ae(Object(p)).forEach(function(y){Object.defineProperty(r,y,Object.getOwnPropertyDescriptor(p,y))})}return r}function qe(r,l,p){return l in r?Object.defineProperty(r,l,{value:p,enumerable:!0,configurable:!0,writable:!0}):r[l]=p,r}function fn(r,l){var p=Object.keys(r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(r);l&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(r,x).enumerable})),p.push.apply(p,y)}return p}function cn(r){for(var l=1;l<arguments.length;l++){var p=arguments[l]!=null?arguments[l]:{};l%2?fn(Object(p),!0).forEach(function(y){Ye(r,y,p[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(p)):fn(Object(p)).forEach(function(y){Object.defineProperty(r,y,Object.getOwnPropertyDescriptor(p,y))})}return r}function Ye(r,l,p){return l in r?Object.defineProperty(r,l,{value:p,enumerable:!0,configurable:!0,writable:!0}):r[l]=p,r}function hn(r,l){var p=Object.keys(r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(r);l&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(r,x).enumerable})),p.push.apply(p,y)}return p}function Ln(r){for(var l=1;l<arguments.length;l++){var p=arguments[l]!=null?arguments[l]:{};l%2?hn(Object(p),!0).forEach(function(y){$n(r,y,p[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(p)):hn(Object(p)).forEach(function(y){Object.defineProperty(r,y,Object.getOwnPropertyDescriptor(p,y))})}return r}function $n(r,l,p){return l in r?Object.defineProperty(r,l,{value:p,enumerable:!0,configurable:!0,writable:!0}):r[l]=p,r}function Ke(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return r.geometry.coordinates;if(r.type==="Point")return r.coordinates}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return r;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Fe(r){if(Array.isArray(r))return r;if(r.type==="Feature"){if(r.geometry!==null)return r.geometry.coordinates}else if(r.coordinates)return r.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Rn(r){return r.type==="Feature"?r.geometry:r}function Kr(r,l){return r.type==="FeatureCollection"?"FeatureCollection":r.type==="GeometryCollection"?"GeometryCollection":r.type==="Feature"&&r.geometry!==null?r.geometry.type:r.type}function Ei(r,l,p){if(r!==null)for(var y,x,B,F,U,$,Z,Q,mt=0,ct=0,Mt=r.type,Rt=Mt==="FeatureCollection",qt=Mt==="Feature",se=Rt?r.features.length:1,xe=0;xe<se;xe++){U=(Q=!!(Z=Rt?r.features[xe].geometry:qt?r.geometry:r)&&Z.type==="GeometryCollection")?Z.geometries.length:1;for(var Ut=0;Ut<U;Ut++){var ke=0,Pe=0;if((F=Q?Z.geometries[Ut]:Z)!==null){$=F.coordinates;var He=F.type;switch(mt=!p||He!=="Polygon"&&He!=="MultiPolygon"?0:1,He){case null:break;case"Point":if(l($,ct,xe,ke,Pe)===!1)return!1;ct++,ke++;break;case"LineString":case"MultiPoint":for(y=0;y<$.length;y++){if(l($[y],ct,xe,ke,Pe)===!1)return!1;ct++,He==="MultiPoint"&&ke++}He==="LineString"&&ke++;break;case"Polygon":case"MultiLineString":for(y=0;y<$.length;y++){for(x=0;x<$[y].length-mt;x++){if(l($[y][x],ct,xe,ke,Pe)===!1)return!1;ct++}He==="MultiLineString"&&ke++,He==="Polygon"&&Pe++}He==="Polygon"&&ke++;break;case"MultiPolygon":for(y=0;y<$.length;y++){for(Pe=0,x=0;x<$[y].length;x++){for(B=0;B<$[y][x].length-mt;B++){if(l($[y][x][B],ct,xe,ke,Pe)===!1)return!1;ct++}Pe++}ke++}break;case"GeometryCollection":for(y=0;y<F.geometries.length;y++)if(Ei(F.geometries[y],l,p)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Cr(r,l){if(r.type==="Feature")l(r,0);else if(r.type==="FeatureCollection")for(var p=0;p<r.features.length&&l(r.features[p],p)!==!1;p++);}function Vs(r,l){var p,y,x,B,F,U,$,Z,Q,mt,ct=0,Mt=r.type==="FeatureCollection",Rt=r.type==="Feature",qt=Mt?r.features.length:1;for(p=0;p<qt;p++){for(U=Mt?r.features[p].geometry:Rt?r.geometry:r,Z=Mt?r.features[p].properties:Rt?r.properties:{},Q=Mt?r.features[p].bbox:Rt?r.bbox:void 0,mt=Mt?r.features[p].id:Rt?r.id:void 0,F=($=!!U&&U.type==="GeometryCollection")?U.geometries.length:1,x=0;x<F;x++)if((B=$?U.geometries[x]:U)!==null)switch(B.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(l(B,ct,Z,Q,mt)===!1)return!1;break;case"GeometryCollection":for(y=0;y<B.geometries.length;y++)if(l(B.geometries[y],ct,Z,Q,mt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(l(null,ct,Z,Q,mt)===!1)return!1;ct++}}function Ti(r,l){Vs(r,function(p,y,x,B,F){var U,$=p===null?null:p.type;switch($){case null:case"Point":case"LineString":case"Polygon":return l(it(p,x,{bbox:B,id:F}),y,0)!==!1&&void 0}switch($){case"MultiPoint":U="Point";break;case"MultiLineString":U="LineString";break;case"MultiPolygon":U="Polygon"}for(var Z=0;Z<p.coordinates.length;Z++){var Q=p.coordinates[Z];if(l(it({type:U,coordinates:Q},x),y,Z)===!1)return!1}})}D.Line=D.extend({initialize:function(r){this._map=r,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(r){L.Util.setOptions(this,r),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],Ze(Ze({},this.options.templineStyle),{},{pmIgnore:!1})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Bt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(r){this.enabled()?this.disable():this.enable(r)},_syncHintLine:function(){var r=this._layer.getLatLngs();if(r.length>0){var l=r[r.length-1];this._hintline.setLatLngs([l,this._hintMarker.getLatLng()])}},_syncHintMarker:function(r){if(this._hintMarker.setLatLng(r.latlng),this.options.snappable){var l=r;l.target=this._hintMarker,this._handleSnapping(l)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());var p=this._layer._defaultShape().slice();p.push(this._hintMarker.getLatLng()),this._change(p)},hasSelfIntersection:function(){return he(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(r,l){var p=L.polyline(this._layer.getLatLngs());r&&(l||(l=this._hintMarker.getLatLng()),p.addLatLng(l));var y=he(p.toGeoJSON(15));this._doesSelfIntersect=y.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"#f00000ff"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(r){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,r.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);var l=this._hintMarker.getLatLng(),p=this._layer.getLatLngs(),y=p[p.length-1];if(l.equals(p[0])||p.length>0&&l.equals(y))this._finishShape();else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:l,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(l);var x=this._createMarker(l);this._setTooltipText(),this._setHintLineAfterNewVertex(l),this._fireVertexAdded(x,void 0,l,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(r)}}},_setHintLineAfterNewVertex:function(r){this._hintline.setLatLngs([r,r])},_removeLastVertex:function(){var r=this._markers;if(r.length<=1)this.disable();else{var l=this._layer.getLatLngs(),p=r[r.length-1],y=L.PM.Utils.findDeepMarkerIndex(r,p).indexPath;r.pop(),this._layerGroup.removeLayer(p);var x=r[r.length-1],B=l.indexOf(x.getLatLng());l=l.slice(0,B+1),this._layer.setLatLngs(l),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(p,y,"Draw"),this._change(this._layer.getLatLngs())}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var r=this._layer.getLatLngs();if(!(r.length<=1)){var l=L.polyline(r,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(r){var l=new L.Marker(r,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),l.on("click",this._finishShape,this),l},_setTooltipText:function(){var r="";r=Bt(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(r)},_change:function(r){this._fireChange(r,"Draw")},setStyle:function(){var r,l;(r=this._layer)===null||r===void 0||r.setStyle(this.options.templineStyle),(l=this._hintline)===null||l===void 0||l.setStyle(this.options.hintlineStyle)}}),D.Polygon=D.Line.extend({initialize:function(r){this._map=r,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable:function(r){L.PM.Draw.Line.prototype.enable.call(this,r),this._layer.pm._shape="Polygon"},_createMarker:function(r){var l=new L.Marker(r,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),this._layer.getLatLngs().flat().length===1?(l.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(l)-1,this.options.snappable&&this._cleanupSnapping()):l.on("click",function(){return 1}),l},_setTooltipText:function(){var r="";r=Bt(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(r)},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var r=this._layer.getLatLngs();if(!(r.length<=2)){var l=L.polygon(r,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),D.Rectangle=D.extend({initialize:function(r){this._map=r,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(r){if(L.Util.setOptions(this,r),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Bt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(var l=0;l<2;l+=1){var p=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(p,"vertexPane"),p._pmTempLayer=!0,this._layerGroup.addLayer(p),this._styleMarkers.push(p)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(r){this.enabled()?this.disable():this.enable(r)},_placeStartingMarkers:function(r){this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);var l=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(l),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(p){L.DomUtil.addClass(p._icon,"visible"),p.setLatLng(l)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(Bt("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var r=this._startMarker.getLatLng();r&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([r,r]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(r){if(this._hintMarker.setLatLng(r.latlng),this.options.snappable){var l=r;l.target=this._hintMarker,this._handleSnapping(l)}var p=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(p,"Draw")},_syncRectangleSize:function(){var r=this,l=St(this._startMarker.getLatLng(),this._map),p=St(this._hintMarker.getLatLng(),this._map),y=L.PM.Utils._getRotatedRectangle(l,p,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(y),this.options.cursorMarker&&this._styleMarkers){var x=[];y.forEach(function(B){B.equals(l,1e-8)||B.equals(p,1e-8)||x.push(B)}),x.forEach(function(B,F){try{r._styleMarkers[F].setLatLng(B)}catch{}})}},_findCorners:function(){var r=this._layer.getBounds();return[r.getNorthWest(),r.getNorthEast(),r.getSouthEast(),r.getSouthWest()]},_finishShape:function(r){this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);var l=this._hintMarker.getLatLng(),p=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var y=L.rectangle([p,l],this.options.pathOptions);if(this.options.rectangleAngle){var x=L.PM.Utils._getRotatedRectangle(p,l,this.options.rectangleAngle||0,this._map);y.setLatLngs(x),y.pm&&y.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(y,"layerPane"),this._finishLayer(y),y.addTo(this._map.pm._getContainingLayer()),this._fireCreate(y),this.disable(),this.options.continueDrawing&&this.enable()}},setStyle:function(){var r;(r=this._layer)===null||r===void 0||r.setStyle(this.options.pathOptions)}}),D.Circle=D.extend({initialize:function(r){this._map=r,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(r){L.Util.setOptions(this,r),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle(this._map.getCenter(),cn(cn({},this.options.templineStyle),{},{radius:0})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Bt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(r){this.enabled()?this.disable():this.enable(r)},_syncHintLine:function(){var r=this._centerMarker.getLatLng(),l=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([r,l])},_syncCircleRadius:function(){var r,l=this._centerMarker.getLatLng(),p=this._hintMarker.getLatLng();r=this._map.options.crs===L.CRS.Simple?this._map.distance(l,p):l.distanceTo(p),this.options.minRadiusCircle&&r<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&r>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(r)},_syncHintMarker:function(r){if(this._hintMarker.setLatLng(r.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var l=r;l.target=this._hintMarker,this._handleSnapping(l)}this._handleHintMarkerSnapping();var p=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(p,"Draw")},_placeCenterMarker:function(r){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);var l=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(l),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var r=this._centerMarker.getLatLng();r&&(this._layer.setLatLng(r),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(Bt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_finishShape:function(r){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);var l,p=this._centerMarker.getLatLng(),y=this._hintMarker.getLatLng();l=this._map.options.crs===L.CRS.Simple?this._map.distance(p,y):p.distanceTo(y),this.options.minRadiusCircle&&l<this.options.minRadiusCircle?l=this.options.minRadiusCircle:this.options.maxRadiusCircle&&l>this.options.maxRadiusCircle&&(l=this.options.maxRadiusCircle);var x=cn(cn({},this.options.pathOptions),{},{radius:l}),B=L.circle(p,x);this._setPane(B,"layerPane"),this._finishLayer(B),B.addTo(this._map.pm._getContainingLayer()),B.pm&&B.pm._updateHiddenPolyCircle(),this._fireCreate(B),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var r=this._hintMarker.getLatLng();if(!this._layerGroup.hasLayer(this._centerMarker))return r;var l=this._centerMarker.getLatLng(),p=l.distanceTo(r);return this.options.minRadiusCircle&&p<this.options.minRadiusCircle?r=Ft(this._map,l,r,this.options.minRadiusCircle):this.options.maxRadiusCircle&&p>this.options.maxRadiusCircle&&(r=Ft(this._map,l,r,this.options.maxRadiusCircle)),r},_handleHintMarkerSnapping:function(){if(this._hintMarker._snapped){var r=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),p=r.distanceTo(l);this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircle&&p<this.options.minRadiusCircle||this.options.maxRadiusCircle&&p>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())},setStyle:function(){var r,l;(r=this._layer)===null||r===void 0||r.setStyle(this.options.templineStyle),(l=this._hintline)===null||l===void 0||l.setStyle(this.options.hintlineStyle)}}),D.CircleMarker=D.Marker.extend({initialize:function(r){this._map=r,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(r){var l=this;if(L.Util.setOptions(this,r),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable){var p={};L.extend(p,this.options.templineStyle),p.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker(this._map.getCenter(),p),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Bt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"}else this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker(this._map.getCenter(),this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(Bt("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer(function(y){l.isRelevantMarker(y)&&y.pm.enable()}),this._layer.bringToBack(),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var r=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer(function(l){r.isRelevantMarker(l)&&l.pm.disable()}),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_placeCenterMarker:function(r){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);var l=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(l),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var r=this._centerMarker.getLatLng();r&&(this._layer.setLatLng(r),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(Bt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine:function(){var r=this._centerMarker.getLatLng(),l=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([r,l])},_syncCircleRadius:function(){var r=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),p=this._map.project(r).distanceTo(this._map.project(l));this.options.minRadiusCircleMarker&&p<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&p>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(p)},_syncHintMarker:function(r){if(this._hintMarker.setLatLng(r.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var l=r;l.target=this._hintMarker,this._handleSnapping(l)}this._handleHintMarkerSnapping();var p=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(p,"Draw")},isRelevantMarker:function(r){return r instanceof L.CircleMarker&&!(r instanceof L.Circle)&&r.pm&&!r._pmTempLayer},_createMarker:function(r){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&r.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);var l=this._hintMarker.getLatLng(),p=L.circleMarker(l,this.options.pathOptions);this._setPane(p,"layerPane"),this._finishLayer(p),p.addTo(this._map.pm._getContainingLayer()),p.pm&&this.options.markerEditable&&p.pm.enable(),this._fireCreate(p),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_finishShape:function(r){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);var l=this._centerMarker.getLatLng(),p=this._hintMarker.getLatLng(),y=this._map.project(l).distanceTo(this._map.project(p));this.options.editable&&(this.options.minRadiusCircleMarker&&y<this.options.minRadiusCircleMarker?y=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&y>this.options.maxRadiusCircleMarker&&(y=this.options.maxRadiusCircleMarker));var x=Ln(Ln({},this.options.pathOptions),{},{radius:y}),B=L.circleMarker(l,x);this._setPane(B,"layerPane"),this._finishLayer(B),B.addTo(this._map.pm._getContainingLayer()),B.pm&&B.pm._updateHiddenPolyCircle(),this._fireCreate(B),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var r=this._hintMarker.getLatLng();if(this.options.editable){if(!this._layerGroup.hasLayer(this._centerMarker))return r;var l=this._centerMarker.getLatLng(),p=this._map.project(l).distanceTo(this._map.project(r));this.options.minRadiusCircleMarker&&p<this.options.minRadiusCircleMarker?r=Ft(this._map,l,r,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&p>this.options.maxRadiusCircleMarker&&(r=Ft(this._map,l,r,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))}return r},_handleHintMarkerSnapping:function(){if(this.options.editable){if(this._hintMarker._snapped){var r=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),p=this._map.project(r).distanceTo(this._map.project(l));this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircleMarker&&p<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&p>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},_pxRadiusToMeter:function(r){var l=this._centerMarker.getLatLng(),p=this._map.project(l),y=L.point(p.x+r,p.y);return this._map.unproject(y).distanceTo(l)},setStyle:function(){var r,l,p={};L.extend(p,this.options.templineStyle),this.options.editable&&(p.radius=0),(r=this._layer)===null||r===void 0||r.setStyle(p),(l=this._hintline)===null||l===void 0||l.setStyle(this.options.hintlineStyle)}});const nn=function(r){if(!r)throw new Error("geojson is required");var l=[];return Ti(r,function(p){(function(y,x){var B=[],F=y.geometry;if(F!==null){switch(F.type){case"Polygon":B=Fe(F);break;case"LineString":B=[Fe(F)]}B.forEach(function(U){var $=function(Z,Q){var mt=[];return Z.reduce(function(ct,Mt){var Rt,qt,se,xe,Ut,ke,Pe=Ot([ct,Mt],Q);return Pe.bbox=(qt=Mt,se=(Rt=ct)[0],xe=Rt[1],Ut=qt[0],ke=qt[1],[se<Ut?se:Ut,xe<ke?xe:ke,se>Ut?se:Ut,xe>ke?xe:ke]),mt.push(Pe),Mt}),mt}(U,y.properties);$.forEach(function(Z){Z.id=x.length,x.push(Z)})})}})(p,l)}),Nt(l)};var Vt=i(1787);function Oi(r,l){var p=Fe(r),y=Fe(l);if(p.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(y.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var x=p[0][0],B=p[0][1],F=p[1][0],U=p[1][1],$=y[0][0],Z=y[0][1],Q=y[1][0],mt=y[1][1],ct=(mt-Z)*(F-x)-(Q-$)*(U-B),Mt=(Q-$)*(B-Z)-(mt-Z)*(x-$),Rt=(F-x)*(B-Z)-(U-B)*(x-$);if(ct===0)return null;var qt=Mt/ct,se=Rt/ct;return qt>=0&&qt<=1&&se>=0&&se<=1?vt([x+qt*(F-x),B+qt*(U-B)]):null}const Bn=function(r,l){var p={},y=[];if(r.type==="LineString"&&(r=it(r)),l.type==="LineString"&&(l=it(l)),r.type==="Feature"&&l.type==="Feature"&&r.geometry!==null&&l.geometry!==null&&r.geometry.type==="LineString"&&l.geometry.type==="LineString"&&r.geometry.coordinates.length===2&&l.geometry.coordinates.length===2){var x=Oi(r,l);return x&&y.push(x),Nt(y)}var B=Vt();return B.load(nn(l)),Cr(nn(r),function(F){Cr(B.search(F),function(U){var $=Oi(F,U);if($){var Z=Fe($).join(",");p[Z]||(p[Z]=!0,y.push($))}})}),Nt(y)},In=function(r,l,p){p===void 0&&(p={});var y=Ke(r),x=Ke(l),B=Xt(x[1]-y[1]),F=Xt(x[0]-y[0]),U=Xt(y[1]),$=Xt(x[1]),Z=Math.pow(Math.sin(B/2),2)+Math.pow(Math.sin(F/2),2)*Math.cos(U)*Math.cos($);return Jt(2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z)),p.units)},Lo=function(r){var l=r[0],p=r[1],y=r[2],x=r[3];if(In(r.slice(0,2),[y,p])>=In(r.slice(0,2),[l,x])){var B=(p+x)/2;return[l,B-(y-l)/2,y,B+(y-l)/2]}var F=(l+y)/2;return[F-(x-p)/2,p,F+(x-p)/2,x]};function Pr(r){var l=[1/0,1/0,-1/0,-1/0];return Ei(r,function(p){l[0]>p[0]&&(l[0]=p[0]),l[1]>p[1]&&(l[1]=p[1]),l[2]<p[0]&&(l[2]=p[0]),l[3]<p[1]&&(l[3]=p[1])}),l}Pr.default=Pr;const or=Pr,sr=function(r,l){l===void 0&&(l={});var p=l.precision,y=l.coordinates,x=l.mutate;if(p=p==null||isNaN(p)?6:p,y=y==null||isNaN(y)?3:y,!r)throw new Error("<geojson> is required");if(typeof p!="number")throw new Error("<precision> must be a number");if(typeof y!="number")throw new Error("<coordinates> must be a number");x!==!1&&x!==void 0||(r=JSON.parse(JSON.stringify(r)));var B=Math.pow(10,p);return Ei(r,function(F){(function(U,$,Z){U.length>Z&&U.splice(Z,U.length);for(var Q=0;Q<U.length;Q++)U[Q]=Math.round(U[Q]*$)/$})(F,B,y)}),r};function Ai(r,l,p){if(p===void 0&&(p={}),p.final===!0)return function(mt,ct){var Mt=Ai(ct,mt);return Mt=(Mt+180)%360}(r,l);var y=Ke(r),x=Ke(l),B=Xt(y[0]),F=Xt(x[0]),U=Xt(y[1]),$=Xt(x[1]),Z=Math.sin(F-B)*Math.cos($),Q=Math.cos(U)*Math.sin($)-Math.sin(U)*Math.cos($)*Math.cos(F-B);return be(Math.atan2(Z,Q))}function Mo(r,l,p,y){y===void 0&&(y={});var x=Ke(r),B=Xt(x[0]),F=Xt(x[1]),U=Xt(p),$=ee(l,y.units),Z=Math.asin(Math.sin(F)*Math.cos($)+Math.cos(F)*Math.sin($)*Math.cos(U));return vt([be(B+Math.atan2(Math.sin(U)*Math.sin($)*Math.cos(F),Math.cos($)-Math.sin(F)*Math.sin(Z))),be(Z)],y.properties)}const Hs=function(r,l,p){p===void 0&&(p={});var y=vt([1/0,1/0],{dist:1/0}),x=0;return Ti(r,function(B){for(var F=Fe(B),U=0;U<F.length-1;U++){var $=vt(F[U]);$.properties.dist=In(l,$,p);var Z=vt(F[U+1]);Z.properties.dist=In(l,Z,p);var Q=In($,Z,p),mt=Math.max($.properties.dist,Z.properties.dist),ct=Ai($,Z),Mt=Mo(l,mt,ct+90,p),Rt=Mo(l,mt,ct-90,p),qt=Bn(Ot([Mt.geometry.coordinates,Rt.geometry.coordinates]),Ot([$.geometry.coordinates,Z.geometry.coordinates])),se=null;qt.features.length>0&&((se=qt.features[0]).properties.dist=In(l,se,p),se.properties.location=x+In($,se,p)),$.properties.dist<y.properties.dist&&((y=$).properties.index=U,y.properties.location=x),Z.properties.dist<y.properties.dist&&((y=Z).properties.index=U+1,y.properties.location=x+Q),se&&se.properties.dist<y.properties.dist&&((y=se).properties.index=U),x+=Q}}),y};function Co(r,l){var p=[],y=Vt();return Ti(l,function(x){if(p.forEach(function(U,$){U.id=$}),p.length){var B=y.search(x);if(B.features.length){var F=Bi(x,B);p=p.filter(function(U){return U.id!==F.id}),y.remove(F),Cr(Ri(F,x),function(U){p.push(U),y.insert(U)})}}else(p=Ri(r,x).features).forEach(function(U){U.bbox||(U.bbox=Lo(or(U)))}),y.load(Nt(p))}),Nt(p)}function Ri(r,l){var p=[],y=Fe(r)[0],x=Fe(r)[r.geometry.coordinates.length-1];if(Ii(y,Ke(l))||Ii(x,Ke(l)))return Nt([r]);var B=Vt(),F=nn(r);B.load(F);var U=B.search(l);if(!U.features.length)return Nt([r]);var $=Bi(l,U),Z=function(Q,mt,ct){var Mt=ct;return Cr(Q,function(Rt,qt){Mt=qt===0&&ct===void 0?Rt:mt(Mt,Rt,qt)}),Mt}(F,function(Q,mt,ct){var Mt=Fe(mt)[1],Rt=Ke(l);return ct===$.id?(Q.push(Rt),p.push(Ot(Q)),Ii(Rt,Mt)?[Rt]:[Rt,Mt]):(Q.push(Mt),Q)},[y]);return Z.length>1&&p.push(Ot(Z)),Nt(p)}function Bi(r,l){if(!l.features.length)throw new Error("lines must contain features");if(l.features.length===1)return l.features[0];var p,y=1/0;return Cr(l,function(x){var B=Hs(x,r).properties.dist;B<y&&(p=x,y=B)}),p}function Ii(r,l){return r[0]===l[0]&&r[1]===l[1]}const Wr=function(r,l){if(!r)throw new Error("line is required");if(!l)throw new Error("splitter is required");var p=Kr(r),y=Kr(l);if(p!=="LineString")throw new Error("line must be LineString");if(y==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(y==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var x=sr(l,{precision:7});switch(y){case"Point":return Ri(r,x);case"MultiPoint":return Co(r,x);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Co(r,Bn(r,x))}};function Jr(r,l,p){if(p===void 0&&(p={}),!r)throw new Error("point is required");if(!l)throw new Error("polygon is required");var y=Ke(r),x=Rn(l),B=x.type,F=l.bbox,U=x.coordinates;if(F&&function(ct,Mt){return Mt[0]<=ct[0]&&Mt[1]<=ct[1]&&Mt[2]>=ct[0]&&Mt[3]>=ct[1]}(y,F)===!1)return!1;B==="Polygon"&&(U=[U]);for(var $=!1,Z=0;Z<U.length&&!$;Z++)if(Po(y,U[Z][0],p.ignoreBoundary)){for(var Q=!1,mt=1;mt<U[Z].length&&!Q;)Po(y,U[Z][mt],!p.ignoreBoundary)&&(Q=!0),mt++;Q||($=!0)}return $}function Po(r,l,p){var y=!1;l[0][0]===l[l.length-1][0]&&l[0][1]===l[l.length-1][1]&&(l=l.slice(0,l.length-1));for(var x=0,B=l.length-1;x<l.length;B=x++){var F=l[x][0],U=l[x][1],$=l[B][0],Z=l[B][1];if(r[1]*(F-$)+U*($-r[0])+Z*(r[0]-F)==0&&(F-r[0])*($-r[0])<=0&&(U-r[1])*(Z-r[1])<=0)return!p;U>r[1]!=Z>r[1]&&r[0]<($-F)*(r[1]-U)/(Z-U)+F&&(y=!y)}return y}function Gs(r,l,p,y,x){var B=p[0],F=p[1],U=r[0],$=r[1],Z=l[0],Q=l[1],mt=Z-U,ct=Q-$,Mt=(p[0]-U)*ct-(p[1]-$)*mt;if(x!==null){if(Math.abs(Mt)>x)return!1}else if(Mt!==0)return!1;return y?y==="start"?Math.abs(mt)>=Math.abs(ct)?mt>0?U<B&&B<=Z:Z<=B&&B<U:ct>0?$<F&&F<=Q:Q<=F&&F<$:y==="end"?Math.abs(mt)>=Math.abs(ct)?mt>0?U<=B&&B<Z:Z<B&&B<=U:ct>0?$<=F&&F<Q:Q<F&&F<=$:y==="both"&&(Math.abs(mt)>=Math.abs(ct)?mt>0?U<B&&B<Z:Z<B&&B<U:ct>0?$<F&&F<Q:Q<F&&F<$):Math.abs(mt)>=Math.abs(ct)?mt>0?U<=B&&B<=Z:Z<=B&&B<=U:ct>0?$<=F&&F<=Q:Q<=F&&F<=$}const Sr=function(r,l,p){p===void 0&&(p={});for(var y=Ke(r),x=Fe(l),B=0;B<x.length-1;B++){var F=!1;if(p.ignoreEndVertices&&(B===0&&(F="start"),B===x.length-2&&(F="end"),B===0&&B+1===x.length-1&&(F="both")),Gs(x[B],x[B+1],y,F,typeof p.epsilon>"u"?null:p.epsilon))return!0}return!1};function $s(r,l){var p=Rn(r),y=Rn(l),x=p.type,B=y.type,F=p.coordinates,U=y.coordinates;switch(x){case"Point":if(B==="Point")return Un(F,U);throw new Error("feature2 "+B+" geometry not supported");case"MultiPoint":switch(B){case"Point":return function($,Z){var Q,mt=!1;for(Q=0;Q<$.coordinates.length;Q++)if(Un($.coordinates[Q],Z.coordinates)){mt=!0;break}return mt}(p,y);case"MultiPoint":return function($,Z){for(var Q=0,mt=Z.coordinates;Q<mt.length;Q++){for(var ct=mt[Q],Mt=!1,Rt=0,qt=$.coordinates;Rt<qt.length;Rt++)if(Un(ct,qt[Rt])){Mt=!0;break}if(!Mt)return!1}return!0}(p,y);default:throw new Error("feature2 "+B+" geometry not supported")}case"LineString":switch(B){case"Point":return Sr(y,p,{ignoreEndVertices:!0});case"LineString":return function($,Z){for(var Q=!1,mt=0,ct=Z.coordinates;mt<ct.length;mt++){var Mt=ct[mt];if(Sr({type:"Point",coordinates:Mt},$,{ignoreEndVertices:!0})&&(Q=!0),!Sr({type:"Point",coordinates:Mt},$,{ignoreEndVertices:!1}))return!1}return Q}(p,y);case"MultiPoint":return function($,Z){for(var Q=!1,mt=0,ct=Z.coordinates;mt<ct.length;mt++){var Mt=ct[mt];if(Sr(Mt,$,{ignoreEndVertices:!0})&&(Q=!0),!Sr(Mt,$))return!1}return!!Q}(p,y);default:throw new Error("feature2 "+B+" geometry not supported")}case"Polygon":switch(B){case"Point":return Jr(y,p,{ignoreBoundary:!0});case"LineString":return function($,Z){var Q=!1,mt=0,ct=or($),Mt=or(Z);if(!Yr(ct,Mt))return!1;for(;mt<Z.coordinates.length-1;mt++)if(Jr({type:"Point",coordinates:So(Z.coordinates[mt],Z.coordinates[mt+1])},$,{ignoreBoundary:!0})){Q=!0;break}return Q}(p,y);case"Polygon":return function($,Z){if($.type==="Feature"&&$.geometry===null||Z.type==="Feature"&&Z.geometry===null)return!1;var Q=or($),mt=or(Z);if(!Yr(Q,mt))return!1;for(var ct=Rn(Z).coordinates,Mt=0,Rt=ct;Mt<Rt.length;Mt++)for(var qt=0,se=Rt[Mt];qt<se.length;qt++)if(!Jr(se[qt],$))return!1;return!0}(p,y);case"MultiPoint":return function($,Z){for(var Q=0,mt=Z.coordinates;Q<mt.length;Q++)if(!Jr(mt[Q],$,{ignoreBoundary:!0}))return!1;return!0}(p,y);default:throw new Error("feature2 "+B+" geometry not supported")}default:throw new Error("feature1 "+x+" geometry not supported")}}function Yr(r,l){return!(r[0]>l[0])&&!(r[2]<l[2])&&!(r[1]>l[1])&&!(r[3]<l[3])}function Un(r,l){return r[0]===l[0]&&r[1]===l[1]}function So(r,l){return[(r[0]+l[0])/2,(r[1]+l[1])/2]}var Eo=i(2676),ar=i.n(Eo);function de(r){var l={type:"Feature"};return l.geometry=r,l}function Ce(r){return r.type==="Feature"?r.geometry:r}function Er(r){return r&&r.geometry&&r.geometry.coordinates?r.geometry.coordinates:r}function Zn(r){return de({type:"Polygon",coordinates:r})}function qn(r){return de({type:"MultiPolygon",coordinates:r})}function Xr(r){return Array.isArray(r)?1+Xr(r[0]):-1}function oe(r){r instanceof L.Polyline&&(r=r.toGeoJSON(15));var l=Er(r),p=Xr(l),y=[];return p>1?l.forEach(function(x){y.push(function(B){return de({type:"LineString",coordinates:B})}(x))}):y.push(r),y}function Re(r){var l=[];return r.eachLayer(function(p){l.push(Er(p.toGeoJSON(15)))}),function(p){return de({type:"MultiLineString",coordinates:p})}(l)}function Di(r,l){return function(p){if(Array.isArray(p))return p}(r)||function(p,y){var x=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(x!=null){var B,F,U=[],$=!0,Z=!1;try{for(x=x.call(p);!($=(B=x.next()).done)&&(U.push(B.value),!y||U.length!==y);$=!0);}catch(Q){Z=!0,F=Q}finally{try{$||x.return==null||x.return()}finally{if(Z)throw F}}return U}}(r,l)||function(p,y){if(p){if(typeof p=="string")return Tr(p,y);var x=Object.prototype.toString.call(p).slice(8,-1);if(x==="Object"&&p.constructor&&(x=p.constructor.name),x==="Map"||x==="Set")return Array.from(p);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return Tr(p,y)}}(r,l)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Tr(r,l){(l==null||l>r.length)&&(l=r.length);for(var p=0,y=new Array(l);p<l;p++)y[p]=r[p];return y}function rn(r){return function(l){if(Array.isArray(l))return zi(l)}(r)||function(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}(r)||function(l,p){if(l){if(typeof l=="string")return zi(l,p);var y=Object.prototype.toString.call(l).slice(8,-1);if(y==="Object"&&l.constructor&&(y=l.constructor.name),y==="Map"||y==="Set")return Array.from(l);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return zi(l,p)}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zi(r,l){(l==null||l>r.length)&&(l=r.length);for(var p=0,y=new Array(l);p<l;p++)y[p]=r[p];return y}D.Cut=D.Polygon.extend({initialize:function(r){this._map=r,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var r=this;if(this._editedLayers=[],(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var l=this._layer.getLatLngs();if(!(l.length<=2)){var p=L.polygon(l,this.options.pathOptions);p._latlngInfos=this._layer._latlngInfo,this.cut(p),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(y){var x=y.layer,B=y.originalLayer;r._fireCut(B,x,B),r._fireCut(r._map,x,B),B.pm._fireEdit()}),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}}},cut:function(r){var l=this,p=this._map._layers,y=r._latlngInfos||[];Object.keys(p).map(function(x){return p[x]}).filter(function(x){return x.pm}).filter(function(x){return!x._pmTempLayer}).filter(function(x){return!L.PM.optIn&&!x.options.pmIgnore||L.PM.optIn&&x.options.pmIgnore===!1}).filter(function(x){return x instanceof L.Polyline}).filter(function(x){return x!==r}).filter(function(x){return x.pm.options.allowCutting}).filter(function(x){return!(l.options.layersToCut&&L.Util.isArray(l.options.layersToCut)&&l.options.layersToCut.length>0)||l.options.layersToCut.indexOf(x)>-1}).filter(function(x){return!l._layerGroup.hasLayer(x)}).filter(function(x){try{var B=!!Bn(r.toGeoJSON(15),x.toGeoJSON(15)).features.length>0;return B||x instanceof L.Polyline&&!(x instanceof L.Polygon)?B:(F=r.toGeoJSON(15),U=x.toGeoJSON(15),$=Ce(F),Z=Ce(U),!((Q=ar().intersection($.coordinates,Z.coordinates)).length===0||!(Q.length===1?Zn(Q[0]):qn(Q))))}catch{return x instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var F,U,$,Z,Q}).forEach(function(x){var B;if(x instanceof L.Polygon){var F=(B=L.polygon(x.getLatLngs())).getLatLngs();y.forEach(function(ct){if(ct&&ct.snapInfo){var Mt=ct.latlng,Rt=l._calcClosestLayer(Mt,[B]);if(Rt&&Rt.segment&&Rt.distance<l.options.snapDistance){var qt=Rt.segment;if(qt&&qt.length===2){var se=L.PM.Utils._getIndexFromSegment(F,qt),xe=se.indexPath,Ut=se.parentPath,ke=se.newIndex;(xe.length>1?wt()(F,Ut):F).splice(ke,0,Mt)}}}})}else B=x;var U=l._cutLayer(r,B),$=L.geoJSON(U,x.options);if($.getLayers().length===1){var Z=$.getLayers();$=Di(Z,1)[0]}l._setPane($,"layerPane");var Q=$.addTo(l._map.pm._getContainingLayer());if(Q.pm.enable(x.pm.options),Q.pm.disable(),x._pmTempLayer=!0,r._pmTempLayer=!0,x.remove(),x.removeFrom(l._map.pm._getContainingLayer()),r.remove(),r.removeFrom(l._map.pm._getContainingLayer()),Q.getLayers&&Q.getLayers().length===0&&l._map.pm.removeLayer({target:Q}),Q instanceof L.LayerGroup&&Q.eachLayer(function(ct){l._addDrawnLayerProp(ct)}),l._addDrawnLayerProp(Q),l.options.layersToCut&&L.Util.isArray(l.options.layersToCut)&&l.options.layersToCut.length>0){var mt=l.options.layersToCut.indexOf(x);mt>-1&&l.options.layersToCut.splice(mt,1)}l._editedLayers.push({layer:Q,originalLayer:x})})},_cutLayer:function(r,l){var p,y,x,B,F,U,$=L.geoJSON();if(l instanceof L.Polygon)y=l.toGeoJSON(15),x=r.toGeoJSON(15),B=Ce(y),F=Ce(x),p=(U=ar().difference(B.coordinates,F.coordinates)).length===0?null:U.length===1?Zn(U[0]):qn(U);else{var Z=oe(l);Z.forEach(function(Q){var mt=Wr(Q,r.toGeoJSON(15));(mt&&mt.features.length>0?L.geoJSON(mt):L.geoJSON(Q)).getLayers().forEach(function(ct){$s(r.toGeoJSON(15),ct.toGeoJSON(15))||ct.addTo($)})}),p=Z.length>1?Re($):$.toGeoJSON(15)}return p},_change:L.Util.falseFn}),D.Text=D.extend({initialize:function(r){this._map=r,this._shape="Text",this.toolbarButtonName="drawText"},enable:function(r){L.Util.setOptions(this,r),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Bt("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(r){this.enabled()?this.disable():this.enable(r)},_syncHintMarker:function(r){if(this._hintMarker.setLatLng(r.latlng),this.options.snappable){var l=r;l.target=this._hintMarker,this._handleSnapping(l)}},_createMarker:function(r){var l;if(r.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);var p=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(l=this.options.textOptions)!==null&&l!==void 0&&l.className){var y,x=this.options.textOptions.className.split(" ");(y=this.textArea.classList).add.apply(y,rn(x))}var B=this._createTextIcon(this.textArea),F=new L.Marker(p,{textMarker:!0,_textMarkerOverPM:!0,icon:B});if(this._setPane(F,"markerPane"),this._finishLayer(F),F.pm||(F.options.draggable=!1),F.addTo(this._map.pm._getContainingLayer()),F.pm){var U,$,Z,Q,mt;F.pm.textArea=this.textArea,L.setOptions(F.pm,{removeIfEmpty:(U=($=this.options.textOptions)===null||$===void 0?void 0:$.removeIfEmpty)===null||U===void 0||U});var ct=(Z=(Q=this.options.textOptions)===null||Q===void 0?void 0:Q.focusAfterDraw)===null||Z===void 0||Z;F.pm._createTextMarker(ct),(mt=this.options.textOptions)!==null&&mt!==void 0&&mt.text&&F.pm.setText(this.options.textOptions.text)}this._fireCreate(F),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}},_createTextArea:function(){var r=document.createElement("textarea");return r.autofocus=!0,r.readOnly=!0,r.classList.add("pm-textarea","pm-disabled"),r},_createTextIcon:function(r){return L.divIcon({className:"pm-text-marker",html:r})}});const Qr={enableLayerDrag:function(){if(this.options.draggable&&this._layer._map){this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,jt(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;var r=this._getDOMElem();r&&(jt(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(r)):L.DomEvent.on(r,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()}},disableLayerDrag:function(){this._layerDragEnabled=!1,jt(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();var r=this._getDOMElem();r&&(jt(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(r)):L.DomEvent.off(r,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_simulateMouseDownEvent:function(r){var l=r.touches?r.touches[0]:r,p={originalEvent:l,target:this._layer};return p.containerPoint=this._map.mouseEventToContainerPoint(l),p.latlng=this._map.containerPointToLatLng(p.containerPoint),this._dragMixinOnMouseDown(p),!1},_simulateMouseMoveEvent:function(r){var l=r.touches?r.touches[0]:r,p={originalEvent:l,target:this._layer};return p.containerPoint=this._map.mouseEventToContainerPoint(l),p.latlng=this._map.containerPointToLatLng(p.containerPoint),this._dragMixinOnMouseMove(p),!1},_simulateMouseUpEvent:function(r){var l={originalEvent:r.touches?r.touches[0]:r,target:this._layer};return r.type.indexOf("touch")===-1&&(l.containerPoint=this._map.mouseEventToContainerPoint(r),l.latlng=this._map.containerPointToLatLng(l.containerPoint)),this._dragMixinOnMouseUp(l),!1},_dragMixinOnMouseDown:function(r){if(!(r.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(r);var l=r._fromLayerSync,p=this._syncLayers("_dragMixinOnMouseDown",r);this._layer instanceof L.Marker&&(!this.options.snappable||l||p?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker&&!(this._layer instanceof L.Circle)&&(!this.options.snappable||l||p?this._layer.pm.options.editable?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options.editable||this._initSnappableMarkersDrag()),this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=r.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)}},_dragMixinOnMouseMove:function(r){this._overwriteEventIfItComesFromMarker(r);var l=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",r),this._dragging||(this._dragging=!0,L.DomUtil.addClass(l,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=r.latlng),this._onLayerDrag(r),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(r){var l=this,p=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",r),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(function(){l._dragging=!1,p&&L.DomUtil.removeClass(p,"leaflet-pm-dragging"),l._fireDragEnd(),l._fireEdit(),l._layerEdited=!0},10),!0)},_onLayerDrag:function(r){var l=r.latlng,p=l.lat-this._tempDragCoord.lat,y=l.lng-this._tempDragCoord.lng,x=function Q(mt){return mt.map(function(ct){if(Array.isArray(ct))return Q(ct);var Mt={lat:ct.lat+p,lng:ct.lng+y};return(ct.alt||ct.alt===0)&&(Mt.alt=ct.alt),Mt})};if(this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable){var B=x([this._layer.getLatLng()]);this._layer.setLatLng(B[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var F=this._layer.getLatLng();this._layer._snapped&&(F=this._layer._orgLatLng);var U=x([F]);this._layer.setLatLng(U[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){var $=x([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds($),this._fireChange(this._layer.getBounds(),"Edit")}else{var Z=x(this._layer.getLatLngs());this._layer.setLatLngs(Z),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=l,r.layer=this._layer,this._fireDrag(r)},addDraggingClass:function(){var r=this._getDOMElem();r&&L.DomUtil.addClass(r,"leaflet-pm-draggable")},removeDraggingClass:function(){var r=this._getDOMElem();r&&L.DomUtil.removeClass(r,"leaflet-pm-draggable")},_getDOMElem:function(){var r=null;return this._layer._path?r=this._layer._path:this._layer._renderer&&this._layer._renderer._container?r=this._layer._renderer._container:this._layer._image?r=this._layer._image:this._layer._icon&&(r=this._layer._icon),r},_overwriteEventIfItComesFromMarker:function(r){r.target.getLatLng&&(!r.target._radius||r.target._radius<=10)&&(r.containerPoint=this._map.mouseEventToContainerPoint(r.originalEvent),r.latlng=this._map.containerPointToLatLng(r.containerPoint))},_syncLayers:function(r,l){var p=this;if(this.enabled())return!1;if(!l._fromLayerSync&&this._layer===l.target&&this.options.syncLayersOnDrag){l._fromLayerSync=!0;var y=[];if(L.Util.isArray(this.options.syncLayersOnDrag))y=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(function(F){F instanceof L.LayerGroup&&(y=y.concat(F.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(var x in this._parentLayerGroup){var B=this._parentLayerGroup[x];B.pm&&(y=B.pm.getLayers(!0))}return L.Util.isArray(y)&&y.length>0&&(y=y.filter(function(F){return!!F.pm}).filter(function(F){return!!F.pm.options.draggable})).forEach(function(F){F!==p._layer&&F.pm[r]&&(F._snapped=!1,F.pm[r](l))}),y.length>0}return!1},_stopDOMImageDrag:function(r){return r.preventDefault(),!1}};function Dn(r,l,p){var y=p.getMaxZoom();if(y===1/0&&(y=p.getZoom()),L.Util.isArray(r)){var x=[];return r.forEach(function(B){x.push(Dn(B,l,p))}),x}return r instanceof L.LatLng?function(B,F,U,$){return U.unproject(F.transform(U.project(B,$)),$)}(r,l,p,y):null}function Ee(r,l){l instanceof L.Layer&&(l=l.getLatLng());var p=r.getMaxZoom();return p===1/0&&(p=r.getZoom()),r.project(l,p)}function mn(r,l){var p=r.getMaxZoom();return p===1/0&&(p=r.getZoom()),r.unproject(l,p)}var Or={_onRotateStart:function(r){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ee(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ee(this._map,r.target.getLatLng()),this._initialRotateLatLng=Pt(this._layer),this._startAngle=this.getAngle();var l=Pt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,l),this._fireRotationStart(this._map,l)},_onRotate:function(r){var l=Ee(this._map,r.target.getLatLng()),p=this._rotationStartPoint,y=this._rotationOriginPoint,x=Math.atan2(l.y-y.y,l.x-y.x)-Math.atan2(p.y-y.y,p.x-y.x);this._layer.setLatLngs(this._rotateLayer(x,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var B=this;(function Z(Q){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ct=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(ct>-1&&mt.push(ct),L.Util.isArray(Q[0]))Q.forEach(function(Rt,qt){return Z(Rt,mt.slice(),qt)});else{var Mt=wt()(B._markers,mt);Q.forEach(function(Rt,qt){Mt[qt].setLatLng(Rt)})}})(this._layer.getLatLngs());var F=Pt(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(x,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var U=180*x/Math.PI,$=(U=U<0?U+360:U)+this._startAngle;this._setAngle($),this._rotationLayer.pm._setAngle($),this._fireRotation(this._rotationLayer,U,F),this._fireRotation(this._map,U,F),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd:function(){var r=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var l=Pt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Pt(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,r,l),this._fireRotationEnd(this._map,r,l),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer:function(r,l,p,y,x){var B=Ee(x,p);return this._matrix=y.clone().rotate(r,B).flip(),Dn(l,this._matrix,x)},_setAngle:function(r){r=r<0?r+360:r,this._angle=r%360},_getRotationCenter:function(){var r=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),l=r.getCenter();return r.removeFrom(this._layer._map),l},enableRotate:function(){this.options.allowRotation?(this.rotateEnabled()&&this.disableRotate(),this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Pt(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(r){var l=this.getAngle(),p=this._layer.getLatLngs(),y=r*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(y,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+r),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(y,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());var x=this.getAngle()-l;x=x<0?x+360:x,this._startAngle=l,this._fireRotation(this._layer,x,p,this._layer),this._fireRotation(this._map||this._layer._map,x,p,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle:function(r){var l=r-this.getAngle();this.rotateLayer(l)},getAngle:function(){return this._angle||0},setInitAngle:function(r){this._setAngle(r)}};const Ar=Or,Be=L.Class.extend({includes:[Qr,R,Ar,Et],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0},setOptions:function(r){L.Util.setOptions(this,r)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(r,l){l==="layerPane"?r.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?r.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(r.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(r,l){var p=l.target,y={layer:this._layer,marker:p,event:l},x="";return r==="move"?x="moveVertexValidation":r==="add"?x="addVertexValidation":r==="remove"&&(x="removeVertexValidation"),this.options[x]&&typeof this.options[x]=="function"&&!this.options[x](y)?(r==="move"&&(p._cancelDragEventChain=p.getLatLng()),!1):(p._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(r){return!r._cancelDragEventChain||(r._latlng=r._cancelDragEventChain,r.update(),!1)},_vertexValidationDragEnd:function(r){return!r._cancelDragEventChain||(r._cancelDragEventChain=null,!1)}});function zn(r){return function(l){if(Array.isArray(l))return Rr(l)}(r)||function(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}(r)||function(l,p){if(l){if(typeof l=="string")return Rr(l,p);var y=Object.prototype.toString.call(l).slice(8,-1);if(y==="Object"&&l.constructor&&(y=l.constructor.name),y==="Map"||y==="Set")return Array.from(l);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return Rr(l,p)}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Rr(r,l){(l==null||l>r.length)&&(l=r.length);for(var p=0,y=new Array(l);p<l;p++)y[p]=r[p];return y}Be.LayerGroup=L.Class.extend({initialize:function(r){var l=this;this._layerGroup=r,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(function(p){return l._initLayer(p)}),this._layerGroup.on("layeradd",L.Util.throttle(function(p){if(!p.layer._pmTempLayer){l._layers=l.getLayers();var y=l._layers.filter(function(x){return!x.pm._parentLayerGroup||!(l._layerGroup._leaflet_id in x.pm._parentLayerGroup)});y.forEach(function(x){l._initLayer(x)}),y.length>0&&l._getMap()&&l._getMap().pm.globalEditModeEnabled()&&l.enabled()&&l.enable(l.getOptions())}},100,this),this),this._layerGroup.on("layerremove",function(p){l._removeLayerFromGroup(p.target)},this),this._layerGroup.on("layerremove",L.Util.throttle(function(p){p.target._pmTempLayer||(l._layers=l.getLayers())},100,this),this)},enable:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];l.length===0&&(this._layers=this.getLayers()),this._options=r,this._layers.forEach(function(p){p instanceof L.LayerGroup?l.indexOf(p._leaflet_id)===-1&&(l.push(p._leaflet_id),p.pm.enable(r,l)):p.pm.enable(r)})},disable:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];r.length===0&&(this._layers=this.getLayers()),this._layers.forEach(function(l){l instanceof L.LayerGroup?r.indexOf(l._leaflet_id)===-1&&(r.push(l._leaflet_id),l.pm.disable(r)):l.pm.disable()})},enabled:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];r.length===0&&(this._layers=this.getLayers());var l=this._layers.find(function(p){return p instanceof L.LayerGroup?r.indexOf(p._leaflet_id)===-1&&(r.push(p._leaflet_id),p.pm.enabled(r)):p.pm.enabled()});return!!l},toggleEdit:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];l.length===0&&(this._layers=this.getLayers()),this._options=r,this._layers.forEach(function(p){p instanceof L.LayerGroup?l.indexOf(p._leaflet_id)===-1&&(l.push(p._leaflet_id),p.pm.toggleEdit(r,l)):p.pm.toggleEdit(r)})},_initLayer:function(r){var l=L.Util.stamp(this._layerGroup);r.pm._parentLayerGroup||(r.pm._parentLayerGroup={}),r.pm._parentLayerGroup[l]=this._layerGroup},_removeLayerFromGroup:function(r){if(r.pm&&r.pm._layerGroup){var l=L.Util.stamp(this._layerGroup);delete r.pm._layerGroup[l]}},dragging:function(){if(this._layers=this.getLayers(),this._layers){var r=this._layers.find(function(l){return l.pm.dragging()});return!!r}return!1},getOptions:function(){return this.options},_getMap:function(){var r;return this._map||((r=this._layers.find(function(l){return!!l._map}))===null||r===void 0?void 0:r._map)||null},getLayers:function(){var r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],l=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],x=[];return r?this._layerGroup.getLayers().forEach(function(B){x.push(B),B instanceof L.LayerGroup&&y.indexOf(B._leaflet_id)===-1&&(y.push(B._leaflet_id),x=x.concat(B.pm.getLayers(!0,!0,!0,y)))}):x=this._layerGroup.getLayers(),p&&(x=x.filter(function(B){return!(B instanceof L.LayerGroup)})),l&&(x=(x=(x=x.filter(function(B){return!!B.pm})).filter(function(B){return!B._pmTempLayer})).filter(function(B){return!L.PM.optIn&&!B.options.pmIgnore||L.PM.optIn&&B.options.pmIgnore===!1})),x},setOptions:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];l.length===0&&(this._layers=this.getLayers()),this.options=r,this._layers.forEach(function(p){p.pm&&(p instanceof L.LayerGroup?l.indexOf(p._leaflet_id)===-1&&(l.push(p._leaflet_id),p.pm.setOptions(r,l)):p.pm.setOptions(r))})}}),Be.Marker=Be.extend({_shape:"Marker",initialize:function(r){this._layer=r,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0};L.Util.setOptions(this,r),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(r){this.enabled()?this.disable():this.enable(r)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(r){var l=r.target;l.remove(),this._fireRemove(l),this._fireRemove(this._map,l)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var r=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,r.off("pm:drag",this._handleSnapping,this),r.on("pm:drag",this._handleSnapping,this),r.off("pm:dragend",this._cleanupSnapping,this),r.on("pm:dragend",this._cleanupSnapping,this),r.off("pm:dragstart",this._unsnap,this),r.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var r=this._layer;r.off("pm:drag",this._handleSnapping,this),r.off("pm:dragend",this._cleanupSnapping,this),r.off("pm:dragstart",this._unsnap,this)}});const ji={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var r=[].concat(zn(this._markerGroup.getLayers()),zn(this.markerCache));this.markerCache=r.filter(function(l,p,y){return y.indexOf(l)===p})},renderLimits:function(r){var l=this;this.markerCache.forEach(function(p){r.includes(p)?l._markerGroup.addLayer(p):l._markerGroup.removeLayer(p)})},applyLimitFilters:function(r){var l=r.latlng,p=l===void 0?{lat:0,lng:0}:l;if(!this._preventRenderMarkers){var y=zn(this._filterClosestMarkers(p));this.renderLimits(y)}},_filterClosestMarkers:function(r){var l=zn(this.markerCache),p=this.options.limitMarkersToCount;return p===-1?l:(l.sort(function(y,x){return y._latlng.distanceTo(r)-x._latlng.distanceTo(r)}),l.filter(function(y,x){return!(p>-1)||x<p}))},_preventRenderMarkers:!1,_preventRenderingMarkers:function(r){this._preventRenderMarkers=!!r}};function ti(r,l){return function(p){if(Array.isArray(p))return p}(r)||function(p,y){var x=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(x!=null){var B,F,U=[],$=!0,Z=!1;try{for(x=x.call(p);!($=(B=x.next()).done)&&(U.push(B.value),!y||U.length!==y);$=!0);}catch(Q){Z=!0,F=Q}finally{try{$||x.return==null||x.return()}finally{if(Z)throw F}}return U}}(r,l)||function(p,y){if(p){if(typeof p=="string")return ei(p,y);var x=Object.prototype.toString.call(p).slice(8,-1);if(x==="Object"&&p.constructor&&(x=p.constructor.name),x==="Map"||x==="Set")return Array.from(p);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return ei(p,y)}}(r,l)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ei(r,l){(l==null||l>r.length)&&(l=r.length);for(var p=0,y=new Array(l);p<l;p++)y[p]=r[p];return y}function Ni(r){return function(l){if(Array.isArray(l))return lr(l)}(r)||function(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}(r)||function(l,p){if(l){if(typeof l=="string")return lr(l,p);var y=Object.prototype.toString.call(l).slice(8,-1);if(y==="Object"&&l.constructor&&(y=l.constructor.name),y==="Map"||y==="Set")return Array.from(l);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return lr(l,p)}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function lr(r,l){(l==null||l>r.length)&&(l=r.length);for(var p=0,y=new Array(l);p<l;p++)y[p]=r[p];return y}Be.Line=Be.extend({includes:[ji],_shape:"Line",initialize:function(r){this._layer=r,this._enabled=!1},enable:function(r){L.Util.setOptions(this,r),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){if(this.enabled()&&!this._dragging){this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var r=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(r,"leaflet-pm-draggable"),this._map.hasLayer(this._layer)&&!this.hasSelfIntersection()||L.DomUtil.removeClass(r,"leaflet-pm-invalid"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(r){return this.enabled()?this.disable():this.enable(r),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers:function(){var r=this,l=this._map,p=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,this._markers=function y(x){if(Array.isArray(x[0]))return x.map(y,r);var B=x.map(r._createMarker,r);return r.options.hideMiddleMarkers!==!0&&x.map(function(F,U){var $=r.isPolygon()?(U+1)%x.length:U+1;return r._createMiddleMarker(B[U],B[$])}),B}(p),this.filterMarkerGroup(),l.addLayer(this._markerGroup)},_createMarker:function(r){var l=new L.Marker(r,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this.options.rotate?(l.on("dragstart",this._onRotateStart,this),l.on("drag",this._onRotate,this),l.on("dragend",this._onRotateEnd,this)):(l.on("click",this._onVertexClick,this),l.on("dragstart",this._onMarkerDragStart,this),l.on("move",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(l),l},_createMiddleMarker:function(r,l){if(!r||!l)return!1;var p=L.PM.Utils.calcMiddleLatLng(this._map,r.getLatLng(),l.getLatLng()),y=this._createMarker(p),x=L.divIcon({className:"marker-icon marker-icon-middle"});return y.setIcon(x),y.leftM=r,y.rightM=l,r._middleMarkerNext=y,l._middleMarkerPrev=y,y.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),y.on("movestart",this._onMiddleMarkerMoveStart,this),y},_onMiddleMarkerClick:function(r){var l=r.target;if(this._vertexValidation("add",r)){var p=L.divIcon({className:"marker-icon"});l.setIcon(p),this._addMarker(l,l.leftM,l.rightM)}},_onMiddleMarkerMoveStart:function(r){var l=r.target;l.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",r)?(l._dragging=!0,this._addMarker(l,l.leftM,l.rightM)):l.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(r){var l=r.target;this._vertexValidationDrag(l)},_onMiddleMarkerMoveEnd:function(r){var l=r.target;if(l.off("move",this._onMiddleMarkerMovePrevent,this),l.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(l)){var p=L.divIcon({className:"marker-icon"});l.setIcon(p),setTimeout(function(){delete l._dragging},100)}},_addMarker:function(r,l,p){r.off("movestart",this._onMiddleMarkerMoveStart,this),r.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var y=r.getLatLng(),x=this._layer._latlngs;delete r.leftM,delete r.rightM;var B=L.PM.Utils.findDeepMarkerIndex(this._markers,l),F=B.indexPath,U=B.index,$=B.parentPath,Z=F.length>1?wt()(x,$):x,Q=F.length>1?wt()(this._markers,$):this._markers;Z.splice(U+1,0,y),Q.splice(U+1,0,r),this._layer.setLatLngs(x),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(l,r),this._createMiddleMarker(r,p)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(r,L.PM.Utils.findDeepMarkerIndex(this._markers,r).indexPath,y),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return he(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(r){var l=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;r?this._flashLayer():(l.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(he(this._layer.toGeoJSON(15)))}else l.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_flashLayer:function(){var r=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(function(){r._layer.setStyle({color:r.cachedColor}),r.isRed=!1},200)},_updateDisabledMarkerStyle:function(r,l){var p=this;r.forEach(function(y){Array.isArray(y)?p._updateDisabledMarkerStyle(y,l):y._icon&&(l&&!p._checkMarkerAllowedToDrag(y)?L.DomUtil.addClass(y._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(y._icon,"vertexmarker-disabled"))})},_removeMarker:function(r){var l=r.target;if(this._vertexValidation("remove",r)){this.options.allowSelfIntersection||(this._coordsBeforeEdit=Pt(this._layer,this._layer.getLatLngs()));var p=this._layer.getLatLngs(),y=L.PM.Utils.findDeepMarkerIndex(this._markers,l),x=y.indexPath,B=y.index,F=y.parentPath;if(x){var U=x.length>1?wt()(p,F):p,$=x.length>1?wt()(this._markers,F):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(U.length<=2||this.isPolygon()&&U.length<=3)){U.splice(B,1),this._layer.setLatLngs(p),this.isPolygon()&&U.length<=2&&U.splice(0,U.length);var Z=!1;if(U.length<=1&&(U.splice(0,U.length),F.length>1&&x.length>1&&(p=Me(p)),this._layer.setLatLngs(p),this._initMarkers(),Z=!0),$t(p)||this._layer.remove(),p=Me(p),this._layer.setLatLngs(p),this._markers=Me(this._markers),!Z&&($=x.length>1?wt()(this._markers,F):this._markers,l._middleMarkerPrev&&this._markerGroup.removeLayer(l._middleMarkerPrev),l._middleMarkerNext&&this._markerGroup.removeLayer(l._middleMarkerNext),this._markerGroup.removeLayer(l),$)){var Q,mt;if(this.isPolygon()?(Q=(B+1)%$.length,mt=(B+($.length-1))%$.length):(mt=B-1<0?void 0:B-1,Q=B+1>=$.length?void 0:B+1),Q!==mt){var ct=$[mt],Mt=$[Q];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(ct,Mt)}$.splice(B,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(l,x),this._fireChange(this._layer.getLatLngs(),"Edit")}else this._flashLayer()}}},updatePolygonCoordsFromMarkerDrag:function(r){var l=this._layer.getLatLngs(),p=r.getLatLng(),y=L.PM.Utils.findDeepMarkerIndex(this._markers,r),x=y.indexPath,B=y.index,F=y.parentPath;(x.length>1?wt()(l,F):l).splice(B,1,p),this._layer.setLatLngs(l)},_getNeighborMarkers:function(r){var l=L.PM.Utils.findDeepMarkerIndex(this._markers,r),p=l.indexPath,y=l.index,x=l.parentPath,B=p.length>1?wt()(this._markers,x):this._markers,F=(y+1)%B.length;return{prevMarker:B[(y+(B.length-1))%B.length],nextMarker:B[F]}},_checkMarkerAllowedToDrag:function(r){var l=this._getNeighborMarkers(r),p=l.prevMarker,y=l.nextMarker,x=L.polyline([p.getLatLng(),r.getLatLng()]),B=L.polyline([r.getLatLng(),y.getLatLng()]),F=Bn(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,U=Bn(this._layer.toGeoJSON(15),B.toGeoJSON(15)).features.length;return r.getLatLng()===this._markers[0][0].getLatLng()?U+=1:r.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(F+=1),!(F<=2&&U<=2)},_onMarkerDragStart:function(r){var l=r.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",r)){var p=L.PM.Utils.findDeepMarkerIndex(this._markers,l).indexPath;this._fireMarkerDragStart(r,p),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Pt(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(l):this._markerAllowedToDrag=null}},_onMarkerDrag:function(r){var l=r.target;if(this._vertexValidationDrag(l)){var p=L.PM.Utils.findDeepMarkerIndex(this._markers,l),y=p.indexPath,x=p.index,B=p.parentPath;if(y){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(l);var F=y.length>1?wt()(this._markers,B):this._markers,U=(x+1)%F.length,$=(x+(F.length-1))%F.length,Z=l.getLatLng(),Q=F[$].getLatLng(),mt=F[U].getLatLng();if(l._middleMarkerNext){var ct=L.PM.Utils.calcMiddleLatLng(this._map,Z,mt);l._middleMarkerNext.setLatLng(ct)}if(l._middleMarkerPrev){var Mt=L.PM.Utils.calcMiddleLatLng(this._map,Z,Q);l._middleMarkerPrev.setLatLng(Mt)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(r,y),this._fireChange(this._layer.getLatLngs(),"Edit")}}},_onMarkerDragEnd:function(r){var l=r.target;if(this._vertexValidationDragEnd(l)){var p=L.PM.Utils.findDeepMarkerIndex(this._markers,l).indexPath,y=this.hasSelfIntersection();y&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(y=!1);var x=!this.options.allowSelfIntersection&&y;if(this._fireMarkerDragEnd(r,p,x),x)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(r,p);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")}},_onVertexClick:function(r){var l=r.target;if(!l._dragging){var p=L.PM.Utils.findDeepMarkerIndex(this._markers,l).indexPath;this._fireVertexClick(r,p)}}}),Be.Polygon=Be.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(r){var l=this._getNeighborMarkers(r),p=l.prevMarker,y=l.nextMarker,x=L.polyline([p.getLatLng(),r.getLatLng()]),B=L.polyline([r.getLatLng(),y.getLatLng()]),F=Bn(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,U=Bn(this._layer.toGeoJSON(15),B.toGeoJSON(15)).features.length;return!(F<=2&&U<=2)}}),Be.Rectangle=Be.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var r=this,l=this._map,p=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,l.addLayer(this._markerGroup),this._markers=[],this._markers[0]=p.map(this._createMarker,this);var y=ti(this._markers,1);this._cornerMarkers=y[0],this._layer.getLatLngs()[0].forEach(function(x,B){var F=r._cornerMarkers.find(function(U){return U._index===B});F&&F.setLatLng(x)})},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(r,l){var p=new L.Marker(r,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(p,"vertexPane"),p._origLatLng=r,p._index=l,p._pmTempLayer=!0,this._markerGroup.addLayer(p),p},_addMarkerEvents:function(){var r=this;this._markers[0].forEach(function(l){l.on("dragstart",r._onMarkerDragStart,r),l.on("drag",r._onMarkerDrag,r),l.on("dragend",r._onMarkerDragEnd,r),r.options.preventMarkerRemoval||l.on("contextmenu",r._removeMarker,r)})},_removeMarker:function(){return null},_onMarkerDragStart:function(r){if(this._vertexValidation("move",r)){var l=r.target,p=this._cornerMarkers;l._oppositeCornerLatLng=p.find(function(y){return y._index===(l._index+2)%4}).getLatLng(),l._snapped=!1,this._fireMarkerDragStart(r)}},_onMarkerDrag:function(r){var l=r.target;this._vertexValidationDrag(l)&&l._index!==void 0&&(this._adjustRectangleForMarkerMove(l),this._fireMarkerDrag(r),this._fireChange(this._layer.getLatLngs(),"Edit"))},_onMarkerDragEnd:function(r){var l=r.target;this._vertexValidationDragEnd(l)&&(this._cornerMarkers.forEach(function(p){delete p._oppositeCornerLatLng}),this._fireMarkerDragEnd(r),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"))},_adjustRectangleForMarkerMove:function(r){L.extend(r._origLatLng,r._latlng);var l=L.PM.Utils._getRotatedRectangle(r.getLatLng(),r._oppositeCornerLatLng,this._angle||0,this._map);this._layer.setLatLngs(l),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var r=this,l=this._layer.getLatLngs()[0];l&&l.length!==4&&l.length>0?(l.forEach(function(p,y){r._cornerMarkers[y].setLatLng(p)}),this._cornerMarkers.slice(l.length).forEach(function(p){p.setLatLng(l[0])})):l&&l.length?this._cornerMarkers.forEach(function(p){p.setLatLng(l[p._index])}):console.error("The layer has no LatLngs")},_findCorners:function(){var r=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(r[0],r[2],this._angle||0,this._map)}}),Be.Circle=Be.extend({_shape:"Circle",initialize:function(r){this._layer=r,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(r){L.Util.setOptions(this,r),this._map=this._layer._map,this.options.allowEditing?(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){if(this.enabled()&&!this._dragging){this._centerMarker.off("dragstart",this._onCircleDragStart,this),this._centerMarker.off("drag",this._onCircleDrag,this),this._centerMarker.off("dragend",this._onCircleDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),this._layer.off("remove",this.disable,this),this._enabled=!1,this._helperLayers.clearLayers();var r=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(r,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(r){this.enabled()?this.disable():this.enable(r)},_initMarkers:function(){var r=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(r);var l=this._layer.getLatLng(),p=this._layer._radius,y=this._getLatLngOnCircle(l,p);this._centerMarker=this._createCenterMarker(l),this._outerMarker=this._createOuterMarker(y),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(r,l){var p=r.getLatLng(),y=l.getLatLng();this._hintline=L.polyline([p,y],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(r){var l=this._createMarker(r);return L.DomUtil.addClass(l._icon,"leaflet-pm-draggable"),l.on("drag",this._moveCircle,this),l.on("dragstart",this._onCircleDragStart,this),l.on("drag",this._onCircleDrag,this),l.on("dragend",this._onCircleDragEnd,this),l},_createOuterMarker:function(r){var l=this._createMarker(r);return l.on("drag",this._resizeCircle,this),l},_createMarker:function(r){var l=new L.Marker(r,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._origLatLng=r,l._pmTempLayer=!0,l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(l),l},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(r){if(!r.target._cancelDragEventChain){var l=r.latlng;this._layer.setLatLng(l);var p=this._layer._radius,y=this._getLatLngOnCircle(l,p);this._outerMarker._latlng=y,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")}},_syncCircleRadius:function(){var r=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),p=this._map.distance(r,l);this.options.minRadiusCircle&&p<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&p>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(p),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var r=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng();this._hintline.setLatLngs([r,l])},_disableSnapping:function(){var r=this;this._markers.forEach(function(l){l.off("move",r._syncHintLine,r),l.off("move",r._syncCircleRadius,r),l.off("drag",r._handleSnapping,r),l.off("dragend",r._cleanupSnapping,r)}),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(r){this._vertexValidation("move",r)&&this._fireMarkerDragStart(r)},_onMarkerDrag:function(r){var l=r.target;this._vertexValidationDrag(l)&&this._fireMarkerDrag(r)},_onMarkerDragEnd:function(r){var l=r.target;this._vertexValidationDragEnd(l)&&(this._fireEdit(),this._layerEdited=!0,this._fireMarkerDragEnd(r))},_onCircleDragStart:function(r){this._vertexValidationDrag(r.target)?(delete this._vertexValidationReset,this._fireDragStart()):this._vertexValidationReset=!0},_onCircleDrag:function(r){this._vertexValidationReset||this._fireDrag(r)},_onCircleDragEnd:function(){this._vertexValidationReset?delete this._vertexValidationReset:this._fireDragEnd()},_updateHiddenPolyCircle:function(){var r=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!r).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!r),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(r,l){var p=this._map.project(r),y=L.point(p.x+l,p.y);return this._map.unproject(y)},_getNewDestinationOfOuterMarker:function(){var r=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),p=this._map.distance(r,l);return this.options.minRadiusCircle&&p<this.options.minRadiusCircle?l=Ft(this._map,r,l,this.options.minRadiusCircle):this.options.maxRadiusCircle&&p>this.options.maxRadiusCircle&&(l=Ft(this._map,r,l,this.options.maxRadiusCircle)),l},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var r=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),p=this._map.distance(r,l);(this.options.minRadiusCircle&&p<this.options.minRadiusCircle||this.options.maxRadiusCircle&&p>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),Be.CircleMarker=Be.extend({_shape:"CircleMarker",initialize:function(r){this._layer=r,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,r),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){this._dragging||(this._helperLayers&&this._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this._map||(this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this)),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this._layer.off("remove",this.disable,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(r){this.enabled()?this.disable():this.enable(r)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var r=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(r);var l=this._layer.getLatLng(),p=this._layer._radius,y=this._getLatLngOnCircle(l,p);this._centerMarker=this._createCenterMarker(l),this._outerMarker=this._createOuterMarker(y),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(r,l){var p=this._map.project(r),y=L.point(p.x+l,p.y);return this._map.unproject(y)},_createHintLine:function(r,l){var p=r.getLatLng(),y=l.getLatLng();this._hintline=L.polyline([p,y],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(r){var l=this._createMarker(r);return this.options.draggable?L.DomUtil.addClass(l._icon,"leaflet-pm-draggable"):l.dragging.disable(),l},_createOuterMarker:function(r){var l=this._createMarker(r);return l.on("drag",this._resizeCircle,this),l},_createMarker:function(r){var l=new L.Marker(r,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._origLatLng=r,l._pmTempLayer=!0,l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(l),l},_moveCircle:function(){var r=this._centerMarker.getLatLng();this._layer.setLatLng(r);var l=this._layer._radius,p=this._getLatLngOnCircle(r,l);this._outerMarker._latlng=p,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers:function(){var r=this._layer.getLatLng(),l=this._layer._radius,p=this._getLatLngOnCircle(r,l);this._outerMarker.setLatLng(p),this._centerMarker.setLatLng(r),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var r=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),p=this._map.project(r).distanceTo(this._map.project(l));this.options.minRadiusCircleMarker&&p<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&p>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(p),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var r=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng();this._hintline.setLatLngs([r,l])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart:function(r){this._vertexValidation("move",r)&&this._fireMarkerDragStart(r)},_onMarkerDrag:function(r){var l=r.target;l instanceof L.Marker&&!this._vertexValidationDrag(l)||this._fireMarkerDrag(r)},_onMarkerDragEnd:function(r){this._map.pm.Draw.CircleMarker._layerIsDragging=!1;var l=r.target;this._vertexValidationDragEnd(l)&&(this.options.editable&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(r))},_initSnappableMarkersDrag:function(){var r=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,r.off("pm:drag",this._handleSnapping,this),r.on("pm:drag",this._handleSnapping,this),r.off("pm:dragend",this._cleanupSnapping,this),r.on("pm:dragend",this._cleanupSnapping,this),r.off("pm:dragstart",this._unsnap,this),r.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var r=this._layer;r.off("pm:drag",this._handleSnapping,this),r.off("pm:dragend",this._cleanupSnapping,this),r.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var r=this._layer._map||this._map;if(r){var l=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),r,this._layer.getLatLng()),p=L.circle(this._layer.getLatLng(),this._layer.options);p.setRadius(l);var y=r&&r.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(p,200,!y).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(p,200,!y),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var r=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),p=this._map.project(r).distanceTo(this._map.project(l));return this.options.minRadiusCircleMarker&&p<this.options.minRadiusCircleMarker?l=Ft(this._map,r,l,L.PM.Utils.pxRadiusToMeterRadius(this.options.minRadiusCircleMarker,this._map,r)):this.options.maxRadiusCircleMarker&&p>this.options.maxRadiusCircleMarker&&(l=Ft(this._map,r,l,L.PM.Utils.pxRadiusToMeterRadius(this.options.maxRadiusCircleMarker,this._map,r))),l},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var r=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),p=this._map.project(r).distanceTo(this._map.project(l));(this.options.minRadiusCircleMarker&&p<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&p>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),Be.ImageOverlay=Be.extend({_shape:"ImageOverlay",initialize:function(r){this._layer=r,this._enabled=!1},toggleEdit:function(r){this.enabled()?this.disable():this.enable(r)},enabled:function(){return this._enabled},enable:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,r),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners:function(){var r=this._layer.getBounds();return[r.getNorthWest(),r.getNorthEast(),r.getSouthEast(),r.getSouthWest()]}}),Be.Text=Be.extend({_shape:"Text",initialize:function(r){this._layer=r,this._enabled=!1},enable:function(r){L.Util.setOptions(this,r),this.textArea&&(this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()):this.disable())},disable:function(){if(this.enabled()){this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");var r=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),r.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1}},enabled:function(){return this._enabled},toggleEdit:function(r){this.enabled()?this.disable():this.enable(r)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers:function(){var r=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,r.off("pm:drag",this._handleSnapping,this),r.on("pm:drag",this._handleSnapping,this),r.off("pm:dragend",this._cleanupSnapping,this),r.on("pm:dragend",this._cleanupSnapping,this),r.off("pm:dragstart",this._unsnap,this),r.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var r=this._layer;r.off("pm:drag",this._handleSnapping,this),r.off("pm:dragend",this._cleanupSnapping,this),r.off("pm:dragstart",this._unsnap,this)},_autoResize:function(){this.textArea.style.height="1px",this.textArea.style.width="1px";var r=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,l=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height="".concat(r,"px"),this.textArea.style.width="".concat(l,"px"),this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur:function(){var r=this;this._disableOnBlurActive=!0,setTimeout(function(){r.enabled()&&L.DomEvent.on(document,"click",r._documentClick,r)},100)},_documentClick:function(r){r.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=this._hasFocus;this._hasFocus=r.type==="focus",!l!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus:function(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus:function(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus:function(){return this._hasFocus},getElement:function(){return this.textArea},setText:function(r){this.textArea.value=r,this._autoResize()},getText:function(){return this.textArea.value},_initTextMarker:function(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){var r,l=this.options.className.split(" ");(r=this.textArea.classList).add.apply(r,Ni(l))}var p=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(p),this._layer.once("add",this._createTextMarker,this)},_createTextMarker:function(){var r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),r===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection:function(r){r.preventDefault()}});var ni=function(r,l,p,y,x,B){this._matrix=[r,l,p,y,x,B]};ni.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},ni.prototype={transform:function(r){return this._transform(r.clone())},_transform:function(r){var l=this._matrix,p=r.x,y=r.y;return r.x=l[0]*p+l[1]*y+l[4],r.y=l[2]*p+l[3]*y+l[5],r},untransform:function(r){var l=this._matrix;return new L.Point((r.x/l[0]-l[4])/l[0],(r.y/l[2]-l[5])/l[2])},clone:function(){var r=this._matrix;return new L.PM.Matrix(r[0],r[1],r[2],r[3],r[4],r[5])},translate:function(r){return r===void 0?new L.Point(this._matrix[4],this._matrix[5]):(typeof r=="number"?(l=r,p=r):(l=r.x,p=r.y),this._add(1,0,0,1,l,p));var l,p},scale:function(r,l){return r===void 0?new L.Point(this._matrix[0],this._matrix[3]):(l=l||L.point(0,0),typeof r=="number"?(p=r,y=r):(p=r.x,y=r.y),this._add(p,0,0,y,l.x,l.y)._add(1,0,0,1,-l.x,-l.y));var p,y},rotate:function(r,l){var p=Math.cos(r),y=Math.sin(r);return l=l||new L.Point(0,0),this._add(p,y,-y,p,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(r,l,p,y,x,B){var F,U=[[],[],[]],$=this._matrix,Z=[[$[0],$[2],$[4]],[$[1],$[3],$[5]],[0,0,1]],Q=[[r,p,x],[l,y,B],[0,0,1]];r&&r instanceof L.PM.Matrix&&(Q=[[($=r._matrix)[0],$[2],$[4]],[$[1],$[3],$[5]],[0,0,1]]);for(var mt=0;mt<3;mt+=1)for(var ct=0;ct<3;ct+=1){F=0;for(var Mt=0;Mt<3;Mt+=1)F+=Z[mt][Mt]*Q[Mt][ct];U[mt][ct]=F}return this._matrix=[U[0][0],U[1][0],U[0][1],U[1][1],U[0][2],U[1][2]],this}};const Fi=ni;var Us={calcMiddleLatLng:function(r,l,p){var y=r.project(l),x=r.project(p);return r.unproject(y._add(x)._divideBy(2))},findLayers:function(r){var l=[];return r.eachLayer(function(p){(p instanceof L.Polyline||p instanceof L.Marker||p instanceof L.Circle||p instanceof L.CircleMarker||p instanceof L.ImageOverlay)&&l.push(p)}),l=(l=(l=l.filter(function(p){return!!p.pm})).filter(function(p){return!p._pmTempLayer})).filter(function(p){return!L.PM.optIn&&!p.options.pmIgnore||L.PM.optIn&&p.options.pmIgnore===!1})},circleToPolygon:function(r){for(var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=r.getLatLng(),x=r.getRadius(),B=le(y,x,l,0,p),F=[],U=0;U<B.length;U+=1){var $=[B[U].lat,B[U].lng];F.push($)}return L.polygon(F,r.options)},disablePopup:function(r){r.getPopup()&&(r._tempPopupCopy=r.getPopup(),r.unbindPopup())},enablePopup:function(r){r._tempPopupCopy&&(r.bindPopup(r._tempPopupCopy),delete r._tempPopupCopy)},_fireEvent:function(r,l,p){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];r.fire(l,p,y);var x=this.getAllParentGroups(r),B=x.groups;B.forEach(function(F){F.fire(l,p,y)})},getAllParentGroups:function(r){var l=[],p=[];return!r._pmLastGroupFetch||!r._pmLastGroupFetch.time||new Date().getTime()-r._pmLastGroupFetch.time>1e3?(function y(x){for(var B in x._eventParents)if(l.indexOf(B)===-1){l.push(B);var F=x._eventParents[B];p.push(F),y(F)}}(r),r._pmLastGroupFetch={time:new Date().getTime(),groups:p,groupIds:l},{groupIds:l,groups:p}):{groups:r._pmLastGroupFetch.groups,groupIds:r._pmLastGroupFetch.groupIds}},createGeodesicPolygon:le,getTranslation:Bt,findDeepCoordIndex:function(r,l){var p,y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],x=function F(U){return function($,Z){var Q=U.concat(Z);if(y){if($.lat&&$.lat===l.lat&&$.lng===l.lng)return p=Q,!0}else if($.lat&&L.latLng($).equals(l))return p=Q,!0;return Array.isArray($)&&$.some(F(Q))}};r.some(x([]));var B={};return p&&(B={indexPath:p,index:p[p.length-1],parentPath:p.slice(0,p.length-1)}),B},findDeepMarkerIndex:function(r,l){var p;r.some(function x(B){return function(F,U){var $=B.concat(U);return F._leaflet_id===l._leaflet_id?(p=$,!0):Array.isArray(F)&&F.some(x($))}}([]));var y={};return p&&(y={indexPath:p,index:p[p.length-1],parentPath:p.slice(0,p.length-1)}),y},_getIndexFromSegment:function(r,l){if(l&&l.length===2){var p=this.findDeepCoordIndex(r,l[0]),y=this.findDeepCoordIndex(r,l[1]),x=Math.max(p.index,y.index);return p.index!==0&&y.index!==0||x===1||(x+=1),{indexA:p,indexB:y,newIndex:x,indexPath:p.indexPath,parentPath:p.parentPath}}return null},_getRotatedRectangle:function(r,l,p,y){var x=Ee(y,r),B=Ee(y,l),F=p*Math.PI/180,U=Math.cos(F),$=Math.sin(F),Z=(B.x-x.x)*U+(B.y-x.y)*$,Q=(B.y-x.y)*U-(B.x-x.x)*$,mt=Z*U+x.x,ct=Z*$+x.y,Mt=-Q*$+x.x,Rt=Q*U+x.y;return[mn(y,x),mn(y,{x:mt,y:ct}),mn(y,B),mn(y,{x:Mt,y:Rt})]},pxRadiusToMeterRadius:function(r,l,p){var y=l.project(p),x=L.point(y.x+r,y.y);return l.distance(l.unproject(x),p)}};const ne=Us;L.PM=L.PM||{version:"2.14.2",Map:ue,Toolbar:xt,Draw:D,Edit:Be,Utils:ne,Matrix:Fi,activeLang:"en",optIn:!1,initialize:function(r){this.addInitHooks(r)},setOptIn:function(r){this.optIn=!!r},addInitHooks:function(){L.Map.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}),L.LayerGroup.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}),L.Marker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}),L.CircleMarker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}),L.Polyline.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}),L.Rectangle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}),L.ImageOverlay.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))})},reInitLayer:function(r){var l=this;r instanceof L.LayerGroup&&r.eachLayer(function(p){l.reInitLayer(p)}),r.pm||L.PM.optIn&&r.options.pmIgnore!==!1||r.options.pmIgnore||(r instanceof L.Map?r.pm=new L.PM.Map(r):r instanceof L.Marker?r.options.textMarker?(r.pm=new L.PM.Edit.Text(r),r.pm._initTextMarker(),r.pm._createTextMarker(!1)):r.pm=new L.PM.Edit.Marker(r):r instanceof L.Circle?r.pm=new L.PM.Edit.Circle(r):r instanceof L.CircleMarker?r.pm=new L.PM.Edit.CircleMarker(r):r instanceof L.Rectangle?r.pm=new L.PM.Edit.Rectangle(r):r instanceof L.Polygon?r.pm=new L.PM.Edit.Polygon(r):r instanceof L.Polyline?r.pm=new L.PM.Edit.Line(r):r instanceof L.LayerGroup?r.pm=new L.PM.Edit.LayerGroup(r):r instanceof L.ImageOverlay&&(r.pm=new L.PM.Edit.ImageOverlay(r)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick:function(r){for(var l,p,y=this._map.mouseEventToLayerPoint(r),x=this._drawFirst;x;x=x.next)(l=x.layer).options.interactive&&l._containsPoint(y)&&(r.type!=="click"&&r.type!=="preclick"||!this._map._draggableMoved(l))&&(p=l);p&&(L.DomEvent.fakeStop(r),this._fireEvent([p],r))}}),L.PM.initialize()},7107:()=>{Array.prototype.findIndex=Array.prototype.findIndex||function(s){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var c=Object(this),i=c.length>>>0,u=arguments[1],d=0;d<i;d++)if(s.call(u,c[d],d,c))return d;return-1},Array.prototype.find=Array.prototype.find||function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var c=Object(this),i=c.length>>>0,u=arguments[1],d=0;d<i;d++){var f=c[d];if(s.call(u,f,d,c))return f}},typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var c=1;c<arguments.length;c++){var i=arguments[c];if(i!=null)for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(s[u]=i[u])}return s}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(s){s.hasOwnProperty("remove")||Object.defineProperty(s,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(s,c){if(this==null)throw new TypeError('"this" is null or not defined');var i=Object(this),u=i.length>>>0;if(u===0)return!1;for(var d,f,m=0|c,_=Math.max(m>=0?m:u-Math.abs(m),0);_<u;){if((d=i[_])===(f=s)||typeof d=="number"&&typeof f=="number"&&isNaN(d)&&isNaN(f))return!0;_++}return!1}})},1787:(s,c,i)=>{var u=i(2582),d=i(4102),f=i(1540),m=i(9705).Z,_=f.featureEach,v=(f.coordEach,d.polygon,d.featureCollection);function M(A){var P=new u(A);return P.insert=function(S){if(S.type!=="Feature")throw new Error("invalid feature");return S.bbox=S.bbox?S.bbox:m(S),u.prototype.insert.call(this,S)},P.load=function(S){var N=[];return Array.isArray(S)?S.forEach(function(C){if(C.type!=="Feature")throw new Error("invalid features");C.bbox=C.bbox?C.bbox:m(C),N.push(C)}):_(S,function(C){if(C.type!=="Feature")throw new Error("invalid features");C.bbox=C.bbox?C.bbox:m(C),N.push(C)}),u.prototype.load.call(this,N)},P.remove=function(S,N){if(S.type!=="Feature")throw new Error("invalid feature");return S.bbox=S.bbox?S.bbox:m(S),u.prototype.remove.call(this,S,N)},P.clear=function(){return u.prototype.clear.call(this)},P.search=function(S){var N=u.prototype.search.call(this,this.toBBox(S));return v(N)},P.collides=function(S){return u.prototype.collides.call(this,this.toBBox(S))},P.all=function(){var S=u.prototype.all.call(this);return v(S)},P.toJSON=function(){return u.prototype.toJSON.call(this)},P.fromJSON=function(S){return u.prototype.fromJSON.call(this,S)},P.toBBox=function(S){var N;if(S.bbox)N=S.bbox;else if(Array.isArray(S)&&S.length===4)N=S;else if(Array.isArray(S)&&S.length===6)N=[S[0],S[1],S[3],S[4]];else if(S.type==="Feature")N=m(S);else{if(S.type!=="FeatureCollection")throw new Error("invalid geojson");N=m(S)}return{minX:N[0],minY:N[1],maxX:N[2],maxY:N[3]}},P}s.exports=M,s.exports.default=M},1989:(s,c,i)=>{var u=i(1789),d=i(401),f=i(7667),m=i(1327),_=i(1866);function v(M){var A=-1,P=M==null?0:M.length;for(this.clear();++A<P;){var S=M[A];this.set(S[0],S[1])}}v.prototype.clear=u,v.prototype.delete=d,v.prototype.get=f,v.prototype.has=m,v.prototype.set=_,s.exports=v},8407:(s,c,i)=>{var u=i(7040),d=i(4125),f=i(2117),m=i(7518),_=i(4705);function v(M){var A=-1,P=M==null?0:M.length;for(this.clear();++A<P;){var S=M[A];this.set(S[0],S[1])}}v.prototype.clear=u,v.prototype.delete=d,v.prototype.get=f,v.prototype.has=m,v.prototype.set=_,s.exports=v},7071:(s,c,i)=>{var u=i(852)(i(5639),"Map");s.exports=u},3369:(s,c,i)=>{var u=i(4785),d=i(1285),f=i(6e3),m=i(9916),_=i(5265);function v(M){var A=-1,P=M==null?0:M.length;for(this.clear();++A<P;){var S=M[A];this.set(S[0],S[1])}}v.prototype.clear=u,v.prototype.delete=d,v.prototype.get=f,v.prototype.has=m,v.prototype.set=_,s.exports=v},6384:(s,c,i)=>{var u=i(8407),d=i(7465),f=i(3779),m=i(7599),_=i(4758),v=i(4309);function M(A){var P=this.__data__=new u(A);this.size=P.size}M.prototype.clear=d,M.prototype.delete=f,M.prototype.get=m,M.prototype.has=_,M.prototype.set=v,s.exports=M},2705:(s,c,i)=>{var u=i(5639).Symbol;s.exports=u},1149:(s,c,i)=>{var u=i(5639).Uint8Array;s.exports=u},6874:s=>{s.exports=function(c,i,u){switch(u.length){case 0:return c.call(i);case 1:return c.call(i,u[0]);case 2:return c.call(i,u[0],u[1]);case 3:return c.call(i,u[0],u[1],u[2])}return c.apply(i,u)}},4636:(s,c,i)=>{var u=i(2545),d=i(5694),f=i(1469),m=i(4144),_=i(5776),v=i(6719),M=Object.prototype.hasOwnProperty;s.exports=function(A,P){var S=f(A),N=!S&&d(A),C=!S&&!N&&m(A),O=!S&&!N&&!C&&v(A),j=S||N||C||O,T=j?u(A.length,String):[],z=T.length;for(var W in A)!P&&!M.call(A,W)||j&&(W=="length"||C&&(W=="offset"||W=="parent")||O&&(W=="buffer"||W=="byteLength"||W=="byteOffset")||_(W,z))||T.push(W);return T}},9932:s=>{s.exports=function(c,i){for(var u=-1,d=c==null?0:c.length,f=Array(d);++u<d;)f[u]=i(c[u],u,c);return f}},6556:(s,c,i)=>{var u=i(9465),d=i(7813);s.exports=function(f,m,_){(_!==void 0&&!d(f[m],_)||_===void 0&&!(m in f))&&u(f,m,_)}},4865:(s,c,i)=>{var u=i(9465),d=i(7813),f=Object.prototype.hasOwnProperty;s.exports=function(m,_,v){var M=m[_];f.call(m,_)&&d(M,v)&&(v!==void 0||_ in m)||u(m,_,v)}},8470:(s,c,i)=>{var u=i(7813);s.exports=function(d,f){for(var m=d.length;m--;)if(u(d[m][0],f))return m;return-1}},9465:(s,c,i)=>{var u=i(8777);s.exports=function(d,f,m){f=="__proto__"&&u?u(d,f,{configurable:!0,enumerable:!0,value:m,writable:!0}):d[f]=m}},3118:(s,c,i)=>{var u=i(3218),d=Object.create,f=function(){function m(){}return function(_){if(!u(_))return{};if(d)return d(_);m.prototype=_;var v=new m;return m.prototype=void 0,v}}();s.exports=f},8483:(s,c,i)=>{var u=i(5063)();s.exports=u},7786:(s,c,i)=>{var u=i(1811),d=i(327);s.exports=function(f,m){for(var _=0,v=(m=u(m,f)).length;f!=null&&_<v;)f=f[d(m[_++])];return _&&_==v?f:void 0}},4239:(s,c,i)=>{var u=i(2705),d=i(9607),f=i(2333),m=u?u.toStringTag:void 0;s.exports=function(_){return _==null?_===void 0?"[object Undefined]":"[object Null]":m&&m in Object(_)?d(_):f(_)}},8565:s=>{var c=Object.prototype.hasOwnProperty;s.exports=function(i,u){return i!=null&&c.call(i,u)}},9454:(s,c,i)=>{var u=i(4239),d=i(7005);s.exports=function(f){return d(f)&&u(f)=="[object Arguments]"}},8458:(s,c,i)=>{var u=i(3560),d=i(5346),f=i(3218),m=i(346),_=/^\[object .+?Constructor\]$/,v=Function.prototype,M=Object.prototype,A=v.toString,P=M.hasOwnProperty,S=RegExp("^"+A.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");s.exports=function(N){return!(!f(N)||d(N))&&(u(N)?S:_).test(m(N))}},8749:(s,c,i)=>{var u=i(4239),d=i(1780),f=i(7005),m={};m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m["[object Arguments]"]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object DataView]"]=m["[object Date]"]=m["[object Error]"]=m["[object Function]"]=m["[object Map]"]=m["[object Number]"]=m["[object Object]"]=m["[object RegExp]"]=m["[object Set]"]=m["[object String]"]=m["[object WeakMap]"]=!1,s.exports=function(_){return f(_)&&d(_.length)&&!!m[u(_)]}},313:(s,c,i)=>{var u=i(3218),d=i(5726),f=i(3498),m=Object.prototype.hasOwnProperty;s.exports=function(_){if(!u(_))return f(_);var v=d(_),M=[];for(var A in _)(A!="constructor"||!v&&m.call(_,A))&&M.push(A);return M}},2980:(s,c,i)=>{var u=i(6384),d=i(6556),f=i(8483),m=i(9783),_=i(3218),v=i(1704),M=i(6390);s.exports=function A(P,S,N,C,O){P!==S&&f(S,function(j,T){if(O||(O=new u),_(j))m(P,S,T,N,A,C,O);else{var z=C?C(M(P,T),j,T+"",P,S,O):void 0;z===void 0&&(z=j),d(P,T,z)}},v)}},9783:(s,c,i)=>{var u=i(6556),d=i(4626),f=i(7133),m=i(278),_=i(8517),v=i(5694),M=i(1469),A=i(9246),P=i(4144),S=i(3560),N=i(3218),C=i(8630),O=i(6719),j=i(6390),T=i(9881);s.exports=function(z,W,ot,J,rt,ut,gt){var at=j(z,ot),bt=j(W,ot),Lt=gt.get(bt);if(Lt)u(z,ot,Lt);else{var Et=ut?ut(at,bt,ot+"",z,W,gt):void 0,Ct=Et===void 0;if(Ct){var Ht=M(bt),wt=!Ht&&P(bt),pe=!Ht&&!wt&&O(bt);Et=bt,Ht||wt||pe?M(at)?Et=at:A(at)?Et=m(at):wt?(Ct=!1,Et=d(bt,!0)):pe?(Ct=!1,Et=f(bt,!0)):Et=[]:C(bt)||v(bt)?(Et=at,v(at)?Et=T(at):N(at)&&!S(at)||(Et=_(bt))):Ct=!1}Ct&&(gt.set(bt,Et),rt(Et,bt,J,ut,gt),gt.delete(bt)),u(z,ot,Et)}}},5976:(s,c,i)=>{var u=i(6557),d=i(5357),f=i(61);s.exports=function(m,_){return f(d(m,_,u),m+"")}},6560:(s,c,i)=>{var u=i(5703),d=i(8777),f=i(6557),m=d?function(_,v){return d(_,"toString",{configurable:!0,enumerable:!1,value:u(v),writable:!0})}:f;s.exports=m},2545:s=>{s.exports=function(c,i){for(var u=-1,d=Array(c);++u<c;)d[u]=i(u);return d}},531:(s,c,i)=>{var u=i(2705),d=i(9932),f=i(1469),m=i(3448),_=u?u.prototype:void 0,v=_?_.toString:void 0;s.exports=function M(A){if(typeof A=="string")return A;if(f(A))return d(A,M)+"";if(m(A))return v?v.call(A):"";var P=A+"";return P=="0"&&1/A==-1/0?"-0":P}},1717:s=>{s.exports=function(c){return function(i){return c(i)}}},1811:(s,c,i)=>{var u=i(1469),d=i(5403),f=i(5514),m=i(9833);s.exports=function(_,v){return u(_)?_:d(_,v)?[_]:f(m(_))}},4318:(s,c,i)=>{var u=i(1149);s.exports=function(d){var f=new d.constructor(d.byteLength);return new u(f).set(new u(d)),f}},4626:(s,c,i)=>{s=i.nmd(s);var u=i(5639),d=c&&!c.nodeType&&c,f=d&&s&&!s.nodeType&&s,m=f&&f.exports===d?u.Buffer:void 0,_=m?m.allocUnsafe:void 0;s.exports=function(v,M){if(M)return v.slice();var A=v.length,P=_?_(A):new v.constructor(A);return v.copy(P),P}},7133:(s,c,i)=>{var u=i(4318);s.exports=function(d,f){var m=f?u(d.buffer):d.buffer;return new d.constructor(m,d.byteOffset,d.length)}},278:s=>{s.exports=function(c,i){var u=-1,d=c.length;for(i||(i=Array(d));++u<d;)i[u]=c[u];return i}},8363:(s,c,i)=>{var u=i(4865),d=i(9465);s.exports=function(f,m,_,v){var M=!_;_||(_={});for(var A=-1,P=m.length;++A<P;){var S=m[A],N=v?v(_[S],f[S],S,_,f):void 0;N===void 0&&(N=f[S]),M?d(_,S,N):u(_,S,N)}return _}},4429:(s,c,i)=>{var u=i(5639)["__core-js_shared__"];s.exports=u},1463:(s,c,i)=>{var u=i(5976),d=i(6612);s.exports=function(f){return u(function(m,_){var v=-1,M=_.length,A=M>1?_[M-1]:void 0,P=M>2?_[2]:void 0;for(A=f.length>3&&typeof A=="function"?(M--,A):void 0,P&&d(_[0],_[1],P)&&(A=M<3?void 0:A,M=1),m=Object(m);++v<M;){var S=_[v];S&&f(m,S,v,A)}return m})}},5063:s=>{s.exports=function(c){return function(i,u,d){for(var f=-1,m=Object(i),_=d(i),v=_.length;v--;){var M=_[c?v:++f];if(u(m[M],M,m)===!1)break}return i}}},8777:(s,c,i)=>{var u=i(852),d=function(){try{var f=u(Object,"defineProperty");return f({},"",{}),f}catch{}}();s.exports=d},1957:(s,c,i)=>{var u=typeof i.g=="object"&&i.g&&i.g.Object===Object&&i.g;s.exports=u},5050:(s,c,i)=>{var u=i(7019);s.exports=function(d,f){var m=d.__data__;return u(f)?m[typeof f=="string"?"string":"hash"]:m.map}},852:(s,c,i)=>{var u=i(8458),d=i(7801);s.exports=function(f,m){var _=d(f,m);return u(_)?_:void 0}},5924:(s,c,i)=>{var u=i(5569)(Object.getPrototypeOf,Object);s.exports=u},9607:(s,c,i)=>{var u=i(2705),d=Object.prototype,f=d.hasOwnProperty,m=d.toString,_=u?u.toStringTag:void 0;s.exports=function(v){var M=f.call(v,_),A=v[_];try{v[_]=void 0;var P=!0}catch{}var S=m.call(v);return P&&(M?v[_]=A:delete v[_]),S}},7801:s=>{s.exports=function(c,i){return c==null?void 0:c[i]}},222:(s,c,i)=>{var u=i(1811),d=i(5694),f=i(1469),m=i(5776),_=i(1780),v=i(327);s.exports=function(M,A,P){for(var S=-1,N=(A=u(A,M)).length,C=!1;++S<N;){var O=v(A[S]);if(!(C=M!=null&&P(M,O)))break;M=M[O]}return C||++S!=N?C:!!(N=M==null?0:M.length)&&_(N)&&m(O,N)&&(f(M)||d(M))}},1789:(s,c,i)=>{var u=i(4536);s.exports=function(){this.__data__=u?u(null):{},this.size=0}},401:s=>{s.exports=function(c){var i=this.has(c)&&delete this.__data__[c];return this.size-=i?1:0,i}},7667:(s,c,i)=>{var u=i(4536),d=Object.prototype.hasOwnProperty;s.exports=function(f){var m=this.__data__;if(u){var _=m[f];return _==="__lodash_hash_undefined__"?void 0:_}return d.call(m,f)?m[f]:void 0}},1327:(s,c,i)=>{var u=i(4536),d=Object.prototype.hasOwnProperty;s.exports=function(f){var m=this.__data__;return u?m[f]!==void 0:d.call(m,f)}},1866:(s,c,i)=>{var u=i(4536);s.exports=function(d,f){var m=this.__data__;return this.size+=this.has(d)?0:1,m[d]=u&&f===void 0?"__lodash_hash_undefined__":f,this}},8517:(s,c,i)=>{var u=i(3118),d=i(5924),f=i(5726);s.exports=function(m){return typeof m.constructor!="function"||f(m)?{}:u(d(m))}},5776:s=>{var c=/^(?:0|[1-9]\d*)$/;s.exports=function(i,u){var d=typeof i;return!!(u=u??9007199254740991)&&(d=="number"||d!="symbol"&&c.test(i))&&i>-1&&i%1==0&&i<u}},6612:(s,c,i)=>{var u=i(7813),d=i(8612),f=i(5776),m=i(3218);s.exports=function(_,v,M){if(!m(M))return!1;var A=typeof v;return!!(A=="number"?d(M)&&f(v,M.length):A=="string"&&v in M)&&u(M[v],_)}},5403:(s,c,i)=>{var u=i(1469),d=i(3448),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/;s.exports=function(_,v){if(u(_))return!1;var M=typeof _;return!(M!="number"&&M!="symbol"&&M!="boolean"&&_!=null&&!d(_))||m.test(_)||!f.test(_)||v!=null&&_ in Object(v)}},7019:s=>{s.exports=function(c){var i=typeof c;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?c!=="__proto__":c===null}},5346:(s,c,i)=>{var u,d=i(4429),f=(u=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"";s.exports=function(m){return!!f&&f in m}},5726:s=>{var c=Object.prototype;s.exports=function(i){var u=i&&i.constructor;return i===(typeof u=="function"&&u.prototype||c)}},7040:s=>{s.exports=function(){this.__data__=[],this.size=0}},4125:(s,c,i)=>{var u=i(8470),d=Array.prototype.splice;s.exports=function(f){var m=this.__data__,_=u(m,f);return!(_<0)&&(_==m.length-1?m.pop():d.call(m,_,1),--this.size,!0)}},2117:(s,c,i)=>{var u=i(8470);s.exports=function(d){var f=this.__data__,m=u(f,d);return m<0?void 0:f[m][1]}},7518:(s,c,i)=>{var u=i(8470);s.exports=function(d){return u(this.__data__,d)>-1}},4705:(s,c,i)=>{var u=i(8470);s.exports=function(d,f){var m=this.__data__,_=u(m,d);return _<0?(++this.size,m.push([d,f])):m[_][1]=f,this}},4785:(s,c,i)=>{var u=i(1989),d=i(8407),f=i(7071);s.exports=function(){this.size=0,this.__data__={hash:new u,map:new(f||d),string:new u}}},1285:(s,c,i)=>{var u=i(5050);s.exports=function(d){var f=u(this,d).delete(d);return this.size-=f?1:0,f}},6e3:(s,c,i)=>{var u=i(5050);s.exports=function(d){return u(this,d).get(d)}},9916:(s,c,i)=>{var u=i(5050);s.exports=function(d){return u(this,d).has(d)}},5265:(s,c,i)=>{var u=i(5050);s.exports=function(d,f){var m=u(this,d),_=m.size;return m.set(d,f),this.size+=m.size==_?0:1,this}},4523:(s,c,i)=>{var u=i(8306);s.exports=function(d){var f=u(d,function(_){return m.size===500&&m.clear(),_}),m=f.cache;return f}},4536:(s,c,i)=>{var u=i(852)(Object,"create");s.exports=u},3498:s=>{s.exports=function(c){var i=[];if(c!=null)for(var u in Object(c))i.push(u);return i}},1167:(s,c,i)=>{s=i.nmd(s);var u=i(1957),d=c&&!c.nodeType&&c,f=d&&s&&!s.nodeType&&s,m=f&&f.exports===d&&u.process,_=function(){try{var v=f&&f.require&&f.require("util").types;return v||m&&m.binding&&m.binding("util")}catch{}}();s.exports=_},2333:s=>{var c=Object.prototype.toString;s.exports=function(i){return c.call(i)}},5569:s=>{s.exports=function(c,i){return function(u){return c(i(u))}}},5357:(s,c,i)=>{var u=i(6874),d=Math.max;s.exports=function(f,m,_){return m=d(m===void 0?f.length-1:m,0),function(){for(var v=arguments,M=-1,A=d(v.length-m,0),P=Array(A);++M<A;)P[M]=v[m+M];M=-1;for(var S=Array(m+1);++M<m;)S[M]=v[M];return S[m]=_(P),u(f,this,S)}}},5639:(s,c,i)=>{var u=i(1957),d=typeof self=="object"&&self&&self.Object===Object&&self,f=u||d||Function("return this")();s.exports=f},6390:s=>{s.exports=function(c,i){if((i!=="constructor"||typeof c[i]!="function")&&i!="__proto__")return c[i]}},61:(s,c,i)=>{var u=i(6560),d=i(1275)(u);s.exports=d},1275:s=>{var c=Date.now;s.exports=function(i){var u=0,d=0;return function(){var f=c(),m=16-(f-d);if(d=f,m>0){if(++u>=800)return arguments[0]}else u=0;return i.apply(void 0,arguments)}}},7465:(s,c,i)=>{var u=i(8407);s.exports=function(){this.__data__=new u,this.size=0}},3779:s=>{s.exports=function(c){var i=this.__data__,u=i.delete(c);return this.size=i.size,u}},7599:s=>{s.exports=function(c){return this.__data__.get(c)}},4758:s=>{s.exports=function(c){return this.__data__.has(c)}},4309:(s,c,i)=>{var u=i(8407),d=i(7071),f=i(3369);s.exports=function(m,_){var v=this.__data__;if(v instanceof u){var M=v.__data__;if(!d||M.length<199)return M.push([m,_]),this.size=++v.size,this;v=this.__data__=new f(M)}return v.set(m,_),this.size=v.size,this}},5514:(s,c,i)=>{var u=i(4523),d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,m=u(function(_){var v=[];return _.charCodeAt(0)===46&&v.push(""),_.replace(d,function(M,A,P,S){v.push(P?S.replace(f,"$1"):A||M)}),v});s.exports=m},327:(s,c,i)=>{var u=i(3448);s.exports=function(d){if(typeof d=="string"||u(d))return d;var f=d+"";return f=="0"&&1/d==-1/0?"-0":f}},346:s=>{var c=Function.prototype.toString;s.exports=function(i){if(i!=null){try{return c.call(i)}catch{}try{return i+""}catch{}}return""}},5703:s=>{s.exports=function(c){return function(){return c}}},7813:s=>{s.exports=function(c,i){return c===i||c!=c&&i!=i}},7361:(s,c,i)=>{var u=i(7786);s.exports=function(d,f,m){var _=d==null?void 0:u(d,f);return _===void 0?m:_}},8721:(s,c,i)=>{var u=i(8565),d=i(222);s.exports=function(f,m){return f!=null&&d(f,m,u)}},6557:s=>{s.exports=function(c){return c}},5694:(s,c,i)=>{var u=i(9454),d=i(7005),f=Object.prototype,m=f.hasOwnProperty,_=f.propertyIsEnumerable,v=u(function(){return arguments}())?u:function(M){return d(M)&&m.call(M,"callee")&&!_.call(M,"callee")};s.exports=v},1469:s=>{var c=Array.isArray;s.exports=c},8612:(s,c,i)=>{var u=i(3560),d=i(1780);s.exports=function(f){return f!=null&&d(f.length)&&!u(f)}},9246:(s,c,i)=>{var u=i(8612),d=i(7005);s.exports=function(f){return d(f)&&u(f)}},4144:(s,c,i)=>{s=i.nmd(s);var u=i(5639),d=i(5062),f=c&&!c.nodeType&&c,m=f&&s&&!s.nodeType&&s,_=m&&m.exports===f?u.Buffer:void 0,v=(_?_.isBuffer:void 0)||d;s.exports=v},3560:(s,c,i)=>{var u=i(4239),d=i(3218);s.exports=function(f){if(!d(f))return!1;var m=u(f);return m=="[object Function]"||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"}},1780:s=>{s.exports=function(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=9007199254740991}},3218:s=>{s.exports=function(c){var i=typeof c;return c!=null&&(i=="object"||i=="function")}},7005:s=>{s.exports=function(c){return c!=null&&typeof c=="object"}},8630:(s,c,i)=>{var u=i(4239),d=i(5924),f=i(7005),m=Function.prototype,_=Object.prototype,v=m.toString,M=_.hasOwnProperty,A=v.call(Object);s.exports=function(P){if(!f(P)||u(P)!="[object Object]")return!1;var S=d(P);if(S===null)return!0;var N=M.call(S,"constructor")&&S.constructor;return typeof N=="function"&&N instanceof N&&v.call(N)==A}},3448:(s,c,i)=>{var u=i(4239),d=i(7005);s.exports=function(f){return typeof f=="symbol"||d(f)&&u(f)=="[object Symbol]"}},6719:(s,c,i)=>{var u=i(8749),d=i(1717),f=i(1167),m=f&&f.isTypedArray,_=m?d(m):u;s.exports=_},1704:(s,c,i)=>{var u=i(4636),d=i(313),f=i(8612);s.exports=function(m){return f(m)?u(m,!0):d(m)}},8306:(s,c,i)=>{var u=i(3369);function d(f,m){if(typeof f!="function"||m!=null&&typeof m!="function")throw new TypeError("Expected a function");var _=function(){var v=arguments,M=m?m.apply(this,v):v[0],A=_.cache;if(A.has(M))return A.get(M);var P=f.apply(this,v);return _.cache=A.set(M,P)||A,P};return _.cache=new(d.Cache||u),_}d.Cache=u,s.exports=d},2492:(s,c,i)=>{var u=i(2980),d=i(1463)(function(f,m,_){u(f,m,_)});s.exports=d},5062:s=>{s.exports=function(){return!1}},9881:(s,c,i)=>{var u=i(8363),d=i(1704);s.exports=function(f){return u(f,d(f))}},9833:(s,c,i)=>{var u=i(531);s.exports=function(d){return d==null?"":u(d)}},2676:function(s){s.exports=function(){function c(I,w){if(!(I instanceof w))throw new TypeError("Cannot call a class as a function")}function i(I,w){for(var k=0;k<w.length;k++){var R=w[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(I,R.key,R)}}function u(I,w,k){return w&&i(I.prototype,w),k&&i(I,k),I}var d=function(){function I(w,k){this.next=null,this.key=w,this.data=k,this.left=null,this.right=null}return I}();function f(I,w){return I>w?1:I<w?-1:0}function m(I,w,k){for(var R=new d(null,null),D=R,V=R;;){var et=k(I,w.key);if(et<0){if(w.left===null)break;if(k(I,w.left.key)<0){var it=w.left;if(w.left=it.right,it.right=w,(w=it).left===null)break}V.left=w,V=w,w=w.left}else{if(!(et>0)||w.right===null||k(I,w.right.key)>0&&(it=w.right,w.right=it.left,it.left=w,(w=it).right===null))break;D.right=w,D=w,w=w.right}}return D.right=w.left,V.left=w.right,w.left=R.right,w.right=R.left,w}function _(I,w,k,R){var D=new d(I,w);if(k===null)return D.left=D.right=null,D;var V=R(I,(k=m(I,k,R)).key);return V<0?(D.left=k.left,D.right=k,k.left=null):V>=0&&(D.right=k.right,D.left=k,k.right=null),D}function v(I,w,k){var R=null,D=null;if(w){var V=k((w=m(I,w,k)).key,I);V===0?(R=w.left,D=w.right):V<0?(D=w.right,w.right=null,R=w):(R=w.left,w.left=null,D=w)}return{left:R,right:D}}function M(I,w,k){return w===null?I:(I===null||((w=m(I.key,w,k)).left=I),w)}function A(I,w,k,R,D){if(I){R(w+(k?" ":" ")+D(I)+`
`);var V=w+(k?"    ":"   ");I.left&&A(I.left,V,!1,R,D),I.right&&A(I.right,V,!0,R,D)}}var P=function(){function I(w){w===void 0&&(w=f),this._root=null,this._size=0,this._comparator=w}return I.prototype.insert=function(w,k){return this._size++,this._root=_(w,k,this._root,this._comparator)},I.prototype.add=function(w,k){var R=new d(w,k);this._root===null&&(R.left=R.right=null,this._size++,this._root=R);var D=this._comparator,V=m(w,this._root,D),et=D(w,V.key);return et===0?this._root=V:(et<0?(R.left=V.left,R.right=V,V.left=null):et>0&&(R.right=V.right,R.left=V,V.right=null),this._size++,this._root=R),this._root},I.prototype.remove=function(w){this._root=this._remove(w,this._root,this._comparator)},I.prototype._remove=function(w,k,R){var D;return k===null?null:R(w,(k=m(w,k,R)).key)===0?(k.left===null?D=k.right:(D=m(w,k.left,R)).right=k.right,this._size--,D):k},I.prototype.pop=function(){var w=this._root;if(w){for(;w.left;)w=w.left;return this._root=m(w.key,this._root,this._comparator),this._root=this._remove(w.key,this._root,this._comparator),{key:w.key,data:w.data}}return null},I.prototype.findStatic=function(w){for(var k=this._root,R=this._comparator;k;){var D=R(w,k.key);if(D===0)return k;k=D<0?k.left:k.right}return null},I.prototype.find=function(w){return this._root&&(this._root=m(w,this._root,this._comparator),this._comparator(w,this._root.key)!==0)?null:this._root},I.prototype.contains=function(w){for(var k=this._root,R=this._comparator;k;){var D=R(w,k.key);if(D===0)return!0;k=D<0?k.left:k.right}return!1},I.prototype.forEach=function(w,k){for(var R=this._root,D=[],V=!1;!V;)R!==null?(D.push(R),R=R.left):D.length!==0?(R=D.pop(),w.call(k,R),R=R.right):V=!0;return this},I.prototype.range=function(w,k,R,D){for(var V=[],et=this._comparator,it=this._root;V.length!==0||it;)if(it)V.push(it),it=it.left;else{if(et((it=V.pop()).key,k)>0)break;if(et(it.key,w)>=0&&R.call(D,it))return this;it=it.right}return this},I.prototype.keys=function(){var w=[];return this.forEach(function(k){var R=k.key;return w.push(R)}),w},I.prototype.values=function(){var w=[];return this.forEach(function(k){var R=k.data;return w.push(R)}),w},I.prototype.min=function(){return this._root?this.minNode(this._root).key:null},I.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},I.prototype.minNode=function(w){if(w===void 0&&(w=this._root),w)for(;w.left;)w=w.left;return w},I.prototype.maxNode=function(w){if(w===void 0&&(w=this._root),w)for(;w.right;)w=w.right;return w},I.prototype.at=function(w){for(var k=this._root,R=!1,D=0,V=[];!R;)if(k)V.push(k),k=k.left;else if(V.length>0){if(k=V.pop(),D===w)return k;D++,k=k.right}else R=!0;return null},I.prototype.next=function(w){var k=this._root,R=null;if(w.right){for(R=w.right;R.left;)R=R.left;return R}for(var D=this._comparator;k;){var V=D(w.key,k.key);if(V===0)break;V<0?(R=k,k=k.left):k=k.right}return R},I.prototype.prev=function(w){var k=this._root,R=null;if(w.left!==null){for(R=w.left;R.right;)R=R.right;return R}for(var D=this._comparator;k;){var V=D(w.key,k.key);if(V===0)break;V<0?k=k.left:(R=k,k=k.right)}return R},I.prototype.clear=function(){return this._root=null,this._size=0,this},I.prototype.toList=function(){return C(this._root)},I.prototype.load=function(w,k,R){k===void 0&&(k=[]),R===void 0&&(R=!1);var D=w.length,V=this._comparator;if(R&&T(w,k,0,D-1,V),this._root===null)this._root=S(w,k,0,D),this._size=D;else{var et=j(this.toList(),N(w,k),V);D=this._size+D,this._root=O({head:et},0,D)}return this},I.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(I.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),I.prototype.toString=function(w){w===void 0&&(w=function(R){return String(R.key)});var k=[];return A(this._root,"",!0,function(R){return k.push(R)},w),k.join("")},I.prototype.update=function(w,k,R){var D=this._comparator,V=v(w,this._root,D),et=V.left,it=V.right;D(w,k)<0?it=_(k,R,it,D):et=_(k,R,et,D),this._root=M(et,it,D)},I.prototype.split=function(w){return v(w,this._root,this._comparator)},I}();function S(I,w,k,R){var D=R-k;if(D>0){var V=k+Math.floor(D/2),et=I[V],it=w[V],vt=new d(et,it);return vt.left=S(I,w,k,V),vt.right=S(I,w,V+1,R),vt}return null}function N(I,w){for(var k=new d(null,null),R=k,D=0;D<I.length;D++)R=R.next=new d(I[D],w[D]);return R.next=null,k.next}function C(I){for(var w=I,k=[],R=!1,D=new d(null,null),V=D;!R;)w?(k.push(w),w=w.left):k.length>0?w=(w=V=V.next=k.pop()).right:R=!0;return V.next=null,D.next}function O(I,w,k){var R=k-w;if(R>0){var D=w+Math.floor(R/2),V=O(I,w,D),et=I.head;return et.left=V,I.head=I.head.next,et.right=O(I,D+1,k),et}return null}function j(I,w,k){for(var R=new d(null,null),D=R,V=I,et=w;V!==null&&et!==null;)k(V.key,et.key)<0?(D.next=V,V=V.next):(D.next=et,et=et.next),D=D.next;return V!==null?D.next=V:et!==null&&(D.next=et),R.next}function T(I,w,k,R,D){if(!(k>=R)){for(var V=I[k+R>>1],et=k-1,it=R+1;;){do et++;while(D(I[et],V)<0);do it--;while(D(I[it],V)>0);if(et>=it)break;var vt=I[et];I[et]=I[it],I[it]=vt,vt=w[et],w[et]=w[it],w[it]=vt}T(I,w,k,it,D),T(I,w,it+1,R,D)}}var z=function(I,w){return I.ll.x<=w.x&&w.x<=I.ur.x&&I.ll.y<=w.y&&w.y<=I.ur.y},W=function(I,w){if(w.ur.x<I.ll.x||I.ur.x<w.ll.x||w.ur.y<I.ll.y||I.ur.y<w.ll.y)return null;var k=I.ll.x<w.ll.x?w.ll.x:I.ll.x,R=I.ur.x<w.ur.x?I.ur.x:w.ur.x;return{ll:{x:k,y:I.ll.y<w.ll.y?w.ll.y:I.ll.y},ur:{x:R,y:I.ur.y<w.ur.y?I.ur.y:w.ur.y}}},ot=Number.EPSILON;ot===void 0&&(ot=Math.pow(2,-52));var J=ot*ot,rt=function(I,w){if(-ot<I&&I<ot&&-ot<w&&w<ot)return 0;var k=I-w;return k*k<J*I*w?0:I<w?-1:1},ut=function(){function I(){c(this,I),this.reset()}return u(I,[{key:"reset",value:function(){this.xRounder=new gt,this.yRounder=new gt}},{key:"round",value:function(w,k){return{x:this.xRounder.round(w),y:this.yRounder.round(k)}}}]),I}(),gt=function(){function I(){c(this,I),this.tree=new P,this.round(0)}return u(I,[{key:"round",value:function(w){var k=this.tree.add(w),R=this.tree.prev(k);if(R!==null&&rt(k.key,R.key)===0)return this.tree.remove(w),R.key;var D=this.tree.next(k);return D!==null&&rt(k.key,D.key)===0?(this.tree.remove(w),D.key):w}}]),I}(),at=new ut,bt=function(I,w){return I.x*w.y-I.y*w.x},Lt=function(I,w){return I.x*w.x+I.y*w.y},Et=function(I,w,k){var R={x:w.x-I.x,y:w.y-I.y},D={x:k.x-I.x,y:k.y-I.y},V=bt(R,D);return rt(V,0)},Ct=function(I){return Math.sqrt(Lt(I,I))},Ht=function(I,w,k){var R={x:w.x-I.x,y:w.y-I.y},D={x:k.x-I.x,y:k.y-I.y};return bt(D,R)/Ct(D)/Ct(R)},wt=function(I,w,k){var R={x:w.x-I.x,y:w.y-I.y},D={x:k.x-I.x,y:k.y-I.y};return Lt(D,R)/Ct(D)/Ct(R)},pe=function(I,w,k){return w.y===0?null:{x:I.x+w.x/w.y*(k-I.y),y:k}},zt=function(I,w,k){return w.x===0?null:{x:k,y:I.y+w.y/w.x*(k-I.x)}},Bt=function(I,w,k,R){if(w.x===0)return zt(k,R,I.x);if(R.x===0)return zt(I,w,k.x);if(w.y===0)return pe(k,R,I.y);if(R.y===0)return pe(I,w,k.y);var D=bt(w,R);if(D==0)return null;var V={x:k.x-I.x,y:k.y-I.y},et=bt(V,w)/D,it=bt(V,R)/D;return{x:(I.x+it*w.x+(k.x+et*R.x))/2,y:(I.y+it*w.y+(k.y+et*R.y))/2}},$t=function(){function I(w,k){c(this,I),w.events===void 0?w.events=[this]:w.events.push(this),this.point=w,this.isLeft=k}return u(I,null,[{key:"compare",value:function(w,k){var R=I.comparePoints(w.point,k.point);return R!==0?R:(w.point!==k.point&&w.link(k),w.isLeft!==k.isLeft?w.isLeft?1:-1:fe.compare(w.segment,k.segment))}},{key:"comparePoints",value:function(w,k){return w.x<k.x?-1:w.x>k.x?1:w.y<k.y?-1:w.y>k.y?1:0}}]),u(I,[{key:"link",value:function(w){if(w.point===this.point)throw new Error("Tried to link already linked events");for(var k=w.point.events,R=0,D=k.length;R<D;R++){var V=k[R];this.point.events.push(V),V.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var w=this.point.events.length,k=0;k<w;k++){var R=this.point.events[k];if(R.segment.consumedBy===void 0)for(var D=k+1;D<w;D++){var V=this.point.events[D];V.consumedBy===void 0&&R.otherSE.point.events===V.otherSE.point.events&&R.segment.consume(V.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var w=[],k=0,R=this.point.events.length;k<R;k++){var D=this.point.events[k];D!==this&&!D.segment.ringOut&&D.segment.isInResult()&&w.push(D)}return w}},{key:"getLeftmostComparator",value:function(w){var k=this,R=new Map,D=function(V){var et=V.otherSE;R.set(V,{sine:Ht(k.point,w.point,et.point),cosine:wt(k.point,w.point,et.point)})};return function(V,et){R.has(V)||D(V),R.has(et)||D(et);var it=R.get(V),vt=it.sine,Ot=it.cosine,Nt=R.get(et),Jt=Nt.sine,ee=Nt.cosine;return vt>=0&&Jt>=0?Ot<ee?1:Ot>ee?-1:0:vt<0&&Jt<0?Ot<ee?-1:Ot>ee?1:0:Jt<vt?-1:Jt>vt?1:0}}}]),I}(),Me=0,fe=function(){function I(w,k,R,D){c(this,I),this.id=++Me,this.leftSE=w,w.segment=this,w.otherSE=k,this.rightSE=k,k.segment=this,k.otherSE=w,this.rings=R,this.windings=D}return u(I,null,[{key:"compare",value:function(w,k){var R=w.leftSE.point.x,D=k.leftSE.point.x,V=w.rightSE.point.x,et=k.rightSE.point.x;if(et<R)return 1;if(V<D)return-1;var it=w.leftSE.point.y,vt=k.leftSE.point.y,Ot=w.rightSE.point.y,Nt=k.rightSE.point.y;if(R<D){if(vt<it&&vt<Ot)return 1;if(vt>it&&vt>Ot)return-1;var Jt=w.comparePoint(k.leftSE.point);if(Jt<0)return 1;if(Jt>0)return-1;var ee=k.comparePoint(w.rightSE.point);return ee!==0?ee:-1}if(R>D){if(it<vt&&it<Nt)return-1;if(it>vt&&it>Nt)return 1;var be=k.comparePoint(w.leftSE.point);if(be!==0)return be;var Xt=w.comparePoint(k.rightSE.point);return Xt<0?1:Xt>0?-1:1}if(it<vt)return-1;if(it>vt)return 1;if(V<et){var ve=k.comparePoint(w.rightSE.point);if(ve!==0)return ve}if(V>et){var he=w.comparePoint(k.rightSE.point);if(he<0)return 1;if(he>0)return-1}if(V!==et){var we=Ot-it,Ae=V-R,Ze=Nt-vt,qe=et-D;if(we>Ae&&Ze<qe)return 1;if(we<Ae&&Ze>qe)return-1}return V>et?1:V<et||Ot<Nt?-1:Ot>Nt?1:w.id<k.id?-1:w.id>k.id?1:0}}]),u(I,[{key:"replaceRightSE",value:function(w){this.rightSE=w,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var w=this.leftSE.point.y,k=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:w<k?w:k},ur:{x:this.rightSE.point.x,y:w>k?w:k}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(w){return w.x===this.leftSE.point.x&&w.y===this.leftSE.point.y||w.x===this.rightSE.point.x&&w.y===this.rightSE.point.y}},{key:"comparePoint",value:function(w){if(this.isAnEndpoint(w))return 0;var k=this.leftSE.point,R=this.rightSE.point,D=this.vector();if(k.x===R.x)return w.x===k.x?0:w.x<k.x?1:-1;var V=(w.y-k.y)/D.y,et=k.x+V*D.x;if(w.x===et)return 0;var it=(w.x-k.x)/D.x,vt=k.y+it*D.y;return w.y===vt?0:w.y<vt?-1:1}},{key:"getIntersection",value:function(w){var k=this.bbox(),R=w.bbox(),D=W(k,R);if(D===null)return null;var V=this.leftSE.point,et=this.rightSE.point,it=w.leftSE.point,vt=w.rightSE.point,Ot=z(k,it)&&this.comparePoint(it)===0,Nt=z(R,V)&&w.comparePoint(V)===0,Jt=z(k,vt)&&this.comparePoint(vt)===0,ee=z(R,et)&&w.comparePoint(et)===0;if(Nt&&Ot)return ee&&!Jt?et:!ee&&Jt?vt:null;if(Nt)return Jt&&V.x===vt.x&&V.y===vt.y?null:V;if(Ot)return ee&&et.x===it.x&&et.y===it.y?null:it;if(ee&&Jt)return null;if(ee)return et;if(Jt)return vt;var be=Bt(V,this.vector(),it,w.vector());return be===null?null:z(D,be)?at.round(be.x,be.y):null}},{key:"split",value:function(w){var k=[],R=w.events!==void 0,D=new $t(w,!0),V=new $t(w,!1),et=this.rightSE;this.replaceRightSE(V),k.push(V),k.push(D);var it=new I(D,et,this.rings.slice(),this.windings.slice());return $t.comparePoints(it.leftSE.point,it.rightSE.point)>0&&it.swapEvents(),$t.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),R&&(D.checkForConsuming(),V.checkForConsuming()),k}},{key:"swapEvents",value:function(){var w=this.rightSE;this.rightSE=this.leftSE,this.leftSE=w,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var k=0,R=this.windings.length;k<R;k++)this.windings[k]*=-1}},{key:"consume",value:function(w){for(var k=this,R=w;k.consumedBy;)k=k.consumedBy;for(;R.consumedBy;)R=R.consumedBy;var D=I.compare(k,R);if(D!==0){if(D>0){var V=k;k=R,R=V}if(k.prev===R){var et=k;k=R,R=et}for(var it=0,vt=R.rings.length;it<vt;it++){var Ot=R.rings[it],Nt=R.windings[it],Jt=k.rings.indexOf(Ot);Jt===-1?(k.rings.push(Ot),k.windings.push(Nt)):k.windings[Jt]+=Nt}R.rings=null,R.windings=null,R.consumedBy=k,R.leftSE.consumedBy=k.leftSE,R.rightSE.consumedBy=k.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var w=this.prev.consumedBy||this.prev;this._beforeState=w.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var w=this.beforeState();this._afterState={rings:w.rings.slice(0),windings:w.windings.slice(0),multiPolys:[]};for(var k=this._afterState.rings,R=this._afterState.windings,D=this._afterState.multiPolys,V=0,et=this.rings.length;V<et;V++){var it=this.rings[V],vt=this.windings[V],Ot=k.indexOf(it);Ot===-1?(k.push(it),R.push(vt)):R[Ot]+=vt}for(var Nt=[],Jt=[],ee=0,be=k.length;ee<be;ee++)if(R[ee]!==0){var Xt=k[ee],ve=Xt.poly;if(Jt.indexOf(ve)===-1)if(Xt.isExterior)Nt.push(ve);else{Jt.indexOf(ve)===-1&&Jt.push(ve);var he=Nt.indexOf(Xt.poly);he!==-1&&Nt.splice(he,1)}}for(var we=0,Ae=Nt.length;we<Ae;we++){var Ze=Nt[we].multiPoly;D.indexOf(Ze)===-1&&D.push(Ze)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var w=this.beforeState().multiPolys,k=this.afterState().multiPolys;switch(Y.type){case"union":var R=w.length===0,D=k.length===0;this._isInResult=R!==D;break;case"intersection":var V,et;w.length<k.length?(V=w.length,et=k.length):(V=k.length,et=w.length),this._isInResult=et===Y.numMultiPolys&&V<et;break;case"xor":var it=Math.abs(w.length-k.length);this._isInResult=it%2==1;break;case"difference":var vt=function(Ot){return Ot.length===1&&Ot[0].isSubject};this._isInResult=vt(w)!==vt(k);break;default:throw new Error("Unrecognized operation type found ".concat(Y.type))}return this._isInResult}}],[{key:"fromRing",value:function(w,k,R){var D,V,et,it=$t.comparePoints(w,k);if(it<0)D=w,V=k,et=1;else{if(!(it>0))throw new Error("Tried to create degenerate segment at [".concat(w.x,", ").concat(w.y,"]"));D=k,V=w,et=-1}return new I(new $t(D,!0),new $t(V,!1),[R],[et])}}]),I}(),le=function(){function I(w,k,R){if(c(this,I),!Array.isArray(w)||w.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=k,this.isExterior=R,this.segments=[],typeof w[0][0]!="number"||typeof w[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var D=at.round(w[0][0],w[0][1]);this.bbox={ll:{x:D.x,y:D.y},ur:{x:D.x,y:D.y}};for(var V=D,et=1,it=w.length;et<it;et++){if(typeof w[et][0]!="number"||typeof w[et][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var vt=at.round(w[et][0],w[et][1]);vt.x===V.x&&vt.y===V.y||(this.segments.push(fe.fromRing(V,vt,this)),vt.x<this.bbox.ll.x&&(this.bbox.ll.x=vt.x),vt.y<this.bbox.ll.y&&(this.bbox.ll.y=vt.y),vt.x>this.bbox.ur.x&&(this.bbox.ur.x=vt.x),vt.y>this.bbox.ur.y&&(this.bbox.ur.y=vt.y),V=vt)}D.x===V.x&&D.y===V.y||this.segments.push(fe.fromRing(V,D,this))}return u(I,[{key:"getSweepEvents",value:function(){for(var w=[],k=0,R=this.segments.length;k<R;k++){var D=this.segments[k];w.push(D.leftSE),w.push(D.rightSE)}return w}}]),I}(),Ft=function(){function I(w,k){if(c(this,I),!Array.isArray(w))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new le(w[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var R=1,D=w.length;R<D;R++){var V=new le(w[R],this,!1);V.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=V.bbox.ll.x),V.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=V.bbox.ll.y),V.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=V.bbox.ur.x),V.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=V.bbox.ur.y),this.interiorRings.push(V)}this.multiPoly=k}return u(I,[{key:"getSweepEvents",value:function(){for(var w=this.exteriorRing.getSweepEvents(),k=0,R=this.interiorRings.length;k<R;k++)for(var D=this.interiorRings[k].getSweepEvents(),V=0,et=D.length;V<et;V++)w.push(D[V]);return w}}]),I}(),dt=function(){function I(w,k){if(c(this,I),!Array.isArray(w))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof w[0][0][0]=="number"&&(w=[w])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var R=0,D=w.length;R<D;R++){var V=new Ft(w[R],this);V.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=V.bbox.ll.x),V.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=V.bbox.ll.y),V.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=V.bbox.ur.x),V.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=V.bbox.ur.y),this.polys.push(V)}this.isSubject=k}return u(I,[{key:"getSweepEvents",value:function(){for(var w=[],k=0,R=this.polys.length;k<R;k++)for(var D=this.polys[k].getSweepEvents(),V=0,et=D.length;V<et;V++)w.push(D[V]);return w}}]),I}(),Pt=function(){function I(w){c(this,I),this.events=w;for(var k=0,R=w.length;k<R;k++)w[k].segment.ringOut=this;this.poly=null}return u(I,null,[{key:"factory",value:function(w){for(var k=[],R=0,D=w.length;R<D;R++){var V=w[R];if(V.isInResult()&&!V.ringOut){for(var et=null,it=V.leftSE,vt=V.rightSE,Ot=[it],Nt=it.point,Jt=[];et=it,it=vt,Ot.push(it),it.point!==Nt;)for(;;){var ee=it.getAvailableLinkedEvents();if(ee.length===0){var be=Ot[0].point,Xt=Ot[Ot.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(be.x,",")+" ".concat(be.y,"]. Last matching segment found ends at")+" [".concat(Xt.x,", ").concat(Xt.y,"]."))}if(ee.length===1){vt=ee[0].otherSE;break}for(var ve=null,he=0,we=Jt.length;he<we;he++)if(Jt[he].point===it.point){ve=he;break}if(ve===null){Jt.push({index:Ot.length,point:it.point});var Ae=it.getLeftmostComparator(et);vt=ee.sort(Ae)[0].otherSE;break}var Ze=Jt.splice(ve)[0],qe=Ot.splice(Ze.index);qe.unshift(qe[0].otherSE),k.push(new I(qe.reverse()))}k.push(new I(Ot))}}return k}}]),u(I,[{key:"getGeom",value:function(){for(var w=this.events[0].point,k=[w],R=1,D=this.events.length-1;R<D;R++){var V=this.events[R].point,et=this.events[R+1].point;Et(V,w,et)!==0&&(k.push(V),w=V)}if(k.length===1)return null;var it=k[0],vt=k[1];Et(it,w,vt)===0&&k.shift(),k.push(k[0]);for(var Ot=this.isExteriorRing()?1:-1,Nt=this.isExteriorRing()?0:k.length-1,Jt=this.isExteriorRing()?k.length:-1,ee=[],be=Nt;be!=Jt;be+=Ot)ee.push([k[be].x,k[be].y]);return ee}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var w=this.enclosingRing();this._isExteriorRing=!w||!w.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var w=this.events[0],k=1,R=this.events.length;k<R;k++){var D=this.events[k];$t.compare(w,D)>0&&(w=D)}for(var V=w.segment.prevInResult(),et=V?V.prevInResult():null;;){if(!V)return null;if(!et)return V.ringOut;if(et.ringOut!==V.ringOut)return et.ringOut.enclosingRing()!==V.ringOut?V.ringOut:V.ringOut.enclosingRing();V=et.prevInResult(),et=V?V.prevInResult():null}}}]),I}(),St=function(){function I(w){c(this,I),this.exteriorRing=w,w.poly=this,this.interiorRings=[]}return u(I,[{key:"addInterior",value:function(w){this.interiorRings.push(w),w.poly=this}},{key:"getGeom",value:function(){var w=[this.exteriorRing.getGeom()];if(w[0]===null)return null;for(var k=0,R=this.interiorRings.length;k<R;k++){var D=this.interiorRings[k].getGeom();D!==null&&w.push(D)}return w}}]),I}(),jt=function(){function I(w){c(this,I),this.rings=w,this.polys=this._composePolys(w)}return u(I,[{key:"getGeom",value:function(){for(var w=[],k=0,R=this.polys.length;k<R;k++){var D=this.polys[k].getGeom();D!==null&&w.push(D)}return w}},{key:"_composePolys",value:function(w){for(var k=[],R=0,D=w.length;R<D;R++){var V=w[R];if(!V.poly)if(V.isExteriorRing())k.push(new St(V));else{var et=V.enclosingRing();et.poly||k.push(new St(et)),et.poly.addInterior(V)}}return k}}]),I}(),ue=function(){function I(w){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fe.compare;c(this,I),this.queue=w,this.tree=new P(k),this.segments=[]}return u(I,[{key:"process",value:function(w){var k=w.segment,R=[];if(w.consumedBy)return w.isLeft?this.queue.remove(w.otherSE):this.tree.remove(k),R;var D=w.isLeft?this.tree.insert(k):this.tree.find(k);if(!D)throw new Error("Unable to find segment #".concat(k.id," ")+"[".concat(k.leftSE.point.x,", ").concat(k.leftSE.point.y,"] -> ")+"[".concat(k.rightSE.point.x,", ").concat(k.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var V=D,et=D,it=void 0,vt=void 0;it===void 0;)(V=this.tree.prev(V))===null?it=null:V.key.consumedBy===void 0&&(it=V.key);for(;vt===void 0;)(et=this.tree.next(et))===null?vt=null:et.key.consumedBy===void 0&&(vt=et.key);if(w.isLeft){var Ot=null;if(it){var Nt=it.getIntersection(k);if(Nt!==null&&(k.isAnEndpoint(Nt)||(Ot=Nt),!it.isAnEndpoint(Nt)))for(var Jt=this._splitSafely(it,Nt),ee=0,be=Jt.length;ee<be;ee++)R.push(Jt[ee])}var Xt=null;if(vt){var ve=vt.getIntersection(k);if(ve!==null&&(k.isAnEndpoint(ve)||(Xt=ve),!vt.isAnEndpoint(ve)))for(var he=this._splitSafely(vt,ve),we=0,Ae=he.length;we<Ae;we++)R.push(he[we])}if(Ot!==null||Xt!==null){var Ze=null;Ze=Ot===null?Xt:Xt===null||$t.comparePoints(Ot,Xt)<=0?Ot:Xt,this.queue.remove(k.rightSE),R.push(k.rightSE);for(var qe=k.split(Ze),fn=0,cn=qe.length;fn<cn;fn++)R.push(qe[fn])}R.length>0?(this.tree.remove(k),R.push(w)):(this.segments.push(k),k.prev=it)}else{if(it&&vt){var Ye=it.getIntersection(vt);if(Ye!==null){if(!it.isAnEndpoint(Ye))for(var hn=this._splitSafely(it,Ye),Ln=0,$n=hn.length;Ln<$n;Ln++)R.push(hn[Ln]);if(!vt.isAnEndpoint(Ye))for(var Ke=this._splitSafely(vt,Ye),Fe=0,Rn=Ke.length;Fe<Rn;Fe++)R.push(Ke[Fe])}}this.tree.remove(k)}return R}},{key:"_splitSafely",value:function(w,k){this.tree.remove(w);var R=w.rightSE;this.queue.remove(R);var D=w.split(k);return D.push(R),w.consumedBy===void 0&&this.tree.insert(w),D}}]),I}(),G=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,K=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Y=new(function(){function I(){c(this,I)}return u(I,[{key:"run",value:function(w,k,R){Y.type=w,at.reset();for(var D=[new dt(k,!0)],V=0,et=R.length;V<et;V++)D.push(new dt(R[V],!1));if(Y.numMultiPolys=D.length,Y.type==="difference")for(var it=D[0],vt=1;vt<D.length;)W(D[vt].bbox,it.bbox)!==null?vt++:D.splice(vt,1);if(Y.type==="intersection"){for(var Ot=0,Nt=D.length;Ot<Nt;Ot++)for(var Jt=D[Ot],ee=Ot+1,be=D.length;ee<be;ee++)if(W(Jt.bbox,D[ee].bbox)===null)return[]}for(var Xt=new P($t.compare),ve=0,he=D.length;ve<he;ve++)for(var we=D[ve].getSweepEvents(),Ae=0,Ze=we.length;Ae<Ze;Ae++)if(Xt.insert(we[Ae]),Xt.size>G)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var qe=new ue(Xt),fn=Xt.size,cn=Xt.pop();cn;){var Ye=cn.key;if(Xt.size===fn){var hn=Ye.segment;throw new Error("Unable to pop() ".concat(Ye.isLeft?"left":"right"," SweepEvent ")+"[".concat(Ye.point.x,", ").concat(Ye.point.y,"] from segment #").concat(hn.id," ")+"[".concat(hn.leftSE.point.x,", ").concat(hn.leftSE.point.y,"] -> ")+"[".concat(hn.rightSE.point.x,", ").concat(hn.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Xt.size>G)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(qe.segments.length>K)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Ln=qe.process(Ye),$n=0,Ke=Ln.length;$n<Ke;$n++){var Fe=Ln[$n];Fe.consumedBy===void 0&&Xt.insert(Fe)}fn=Xt.size,cn=Xt.pop()}at.reset();var Rn=Pt.factory(qe.segments);return new jt(Rn).getGeom()}}]),I}()),ht=function(I){for(var w=arguments.length,k=new Array(w>1?w-1:0),R=1;R<w;R++)k[R-1]=arguments[R];return Y.run("union",I,k)},_t=function(I){for(var w=arguments.length,k=new Array(w>1?w-1:0),R=1;R<w;R++)k[R-1]=arguments[R];return Y.run("intersection",I,k)},xt=function(I){for(var w=arguments.length,k=new Array(w>1?w-1:0),R=1;R<w;R++)k[R-1]=arguments[R];return Y.run("xor",I,k)},At=function(I){for(var w=arguments.length,k=new Array(w>1?w-1:0),R=1;R<w;R++)k[R-1]=arguments[R];return Y.run("difference",I,k)};return{union:ht,intersection:_t,xor:xt,difference:At}}()},2582:function(s){s.exports=function(){function c(T,z,W,ot,J){(function rt(ut,gt,at,bt,Lt){for(;bt>at;){if(bt-at>600){var Et=bt-at+1,Ct=gt-at+1,Ht=Math.log(Et),wt=.5*Math.exp(2*Ht/3),pe=.5*Math.sqrt(Ht*wt*(Et-wt)/Et)*(Ct-Et/2<0?-1:1);rt(ut,gt,Math.max(at,Math.floor(gt-Ct*wt/Et+pe)),Math.min(bt,Math.floor(gt+(Et-Ct)*wt/Et+pe)),Lt)}var zt=ut[gt],Bt=at,$t=bt;for(i(ut,at,gt),Lt(ut[bt],zt)>0&&i(ut,at,bt);Bt<$t;){for(i(ut,Bt,$t),Bt++,$t--;Lt(ut[Bt],zt)<0;)Bt++;for(;Lt(ut[$t],zt)>0;)$t--}Lt(ut[at],zt)===0?i(ut,at,$t):i(ut,++$t,bt),$t<=gt&&(at=$t+1),gt<=$t&&(bt=$t-1)}})(T,z,W||0,ot||T.length-1,J||u)}function i(T,z,W){var ot=T[z];T[z]=T[W],T[W]=ot}function u(T,z){return T<z?-1:T>z?1:0}var d=function(T){T===void 0&&(T=9),this._maxEntries=Math.max(4,T),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function f(T,z,W){if(!W)return z.indexOf(T);for(var ot=0;ot<z.length;ot++)if(W(T,z[ot]))return ot;return-1}function m(T,z){_(T,0,T.children.length,z,T)}function _(T,z,W,ot,J){J||(J=O(null)),J.minX=1/0,J.minY=1/0,J.maxX=-1/0,J.maxY=-1/0;for(var rt=z;rt<W;rt++){var ut=T.children[rt];v(J,T.leaf?ot(ut):ut)}return J}function v(T,z){return T.minX=Math.min(T.minX,z.minX),T.minY=Math.min(T.minY,z.minY),T.maxX=Math.max(T.maxX,z.maxX),T.maxY=Math.max(T.maxY,z.maxY),T}function M(T,z){return T.minX-z.minX}function A(T,z){return T.minY-z.minY}function P(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function S(T){return T.maxX-T.minX+(T.maxY-T.minY)}function N(T,z){return T.minX<=z.minX&&T.minY<=z.minY&&z.maxX<=T.maxX&&z.maxY<=T.maxY}function C(T,z){return z.minX<=T.maxX&&z.minY<=T.maxY&&z.maxX>=T.minX&&z.maxY>=T.minY}function O(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function j(T,z,W,ot,J){for(var rt=[z,W];rt.length;)if(!((W=rt.pop())-(z=rt.pop())<=ot)){var ut=z+Math.ceil((W-z)/ot/2)*ot;c(T,ut,z,W,J),rt.push(z,ut,ut,W)}}return d.prototype.all=function(){return this._all(this.data,[])},d.prototype.search=function(T){var z=this.data,W=[];if(!C(T,z))return W;for(var ot=this.toBBox,J=[];z;){for(var rt=0;rt<z.children.length;rt++){var ut=z.children[rt],gt=z.leaf?ot(ut):ut;C(T,gt)&&(z.leaf?W.push(ut):N(T,gt)?this._all(ut,W):J.push(ut))}z=J.pop()}return W},d.prototype.collides=function(T){var z=this.data;if(!C(T,z))return!1;for(var W=[];z;){for(var ot=0;ot<z.children.length;ot++){var J=z.children[ot],rt=z.leaf?this.toBBox(J):J;if(C(T,rt)){if(z.leaf||N(T,rt))return!0;W.push(J)}}z=W.pop()}return!1},d.prototype.load=function(T){if(!T||!T.length)return this;if(T.length<this._minEntries){for(var z=0;z<T.length;z++)this.insert(T[z]);return this}var W=this._build(T.slice(),0,T.length-1,0);if(this.data.children.length)if(this.data.height===W.height)this._splitRoot(this.data,W);else{if(this.data.height<W.height){var ot=this.data;this.data=W,W=ot}this._insert(W,this.data.height-W.height-1,!0)}else this.data=W;return this},d.prototype.insert=function(T){return T&&this._insert(T,this.data.height-1),this},d.prototype.clear=function(){return this.data=O([]),this},d.prototype.remove=function(T,z){if(!T)return this;for(var W,ot,J,rt=this.data,ut=this.toBBox(T),gt=[],at=[];rt||gt.length;){if(rt||(rt=gt.pop(),ot=gt[gt.length-1],W=at.pop(),J=!0),rt.leaf){var bt=f(T,rt.children,z);if(bt!==-1)return rt.children.splice(bt,1),gt.push(rt),this._condense(gt),this}J||rt.leaf||!N(rt,ut)?ot?(W++,rt=ot.children[W],J=!1):rt=null:(gt.push(rt),at.push(W),W=0,ot=rt,rt=rt.children[0])}return this},d.prototype.toBBox=function(T){return T},d.prototype.compareMinX=function(T,z){return T.minX-z.minX},d.prototype.compareMinY=function(T,z){return T.minY-z.minY},d.prototype.toJSON=function(){return this.data},d.prototype.fromJSON=function(T){return this.data=T,this},d.prototype._all=function(T,z){for(var W=[];T;)T.leaf?z.push.apply(z,T.children):W.push.apply(W,T.children),T=W.pop();return z},d.prototype._build=function(T,z,W,ot){var J,rt=W-z+1,ut=this._maxEntries;if(rt<=ut)return m(J=O(T.slice(z,W+1)),this.toBBox),J;ot||(ot=Math.ceil(Math.log(rt)/Math.log(ut)),ut=Math.ceil(rt/Math.pow(ut,ot-1))),(J=O([])).leaf=!1,J.height=ot;var gt=Math.ceil(rt/ut),at=gt*Math.ceil(Math.sqrt(ut));j(T,z,W,at,this.compareMinX);for(var bt=z;bt<=W;bt+=at){var Lt=Math.min(bt+at-1,W);j(T,bt,Lt,gt,this.compareMinY);for(var Et=bt;Et<=Lt;Et+=gt){var Ct=Math.min(Et+gt-1,Lt);J.children.push(this._build(T,Et,Ct,ot-1))}}return m(J,this.toBBox),J},d.prototype._chooseSubtree=function(T,z,W,ot){for(;ot.push(z),!z.leaf&&ot.length-1!==W;){for(var J=1/0,rt=1/0,ut=void 0,gt=0;gt<z.children.length;gt++){var at=z.children[gt],bt=P(at),Lt=(Et=T,Ct=at,(Math.max(Ct.maxX,Et.maxX)-Math.min(Ct.minX,Et.minX))*(Math.max(Ct.maxY,Et.maxY)-Math.min(Ct.minY,Et.minY))-bt);Lt<rt?(rt=Lt,J=bt<J?bt:J,ut=at):Lt===rt&&bt<J&&(J=bt,ut=at)}z=ut||z.children[0]}var Et,Ct;return z},d.prototype._insert=function(T,z,W){var ot=W?T:this.toBBox(T),J=[],rt=this._chooseSubtree(ot,this.data,z,J);for(rt.children.push(T),v(rt,ot);z>=0&&J[z].children.length>this._maxEntries;)this._split(J,z),z--;this._adjustParentBBoxes(ot,J,z)},d.prototype._split=function(T,z){var W=T[z],ot=W.children.length,J=this._minEntries;this._chooseSplitAxis(W,J,ot);var rt=this._chooseSplitIndex(W,J,ot),ut=O(W.children.splice(rt,W.children.length-rt));ut.height=W.height,ut.leaf=W.leaf,m(W,this.toBBox),m(ut,this.toBBox),z?T[z-1].children.push(ut):this._splitRoot(W,ut)},d.prototype._splitRoot=function(T,z){this.data=O([T,z]),this.data.height=T.height+1,this.data.leaf=!1,m(this.data,this.toBBox)},d.prototype._chooseSplitIndex=function(T,z,W){for(var ot,J,rt,ut,gt,at,bt,Lt=1/0,Et=1/0,Ct=z;Ct<=W-z;Ct++){var Ht=_(T,0,Ct,this.toBBox),wt=_(T,Ct,W,this.toBBox),pe=(J=Ht,rt=wt,ut=void 0,gt=void 0,at=void 0,bt=void 0,ut=Math.max(J.minX,rt.minX),gt=Math.max(J.minY,rt.minY),at=Math.min(J.maxX,rt.maxX),bt=Math.min(J.maxY,rt.maxY),Math.max(0,at-ut)*Math.max(0,bt-gt)),zt=P(Ht)+P(wt);pe<Lt?(Lt=pe,ot=Ct,Et=zt<Et?zt:Et):pe===Lt&&zt<Et&&(Et=zt,ot=Ct)}return ot||W-z},d.prototype._chooseSplitAxis=function(T,z,W){var ot=T.leaf?this.compareMinX:M,J=T.leaf?this.compareMinY:A;this._allDistMargin(T,z,W,ot)<this._allDistMargin(T,z,W,J)&&T.children.sort(ot)},d.prototype._allDistMargin=function(T,z,W,ot){T.children.sort(ot);for(var J=this.toBBox,rt=_(T,0,z,J),ut=_(T,W-z,W,J),gt=S(rt)+S(ut),at=z;at<W-z;at++){var bt=T.children[at];v(rt,T.leaf?J(bt):bt),gt+=S(rt)}for(var Lt=W-z-1;Lt>=z;Lt--){var Et=T.children[Lt];v(ut,T.leaf?J(Et):Et),gt+=S(ut)}return gt},d.prototype._adjustParentBBoxes=function(T,z,W){for(var ot=W;ot>=0;ot--)v(z[ot],T)},d.prototype._condense=function(T){for(var z=T.length-1,W=void 0;z>=0;z--)T[z].children.length===0?z>0?(W=T[z-1].children).splice(W.indexOf(T[z]),1):this.clear():m(T[z],this.toBBox)},d}()}},n={};function a(s){var c=n[s];if(c!==void 0)return c.exports;var i=n[s]={id:s,loaded:!1,exports:{}};return t[s].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.n=s=>{var c=s&&s.__esModule?()=>s.default:()=>s;return a.d(c,{a:c}),c},a.d=(s,c)=>{for(var i in c)a.o(c,i)&&!a.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:c[i]})},a.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),a.o=(s,c)=>Object.prototype.hasOwnProperty.call(s,c),a.nmd=s=>(s.paths=[],s.children||(s.children=[]),s),a(5975)})();var bc={exports:{}};(function(t,n){(function(a,s){s(n)})(_d,function(a){var s=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(i){L.Util.setOptions(this,i),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var u=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,u?this._withAnimation:this._noAnimation),this._markerCluster=u?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(i){if(i instanceof L.LayerGroup)return this.addLayers([i]);if(!i.getLatLng)return this._nonPointGroup.addLayer(i),this.fire("layeradd",{layer:i}),this;if(!this._map)return this._needsClustering.push(i),this.fire("layeradd",{layer:i}),this;if(this.hasLayer(i))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(i,this._maxZoom),this.fire("layeradd",{layer:i}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var u=i,d=this._zoom;if(i.__parent)for(;u.__parent._zoom>=d;)u=u.__parent;return this._currentShownBounds.contains(u.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(i,u):this._animationAddLayerNonAnimated(i,u)),this},removeLayer:function(i){return i instanceof L.LayerGroup?this.removeLayers([i]):(i.getLatLng?this._map?i.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(i)),this._removeLayer(i,!0),this.fire("layerremove",{layer:i}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),i.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(i)&&(this._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())):(!this._arraySplice(this._needsClustering,i)&&this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i})):(this._nonPointGroup.removeLayer(i),this.fire("layerremove",{layer:i})),this)},addLayers:function(i,u){if(!L.Util.isArray(i))return this.addLayer(i);var d,f=this._featureGroup,m=this._nonPointGroup,_=this.options.chunkedLoading,v=this.options.chunkInterval,M=this.options.chunkProgress,A=i.length,P=0,S=!0;if(this._map){var N=new Date().getTime(),C=L.bind(function(){var j=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();P<A;P++){if(_&&P%200==0){var T=new Date().getTime()-j;if(v<T)break}if((d=i[P])instanceof L.LayerGroup)S&&(i=i.slice(),S=!1),this._extractNonGroupLayers(d,i),A=i.length;else if(d.getLatLng){if(!this.hasLayer(d)&&(this._addLayer(d,this._maxZoom),u||this.fire("layeradd",{layer:d}),d.__parent&&d.__parent.getChildCount()===2)){var z=d.__parent.getAllChildMarkers(),W=z[0]===d?z[1]:z[0];f.removeLayer(W)}}else m.addLayer(d),u||this.fire("layeradd",{layer:d})}M&&M(P,A,new Date().getTime()-N),P===A?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(C,this.options.chunkDelay)},this);C()}else for(var O=this._needsClustering;P<A;P++)(d=i[P])instanceof L.LayerGroup?(S&&(i=i.slice(),S=!1),this._extractNonGroupLayers(d,i),A=i.length):d.getLatLng?this.hasLayer(d)||O.push(d):m.addLayer(d);return this},removeLayers:function(i){var u,d,f=i.length,m=this._featureGroup,_=this._nonPointGroup,v=!0;if(!this._map){for(u=0;u<f;u++)(d=i[u])instanceof L.LayerGroup?(v&&(i=i.slice(),v=!1),this._extractNonGroupLayers(d,i),f=i.length):(this._arraySplice(this._needsClustering,d),_.removeLayer(d),this.hasLayer(d)&&this._needsRemoving.push({layer:d,latlng:d._latlng}),this.fire("layerremove",{layer:d}));return this}if(this._unspiderfy){this._unspiderfy();var M=i.slice(),A=f;for(u=0;u<A;u++)(d=M[u])instanceof L.LayerGroup?(this._extractNonGroupLayers(d,M),A=M.length):this._unspiderfyLayer(d)}for(u=0;u<f;u++)(d=i[u])instanceof L.LayerGroup?(v&&(i=i.slice(),v=!1),this._extractNonGroupLayers(d,i),f=i.length):d.__parent?(this._removeLayer(d,!0,!0),this.fire("layerremove",{layer:d}),m.hasLayer(d)&&(m.removeLayer(d),d.clusterShow&&d.clusterShow())):(_.removeLayer(d),this.fire("layerremove",{layer:d}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(i){i.off(this._childMarkerEventHandlers,this),delete i.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var i=new L.LatLngBounds;this._topClusterLevel&&i.extend(this._topClusterLevel._bounds);for(var u=this._needsClustering.length-1;0<=u;u--)i.extend(this._needsClustering[u].getLatLng());return i.extend(this._nonPointGroup.getBounds()),i},eachLayer:function(i,u){var d,f,m,_=this._needsClustering.slice(),v=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(_),f=_.length-1;0<=f;f--){for(d=!0,m=v.length-1;0<=m;m--)if(v[m].layer===_[f]){d=!1;break}d&&i.call(u,_[f])}this._nonPointGroup.eachLayer(i,u)},getLayers:function(){var i=[];return this.eachLayer(function(u){i.push(u)}),i},getLayer:function(i){var u=null;return i=parseInt(i,10),this.eachLayer(function(d){L.stamp(d)===i&&(u=d)}),u},hasLayer:function(i){if(!i)return!1;var u,d=this._needsClustering;for(u=d.length-1;0<=u;u--)if(d[u]===i)return!0;for(u=(d=this._needsRemoving).length-1;0<=u;u--)if(d[u].layer===i)return!1;return!(!i.__parent||i.__parent._group!==this)||this._nonPointGroup.hasLayer(i)},zoomToShowLayer:function(i,u){var d=this._map;typeof u!="function"&&(u=function(){});var f=function(){!d.hasLayer(i)&&!d.hasLayer(i.__parent)||this._inZoomAnimation||(this._map.off("moveend",f,this),this.off("animationend",f,this),d.hasLayer(i)?u():i.__parent._icon&&(this.once("spiderfied",u,this),i.__parent.spiderfy()))};i._icon&&this._map.getBounds().contains(i.getLatLng())?u():i.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",f,this),this._map.panTo(i.getLatLng())):(this._map.on("moveend",f,this),this.on("animationend",f,this),i.__parent.zoomToBounds())},onAdd:function(i){var u,d,f;if(this._map=i,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(i),this._nonPointGroup.addTo(i),this._gridClusters||this._generateInitialClusters(),this._maxLat=i.options.crs.projection.MAX_LATITUDE,u=0,d=this._needsRemoving.length;u<d;u++)(f=this._needsRemoving[u]).newlatlng=f.layer._latlng,f.layer._latlng=f.latlng;for(u=0,d=this._needsRemoving.length;u<d;u++)f=this._needsRemoving[u],this._removeLayer(f.layer,!0),f.layer._latlng=f.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),d=this._needsClustering,this._needsClustering=[],this.addLayers(d,!0)},onRemove:function(i){i.off("zoomend",this._zoomEnd,this),i.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(i){for(var u=i;u&&!u._icon;)u=u.__parent;return u||null},_arraySplice:function(i,u){for(var d=i.length-1;0<=d;d--)if(i[d]===u)return i.splice(d,1),!0},_removeFromGridUnclustered:function(i,u){for(var d=this._map,f=this._gridUnclustered,m=Math.floor(this._map.getMinZoom());m<=u&&f[u].removeObject(i,d.project(i.getLatLng(),u));u--);},_childMarkerDragStart:function(i){i.target.__dragStart=i.target._latlng},_childMarkerMoved:function(i){if(!this._ignoreMove&&!i.target.__dragStart){var u=i.target._popup&&i.target._popup.isOpen();this._moveChild(i.target,i.oldLatLng,i.latlng),u&&i.target.openPopup()}},_moveChild:function(i,u,d){i._latlng=u,this.removeLayer(i),i._latlng=d,this.addLayer(i)},_childMarkerDragEnd:function(i){var u=i.target.__dragStart;delete i.target.__dragStart,u&&this._moveChild(i.target,u,i.target._latlng)},_removeLayer:function(i,u,d){var f=this._gridClusters,m=this._gridUnclustered,_=this._featureGroup,v=this._map,M=Math.floor(this._map.getMinZoom());u&&this._removeFromGridUnclustered(i,this._maxZoom);var A,P=i.__parent,S=P._markers;for(this._arraySplice(S,i);P&&(P._childCount--,P._boundsNeedUpdate=!0,!(P._zoom<M));)u&&P._childCount<=1?(A=P._markers[0]===i?P._markers[1]:P._markers[0],f[P._zoom].removeObject(P,v.project(P._cLatLng,P._zoom)),m[P._zoom].addObject(A,v.project(A.getLatLng(),P._zoom)),this._arraySplice(P.__parent._childClusters,P),P.__parent._markers.push(A),A.__parent=P.__parent,P._icon&&(_.removeLayer(P),d||_.addLayer(A))):P._iconNeedsUpdate=!0,P=P.__parent;delete i.__parent},_isOrIsParent:function(i,u){for(;u;){if(i===u)return!0;u=u.parentNode}return!1},fire:function(i,u,d){if(u&&u.layer instanceof L.MarkerCluster){if(u.originalEvent&&this._isOrIsParent(u.layer._icon,u.originalEvent.relatedTarget))return;i="cluster"+i}L.FeatureGroup.prototype.fire.call(this,i,u,d)},listens:function(i,u){return L.FeatureGroup.prototype.listens.call(this,i,u)||L.FeatureGroup.prototype.listens.call(this,"cluster"+i,u)},_defaultIconCreateFunction:function(i){var u=i.getChildCount(),d=" marker-cluster-";return d+=u<10?"small":u<100?"medium":"large",new L.DivIcon({html:"<div><span>"+u+"</span></div>",className:"marker-cluster"+d,iconSize:new L.Point(40,40)})},_bindEvents:function(){var i=this._map,u=this.options.spiderfyOnMaxZoom,d=this.options.showCoverageOnHover,f=this.options.zoomToBoundsOnClick,m=this.options.spiderfyOnEveryZoom;(u||f||m)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),d&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),i.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(i){var u=i.layer,d=u;if(i.type!=="clusterkeypress"||!i.originalEvent||i.originalEvent.keyCode===13){for(;d._childClusters.length===1;)d=d._childClusters[0];d._zoom===this._maxZoom&&d._childCount===u._childCount&&this.options.spiderfyOnMaxZoom?u.spiderfy():this.options.zoomToBoundsOnClick&&u.zoomToBounds(),this.options.spiderfyOnEveryZoom&&u.spiderfy(),i.originalEvent&&i.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(i){var u=this._map;this._inZoomAnimation||(this._shownPolygon&&u.removeLayer(this._shownPolygon),2<i.layer.getChildCount()&&i.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(i.layer.getConvexHull(),this.options.polygonOptions),u.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var i=this.options.spiderfyOnMaxZoom,u=this.options.showCoverageOnHover,d=this.options.zoomToBoundsOnClick,f=this.options.spiderfyOnEveryZoom,m=this._map;(i||d||f)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),u&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),m.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var i=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,i),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),i),this._currentShownBounds=i}},_generateInitialClusters:function(){var i=Math.ceil(this._map.getMaxZoom()),u=Math.floor(this._map.getMinZoom()),d=this.options.maxClusterRadius,f=d;typeof d!="function"&&(f=function(){return d}),this.options.disableClusteringAtZoom!==null&&(i=this.options.disableClusteringAtZoom-1),this._maxZoom=i,this._gridClusters={},this._gridUnclustered={};for(var m=i;u<=m;m--)this._gridClusters[m]=new L.DistanceGrid(f(m)),this._gridUnclustered[m]=new L.DistanceGrid(f(m));this._topClusterLevel=new this._markerCluster(this,u-1)},_addLayer:function(i,u){var d,f,m=this._gridClusters,_=this._gridUnclustered,v=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(i),i.on(this._childMarkerEventHandlers,this);v<=u;u--){d=this._map.project(i.getLatLng(),u);var M=m[u].getNearObject(d);if(M)return M._addChild(i),void(i.__parent=M);if(M=_[u].getNearObject(d)){var A=M.__parent;A&&this._removeLayer(M,!1);var P=new this._markerCluster(this,u,M,i);m[u].addObject(P,this._map.project(P._cLatLng,u)),M.__parent=P;var S=i.__parent=P;for(f=u-1;f>A._zoom;f--)S=new this._markerCluster(this,f,S),m[f].addObject(S,this._map.project(M.getLatLng(),f));return A._addChild(S),void this._removeFromGridUnclustered(M,u)}_[u].addObject(i,d)}this._topClusterLevel._addChild(i),i.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(i){i instanceof L.MarkerCluster&&i._iconNeedsUpdate&&i._updateIcon()})},_enqueue:function(i){this._queue.push(i),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var i=0;i<this._queue.length;i++)this._queue[i].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var i=Math.round(this._map._zoom);this._processQueue(),this._zoom<i&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,i)):this._zoom>i?(this._animationStart(),this._animationZoomOut(this._zoom,i)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(i){var u=this._maxLat;return u!==void 0&&(i.getNorth()>=u&&(i._northEast.lat=1/0),i.getSouth()<=-u&&(i._southWest.lat=-1/0)),i},_animationAddLayerNonAnimated:function(i,u){if(u===i)this._featureGroup.addLayer(i);else if(u._childCount===2){u._addToMap();var d=u.getAllChildMarkers();this._featureGroup.removeLayer(d[0]),this._featureGroup.removeLayer(d[1])}else u._updateIcon()},_extractNonGroupLayers:function(i,u){var d,f=i.getLayers(),m=0;for(u=u||[];m<f.length;m++)(d=f[m])instanceof L.LayerGroup?this._extractNonGroupLayers(d,u):u.push(d);return u},_overrideMarkerIcon:function(i){return i.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[i]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(i,u){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i),this._topClusterLevel._recursivelyAddChildrenToMap(null,u,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(i,u){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i),this._topClusterLevel._recursivelyAddChildrenToMap(null,u,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(i,u){this._animationAddLayerNonAnimated(i,u)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(i,u){var d,f=this._getExpandedVisibleBounds(),m=this._featureGroup,_=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(f,i,_,function(v){var M,A=v._latlng,P=v._markers;for(f.contains(A)||(A=null),v._isSingleParent()&&i+1===u?(m.removeLayer(v),v._recursivelyAddChildrenToMap(null,u,f)):(v.clusterHide(),v._recursivelyAddChildrenToMap(A,u,f)),d=P.length-1;0<=d;d--)M=P[d],f.contains(M._latlng)||m.removeLayer(M)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(f,u),m.eachLayer(function(v){v instanceof L.MarkerCluster||!v._icon||v.clusterShow()}),this._topClusterLevel._recursively(f,i,u,function(v){v._recursivelyRestoreChildPositions(u)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(f,i,_,function(v){m.removeLayer(v),v.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(i,u){this._animationZoomOutSingle(this._topClusterLevel,i-1,u),this._topClusterLevel._recursivelyAddChildrenToMap(null,u,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i,this._getExpandedVisibleBounds())},_animationAddLayer:function(i,u){var d=this,f=this._featureGroup;f.addLayer(i),u!==i&&(2<u._childCount?(u._updateIcon(),this._forceLayout(),this._animationStart(),i._setPos(this._map.latLngToLayerPoint(u.getLatLng())),i.clusterHide(),this._enqueue(function(){f.removeLayer(i),i.clusterShow(),d._animationEnd()})):(this._forceLayout(),d._animationStart(),d._animationZoomOutSingle(u,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(i,u,d){var f=this._getExpandedVisibleBounds(),m=Math.floor(this._map.getMinZoom());i._recursivelyAnimateChildrenInAndAddSelfToMap(f,m,u+1,d);var _=this;this._forceLayout(),i._recursivelyBecomeVisible(f,d),this._enqueue(function(){if(i._childCount===1){var v=i._markers[0];this._ignoreMove=!0,v.setLatLng(v.getLatLng()),this._ignoreMove=!1,v.clusterShow&&v.clusterShow()}else i._recursively(f,d,m,function(M){M._recursivelyRemoveChildrenFromMap(f,m,u+1)});_._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(i){return new L.MarkerClusterGroup(i)};var c=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(i,u,d,f){L.Marker.prototype.initialize.call(this,d?d._cLatLng||d.getLatLng():new L.LatLng(0,0),{icon:this,pane:i.options.clusterPane}),this._group=i,this._zoom=u,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,d&&this._addChild(d),f&&this._addChild(f)},getAllChildMarkers:function(i,u){i=i||[];for(var d=this._childClusters.length-1;0<=d;d--)this._childClusters[d].getAllChildMarkers(i,u);for(var f=this._markers.length-1;0<=f;f--)u&&this._markers[f].__dragStart||i.push(this._markers[f]);return i},getChildCount:function(){return this._childCount},zoomToBounds:function(i){for(var u,d=this._childClusters.slice(),f=this._group._map,m=f.getBoundsZoom(this._bounds),_=this._zoom+1,v=f.getZoom();0<d.length&&_<m;){_++;var M=[];for(u=0;u<d.length;u++)M=M.concat(d[u]._childClusters);d=M}_<m?this._group._map.setView(this._latlng,_):m<=v?this._group._map.setView(this._latlng,v+1):this._group._map.fitBounds(this._bounds,i)},getBounds:function(){var i=new L.LatLngBounds;return i.extend(this._bounds),i},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(i,u){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(i),i instanceof L.MarkerCluster?(u||(this._childClusters.push(i),i.__parent=this),this._childCount+=i._childCount):(u||this._markers.push(i),this._childCount++),this.__parent&&this.__parent._addChild(i,!0)},_setClusterCenter:function(i){this._cLatLng||(this._cLatLng=i._cLatLng||i._latlng)},_resetBounds:function(){var i=this._bounds;i._southWest&&(i._southWest.lat=1/0,i._southWest.lng=1/0),i._northEast&&(i._northEast.lat=-1/0,i._northEast.lng=-1/0)},_recalculateBounds:function(){var i,u,d,f,m=this._markers,_=this._childClusters,v=0,M=0,A=this._childCount;if(A!==0){for(this._resetBounds(),i=0;i<m.length;i++)d=m[i]._latlng,this._bounds.extend(d),v+=d.lat,M+=d.lng;for(i=0;i<_.length;i++)(u=_[i])._boundsNeedUpdate&&u._recalculateBounds(),this._bounds.extend(u._bounds),d=u._wLatLng,f=u._childCount,v+=d.lat*f,M+=d.lng*f;this._latlng=this._wLatLng=new L.LatLng(v/A,M/A),this._boundsNeedUpdate=!1}},_addToMap:function(i){i&&(this._backupLatlng=this._latlng,this.setLatLng(i)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(i,u,d){this._recursively(i,this._group._map.getMinZoom(),d-1,function(f){var m,_,v=f._markers;for(m=v.length-1;0<=m;m--)(_=v[m])._icon&&(_._setPos(u),_.clusterHide())},function(f){var m,_,v=f._childClusters;for(m=v.length-1;0<=m;m--)(_=v[m])._icon&&(_._setPos(u),_.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(i,u,d,f){this._recursively(i,f,u,function(m){m._recursivelyAnimateChildrenIn(i,m._group._map.latLngToLayerPoint(m.getLatLng()).round(),d),m._isSingleParent()&&d-1===f?(m.clusterShow(),m._recursivelyRemoveChildrenFromMap(i,u,d)):m.clusterHide(),m._addToMap()})},_recursivelyBecomeVisible:function(i,u){this._recursively(i,this._group._map.getMinZoom(),u,null,function(d){d.clusterShow()})},_recursivelyAddChildrenToMap:function(i,u,d){this._recursively(d,this._group._map.getMinZoom()-1,u,function(f){if(u!==f._zoom)for(var m=f._markers.length-1;0<=m;m--){var _=f._markers[m];d.contains(_._latlng)&&(i&&(_._backupLatlng=_.getLatLng(),_.setLatLng(i),_.clusterHide&&_.clusterHide()),f._group._featureGroup.addLayer(_))}},function(f){f._addToMap(i)})},_recursivelyRestoreChildPositions:function(i){for(var u=this._markers.length-1;0<=u;u--){var d=this._markers[u];d._backupLatlng&&(d.setLatLng(d._backupLatlng),delete d._backupLatlng)}if(i-1===this._zoom)for(var f=this._childClusters.length-1;0<=f;f--)this._childClusters[f]._restorePosition();else for(var m=this._childClusters.length-1;0<=m;m--)this._childClusters[m]._recursivelyRestoreChildPositions(i)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(i,u,d,f){var m,_;this._recursively(i,u-1,d-1,function(v){for(_=v._markers.length-1;0<=_;_--)m=v._markers[_],f&&f.contains(m._latlng)||(v._group._featureGroup.removeLayer(m),m.clusterShow&&m.clusterShow())},function(v){for(_=v._childClusters.length-1;0<=_;_--)m=v._childClusters[_],f&&f.contains(m._latlng)||(v._group._featureGroup.removeLayer(m),m.clusterShow&&m.clusterShow())})},_recursively:function(i,u,d,f,m){var _,v,M=this._childClusters,A=this._zoom;if(u<=A&&(f&&f(this),m&&A===d&&m(this)),A<u||A<d)for(_=M.length-1;0<=_;_--)(v=M[_])._boundsNeedUpdate&&v._recalculateBounds(),i.intersects(v._bounds)&&v._recursively(i,u,d,f,m)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var i=this.options.opacity;return this.setOpacity(0),this.options.opacity=i,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(i){this._cellSize=i,this._sqCellSize=i*i,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(i,u){var d=this._getCoord(u.x),f=this._getCoord(u.y),m=this._grid,_=m[f]=m[f]||{},v=_[d]=_[d]||[],M=L.Util.stamp(i);this._objectPoint[M]=u,v.push(i)},updateObject:function(i,u){this.removeObject(i),this.addObject(i,u)},removeObject:function(i,u){var d,f,m=this._getCoord(u.x),_=this._getCoord(u.y),v=this._grid,M=v[_]=v[_]||{},A=M[m]=M[m]||[];for(delete this._objectPoint[L.Util.stamp(i)],d=0,f=A.length;d<f;d++)if(A[d]===i)return A.splice(d,1),f===1&&delete M[m],!0},eachObject:function(i,u){var d,f,m,_,v,M,A=this._grid;for(d in A)for(f in v=A[d])for(m=0,_=(M=v[f]).length;m<_;m++)i.call(u,M[m])&&(m--,_--)},getNearObject:function(i){var u,d,f,m,_,v,M,A,P=this._getCoord(i.x),S=this._getCoord(i.y),N=this._objectPoint,C=this._sqCellSize,O=null;for(u=S-1;u<=S+1;u++)if(m=this._grid[u]){for(d=P-1;d<=P+1;d++)if(_=m[d])for(f=0,v=_.length;f<v;f++)M=_[f],((A=this._sqDist(N[L.Util.stamp(M)],i))<C||A<=C&&O===null)&&(C=A,O=M)}return O},_getCoord:function(i){var u=Math.floor(i/this._cellSize);return isFinite(u)?u:i},_sqDist:function(i,u){var d=u.x-i.x,f=u.y-i.y;return d*d+f*f}},L.QuickHull={getDistant:function(i,u){var d=u[1].lat-u[0].lat;return(u[0].lng-u[1].lng)*(i.lat-u[0].lat)+d*(i.lng-u[0].lng)},findMostDistantPointFromBaseLine:function(i,u){var d,f,m,_=0,v=null,M=[];for(d=u.length-1;0<=d;d--)f=u[d],0<(m=this.getDistant(f,i))&&(M.push(f),_<m&&(_=m,v=f));return{maxPoint:v,newPoints:M}},buildConvexHull:function(i,u){var d=[],f=this.findMostDistantPointFromBaseLine(i,u);return f.maxPoint?d=(d=d.concat(this.buildConvexHull([i[0],f.maxPoint],f.newPoints))).concat(this.buildConvexHull([f.maxPoint,i[1]],f.newPoints)):[i[0]]},getConvexHull:function(i){var u,d=!1,f=!1,m=!1,_=!1,v=null,M=null,A=null,P=null,S=null,N=null;for(u=i.length-1;0<=u;u--){var C=i[u];(d===!1||C.lat>d)&&(d=(v=C).lat),(f===!1||C.lat<f)&&(f=(M=C).lat),(m===!1||C.lng>m)&&(m=(A=C).lng),(_===!1||C.lng<_)&&(_=(P=C).lng)}return S=f!==d?(N=M,v):(N=P,A),[].concat(this.buildConvexHull([N,S],i),this.buildConvexHull([S,N],i))}},L.MarkerCluster.include({getConvexHull:function(){var i,u,d=this.getAllChildMarkers(),f=[];for(u=d.length-1;0<=u;u--)i=d[u].getLatLng(),f.push(i);return L.QuickHull.getConvexHull(f)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var i,u=this.getAllChildMarkers(null,!0),d=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),i=(this._group._spiderfied=this)._group.options.spiderfyShapePositions?this._group.options.spiderfyShapePositions(u.length,d):u.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(u.length,d):(d.y+=10,this._generatePointsCircle(u.length,d)),this._animationSpiderfy(u,i)}},unspiderfy:function(i){this._group._inZoomAnimation||(this._animationUnspiderfy(i),this._group._spiderfied=null)},_generatePointsCircle:function(i,u){var d,f,m=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+i)/this._2PI,_=this._2PI/i,v=[];for(m=Math.max(m,35),v.length=i,d=0;d<i;d++)f=this._circleStartAngle+d*_,v[d]=new L.Point(u.x+m*Math.cos(f),u.y+m*Math.sin(f))._round();return v},_generatePointsSpiral:function(i,u){var d,f=this._group.options.spiderfyDistanceMultiplier,m=f*this._spiralLengthStart,_=f*this._spiralFootSeparation,v=f*this._spiralLengthFactor*this._2PI,M=0,A=[];for(d=A.length=i;0<=d;d--)d<i&&(A[d]=new L.Point(u.x+m*Math.cos(M),u.y+m*Math.sin(M))._round()),m+=v/(M+=_/m+5e-4*d);return A},_noanimationUnspiderfy:function(){var i,u,d=this._group,f=d._map,m=d._featureGroup,_=this.getAllChildMarkers(null,!0);for(d._ignoreMove=!0,this.setOpacity(1),u=_.length-1;0<=u;u--)i=_[u],m.removeLayer(i),i._preSpiderfyLatlng&&(i.setLatLng(i._preSpiderfyLatlng),delete i._preSpiderfyLatlng),i.setZIndexOffset&&i.setZIndexOffset(0),i._spiderLeg&&(f.removeLayer(i._spiderLeg),delete i._spiderLeg);d.fire("unspiderfied",{cluster:this,markers:_}),d._ignoreMove=!1,d._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(i,u){var d,f,m,_,v=this._group,M=v._map,A=v._featureGroup,P=this._group.options.spiderLegPolylineOptions;for(v._ignoreMove=!0,d=0;d<i.length;d++)_=M.layerPointToLatLng(u[d]),f=i[d],m=new L.Polyline([this._latlng,_],P),M.addLayer(m),f._spiderLeg=m,f._preSpiderfyLatlng=f._latlng,f.setLatLng(_),f.setZIndexOffset&&f.setZIndexOffset(1e6),A.addLayer(f);this.setOpacity(.3),v._ignoreMove=!1,v.fire("spiderfied",{cluster:this,markers:i})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(i,u){var d,f,m,_,v,M,A=this,P=this._group,S=P._map,N=P._featureGroup,C=this._latlng,O=S.latLngToLayerPoint(C),j=L.Path.SVG,T=L.extend({},this._group.options.spiderLegPolylineOptions),z=T.opacity;for(z===void 0&&(z=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),j?(T.opacity=0,T.className=(T.className||"")+" leaflet-cluster-spider-leg"):T.opacity=z,P._ignoreMove=!0,d=0;d<i.length;d++)f=i[d],M=S.layerPointToLatLng(u[d]),m=new L.Polyline([C,M],T),S.addLayer(m),f._spiderLeg=m,j&&(v=(_=m._path).getTotalLength()+.1,_.style.strokeDasharray=v,_.style.strokeDashoffset=v),f.setZIndexOffset&&f.setZIndexOffset(1e6),f.clusterHide&&f.clusterHide(),N.addLayer(f),f._setPos&&f._setPos(O);for(P._forceLayout(),P._animationStart(),d=i.length-1;0<=d;d--)M=S.layerPointToLatLng(u[d]),(f=i[d])._preSpiderfyLatlng=f._latlng,f.setLatLng(M),f.clusterShow&&f.clusterShow(),j&&((_=(m=f._spiderLeg)._path).style.strokeDashoffset=0,m.setStyle({opacity:z}));this.setOpacity(.3),P._ignoreMove=!1,setTimeout(function(){P._animationEnd(),P.fire("spiderfied",{cluster:A,markers:i})},200)},_animationUnspiderfy:function(i){var u,d,f,m,_,v,M=this,A=this._group,P=A._map,S=A._featureGroup,N=i?P._latLngToNewLayerPoint(this._latlng,i.zoom,i.center):P.latLngToLayerPoint(this._latlng),C=this.getAllChildMarkers(null,!0),O=L.Path.SVG;for(A._ignoreMove=!0,A._animationStart(),this.setOpacity(1),d=C.length-1;0<=d;d--)(u=C[d])._preSpiderfyLatlng&&(u.closePopup(),u.setLatLng(u._preSpiderfyLatlng),delete u._preSpiderfyLatlng,v=!0,u._setPos&&(u._setPos(N),v=!1),u.clusterHide&&(u.clusterHide(),v=!1),v&&S.removeLayer(u),O&&(_=(m=(f=u._spiderLeg)._path).getTotalLength()+.1,m.style.strokeDashoffset=_,f.setStyle({opacity:0})));A._ignoreMove=!1,setTimeout(function(){var j=0;for(d=C.length-1;0<=d;d--)(u=C[d])._spiderLeg&&j++;for(d=C.length-1;0<=d;d--)(u=C[d])._spiderLeg&&(u.clusterShow&&u.clusterShow(),u.setZIndexOffset&&u.setZIndexOffset(0),1<j&&S.removeLayer(u),P.removeLayer(u._spiderLeg),delete u._spiderLeg);A._animationEnd(),A.fire("unspiderfied",{cluster:M,markers:C})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(i){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(i))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(i){this._spiderfied&&this._spiderfied.unspiderfy(i)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(i){i._spiderLeg&&(this._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow(),i.setZIndexOffset&&i.setZIndexOffset(0),this._map.removeLayer(i._spiderLeg),delete i._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(i){return i?i instanceof L.MarkerClusterGroup?i=i._topClusterLevel.getAllChildMarkers():i instanceof L.LayerGroup?i=i._layers:i instanceof L.MarkerCluster?i=i.getAllChildMarkers():i instanceof L.Marker&&(i=[i]):i=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(i),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(i),this},_flagParentsIconsNeedUpdate:function(i){var u,d;for(u in i)for(d=i[u].__parent;d;)d._iconNeedsUpdate=!0,d=d.__parent},_refreshSingleMarkerModeMarkers:function(i){var u,d;for(u in i)d=i[u],this.hasLayer(d)&&d.setIcon(this._overrideMarkerIcon(d))}}),L.Marker.include({refreshIconOptions:function(i,u){var d=this.options.icon;return L.setOptions(d,i),this.setIcon(d),u&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),a.MarkerClusterGroup=s,a.MarkerCluster=c,Object.defineProperty(a,"__esModule",{value:!0})})})(bc,bc.exports);const Ow={__name:"VMap.client",props:{controls:{type:Boolean,default:!1},dragging:{type:Boolean,default:!1},zoomAnimate:{type:Boolean,default:!1},width:{type:String,default:void 0},height:{type:String,default:void 0},zoom:{type:Number,default:18},maxZoom:{type:Number,default:18},minZoom:{type:Number,default:0},disableZoom:{type:Boolean,default:!1},center:{type:Array,default:()=>[0,0]},geojson:{type:Object,default:void 0},zoomBounds:{type:Number,default:void 0},geojsonOptions:{type:Object,default:()=>({})},prefix:{type:[String,Boolean],default:!1},cluster:{type:Boolean,default:!1},maxClusterRadius:{type:Number,default:20},clusterIconCreateFunction:{type:Function,default:void 0}},emits:["geojson:ready","geojson","add:layer","draw:start","edit:layer","drag:layer","zoom:change","zoom:start"],setup(t,{expose:n,emit:a}){const s=t;delete sn.Icon.Default.prototype._getIconUrl,sn.Icon.Default.mergeOptions({iconRetinaUrl:mw,iconUrl:gw,shadowUrl:_w});let c,i,u,d;const f=Zt(null),m=te(()=>({maxZoom:s.zoomBounds,zoom:{animate:s.zoomAnimate}}));Ue(()=>s.geojson,O=>{d.clearLayers(),N(O)},{deep:!0}),Ue(()=>s.dragging,O=>{O?c.dragging.enable():c.dragging.disable()});function _(){const O={maxClusterRadius:s.maxClusterRadius};return s.clusterIconCreateFunction&&Object.assign(O,{iconCreateFunction:j=>s.clusterIconCreateFunction({L:sn,cluster:j})}),O}en(()=>{const O=Tw(sn,{maxZoom:s.maxZoom,minZoom:s.minZoom,className:"map-tiles"}),[j]=Object.values(O),T={center:s.center,zoom:s.zoom,worldCopyJump:!0,dragging:s.dragging,maxZoom:s.maxZoom};s.disableZoom&&Object.assign(T,{scrollWheelZoom:!1,zoomControl:!1,doubleClickZoom:!1,touchZoom:!1,boxZoom:!1}),u=new sn.FeatureGroup,d=s.cluster?new sn.markerClusterGroup(_()):new sn.FeatureGroup,c=sn.map(f.value,T),c.attributionControl.setPrefix(s.prefix),c.pm.setGlobalOptions({layerGroup:u}),d.addTo(c),c.addLayer(u),c.addLayer(d),s.geojson&&N(s.geojson),s.controls&&(c.pm.addControls({position:"topleft",drawText:!1,drawCircle:!1,drawPolyline:!1,drawCircleMarker:!1,drawMarker:!1,cutPolygon:!1}),c.on("pm:create",z=>{a("geojson",v()),a("add:layer",A(z.layer))}),u.on("pm:edit",z=>{a("geojson",v()),a("edit:layer",A(z.layer))}),c.on("pm:drawstart",z=>{M(),a("draw:start",z)}),c.on("zoom",z=>a("zoom:change",z)),c.on("zoomstart",z=>a("zoom:start",z))),j.addTo(c),Object.keys(O).length>1&&sn.control.layers(O,{},{position:"topleft",collapsed:!1}).addTo(c),S()});function v(){const O=sn.featureGroup();return u.eachLayer(j=>{(j instanceof sn.Path||j instanceof sn.Marker)&&j.pm&&O.addLayer(j)}),O.toGeoJSON()}function M(){u.clearLayers()}function A(O){const j=O.toGeoJSON();return typeof O.getRadius=="function"&&(j.properties.radius=O.getRadius()),j}const P=()=>{if(!d)return;const O=d.getBounds();c.invalidateSize(),xs(()=>{Object.keys(O).length&&c.fitBounds(O,m.value)})},S=()=>{i=new ResizeObserver(O=>{O[0].contentRect,P()}),i.observe(f.value)};Zr(()=>{d.clearLayers(),i==null||i.disconnect()});function N(O){if(O){sn.geoJSON(O,{...Cw(sn),...s.geojsonOptions}).addTo(d);const j=d.getBounds();j.isValid()&&c.fitBounds(j,m.value)}a("geojson:ready",d)}function C(){return c}return n({clearDrawLayers:M,getMapObject:C,resizeMap:P}),(O,j)=>(H(),tt("div",{ref_key:"leafletMap",ref:f,style:Vn({width:s.width,height:s.height})},null,4))}};function Aw(t){Rw(t,Object.assign({"/src/components/Map/VMap.client.vue":Ow}))}function Rw(t,n){Object.entries(n).forEach(([s,c])=>{const i=s.split("/").pop().replace(/\.client.\w+$/,"");t.component(i,c)})}const Bw=["innerHTML"],Iw={key:0,class:"h-4 inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Dw=X("path",{"stroke-linecap":"round",d:"M16.5 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 10-2.636 6.364M16.5 12V8.25"},null,-1),zw=[Dw],jw={key:1,class:"inline h-4 w-1"},Nw=X("circle",{cy:"calc(100% - 5px)",cx:"2.5",r:"1",fill:"currentColor"},null,-1),Fw=[Nw],Vw=["innerHTML"],Hw={__name:"AddressMaker.global",props:{items:{type:Array,required:!0}},setup(t){const n=t,a=te(()=>{const[c,...i]=n.items;return{username:c,host:i}});function s(){const[c,...i]=n.items;document.location.href=`mailto:${c}@${i.join(".")}`}return(c,i)=>(H(),tt("span",{class:"text-secondary-color cursor-pointer whitespace-nowrap",onClick:s},[X("span",{innerHTML:a.value.username},null,8,Bw),(H(!0),tt(Gt,null,ye(a.value.host,(u,d)=>(H(),tt(Gt,null,[d===0?(H(),tt("svg",Iw,zw)):(H(),tt("svg",jw,Fw)),X("span",{innerHTML:u},null,8,Vw)],64))),256))]))}},Gw={};function $w(t,n){return H(),Tt(Es,{"enter-active-class":"duration-500 ease-out origin-top","enter-from-class":"transform opacity-0 scale-y-0","enter-to-class":"opacity-100 scale-y-100","leave-active-class":"duration-200 ease-in origin-top","leave-from-class":"opacity-100 scale-y-100","leave-to-class":"transform opacity-0 scale-y-0"},{default:pt(()=>[Se(t.$slots,"default")]),_:3})}const Uw=ie(Gw,[["render",$w]]),Zw={},qw={viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"green"},Kw=Yf('<g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="2"><circle stroke-opacity=".5" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"></animateTransform></path></g></g>',1),Ww=[Kw];function Jw(t,n){return H(),tt("svg",qw,Ww)}const Yw=ie(Zw,[["render",Jw]]);const Xw={class:"autocomplete md:block md:mr-0 mr-3 relative w-fit"},Qw={class:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"},tx=["placeholder"],ex={key:1,class:"autocomplete__list list absolute z-[500] max-h-52 w-full overflow-y-auto border bg-base-foreground border-base-border !m-0 shadow-md"},nx=["onClick"],rx=["innerHTML"],ix=500,ox={__name:"Autocomplete.global",props:{autofocus:{type:Boolean,default:!1},placeholder:{type:String,default:"Search..."},url:{type:String,required:!0},queryParam:{type:String,default:"term"},params:{type:Object,default:()=>({})},label:{type:String,default:"label"}},emits:["select"],setup(t,{emit:n}){const a=t,s=Zt(""),c=Zt([]),i=Zt(!1),u=Zt(null);let d;Ue(s,m=>{clearTimeout(d),m.length?d=setTimeout(()=>{i.value=!0,We.get(a.url,{params:{...a.params,[a.queryParam]:s.value}}).then(({data:_})=>{i.value=!1,c.value=_})},ix):c.value=[]});const f=m=>{n("select",m),s.value=""};return en(()=>{a.autofocus&&u.value.focus()}),(m,_)=>{const v=ft("IconSearch");return H(),tt("div",Xw,[X("div",Qw,[st(v,{class:"w-4 h-4 text-gray-500"})]),bo(X("input",{"onUpdate:modelValue":_[0]||(_[0]=M=>s.value=M),type:"text",autocomplete:"none",class:"autocomplete__input block box-border min-w-full p-1.5 pl-10 text-base-content rounded border sm:text-sm placeholder:text-sm dark:border-slate-700 border-gray-300 dark:placeholder:text-slate-400 focus:ring-primary-500 focus:border-primary-500",placeholder:t.placeholder,ref_key:"inputElement",ref:u},null,8,tx),[[Om,s.value]]),i.value?(H(),Tt(Yw,{key:0,class:"absolute top-1/2 -translate-y-1/2 right-2 h-5 w-5"})):Dt("",!0),c.value.length?(H(),tt("ul",ex,[(H(!0),tt(Gt,null,ye(c.value,M=>(H(),tt("li",{key:M.id,class:"autocomplete__item px-3 py-2 border-b text-xs text-base-content cursor-pointer hover:bg-secondary-color hover:bg-opacity-5 border-base-border truncate",onClick:A=>f(M)},[X("span",{innerHTML:M[t.label]},null,8,rx)],8,nx))),128))])):Dt("",!0)])}}},vd=ie(ox,[["__scopeId","data-v-bd0dac97"]]),sx={__name:"AutocompleteOtu.global",props:{autofocus:{type:Boolean,default:!1}},setup(t){const n=Rs(),a=({id:s,otu_valid_id:c})=>{n.push({name:"otus-id-overview",params:{id:c||s}})};return(s,c)=>(H(),Tt(vd,{url:"/otus/autocomplete","query-param":"term",label:"label_html",autofocus:t.autofocus,params:{having_taxon_name_only:!0},onSelect:a},null,8,["autofocus"]))}},ax=["title"],lx={__name:"ButtonExpand.global",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(t,{emit:n}){const a=t,s=te({get(){return a.modelValue},set(c){n("update:modelValue",c)}});return(c,i)=>{const u=ft("IconMinusCircle"),d=ft("IconPlusCircle");return H(),tt("button",{type:"button",title:s.value?"Close":"Expand",class:"button-expand bg-base-foreground text-secondary-color w-5 h-5",onClick:i[0]||(i[0]=f=>s.value=!s.value)},[s.value?(H(),Tt(u,{key:0,class:"w-5 h-5"})):(H(),Tt(d,{key:1,class:"w-5 h-5"}))],8,ax)}}},ux={__name:"VButton.global",props:{primary:{type:Boolean,default:!1},secondary:{type:Boolean,default:!1}},setup(t){return(n,a)=>(H(),tt("button",{type:"button",class:Je(["px-3 py-1 hover:bg-opacity-80",{"bg-primary-color":t.primary,"bg-secondary-color":t.secondary,"text-primary-content":t.primary,"text-secondary-content":t.secondary}])},[Se(n.$slots,"default")],2))}};const cx={},hx={class:"border-1 card border-base-muted bg-base-foreground print:shadow-none print:border-0 rounded"};function dx(t,n){return H(),tt("div",hx,[Se(t.$slots,"default")])}const px=ie(cx,[["render",dx]]),fx={},mx={class:"p-4 pl-5 pr-5"};function gx(t,n){return H(),tt("div",mx,[Se(t.$slots,"default")])}const _x=ie(fx,[["render",gx]]),yx={},vx={class:"p-4 pl-5 pr-5 border-b font-medium border-base-muted"};function bx(t,n){return H(),tt("div",vx,[Se(t.$slots,"default")])}const wx=ie(yx,[["render",bx]]),xx={__name:"VClipboard.global",props:{text:{type:String,required:!0},delay:{type:Number,default:2e3}},setup(t){const n=t,a=Zt(!1);let s;function c(){navigator.clipboard.writeText(n.text).then(()=>{a.value=!0,s=setTimeout(()=>{a.value=!1},n.delay)})}return ir(()=>{clearTimeout(s)}),(i,u)=>{const d=ft("IconCheck"),f=ft("IconClipboard"),m=ft("VButton");return H(),Tt(m,{class:"px-2 py-2 rounded-full",primary:"",onClick:c},{default:pt(()=>[a.value?(H(),Tt(d,{key:0,class:"w-4 h-4"})):(H(),Tt(f,{key:1,class:"w-4 h-4"}))]),_:1})}}},kx={class:"relative inline"},Lx=["onClick"],Mx={__name:"Dropdown.global",props:{items:{type:Array,default:()=>[]}},setup(t){const n=Zt(null),a=Zt(!1),s=()=>{a.value=!a.value},c=u=>{a.value=!1,u.action()};function i(u){var d;(!u.target||!((d=n.value)!=null&&d.contains(u.target)))&&(a.value=!1)}return en(()=>{document.addEventListener("pointerdown",i,{passive:!0,capture:!0})}),ir(()=>{document.removeEventListener("pointerdown",i,{capture:!0})}),(u,d)=>(H(),tt("div",kx,[X("button",{title:"Menu",onClick:s},[Se(u.$slots,"button")]),a.value?(H(),tt("ul",{key:0,ref_key:"element",ref:n,class:"bg-base-foreground absolute font-normal text-sm text-base-lighter right-0 z-10 mt-2 w-56 origin-top-right rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},[(H(!0),tt(Gt,null,ye(t.items,f=>(H(),tt("li",{key:f.label,class:"block w-full px-4 py-2 text-left cursor-pointer hover:bg-secondary-color hover:bg-opacity-5 box-border border-b border-base-border last:border-b-0",onClick:m=>c(f)},Qt(f.label),9,Lx))),128))],512)):Dt("",!0)]))}};function bd({props:t}){const n=Zt([]);function a(s){var c,i;return{id:s.id,objectId:s.depiction_object_id,objectType:s.depiction_object_type,objectLabel:s.depiction_object.label,label:s.label,imageOriginal:s.image.original,imageMedium:s.image.medium,attribution:((c=s.attribution)==null?void 0:c.label)||"",labelAttribution:[s.depiction_object.label,((i=s.attribution)==null?void 0:i.label)||""].join(" ")}}return Ue(()=>t.depictionId,s=>{s.length&&We.get("/depictions/gallery",{params:{depiction_id:s}}).then(({data:c})=>{n.value=c.map(a).sort((i,u)=>t.depictionId.indexOf(i.id)-t.depictionId.indexOf(u.id))})},{immediate:!0}),{depictions:n}}const Cx=["src","alt"],Px={class:"bg-black bg-opacity-25 absolute h-full w-full"},Sx={key:0,class:"z-10 text-white text-sm drop-shadow absolute bottom-2 right-0 px-4"},Ex=["innerHTML"],Tx={__name:"GalleryCarousel.global",props:{depictionId:{type:Array,default:()=>[]},interval:{type:Number,default:1e4},height:{type:String,default:"550px"}},setup(t){const n=t,{depictions:a}=bd({props:n}),s=Zt(0),c=te(()=>({height:n.height})),i=te(()=>a.value[s.value]||{}),u=te(()=>i.value.objectType==="Otu"),d=te(()=>[i.value.objectLabel,i.value.attribution].join(" "));let f=null;function m(){s.value=(s.value+1)%a.value.length}return Ue(a,()=>{n.interval?(clearInterval(f),f=setInterval(m,n.interval)):s.value=Math.floor(Math.random()*data.length)}),ir(()=>{clearInterval(f)}),(_,v)=>{const M=ft("RouterLink");return H(),tt("div",{class:"w-full relative",style:Vn(c.value)},[st(Es,{name:"fade"},{default:pt(()=>[i.value.imageOriginal?(H(),tt("img",{class:"object-cover overflow-hidden h-full w-full absolute top-0 my-0",key:i.value.imageOriginal,src:i.value.imageOriginal,alt:i.value.label},null,8,Cx)):Dt("",!0)]),_:1}),X("div",Px,[Se(_.$slots,"default",{},void 0,!0)]),i.value.objectId?(H(),tt("span",Sx,[u.value?(H(),Tt(M,{key:0,class:"text-white decoration-transparent",to:{name:"otus-id",params:{id:i.value.objectId}},innerHTML:d.value},null,8,["to","innerHTML"])):(H(),tt("span",{key:1,innerHTML:d.value},null,8,Ex))])):Dt("",!0)],4)}}},Ox=ie(Tx,[["__scopeId","data-v-a1b0f829"]]),Ax=["title"],Rx=["alt","src"],Bx={__name:"GalleryThumbnail",props:{image:{type:Object,required:!0},title:{type:String,default:void 0}},setup(t){return(n,a)=>(H(),tt("div",{class:"bg-base-background flex flex-col justify-center cursor-pointer w-24 max-h-20 h-20 border-base-muted rounded-md border",title:t.title},[X("img",{class:"max-h-20 max-w-24 h-20 w-24 object-contain rounded",alt:t.title,src:t.image.thumb},null,8,Rx)],8,Ax))}},Ix={class:"flex flex-row overflow-x-auto print:flex-wrap gap-1.5"},wd={__name:"GalleryThumbnailList",props:{images:{type:Array,default:()=>[]},current:{type:Number,default:void 0}},emits:["selectIndex"],setup(t,{emit:n}){return(a,s)=>(H(),tt("div",Ix,[(H(!0),tt(Gt,null,ye(t.images,(c,i)=>{var u;return H(),tt("div",{key:c.id},[st(Bx,{image:c,class:Je({"border border-secondary-color":t.current===i}),title:(u=c.depictions)==null?void 0:u.map(d=>d.label).join(";"),onClick:d=>n("selectIndex",i)},null,8,["image","class","title","onClick"])])}),128))]))}},Dx={class:"h-80 max-h-80 flex items-center justify-center"},zx=["textContent"],jx=["src","alt"],Nx={__name:"GalleryMainImage",props:{image:{type:Object,required:!0}},emits:["open:viewer"],setup(t,{emit:n}){const a=t,s=Zt(!1),c=Zt(null),i=Zt(null);Ue(()=>a.image,f=>{f.original&&(i.value=null,s.value=!0)});function u(f){f.preventDefault(),s.value=!1,i.value="Image was not found or format is not supported"}function d(){s.value=!1}return en(()=>{c.value.addEventListener("load",d),c.value.addEventListener("error",u)}),(f,m)=>{var M;const _=ft("VSpinner"),v=ft("ClientOnly");return H(),tt("div",Dx,[st(v,null,{default:pt(()=>[s.value?(H(),Tt(_,{key:0})):Dt("",!0)]),_:1}),i.value?(H(),tt("span",{key:0,textContent:Qt(i.value)},null,8,zx)):Dt("",!0),bo(X("img",{ref_key:"imageElement",ref:c,class:"max-h-80 h-max w-100 cursor-zoom-in m-auto object-contain",src:t.image.original,alt:(M=t.image.depictions)==null?void 0:M.map(A=>A.label).join(";"),onClick:m[0]||(m[0]=A=>n("open:viewer"))},null,8,jx),[[Ts,!i.value]])])}}},Fx={class:"flex flex-col"},Vx={class:"flex justify-center border print:hidden bg-base-0 border-base-muted"},Hx={__name:"GalleryImage.global",props:{images:{type:Array,default:()=>[]}},setup(t){const n=t,a=Zt(!1),s=Zt(0),c=te(()=>n.images[s.value]||{}),i=()=>{s.value--},u=()=>{s.value++};return Ue(()=>n.images,()=>{s.value=0},{immediate:!0}),(d,f)=>{const m=ft("ImageViewer");return H(),tt(Gt,null,[X("div",Fx,[X("div",Vx,[st(Nx,{image:c.value,"onOpen:viewer":f[0]||(f[0]=()=>a.value=!0)},null,8,["image"])]),st(wd,{class:"pt-2 pb-2",images:t.images,onSelectIndex:f[1]||(f[1]=_=>{s.value=_})},null,8,["images"])]),a.value?(H(),Tt(m,{key:0,index:s.value,images:t.images,next:s.value<n.images.length-1,previous:s.value>0,onSelectIndex:f[2]||(f[2]=_=>s.value=_),onNext:f[3]||(f[3]=_=>u()),onPrevious:f[4]||(f[4]=_=>i()),onClose:f[5]||(f[5]=_=>a.value=!1)},null,8,["index","images","next","previous"])):Dt("",!0)],64)}}},Gx=["src"],$x=["innerHTML"],Ux={__name:"GalleryMosaic.global",props:{depictionId:{type:Array,default:()=>[]},imageHeight:{type:String,default:"112px"},imageWidth:{type:String,default:"200px"},wrap:{type:Boolean,default:!1},label:{type:Boolean,default:!1}},setup(t){const n=t,a=te(()=>({height:n.imageHeight}));function s(i){return i.objectType==="Otu"?"RouterLink":"div"}const{depictions:c}=bd({props:n});return(i,u)=>(H(),tt("div",{class:Je(["grid gap-2",!n.wrap&&"grid-flow-col"]),style:Vn(n.wrap&&`grid-template-columns: repeat(auto-fit, minmax(${n.imageWidth}, 1fr))`)},[(H(!0),tt(Gt,null,ye(Kt(c),d=>(H(),Tt(Ci(s(d)),{key:d.id,to:{name:"otus-id",params:{id:d.objectId}}},{default:pt(()=>[X("img",{src:d.imageMedium,style:Vn(a.value),class:"max-w-full my-0 object-cover w-full"},null,12,Gx),t.label?(H(),tt("span",{key:0,class:"text-sm",innerHTML:d.labelAttribution},null,8,$x)):Dt("",!0)]),_:2},1032,["to"]))),128))],6))}},Zx={},qx={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},Kx=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 9l-7 7-7-7"},null,-1),Wx=[Kx];function Jx(t,n){return H(),tt("svg",qx,Wx)}const Yx=ie(Zx,[["render",Jx]]),Xx={},Qx={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},t1=X("path",{class:"drop-shadow","stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19l-7-7 7-7"},null,-1),e1=[t1];function n1(t,n){return H(),tt("svg",Qx,e1)}const r1=ie(Xx,[["render",n1]]),i1={},o1={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},s1=X("path",{class:"drop-shadow","stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"},null,-1),a1=[s1];function l1(t,n){return H(),tt("svg",o1,a1)}const u1=ie(i1,[["render",l1]]),c1={},h1={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},d1=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"},null,-1),p1=[d1];function f1(t,n){return H(),tt("svg",h1,p1)}const m1=ie(c1,[["render",f1]]),g1={},_1={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},y1=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"},null,-1),v1=[y1];function b1(t,n){return H(),tt("svg",_1,v1)}const w1=ie(g1,[["render",b1]]),x1={},k1={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},L1=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),M1=[L1];function C1(t,n){return H(),tt("svg",k1,M1)}const P1=ie(x1,[["render",C1]]),S1={},E1={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},T1=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1),O1=[T1];function A1(t,n){return H(),tt("svg",E1,O1)}const R1=ie(S1,[["render",A1]]),B1={},I1={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},D1=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"},null,-1),z1=[D1];function j1(t,n){return H(),tt("svg",I1,z1)}const N1=ie(B1,[["render",j1]]),F1={},V1={viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true"},H1=X("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"},null,-1),G1=[H1];function $1(t,n){return H(),tt("svg",V1,G1)}const U1=ie(F1,[["render",$1]]),Z1={},q1={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},K1=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16M4 18h16"},null,-1),W1=[K1];function J1(t,n){return H(),tt("svg",q1,W1)}const Y1=ie(Z1,[["render",J1]]),X1={},Q1={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},tk=X("path",{fill:"currentColor",d:"M5 3h2v2H5v5a2 2 0 0 1-2 2a2 2 0 0 1 2 2v5h2v2H5c-1.07-.27-2-.9-2-2v-4a2 2 0 0 0-2-2H0v-2h1a2 2 0 0 0 2-2V5a2 2 0 0 1 2-2m14 0a2 2 0 0 1 2 2v4a2 2 0 0 0 2 2h1v2h-1a2 2 0 0 0-2 2v4a2 2 0 0 1-2 2h-2v-2h2v-5a2 2 0 0 1 2-2a2 2 0 0 1-2-2V5h-2V3h2m-7 12a1 1 0 0 1 1 1a1 1 0 0 1-1 1a1 1 0 0 1-1-1a1 1 0 0 1 1-1m-4 0a1 1 0 0 1 1 1a1 1 0 0 1-1 1a1 1 0 0 1-1-1a1 1 0 0 1 1-1m8 0a1 1 0 0 1 1 1a1 1 0 0 1-1 1a1 1 0 0 1-1-1a1 1 0 0 1 1-1Z"},null,-1),ek=[tk];function nk(t,n){return H(),tt("svg",Q1,ek)}const rk=ie(X1,[["render",nk]]),ik={},ok={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},sk=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),ak=[sk];function lk(t,n){return H(),tt("svg",ok,ak)}const uk=ie(ik,[["render",lk]]),ck={},hk={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},dk=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),pk=[dk];function fk(t,n){return H(),tt("svg",hk,pk)}const mk=ie(ck,[["render",fk]]),gk={},_k={xmlns:"http://www.w3.org/2000/svg",class:"text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},yk=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"},null,-1),vk=[yk];function bk(t,n){return H(),tt("svg",_k,vk)}const wk=ie(gk,[["render",bk]]),xk={},kk={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Lk=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1),Mk=[Lk];function Ck(t,n){return H(),tt("svg",kk,Mk)}const Pk=ie(xk,[["render",Ck]]),Sk={},Ek={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Tk=X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"},null,-1),Ok=[Tk];function Ak(t,n){return H(),tt("svg",Ek,Ok)}const Rk=ie(Sk,[["render",Ak]]),Bk={__name:"ImageAttribution",props:{attribution:{type:Object,default:()=>({})}},setup(t){return(n,a)=>(H(),tt("div",null,[X("p",null,Qt(t.attribution.label),1)]))}},Ik={__name:"ImageDepictions",props:{depictions:{type:Array,default:()=>[]}},setup(t){return(n,a)=>(H(),tt("div",null,[(H(!0),tt(Gt,null,ye(t.depictions,s=>(H(),tt("div",{key:s.id},[X("p",null,Qt(s.label),1)]))),128))]))}},Dk=["innerHTML"],zk={__name:"ImageSource",props:{source:{type:Object,default:()=>({})}},setup(t){return(n,a)=>(H(),tt("div",null,[X("p",{innerHTML:t.source.label},null,8,Dk)]))}},jk={class:"p-2 text-black dark:text-white opacity-50"},Nk={__name:"ImageViewerCounter",props:{currentImage:{type:Number,required:!0},totalImages:{type:Number,required:!0}},setup(t){return(n,a)=>(H(),tt("span",jk,Qt(t.currentImage+1)+"/"+Qt(t.totalImages),1))}},Fk={},Vk={type:"button",class:"p-2 cursor-pointer opacity-50 bg-base-content text-base-background",title:"Next image"};function Hk(t,n){const a=ft("IconArrowRight");return H(),tt("button",Vk,[st(a,{class:"h-8 w-8"})])}const Gk=ie(Fk,[["render",Hk]]),$k={},Uk={type:"button",class:"p-2 cursor-pointer opacity-50 bg-base-content text-base-background",title:"Previous image"};function Zk(t,n){const a=ft("IconArrowLeft");return H(),tt("button",Uk,[st(a,{class:"h-8 w-8"})])}const qk=ie($k,[["render",Zk]]),Kk={},Wk={class:"p-2 box-border flex justify-between"};function Jk(t,n){return H(),tt("div",Wk,[X("div",null,[Se(t.$slots,"default")]),X("div",null,[Se(t.$slots,"right")])])}const Yk=ie(Kk,[["render",Jk]]),Xk={},Qk={type:"button",class:"p-2 cursor-pointer opacity-50 text-base-content"};function tL(t,n){const a=ft("IconClose");return H(),tt("button",Qk,[st(a)])}const eL=ie(Xk,[["render",tL]]),nL={class:"fixed z-[10000] h-full overflow-y-hidden overflow-x-hidden w-full top-0 left-0 flex flex-col items-center justify-center backdrop-blur-md bg-base-foreground"},rL={class:"absolute rounded-t-lg w-auto max-h-full h-auto top-12 bottom-44 left-0 right-0 flex justify-center align-middle"},iL=["textContent"],oL=["alt","src"],sL={class:"bottom-0 fixed max-w-full w-full"},aL={class:"text-base-content text-sm attributions p-6 align-middle flex justify-between flex-col text-center"},lL={class:"flex justify-center"},uL={__name:"ImageViewer.global",props:{index:{type:Number,required:!0},images:{type:Array,default:()=>[]},next:{type:Boolean,default:!1},previous:{type:Boolean,default:!1}},emits:["close","previous","next","selectIndex"],setup(t,{emit:n}){const a=t,s=({key:_})=>{switch(_){case"ArrowLeft":a.previous&&n("previous");break;case"ArrowRight":a.next&&n("next");break;case"Escape":n("close");break}},c=Zt(null),i=Zt(!1),u=Zt(null),d=te(()=>a.images[a.index]);document.addEventListener("keyup",s);function f(){i.value=!1,u.value="Image was not found or format is not supported"}function m(){i.value=!1}return en(()=>{c.value.addEventListener("load",m),c.value.addEventListener("error",f),document.body.classList.add("overflow-hidden")}),Zr(()=>{document.removeEventListener("keyup",s),document.body.classList.remove("overflow-hidden")}),Ue(()=>a.index,()=>{u.value=null,i.value=!0}),(_,v)=>{var A,P;const M=ft("VSpinner");return H(),tt("div",nL,[X("div",{class:"min-w-96 dark:bg-slate-900 rounded-lg shadow-sm mb-24",onClick:v[3]||(v[3]=ps(()=>{},["stop"]))},[X("div",rL,[i.value?(H(),Tt(M,{key:0})):Dt("",!0),u.value?(H(),tt("div",{key:1,class:"flex flex-col justify-center",textContent:Qt(u.value)},null,8,iL)):Dt("",!0),bo(X("img",{ref_key:"imageElement",ref:c,class:"mx-auto cursor-zoom-out w-auto max-w-full max-h-full h-auto my-auto",alt:(P=(A=d.value)==null?void 0:A.depictions)==null?void 0:P.map(S=>S.label).join(";"),src:d.value.original,onClick:v[0]||(v[0]=S=>n("close"))},null,8,oL),[[Ts,!u.value]]),t.next?(H(),Tt(Gk,{key:2,class:"right-0 absolute my-auto top-1/2 -translate-y-1/2",onClick:v[1]||(v[1]=S=>n("next"))})):Dt("",!0),t.previous?(H(),Tt(qk,{key:3,class:"left-0 absolute my-auto top-1/2 -translate-y-1/2",onClick:v[2]||(v[2]=S=>n("previous"))})):Dt("",!0)])]),X("div",sL,[X("div",aL,[st(Ik,{class:"my-auto",depictions:d.value.depictions},null,8,["depictions"]),st(Bk,{class:"my-auto",attribution:d.value.attribution},null,8,["attribution"]),st(zk,{class:"my-auto",source:d.value.source},null,8,["source"])]),X("div",lL,[st(wd,{class:"pb-2",current:t.index,images:t.images,onSelectIndex:v[4]||(v[4]=S=>n("selectIndex",S)),onClick:v[5]||(v[5]=ps(()=>{},["stop"]))},null,8,["current","images"])])]),st(Yk,{class:"w-full absolute top-0 h-12 left-0 items-center"},{right:pt(()=>[st(eL,{onClick:v[6]||(v[6]=S=>n("close"))})]),default:pt(()=>[st(Nk,{"current-image":t.index,"total-images":t.images.length},null,8,["current-image","total-images"])]),_:1})])}}},cL="!container mx-auto p-4 sm:px-0 prose dark:prose-invert box-border",hL={__name:"MarkdownLayout.global",props:{tag:{type:String,default:"div"},frontmatter:{type:Object,required:!0}},setup(t){const n=t,a={fullwidth:"p-4 sm:px-0 prose dark:prose-invert max-w-none",blank:"sm:px-0 prose dark:prose-invert max-w-none"},s=te(()=>a[n.frontmatter.layout]||cL);return(c,i)=>(H(),Tt(Ci(t.tag),{class:Je(s.value)},{default:pt(()=>[Se(c.$slots,"default")]),_:3},8,["class"]))}},dL={class:"w-full p-4 md:p-4 flex flex-row box-border justify-between items-center"},pL=X("span",null,null,-1),fL={class:"bg-base-foreground overflow-x-auto h-full md:h-auto max-h-full"},mL={__name:"VModal.global",emits:["close"],setup(t,{emit:n}){const a=s=>{s.key==="Escape"&&(s.stopPropagation(),n("close"))};return en(()=>{document.addEventListener("keydown",a),document.body.classList.add("overflow-hidden")}),Zr(()=>{document.removeEventListener("keydown",a),document.body.classList.remove("overflow-hidden")}),(s,c)=>{const i=ft("IconClose");return H(),tt("div",{class:"fixed top-0 left-0 w-full h-screen max-h-screen flex flex-col justify-center bg-black bg-opacity-50 z-[2000]",onClick:c[2]||(c[2]=u=>n("close")),onKey:c[3]||(c[3]=ps(u=>n("close"),["stop"]))},[X("div",{class:"h-full md:h-auto mx-auto md:max-h-[70vh] bg-base-foreground container",onClick:c[1]||(c[1]=ps(()=>{},["stop"]))},[X("div",dL,[Se(s.$slots,"header",{},()=>[pL]),st(i,{class:"w-6 h-6 cursor-pointer opacity-50",onClick:c[0]||(c[0]=()=>n("close"))})]),X("div",fL,[Se(s.$slots,"default")]),X("div",null,[Se(s.$slots,"footer")])])],32)}}},gL={"aria-disabled":"false","aria-label":"Pagination",class:"flex flex-row text-sm"},_L=["disabled"],yL={role:"presentation",class:"page-item"},vL=["disabled"],bL={key:0,class:"border border-base-border px-2 py-1.5"},wL={key:0,class:"page-item"},xL=["disabled","onClick"],kL={key:1,class:"border border-base-border px-2 py-1.5"},LL={class:"page-item"},ML=["disabled"],CL={role:"presentation"},PL=["disabled"],SL={__name:"VPagination.global",props:{modelValue:{type:Number,required:!0},total:{type:Number,required:!0},per:{type:Number,required:!0},rangePages:{type:Number,default:5}},emits:["update:modelValue"],setup(t,{emit:n}){const a=t,s=te(()=>Math.ceil(a.total/a.per)),c=te({get:()=>a.modelValue,set:d=>{n("update:modelValue",d)}}),i=te(()=>a.modelValue+a.rangePages),u=te(()=>a.modelValue-a.rangePages);return(d,f)=>(H(),tt("ul",gL,[X("li",null,[X("button",{type:"button",disabled:c.value<2,"aria-label":"Go to first page",class:"border border-base-border rounded-l-md px-2 py-1.5",onClick:f[0]||(f[0]=m=>c.value=1)},"  ",8,_L)]),X("li",yL,[X("button",{type:"button",disabled:c.value<2,"aria-label":"Go to previous page",class:"border border-base-border px-2 py-1.5",onClick:f[1]||(f[1]=m=>c.value--)},"  ",8,vL)]),t.modelValue>a.rangePages?(H(),tt("li",bL," ... ")):Dt("",!0),(H(!0),tt(Gt,null,ye(s.value,m=>(H(),tt(Gt,{key:m},[m<i.value&&u.value<m?(H(),tt("li",wL,[X("button",{type:"button","aria-label":"Go to page 1",class:Je(["border border-base-border px-2 py-1.5",c.value===m?"text-primary-content bg-primary-color":"text-base-content"]),disabled:c.value===m,onClick:()=>c.value=m},Qt(m),11,xL)])):Dt("",!0)],64))),128)),s.value-t.modelValue>=t.rangePages?(H(),tt("li",kL," ... ")):Dt("",!0),X("li",LL,[X("button",{type:"button","aria-label":"Go to next page",class:"border border-base-border px-2 py-1.5",disabled:c.value===s.value,onClick:f[2]||(f[2]=()=>c.value++)},"  ",8,ML)]),X("li",CL,[X("button",{type:"button",disabled:c.value===s.value,"aria-label":"Go to last page",class:"border border-base-border rounded-r-md px-2 py-1.5",onClick:f[3]||(f[3]=()=>c.value=s.value)},"  ",8,PL)])]))}},EL={__name:"ProjectStats.global",props:{data:{type:Array,default:()=>[]},tag:{type:String,default:"span"}},setup(t){const n=t,a=Zt({data:[]}),s=te(()=>n.data.map(u=>u.toLowerCase())),c=te(()=>{const u=a.value.data;return u.length?i(u):s.value.map(d=>[d,"??"])});function i(u){const d=n.data.length?u.filter(([f])=>s.value.includes(f)):u;return d.sort(([f],[m])=>s.value.indexOf(f)-s.value.indexOf(m)),d}return en(()=>{We.get("/stats").then(u=>{const d=Object.entries(u.data.data).map(([f,m])=>[f.toLowerCase(),m.toLocaleString()]);a.value.data=d})}),(u,d)=>(H(),Tt(Ci(t.tag),null,{default:pt(()=>[(H(!0),tt(Gt,null,ye(c.value,([f,m],_)=>Se(u.$slots,"default",{type:f,value:m},()=>[X("span",null,Qt(f)+": "+Qt(m)+Qt(_<c.value.length-1?"; ":""),1)])),256))]),_:3}))}},TL={key:1},OL={__name:"ClientOnly.global",setup(t){const n=Zt(!1);return en(()=>{n.value=!0}),(a,s)=>n.value?Se(a.$slots,"default",{key:0}):(H(),tt("div",TL))}},AL={class:"inline-flex items-center text-sm"},RL={__name:"TabItem.global",props:{to:{type:[String,Object],required:!0}},setup(t){return(n,a)=>{const s=ft("router-link");return H(),tt("li",AL,[st(s,{class:"p-2 pb-2 block py-2 pr-4 pl-3 text-base-content border-b-2 border-transparent","active-class":"border-b-2 !border-secondary-color font-medium",to:t.to},{default:pt(()=>[Se(n.$slots,"default")]),_:3},8,["to"])])}}},BL={},IL={class:"inline-flex items-center space-x-1 md:space-x-3"};function DL(t,n){return H(),tt("ul",IL,[Se(t.$slots,"default")])}const zL=ie(BL,[["render",DL]]),jL={},NL={class:"relative sm:rounded-lg"},FL={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"};function VL(t,n){return H(),tt("div",NL,[X("table",FL,[Se(t.$slots,"default")])])}const HL=ie(jL,[["render",VL]]),GL={},$L={class:"normal-case text-xs"};function UL(t,n){return H(),tt("tbody",$L,[Se(t.$slots,"default")])}const ZL=ie(GL,[["render",UL]]),qL={},KL={class:"px-4 py-4"};function WL(t,n){return H(),tt("td",KL,[Se(t.$slots,"default")])}const JL=ie(qL,[["render",WL]]),YL={},XL={class:"bg-base-foreground border-b border-base-border"};function QL(t,n){return H(),tt("tr",XL,[Se(t.$slots,"default")])}const tM=ie(YL,[["render",QL]]),eM={},nM={class:"text-xs text-base-content uppercase bg-base-background"};function rM(t,n){return H(),tt("thead",nM,[Se(t.$slots,"default")])}const iM=ie(eM,[["render",rM]]),oM={},sM={class:"px-4 py-3"};function aM(t,n){return H(),tt("th",sM,[Se(t.$slots,"default")])}const lM=ie(oM,[["render",aM]]),uM={};function cM(t,n){return H(),tt("tr",null,[Se(t.$slots,"default")])}const hM=ie(uM,[["render",cM]]),dM={key:1},pM=X("h1",{class:"font-medium text-base px-1"},"Report a problem",-1),fM={class:"font-normal p-5 pt-0 text-base"},mM=X("span",null,"My issue is with:",-1),gM={class:"mx-5 my-2"},_M=["href"],yM={key:0,class:"text-sm"},vM="https://github.com/SpeciesFileGroup/taxonpages/issues/new/choose",bM={__name:"TrackerReport.global",props:{buttonClass:{type:String,default:void 0},label:{type:String,default:void 0},icon:{type:Boolean,default:!1},tag:{type:String,default:"VButton"}},setup(t){const{issue_trackers:n}={base_url:"/taxonpages/",hash_mode:!0,map_tile_server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",map_tile_attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://sfg.taxonworks.org/api/v1",project_token:"c5lh0vgnBGTOQDOSfRYC8g",copyright_image:null,copyright_image_link:null,copyright_text:"Copyright CC0",header_logo_url:null,header_logo_text:"My project",header_links:[{label:"Home",link:"/"},{label:"About",link:"/about"}],map_tiles:[{label:"OpenStreetMap",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',server:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}],metadata:[{name:"description",content:"TaxonPages is a tool to serve taxon pages."},{name:"keywords",content:"taxonpages, species, sfg"},{name:"robots",content:"follow"}],project_name:"My project",project_citation:null,project_url:null,project_authors:null},a=Zt(!1);function s(){n?a.value=!0:window.open(vM,"_blank")}return(c,i)=>{const u=ft("IconGithub"),d=ft("VModal");return H(),tt(Gt,null,[(H(),Tt(Ci(t.tag),{type:"button",title:"Report a problem",class:Je(t.buttonClass),onClick:s},{default:pt(()=>[t.icon?(H(),Tt(u,{key:0,class:"w-5 h-5"})):Dt("",!0),t.label?(H(),tt("span",dM,Qt(t.label),1)):Dt("",!0)]),_:1},8,["class"])),a.value?(H(),Tt(d,{key:0,class:"text-base-content",onClose:i[0]||(i[0]=f=>a.value=!1)},{header:pt(()=>[pM]),default:pt(()=>[X("div",fM,[mM,X("ul",gM,[(H(!0),tt(Gt,null,ye(Kt(n),f=>(H(),tt("li",null,[X("a",{href:f.url,target:"_blank"},Qt(f.label),9,_M),f.description?(H(),tt("span",yM," - "+Qt(f.description),1)):Dt("",!0)]))),256))])])]),_:1})):Dt("",!0)],64)}}},wM={__name:"VSkeleton.global",props:{class:{type:String,default:"w-full"},lines:{type:Number,default:1}},setup(t){const n=Sf(),a=te(()=>{var i;const c=(i=n.default)==null?void 0:i.call(n);return s(c)});function s(c){if(!c)return!0;const[i]=c;let u=i.children;return i.el!==null||u!==null}return(c,i)=>(H(),tt(Gt,null,[Se(c.$slots,"default"),a.value?(H(),tt("span",{key:0,class:Je(t.class)},[(H(!0),tt(Gt,null,ye(t.lines,u=>(H(),tt("span",{key:u,class:"inline-block w-full rounded-sm bg-base-muted leading-5 animate-pulse"},"  "))),128))],2)):Dt("",!0)],64))}};const wl=t=>(Xc("data-v-b688ef4b"),t=t(),Qc(),t),xM=wl(()=>X("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"},null,-1)),kM=wl(()=>X("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"},null,-1)),LM=[xM,kM],MM=wl(()=>X("span",{class:"sr-only"},"Loading...",-1)),CM=["innerHTML"],PM={__name:"VSpinner.global",props:{target:{type:String,default:void 0},fullScreen:{type:Boolean,default:!1},legend:{type:String,default:"Loading, please wait."},resize:{type:Boolean,default:!0},legendStyle:{type:Object,default:()=>({})},legendClass:{type:String,default:"mt-5"},showLegend:{type:Boolean,default:!0},showSpinner:{type:Boolean,default:!0},spinnerPosition:{type:String,default:"top"},logoSize:{type:Object,default:()=>({})},logoClass:{type:String,default:"w-12 h-12"}},setup(t){const n=t,a={position:"fixed",width:"100vw",height:"100vh",top:"0px",left:"0px"},s=Zt(null),c=Zt({}),i=Zt(void 0);en(()=>{u(),n.resize&&!n.fullScreen&&f()}),Zr(()=>clearInterval(i.value));const u=()=>{const m=n.target?document.querySelector(n.target):s.value.parentNode;Object.assign(c.value,n.fullScreen?a:d(m))},d=m=>{const _=m.getBoundingClientRect(),v=window.getComputedStyle(m,null),M=parseInt(v.getPropertyValue("padding-left"),10),A=parseInt(v.getPropertyValue("padding-right"),10),P=parseInt(v.getPropertyValue("padding-top"),10),S=parseInt(v.getPropertyValue("padding-bottom"),10);return{position:"absolute",width:_.width-M-A+"px",height:_.height-P-S+"px"}},f=()=>{i.value=setInterval(u(),500)};return(m,_)=>(H(),tt("div",{ref_key:"spinnerElement",ref:s,class:"box-spinner mx-spinner absolute bg-base-foreground opacity-90 h-full flex items-center",style:Vn(c.value)},[X("div",{class:Je(["tw-spinner",[`tw-spinner-${t.spinnerPosition}`]])},[t.showSpinner?(H(),tt("svg",{key:0,style:Vn(t.logoSize),"aria-hidden":"true",class:Je(["text-base-lighter animate-spin fill-primary-color",t.logoClass]),viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},LM,6)):Dt("",!0),MM,t.legend.length?(H(),tt("div",{key:1,class:Je(["text-base-content text-center",t.legendClass]),style:Vn(t.legendStyle)},[t.showLegend?(H(),tt("span",{key:0,innerHTML:t.legend},null,8,CM)):Dt("",!0),Se(m.$slots,"default",{},void 0,!0)],6)):Dt("",!0)],2)],4))}},SM=ie(PM,[["__scopeId","data-v-b688ef4b"]]);function EM(t){TM(t,Object.assign({"/src/components/AddressMaker.global.vue":Hw,"/src/components/Animation/AnimationOpacity.global.vue":Uw,"/src/components/Autocomplete/Autocomplete.global.vue":vd,"/src/components/Autocomplete/AutocompleteOtu.global.vue":sx,"/src/components/Button/ButtonExpand.global.vue":lx,"/src/components/Button/VButton.global.vue":ux,"/src/components/Card/VCard.global.vue":px,"/src/components/Card/VCardContent.global.vue":_x,"/src/components/Card/VCardHeader.global.vue":wx,"/src/components/Clipboard/VClipboard.global.vue":xx,"/src/components/Dropdown/Dropdown.global.vue":Mx,"/src/components/Gallery/GalleryCarousel/GalleryCarousel.global.vue":Ox,"/src/components/Gallery/GalleryImage.global.vue":Hx,"/src/components/Gallery/GalleryMosaic/GalleryMosaic.global.vue":Ux,"/src/components/Icon/IconArrowDown.global.vue":Yx,"/src/components/Icon/IconArrowLeft.global.vue":r1,"/src/components/Icon/IconArrowRight.global.vue":u1,"/src/components/Icon/IconCheck.global.vue":m1,"/src/components/Icon/IconClipboard.global.vue":w1,"/src/components/Icon/IconClose.global.vue":P1,"/src/components/Icon/IconDocument.global.vue":R1,"/src/components/Icon/IconDownload.global.vue":N1,"/src/components/Icon/IconGithub.global.vue":U1,"/src/components/Icon/IconHamburger.global.vue":Y1,"/src/components/Icon/IconJson.global.vue":rk,"/src/components/Icon/IconMinusCircle.global.vue":uk,"/src/components/Icon/IconPlusCircle.global.vue":mk,"/src/components/Icon/IconSearch.global.vue":wk,"/src/components/Icon/IconTrash.global.vue":Pk,"/src/components/Icon/IconWarning.global.vue":Rk,"/src/components/ImageViewer/ImageViewer.global.vue":uL,"/src/components/Markdown/MarkdownLayout.global.vue":hL,"/src/components/Modal/VModal.global.vue":mL,"/src/components/Pagination/VPagination.global.vue":SL,"/src/components/ProjectStats.global.vue":EL,"/src/components/Ssr/ClientOnly.global.vue":OL,"/src/components/Tab/TabItem.global.vue":RL,"/src/components/Tab/TabMenu.global.vue":zL,"/src/components/Table/VTable.global.vue":HL,"/src/components/Table/VTableBody.global.vue":ZL,"/src/components/Table/VTableBodyCell.global.vue":JL,"/src/components/Table/VTableBodyRow.global.vue":tM,"/src/components/Table/VTableHeader.global.vue":iM,"/src/components/Table/VTableHeaderCell.global.vue":lM,"/src/components/Table/VTableHeaderRow.global.vue":hM,"/src/components/TrackerReport.global.vue":bM,"/src/components/VSkeleton.global.vue":wM,"/src/components/VSpinner.global.vue":SM}))}function TM(t,n){Object.entries(n).forEach(([s,c])=>{const i=s.split("/").pop().replace(/\.client.global.\w+$/,"").replace(/\.global.\w+$/,"");t.component(i,c)})}const OM=window.location.origin,wc=window.initialState,{app:xl,router:AM,store:RM}=dw({originUrl:OM});wc&&(RM.state.value=wc);Aw(xl);EM(xl);AM.isReady().then(()=>{xl.mount("#app")});export{X as a,re as b,Tt as c,sh as d,st as e,H as o,ft as r,Qt as t,pt as w};
